{"version":3,"file":"InputCell.js","names":["Component","mixin","ComponentWithSlots","InputCell","constructor","props","context","_translate","injector","get","onClick","event","input","_eventBus","fire","onContextmenu","id","onElementsChanged","forceUpdate","componentWillMount","_changeSupport","changeSupport","_sheet","_elementRegistry","root","getRoot","componentWillUnmount","offElementsChanged","render","index","inputsLength","inputExpression","inputValues","label","width","createVNode","slotFills","type","cellType","col","text","typeRef"],"sources":["../../../../../src/features/decision-table-head/editor/components/InputCell.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport {\n  mixin\n} from 'table-js/lib/components';\n\nimport {\n  ComponentWithSlots\n} from 'dmn-js-shared/lib/components/mixins';\n\n\nexport default class InputCell extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    mixin(this, ComponentWithSlots);\n\n    this._translate = context.injector.get('translate');\n  }\n\n  onClick = (event) => {\n    const { input } = this.props;\n\n    this._eventBus.fire('input.edit', {\n      event,\n      input\n    });\n  };\n\n  onContextmenu = (event) => {\n    const { id } = this.props.input;\n\n    this._eventBus.fire('cell.contextmenu', {\n      event,\n      id\n    });\n  };\n\n  onElementsChanged = () => {\n    this.forceUpdate();\n  };\n\n  componentWillMount() {\n    const { injector } = this.context;\n\n    this._changeSupport = this.context.changeSupport;\n    this._sheet = injector.get('sheet');\n    this._eventBus = injector.get('eventBus');\n    this._elementRegistry = injector.get('elementRegistry');\n\n    const root = this._sheet.getRoot();\n\n    const { input } = this.props;\n\n    this._changeSupport.onElementsChanged(root.id, this.onElementsChanged);\n    this._changeSupport.onElementsChanged(input.id, this.onElementsChanged);\n  }\n\n  componentWillUnmount() {\n    const root = this._sheet.getRoot();\n\n    const { input } = this.props;\n\n    this._changeSupport.offElementsChanged(root.id, this.onElementsChanged);\n    this._changeSupport.offElementsChanged(input.id, this.onElementsChanged);\n  }\n\n  render() {\n    const {\n      input,\n      index,\n      inputsLength\n    } = this.props;\n\n    const {\n      inputExpression,\n      inputValues\n    } = input;\n\n    const label = input.get('label');\n\n    const width = input.width ? input.width + 'px' : '192px';\n\n    return (\n      <th\n        data-col-id={ input.id }\n        onDoubleClick={ this.onClick }\n        onContextmenu={ this.onContextmenu }\n        className=\"input-cell input-editor\"\n        style={ { width } }\n      >\n\n        {\n          this.slotFills({\n            type: 'cell-inner',\n            context: {\n              cellType: 'input-cell',\n              col: this._elementRegistry.get(input.id),\n              index,\n              inputsLength\n            },\n            col: input\n          })\n        }\n\n        <div className=\"clause\">\n          { index === 0 ? this._translate('When') : this._translate('And') }\n        </div>\n\n        {\n          label ? (\n            <div\n              className=\"input-label\"\n              title={ this._translate('Input label: ') + label }>\n              { label }\n            </div>\n          ) : (\n            <div\n              className=\"input-expression\"\n              title={ this._translate('Input expression: ') + inputExpression.text }>\n              { inputExpression.text }\n            </div>\n          )\n        }\n\n        <div\n          className=\"input-variable\"\n          title={\n            inputValues && inputValues.text ? this._translate('Input values') :\n              this._translate('Input type')\n          }\n        >\n          { inputValues && inputValues.text ||\n          this._translate(inputExpression.typeRef || '') }\n        </div>\n      </th>\n    );\n  }\n\n}"],"mappings":"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","ignoreList":[]}