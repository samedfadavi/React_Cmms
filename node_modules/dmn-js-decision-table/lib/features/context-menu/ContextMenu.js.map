{"version":3,"file":"ContextMenu.js","names":["is","Cell","ContextMenu","constructor","components","contextMenu","clipboard","editorActions","eventBus","elementRegistry","modeling","selection","sheet","rules","translate","_contextMenu","_clipboard","_editorActions","_elementRegistry","_eventBus","_modeling","_selection","_sheet","_rules","_translate","_getEntries","bind","onGetComponent","context","contextMenuType","entries","element","get","id","additionalCellEntries","isCell","getComponents","length","cellEntriesGroup","createVNode","push","on","event","node","preventDefault","open","x","pageX","y","pageY","handlers","addRuleAbove","rule","selectedIndex","cells","map","cell","indexOf","newRule","trigger","select","close","addRuleBelow","removeRule","addInputLeft","input","addInputRight","removeInput","addOutputLeft","output","addOutputRight","removeOutput","copy","cut","pasteBefore","pasteAfter","clipboardData","row","canPaste","allowed","data","elements","target","onClick","actualElement","col","canRemove","$inject"],"sources":["../../../src/features/context-menu/ContextMenu.js"],"sourcesContent":["/* eslint-disable max-len */\r\n\r\nimport { is } from 'dmn-js-shared/lib/util/ModelUtil';\r\n\r\nimport { Cell } from 'table-js/lib/model';\r\n\r\nexport default class ContextMenu {\r\n  constructor(\r\n      components,\r\n      contextMenu,\r\n      clipboard,\r\n      editorActions,\r\n      eventBus,\r\n      elementRegistry,\r\n      modeling,\r\n      selection,\r\n      sheet,\r\n      rules,\r\n      translate) {\r\n\r\n    this._contextMenu = contextMenu;\r\n    this._clipboard = clipboard;\r\n    this._editorActions = editorActions;\r\n    this._elementRegistry = elementRegistry;\r\n    this._eventBus = eventBus;\r\n    this._modeling = modeling;\r\n    this._selection = selection;\r\n    this._sheet = sheet;\r\n    this._rules = rules;\r\n    this._translate = translate;\r\n\r\n    this._getEntries = this._getEntries.bind(this);\r\n\r\n    components.onGetComponent('context-menu', (context = {}) => {\r\n      if (context.contextMenuType && context.contextMenuType === 'context-menu') {\r\n        const entries = this._getEntries(context);\r\n\r\n        const element = this._elementRegistry.get(context.id);\r\n\r\n        const additionalCellEntries = isCell(element)\r\n          && components.getComponents('context-menu-cell-additional', context);\r\n\r\n        if (additionalCellEntries && additionalCellEntries.length) {\r\n          const cellEntriesGroup = (\r\n            <div className=\"context-menu-group context-menu-group-cell\" role=\"presentation\">\r\n              { additionalCellEntries }\r\n            </div>\r\n          );\r\n\r\n          entries.push(cellEntriesGroup);\r\n        }\r\n\r\n        return () => (\r\n          <div className=\"context-menu-flex\" tabIndex={ 0 } role=\"menu\" aria-label=\"Decision table context menu\">\r\n            { entries }\r\n          </div>\r\n        );\r\n      }\r\n    });\r\n\r\n    eventBus.on('cell.contextmenu', ({ event, id, node }) => {\r\n      event.preventDefault();\r\n\r\n      contextMenu.open({\r\n        x: event.pageX,\r\n        y: event.pageY\r\n      }, {\r\n        contextMenuType: 'context-menu',\r\n        event,\r\n        id\r\n      });\r\n    });\r\n  }\r\n\r\n  _getEntries(context) {\r\n    const handlers = {\r\n      addRuleAbove: (rule) => {\r\n        const selectedIndex = rule.cells.map(cell => cell.id).indexOf(context.id);\r\n        const newRule = this._editorActions.trigger('addRuleAbove', { rule });\r\n\r\n        if (newRule.cells[selectedIndex]) {\r\n          this._selection.select(newRule.cells[selectedIndex]);\r\n        } else {\r\n          this._selection.select(newRule.cells[0]);\r\n        }\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addRuleBelow: (rule) => {\r\n        const selectedIndex = rule.cells.map(cell => cell.id).indexOf(context.id);\r\n        const newRule = this._editorActions.trigger('addRuleBelow', { rule });\r\n\r\n        if (newRule.cells[selectedIndex]) {\r\n          this._selection.select(newRule.cells[selectedIndex]);\r\n        } else {\r\n          this._selection.select(newRule.cells[0]);\r\n        }\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      removeRule: (rule) => {\r\n        this._editorActions.trigger('removeRule', { rule });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addInputLeft: (input) => {\r\n        this._editorActions.trigger('addInputLeft', { input });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addInputRight: (input) => {\r\n        this._editorActions.trigger('addInputRight', { input });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      removeInput: (input) => {\r\n        this._editorActions.trigger('removeInput', { input });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addOutputLeft: (output) => {\r\n        this._editorActions.trigger('addOutputLeft', { output });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addOutputRight: (output) => {\r\n        this._editorActions.trigger('addOutputRight', { output });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      removeOutput: (output) => {\r\n        this._editorActions.trigger('removeOutput', { output });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      copy: element => {\r\n        this._editorActions.trigger('copy', { element });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      cut: element => {\r\n        this._editorActions.trigger('cut', { element });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      pasteBefore: element => {\r\n        this._editorActions.trigger('pasteBefore', { element });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      pasteAfter: element => {\r\n        this._editorActions.trigger('pasteAfter', { element });\r\n\r\n        this._contextMenu.close();\r\n      }\r\n    };\r\n\r\n    const id = context && context.id;\r\n\r\n    if (!id) {\r\n      return null;\r\n    }\r\n\r\n    const element = this._elementRegistry.get(id);\r\n\r\n    if (!element) {\r\n      return null;\r\n    }\r\n\r\n    const clipboardData = this._clipboard.get() || {};\r\n\r\n    const entries = [];\r\n\r\n    const row = element.row || element;\r\n    if (is(row, 'dmn:DecisionRule')) {\r\n      const canPaste = this._rules.allowed('paste', {\r\n        data: clipboardData.elements,\r\n        target: row\r\n      });\r\n\r\n      entries.push(\r\n        <div className=\"context-menu-group\" role=\"presentation\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-copy-rule\"\r\n            onClick={ () => handlers.copy(row) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Copy rule') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-cut-rule\"\r\n            onClick={ () => handlers.cut(row) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Cut rule') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-rule-above` }\r\n            onClick={ () => handlers.pasteBefore(row) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canPaste }>\r\n            { this._translate('Paste rule above') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-rule-below` }\r\n            onClick={ () => handlers.pasteAfter(row) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canPaste }>\r\n            { this._translate('Paste rule below') }\r\n          </div>\r\n        </div>,\r\n        <div className=\"context-menu-group\" role=\"presentation\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-rule-above\"\r\n            onClick={ () => handlers.addRuleAbove(row) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Add rule above') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-rule-below\"\r\n            onClick={ () => handlers.addRuleBelow(row) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Add rule below') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-remove-rule\"\r\n            onClick={ () => handlers.removeRule(row) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Remove rule') }\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (is(element, 'dmn:InputClause')) {\r\n      const actualElement = is(element, 'dmn:InputClause') ? element : element.col;\r\n\r\n      const canRemove = this._rules.allowed('col.remove', {\r\n        col: element.col || element\r\n      });\r\n\r\n      const canPaste = this._rules.allowed('paste', {\r\n        data: clipboardData.elements,\r\n        target: element.col || element\r\n      });\r\n\r\n      entries.push(\r\n        <div className=\"context-menu-group\" role=\"presentation\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-copy-input\"\r\n            onClick={ () => handlers.copy(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Copy input column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-cut-input` }\r\n            onClick={ () => handlers.cut(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canRemove }>\r\n            { this._translate('Cut input column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-input-left` }\r\n            onClick={ () => handlers.pasteBefore(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canPaste }>\r\n            { this._translate('Paste input column left') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-input-right` }\r\n            onClick={ () => handlers.pasteAfter(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canPaste }>\r\n            { this._translate('Paste input column right') }\r\n          </div>\r\n        </div>,\r\n        <div className=\"context-menu-group\" role=\"presentation\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-input-left\"\r\n            onClick={ () => handlers.addInputLeft(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Add input column left') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-input-right\"\r\n            onClick={ () => handlers.addInputRight(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Add input column right') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-remove-input` }\r\n            onClick={ () => handlers.removeInput(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canRemove }>\r\n            { this._translate('Remove input column') }\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (is(element, 'dmn:OutputClause') || is(element.col, 'dmn:OutputClause')) {\r\n      const actualElement = is(element, 'dmn:OutputClause') ? element : element.col;\r\n\r\n      const canRemove = this._rules.allowed('col.remove', {\r\n        col: element.col || element\r\n      });\r\n\r\n      const canPaste = this._rules.allowed('paste', {\r\n        data: clipboardData.elements,\r\n        target: element.col || element\r\n      });\r\n\r\n      entries.push(\r\n        <div className=\"context-menu-group\" role=\"presentation\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-copy-output\"\r\n            onClick={ () => handlers.copy(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Copy output column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-cut-output` }\r\n            onClick={ () => handlers.cut(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canRemove }>\r\n            { this._translate('Cut output column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-output-left` }\r\n            onClick={ () => handlers.pasteBefore(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canPaste }>\r\n            { this._translate('Paste output column left') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-output-right` }\r\n            onClick={ () => handlers.pasteAfter(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canPaste }>\r\n            { this._translate('Paste output column right') }\r\n          </div>\r\n        </div>,\r\n        <div className=\"context-menu-group\" role=\"presentation\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-output-left\"\r\n            onClick={ () => handlers.addOutputLeft(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Add output column left') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-output-right\"\r\n            onClick={ () => handlers.addOutputRight(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\">\r\n            { this._translate('Add output column right') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-remove-output` }\r\n            onClick={ () => handlers.removeOutput(actualElement) }\r\n            tabIndex=\"-1\"\r\n            role=\"menuitem\"\r\n            aria-disabled={ !canRemove }>\r\n            { this._translate('Remove output column') }\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return entries;\r\n  }\r\n}\r\n\r\nContextMenu.$inject = [\r\n  'components',\r\n  'contextMenu',\r\n  'clipboard',\r\n  'editorActions',\r\n  'eventBus',\r\n  'elementRegistry',\r\n  'modeling',\r\n  'selection',\r\n  'sheet',\r\n  'rules',\r\n  'translate'\r\n];\r\n\r\n// helpers ///////////\r\n\r\nfunction isCell(element) {\r\n  return element instanceof Cell;\r\n}"],"mappings":"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","ignoreList":[]}