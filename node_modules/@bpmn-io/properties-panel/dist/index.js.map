{"version":3,"file":"index.js","sources":["../src/components/Header.js","../src/context/DescriptionContext.js","../src/context/ErrorsContext.js","../src/context/EventContext.js","../src/context/FeelLanguageContext.js","../src/context/LayoutContext.js","../src/context/TooltipContext.js","../src/hooks/useTooltipContext.js","../src/components/entries/Tooltip.js","../src/hooks/useDescriptionContext.js","../src/hooks/useDebounce.js","../src/hooks/useError.js","../src/hooks/useEvent.js","../src/hooks/useKeyFactory.js","../src/hooks/useLayoutState.js","../src/hooks/usePrevious.js","../src/hooks/useShowEntryEvent.js","../src/hooks/useStickyIntersectionObserver.js","../src/hooks/useStaticCallback.js","../src/hooks/useElementVisible.js","../src/components/Group.js","../src/components/Placeholder.js","../src/PropertiesPanel.js","../src/components/DropdownButton.js","../src/components/HeaderButton.js","../src/components/util/translateFallback.js","../src/components/entries/Collapsible.js","../src/components/ListItem.js","../src/components/ListGroup.js","../src/components/entries/Description.js","../src/components/entries/Checkbox.js","../src/components/entries/CheckboxGroup.js","../src/components/OpenPopupButton.js","../src/components/entries/templating/TemplatingEditor.js","../src/components/entries/FEEL/FeelEditor.js","../src/components/entries/FEEL/FeelIndicator.js","../src/components/entries/FEEL/FeelIcon.js","../src/components/util/keyboardUtils.js","../src/components/entries/ToggleSwitch.js","../src/components/entries/NumberField.js","../src/components/entries/FEEL/Feel.js","../src/components/entries/templating/Templating.js","../src/components/entries/List.js","../src/components/entries/Select.js","../src/components/entries/Simple.js","../src/components/entries/TextArea.js","../src/components/entries/TextField.js","../src/features/debounce-input/debounceInput.js","../src/features/debounce-input/index.js","../src/components/util/dragger.js","../src/features/feel-popup/components/Popup.js","../src/features/feel-popup/components/FeelPopup.js","../src/features/feel-popup/components/helpers.js","../src/features/feel-popup/FeelPopup.js","../src/features/feel-popup/FeelPopupRenderer.js","../src/features/feel-popup/index.js"],"sourcesContent":["import { ExternalLinkIcon } from './icons';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * @typedef { {\n *  getElementLabel: (element: object) => string,\n *  getTypeLabel: (element: object) => string,\n *  getElementIcon: (element: object) => import('preact').Component,\n *  getDocumentationRef: (element: object) => string\n * } } HeaderProvider\n */\n\n/**\n * @param {Object} props\n * @param {Object} props.element,\n * @param {HeaderProvider} props.headerProvider\n */\nexport default function Header(props) {\n\n  const {\n    element,\n    headerProvider\n  } = props;\n\n  const {\n    getElementIcon,\n    getDocumentationRef,\n    getElementLabel,\n    getTypeLabel,\n  } = headerProvider;\n\n  const label = getElementLabel(element);\n  const type = getTypeLabel(element);\n  const documentationRef = getDocumentationRef && getDocumentationRef(element);\n\n  const ElementIcon = getElementIcon(element);\n\n  return (<div class=\"bio-properties-panel-header\">\n    <div class=\"bio-properties-panel-header-icon\">\n      { ElementIcon && <ElementIcon width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" /> }\n    </div>\n    <div class=\"bio-properties-panel-header-labels\">\n      <div class=\"bio-properties-panel-header-type\">{ type }</div>\n      { label ?\n        <div class=\"bio-properties-panel-header-label\">{ label }</div> :\n        null\n      }\n    </div>\n    <div class=\"bio-properties-panel-header-actions\">\n      { documentationRef ?\n        <a\n          rel=\"noreferrer\"\n          class=\"bio-properties-panel-header-link\"\n          href={ documentationRef }\n          title=\"Open documentation\"\n          target=\"_blank\">\n          <ExternalLinkIcon />\n        </a> :\n        null\n      }\n    </div>\n  </div>);\n}","import {\n  createContext\n} from 'preact';\n\nconst DescriptionContext = createContext({\n  description: {},\n  getDescriptionForId: () => {}\n});\n\nexport default DescriptionContext;\n","import {\n  createContext\n} from 'preact';\n\nconst ErrorsContext = createContext({\n  errors: {}\n});\n\nexport default ErrorsContext;","/**\n * @typedef {Function} <propertiesPanel.showEntry> callback\n *\n * @example\n *\n * useEvent('propertiesPanel.showEntry', ({ focus = false, ...rest }) => {\n *   // ...\n * });\n *\n * @param {Object} context\n * @param {boolean} [context.focus]\n *\n * @returns void\n */\n\n/**\n * @typedef {Function} <propertiesPanel.showError> callback\n *\n * @example\n *\n * useEvent('propertiesPanel.showError', ({ focus = false, message, ...rest }) => {\n *   // ...\n * });\n *\n * @param {Object} context\n * @param {string} context.message\n * @param {boolean} [context.focus]\n *\n * @returns void\n */\n\nimport { createContext } from 'preact';\n\nconst EventContext = createContext({ eventBus: null });\n\nexport default EventContext;\n","import {\n  createContext\n} from 'preact';\n\n/**\n * @typedef { {\n *   parserDialect?: import('@bpmn-io/feel-editor').ParserDialect,\n *   builtins?: import('@bpmn-io/feel-editor').Variable[],\n *   dialect?: import('@bpmn-io/feel-editor').Dialect\n * } } FeelLanguageContextType\n */\n\n/**\n * @type {import('preact').Context<FeelLanguageContextType>}\n */\nconst FeelLanguageContext = createContext({});\n\nexport default FeelLanguageContext;\n","import {\n  createContext\n} from 'preact';\n\nconst LayoutContext = createContext({\n  layout: {},\n  setLayout: () => {},\n  getLayoutForKey: () => {},\n  setLayoutForKey: () => {}\n});\n\nexport default LayoutContext;","import {\n  createContext\n} from 'preact';\n\nconst TooltipContext = createContext({\n  tooltip: {},\n  getTooltipForId: () => {}\n});\n\nexport default TooltipContext;\n","import {\n  useContext\n} from 'preact/hooks';\n\nimport {\n  TooltipContext\n} from '../context';\n\n/**\n * Accesses the global TooltipContext and returns a tooltip for a given id and element.\n *\n * @example\n * ```jsx\n * function TextField(props) {\n *   const tooltip = useTooltipContext('input1', element);\n * }\n * ```\n *\n * @param {string} id\n * @param {object} element\n *\n * @returns {string}\n */\nexport function useTooltipContext(id, element) {\n  const {\n    getTooltipForId\n  } = useContext(TooltipContext);\n\n  return getTooltipForId(id, element);\n}\n","import {\n  useRef,\n  useState,\n  useEffect\n} from 'preact/hooks';\n\nimport { useTooltipContext } from '../../hooks/useTooltipContext';\n\nimport { createPortal } from 'preact/compat';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * @typedef {Object} TooltipProps\n * @property {Object} [parent] - Parent element ref for portal rendering\n * @property {String} [direction='right'] - Tooltip direction ( 'right', 'top')\n * @property {String} [position] - Custom CSS position override\n * @property {Number} [showDelay=250] - Delay in ms before showing tooltip on hover\n * @property {Number} [hideDelay=250] - Delay in ms before hiding tooltip when mouse leaves, to avoid multiple tooltips from being opened, this should be the same as showDelay\n * @property {*} [children] - Child elements to render inside the tooltip wrapper\n */\n\n/**\n * Tooltip wrapper that provides context-based tooltip content lookup.\n * All props are forwarded to the underlying Tooltip component.\n *\n * @param {TooltipProps & {\n *   forId: String,\n *   value?: String|Object,\n *   element?: Object\n * }} props - Shared tooltip props plus wrapper-specific ones\n */\nexport default function TooltipWrapper(props) {\n  const {\n    forId,\n    element\n  } = props;\n\n  const contextDescription = useTooltipContext(forId, element);\n\n  const value = props.value || contextDescription;\n\n  if (!value) {\n    return props.children;\n  }\n\n  return <Tooltip { ...props } value={ value } forId={ `bio-properties-panel-${ forId }` } />;\n}\n\n/**\n * @param {TooltipProps & {\n *   forId: String,\n *   value: String|Object\n * }} props\n */\nfunction Tooltip(props) {\n  const {\n    forId,\n    value,\n    parent,\n    direction = 'right',\n    position,\n    showDelay = 250,\n    hideDelay = 250\n  } = props;\n\n  const [ visible, setVisible ] = useState(false);\n\n  const showTimeoutRef = useRef(null);\n  const hideTimeoutRef = useRef(null);\n\n  const wrapperRef = useRef(null);\n  const tooltipRef = useRef(null);\n\n  const show = (_, delay) => {\n    clearTimeout(showTimeoutRef.current);\n    clearTimeout(hideTimeoutRef.current);\n\n    if (visible) return;\n\n    if (delay) {\n      showTimeoutRef.current = setTimeout(() => {\n        setVisible(true);\n      }, showDelay);\n    } else {\n      setVisible(true);\n    }\n  };\n\n  const handleWrapperMouseEnter = (e) => {\n    show(e, true);\n  };\n\n  const hide = (delay = false) => {\n    clearTimeout(showTimeoutRef.current);\n    clearTimeout(hideTimeoutRef.current);\n\n    if (delay) {\n      hideTimeoutRef.current = setTimeout(() => {\n        setVisible(false);\n      }, hideDelay);\n    } else {\n      setVisible(false);\n    }\n  };\n\n  // Cleanup timeouts on unmount\n  useEffect(() => {\n    return () => {\n      clearTimeout(showTimeoutRef.current);\n      clearTimeout(hideTimeoutRef.current);\n    };\n  }, []);\n\n  // Handle click outside to close tooltip for non-focusable elements\n  useEffect(() => {\n    if (!visible) return;\n\n    const handleClickOutside = (e) => {\n\n      // If clicking outside both the wrapper and tooltip, hide it\n      if (wrapperRef.current && !wrapperRef.current.contains(e.target) &&\n          tooltipRef.current && !tooltipRef.current.contains(e.target)) {\n        hide(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [ visible, hide ]);\n\n  const handleMouseLeave = ({ relatedTarget }) => {\n\n    // Don't hide the tooltip when moving mouse between the wrapper and the tooltip.\n    if (relatedTarget === wrapperRef.current || relatedTarget === tooltipRef.current || relatedTarget?.parentElement === tooltipRef.current) {\n      return;\n    }\n\n    const selection = window.getSelection();\n    if (selection && selection.toString().length > 0) {\n\n      // Check if selection is within tooltip content\n      const selectionRange = selection.getRangeAt(0);\n      if (tooltipRef.current?.contains(selectionRange.commonAncestorContainer) ||\n          tooltipRef.current?.contains(selection.anchorNode) ||\n          tooltipRef.current?.contains(selection.focusNode)) {\n        return; // Keep tooltip open during text selection\n      }\n    }\n\n    hide(true);\n  };\n\n  const handleTooltipMouseEnter = () => {\n    clearTimeout(hideTimeoutRef.current);\n  };\n\n  const handleFocusOut = (e) => {\n    const { relatedTarget } = e;\n\n    // Don't hide if focus moved to the tooltip or another element within the wrapper\n    if (tooltipRef.current?.contains(relatedTarget) ||\n        wrapperRef.current?.contains(relatedTarget)) {\n      return;\n    }\n\n    hide(false);\n  };\n\n  const hideTooltipViaEscape = (e) => {\n    e.code === 'Escape' && hide(false);\n  };\n\n  const renderTooltip = () => {\n    return (\n      <div\n        class={ `bio-properties-panel-tooltip ${direction}` }\n        role=\"tooltip\"\n        id=\"bio-properties-panel-tooltip\"\n        aria-labelledby={ forId }\n        style={ position || getTooltipPosition(wrapperRef.current) }\n        ref={ tooltipRef }\n        onClick={ (e)=> e.stopPropagation() }\n        onMouseEnter={ handleTooltipMouseEnter }\n        onMouseLeave={ handleMouseLeave }\n      >\n        <div class=\"bio-properties-panel-tooltip-content\">\n          {value}\n        </div>\n        <div class=\"bio-properties-panel-tooltip-arrow\" />\n      </div>\n    );};\n\n  return (\n    <div class=\"bio-properties-panel-tooltip-wrapper\" tabIndex=\"0\"\n      ref={ wrapperRef }\n      onMouseEnter={ handleWrapperMouseEnter }\n      onMouseLeave={ handleMouseLeave }\n      onFocus={ show }\n      onBlur={ handleFocusOut }\n      onKeyDown={ hideTooltipViaEscape }\n    >\n      {props.children}\n      {visible ?\n        (parent ?\n          createPortal(renderTooltip(), parent.current)\n          : renderTooltip()\n        ) : null\n      }\n    </div>\n  );\n}\n\n\n// helper\n\nfunction getTooltipPosition(refElement) {\n  const refPosition = refElement.getBoundingClientRect();\n\n  const right = `calc(100% - ${refPosition.x}px)`;\n  const top = `${refPosition.top - 10}px`;\n\n  return `right: ${right}; top: ${top};`;\n}\n","import {\n  useContext\n} from 'preact/hooks';\n\nimport {\n  DescriptionContext\n} from '../context';\n\n/**\n * Accesses the global DescriptionContext and returns a description for a given id and element.\n *\n * @example\n * ```jsx\n * function TextField(props) {\n *   const description = useDescriptionContext('input1', element);\n * }\n * ```\n *\n * @param {string} id\n * @param {object} element\n *\n * @returns {string}\n */\nexport function useDescriptionContext(id, element) {\n  const {\n    getDescriptionForId\n  } = useContext(DescriptionContext);\n\n  return getDescriptionForId(id, element);\n}\n","import {\n  useCallback,\n  useEffect\n} from 'preact/hooks';\n\nexport function useDebounce(callback, debounceFn) {\n  const debouncedCallback = useCallback(debounceFn(callback), [ callback, debounceFn ]);\n\n  // make sure previous call is not stalled\n  useEffect(() => {\n    return () => {\n      debouncedCallback.cancel?.();\n    };\n  }, [ debouncedCallback ]);\n\n  return debouncedCallback;\n}\n","import { useContext } from 'preact/hooks';\n\nimport { ErrorsContext } from '../context';\n\nexport function useError(id) {\n  const { errors } = useContext(ErrorsContext);\n\n  return errors[ id ];\n}\n\nexport function useErrors() {\n  const { errors } = useContext(ErrorsContext);\n\n  return errors;\n}","import { useContext, useEffect, useRef } from 'preact/hooks';\n\nimport { EventContext } from '../context';\n\n\n/**\n * Subscribe to an event immediately. Update subscription after inputs changed.\n *\n * @param {string} event\n * @param {Function} callback\n */\nexport function useEvent(event, callback, eventBus) {\n  const eventContext = useContext(EventContext);\n\n  if (!eventBus) {\n    ({ eventBus } = eventContext);\n  }\n\n  const didMount = useRef(false);\n\n  // (1) subscribe immediately\n  if (eventBus && !didMount.current) {\n    eventBus.on(event, callback);\n  }\n\n  // (2) update subscription after inputs changed\n  useEffect(() => {\n    if (eventBus && didMount.current) {\n      eventBus.on(event, callback);\n    }\n\n    didMount.current = true;\n\n    return () => {\n      if (eventBus) {\n        eventBus.off(event, callback);\n      }\n    };\n  }, [ callback, event, eventBus ]);\n}\n","import { useMemo } from 'preact/hooks';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nconst KEY_LENGTH = 6;\n\n/**\n * Create a persistent key factory for plain objects without id.\n *\n * @example\n * ```jsx\n * function List({ objects }) {\n *   const getKey = useKeyFactory();\n *   return (<ol>{\n *     objects.map(obj => {\n *       const key = getKey(obj);\n *       return <li key={key}>obj.name</li>\n *     })\n *   }</ol>);\n * }\n * ```\n *\n * @param {any[]} dependencies\n * @returns {(element: object) => string}\n */\nexport function useKeyFactory(dependencies = []) {\n  const map = useMemo(() => new Map(), dependencies);\n\n  const getKey = el => {\n    let key = map.get(el);\n\n    if (!key) {\n      key = Math.random().toString().slice(-KEY_LENGTH);\n      map.set(el, key);\n    }\n\n    return key;\n  };\n\n  return getKey;\n}\n","import {\n  useCallback,\n  useContext\n} from 'preact/hooks';\n\nimport {\n  LayoutContext\n} from '../context';\n\n/**\n * Creates a state that persists in the global LayoutContext.\n *\n * @example\n * ```jsx\n * function Group(props) {\n *   const [ open, setOpen ] = useLayoutState([ 'groups', 'foo', 'open' ], false);\n * }\n * ```\n *\n * @param {(string|number)[]} path\n * @param {any} [defaultValue]\n *\n * @returns {[ any, Function ]}\n */\nexport function useLayoutState(path, defaultValue) {\n  const {\n    getLayoutForKey,\n    setLayoutForKey\n  } = useContext(LayoutContext);\n\n  const layoutForKey = getLayoutForKey(path, defaultValue);\n\n  const setState = useCallback((newValue) => {\n    setLayoutForKey(path, newValue);\n  }, [ setLayoutForKey ]);\n\n\n  return [ layoutForKey, setState ];\n}\n","import {\n  useEffect,\n  useRef\n} from 'preact/hooks';\n\n/**\n * @pinussilvestrus: we need to introduce our own hook to persist the previous\n * state on updates.\n *\n * cf. https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\n */\n\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}","import {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef\n} from 'preact/hooks';\n\nimport { isFunction } from 'min-dash';\n\nimport { PropertiesPanelContext } from '../context';\n\nimport { useEvent } from './useEvent';\n\n/**\n * Subscribe to `propertiesPanel.showEntry`.\n *\n * @param {string} id\n *\n * @returns {import('preact').Ref}\n */\nexport function useShowEntryEvent(id) {\n  const { onShow } = useContext(PropertiesPanelContext);\n\n  const ref = useRef();\n\n  const focus = useRef(false);\n\n  const onShowEntry = useCallback((event) => {\n    if (event.id === id) {\n      onShow();\n\n      if (!focus.current) {\n        focus.current = true;\n      }\n    }\n  }, [ id ]);\n\n  useEffect(() => {\n    if (focus.current && ref.current) {\n      if (isFunction(ref.current.focus)) {\n        ref.current.focus();\n      }\n\n      if (isFunction(ref.current.select)) {\n        ref.current.select();\n      }\n\n      focus.current = false;\n    }\n  });\n\n  useEvent('propertiesPanel.showEntry', onShowEntry);\n\n  return ref;\n}","import {\n  useCallback,\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport { useEvent } from './useEvent';\n\n\n/**\n * @callback setSticky\n * @param {boolean} value\n */\n\n/**\n * Use IntersectionObserver to identify when DOM element is in sticky mode.\n * If sticky is observered setSticky(true) will be called.\n * If sticky mode is left, setSticky(false) will be called.\n *\n *\n * @param {Object} ref\n * @param {string} scrollContainerSelector\n * @param {setSticky} setSticky\n */\nexport function useStickyIntersectionObserver(ref, scrollContainerSelector, setSticky) {\n\n  const [ scrollContainer, setScrollContainer ] = useState(domQuery(scrollContainerSelector));\n\n  const updateScrollContainer = useCallback(() => {\n    const newScrollContainer = domQuery(scrollContainerSelector);\n\n    if (newScrollContainer !== scrollContainer) {\n      setScrollContainer(newScrollContainer);\n    }\n  }, [ scrollContainerSelector, scrollContainer ]);\n\n  useEffect(() => {\n    updateScrollContainer();\n  }, [ updateScrollContainer ]);\n\n  useEvent('propertiesPanel.attach', updateScrollContainer);\n  useEvent('propertiesPanel.detach', updateScrollContainer);\n\n  useEffect(() => {\n    const Observer = IntersectionObserver;\n\n    // return early if IntersectionObserver is not available\n    if (!Observer) {\n      return;\n    }\n\n    // TODO(@barmac): test this\n    if (!ref.current || !scrollContainer) {\n      return;\n    }\n\n    const observer = new Observer((entries) => {\n\n      // scroll container is unmounted, do not update sticky state\n      if (scrollContainer.scrollHeight === 0) {\n        return;\n      }\n\n      entries.forEach(entry => {\n        if (entry.intersectionRatio < 1) {\n          setSticky(true);\n        }\n        else if (entry.intersectionRatio === 1) {\n          setSticky(false);\n        }\n      });\n    },\n    {\n      root: scrollContainer,\n      rootMargin: '0px 0px 999999% 0px', // Use bottom margin to avoid stickyness when scrolling out to bottom\n      threshold: [ 1 ]\n    });\n    observer.observe(ref.current);\n\n    // Unobserve if unmounted\n    return () => {\n      observer.unobserve(ref.current);\n    };\n\n  }, [ ref.current, scrollContainer, setSticky ]);\n}\n","import { useCallback, useRef } from 'preact/hooks';\n\n/**\n * Creates a static function reference with changing body.\n * This is necessary when external libraries require a callback function\n * that has references to state variables.\n *\n * Usage:\n * const callback = useStaticCallback((val) => {val === currentState});\n *\n * The `callback` reference is static and can be safely used in external\n * libraries or as a prop that does not cause rerendering of children.\n *\n * @param {Function} callback function with changing reference\n * @returns {Function} static function reference\n */\nexport function useStaticCallback(callback) {\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n\n  return useCallback(\n    (...args) => callbackRef.current(...args),\n    []\n  );\n}","import { useLayoutEffect, useState } from 'preact/hooks';\n\nexport function useElementVisible(element) {\n\n  const [ visible, setVisible ] = useState(!!element && !!element.clientHeight);\n\n  useLayoutEffect(() => {\n    if (!element) return;\n\n    const resizeObserver = new ResizeObserver(([ entry ]) => {\n      requestAnimationFrame(() => {\n        const newVisible = !!entry.contentRect.height;\n        if (newVisible !== visible) {\n          setVisible(newVisible);\n        }\n      });\n    });\n\n    resizeObserver.observe(element);\n\n    return () => resizeObserver.disconnect();\n  }, [ element, visible ]);\n\n  return visible;\n}\n","import {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport Tooltip from './entries/Tooltip';\n\nimport classnames from 'classnames';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport {\n  isFunction\n} from 'min-dash';\n\nimport {\n  useErrors,\n  useLayoutState\n} from '../hooks';\n\nimport { PropertiesPanelContext } from '../context';\n\nimport { useStickyIntersectionObserver } from '../hooks';\n\nimport { ArrowIcon } from './icons';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * @param {import('../PropertiesPanel').GroupDefinition} props\n */\nexport default function Group(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    shouldOpen = false,\n  } = props;\n\n  const groupRef = useRef(null);\n\n  const [ open, setOpen ] = useLayoutState(\n    [ 'groups', id, 'open' ],\n    shouldOpen\n  );\n\n  const onShow = useCallback(() => setOpen(true), [ setOpen ]);\n\n  const toggleOpen = () => setOpen(!open);\n\n  const [ edited, setEdited ] = useState(false);\n\n  const [ sticky, setSticky ] = useState(false);\n\n  // set edited state depending on all entries\n  useEffect(() => {\n\n    // TODO(@barmac): replace with CSS when `:has()` is supported in all major browsers, or rewrite as in https://github.com/camunda/camunda-modeler/issues/3815#issuecomment-1733038161\n    const scheduled = requestAnimationFrame(() => {\n      const hasOneEditedEntry = entries.find(entry => {\n        const {\n          id,\n          isEdited\n        } = entry;\n\n        const entryNode = domQuery(`[data-entry-id=\"${id}\"]`);\n\n        if (!isFunction(isEdited) || !entryNode) {\n          return false;\n        }\n\n        const inputNode = domQuery('.bio-properties-panel-input', entryNode);\n\n        return isEdited(inputNode);\n      });\n\n      setEdited(hasOneEditedEntry);\n    });\n\n    return () => cancelAnimationFrame(scheduled);\n  }, [ entries, setEdited ]);\n\n  // set error state depending on all entries\n  const allErrors = useErrors();\n  const hasErrors = entries.some(entry => allErrors[entry.id]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n\n  const propertiesPanelContext = {\n    ...useContext(PropertiesPanelContext),\n    onShow\n  };\n\n  return <div class=\"bio-properties-panel-group\" data-group-id={ 'group-' + id } ref={ groupRef }>\n    <div class={ classnames(\n      'bio-properties-panel-group-header',\n      edited ? '' : 'empty',\n      open ? 'open' : '',\n      (sticky && open) ? 'sticky' : ''\n    ) } onClick={ toggleOpen }>\n      <div\n        class=\"bio-properties-panel-group-header-title\"\n      >\n        <Tooltip value={ props.tooltip } forId={ 'group-' + id } element={ element } parent={ groupRef }>\n          { label }\n        </Tooltip>\n      </div>\n      <div class=\"bio-properties-panel-group-header-buttons\">\n        {\n          <DataMarker\n            edited={ edited }\n            hasErrors={ hasErrors }\n          />\n        }\n        <button\n          type=\"button\"\n          title=\"Toggle section\"\n          class=\"bio-properties-panel-group-header-button bio-properties-panel-arrow\"\n        >\n          <ArrowIcon class={ open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right' } />\n        </button>\n      </div>\n    </div>\n    <div class={ classnames(\n      'bio-properties-panel-group-entries',\n      open ? 'open' : ''\n    ) }>\n      <PropertiesPanelContext.Provider value={ propertiesPanelContext }>\n        {\n          entries.map(entry => {\n            const {\n              component: Component,\n              id\n            } = entry;\n\n            return (\n              <Component\n                { ...entry }\n                element={ element }\n                key={ id } />\n            );\n          })\n        }\n      </PropertiesPanelContext.Provider>\n    </div>\n  </div>;\n}\n\nfunction DataMarker(props) {\n  const {\n    edited,\n    hasErrors\n  } = props;\n\n  if (hasErrors) {\n    return (\n      <div title=\"Section contains an error\" class=\"bio-properties-panel-dot bio-properties-panel-dot--error\"></div>\n    );\n  }\n\n  if (edited) {\n    return (\n      <div title=\"Section contains edits\" class=\"bio-properties-panel-dot\"></div>\n    );\n  }\n  return null;\n}","/**\n * @typedef { {\n *  text: (element: object) => string,\n *  icon?: (element: Object) => import('preact').Component\n * } } PlaceholderDefinition\n *\n * @param { PlaceholderDefinition } props\n */\nexport default function Placeholder(props) {\n  const {\n    text,\n    icon: Icon\n  } = props;\n\n  return (\n    <div class=\"bio-properties-panel open\">\n      <section class=\"bio-properties-panel-placeholder\">\n        { Icon && <Icon class=\"bio-properties-panel-placeholder-icon\" /> }\n        <p class=\"bio-properties-panel-placeholder-text\">{ text }</p>\n      </section>\n    </div>\n  );\n}","import {\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useLayoutEffect\n} from 'preact/hooks';\n\nimport {\n  assign,\n  get,\n  isArray,\n  set\n} from 'min-dash';\n\nimport Header from './components/Header';\n\nimport Group from './components/Group';\n\nimport Placeholder from './components/Placeholder';\n\nimport {\n  DescriptionContext,\n  ErrorsContext,\n  EventContext,\n  LayoutContext,\n  PropertiesPanelContext,\n  TooltipContext\n} from './context';\n\nimport { useEvent } from './hooks';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nconst DEFAULT_LAYOUT = {};\n\nconst DEFAULT_DESCRIPTION = {};\n\nconst DEFAULT_TOOLTIP = {};\n\n\n/**\n * @typedef { {\n *    component: import('preact').Component,\n *    id: String,\n *    isEdited?: Function\n * } } EntryDefinition\n *\n * @typedef { {\n *    autoFocusEntry: String,\n *    autoOpen?: Boolean,\n *    entries: Array<EntryDefinition>,\n *    id: String,\n *    label: String,\n *    remove: (event: MouseEvent) => void\n * } } ListItemDefinition\n *\n * @typedef { {\n *    add: (event: MouseEvent) => void,\n *    component: import('preact').Component,\n *    element: Object,\n *    id: String,\n *    items: Array<ListItemDefinition>,\n *    label: String,\n *    shouldOpen?: Boolean\n * } } ListGroupDefinition\n *\n * @typedef { {\n *    component?: import('preact').Component,\n *    entries: Array<EntryDefinition>,\n *    id: String,\n *    label: String,\n *    shouldOpen?: Boolean\n * } } GroupDefinition\n *\n *  @typedef { {\n *    [id: String]: GetDescriptionFunction\n * } } DescriptionConfig\n *\n *  @typedef { {\n *    [id: String]: GetTooltipFunction\n * } } TooltipConfig\n *\n * @callback { {\n * @param {string} id\n * @param {Object} element\n * @returns {string}\n * } } GetDescriptionFunction\n *\n * @callback { {\n * @param {string} id\n * @param {Object} element\n * @returns {string}\n * } } GetTooltipFunction\n *\n * @typedef { {\n *  getEmpty: (element: object) => import('./components/Placeholder').PlaceholderDefinition,\n *  getMultiple: (element: Object) => import('./components/Placeholder').PlaceholderDefinition\n * } } PlaceholderProvider\n *\n */\n\n\n/**\n * A basic properties panel component. Describes *how* content will be rendered, accepts\n * data from implementor to describe *what* will be rendered.\n *\n * @param {Object} props\n * @param {Object|Array} props.element\n * @param {import('./components/Header').HeaderProvider} props.headerProvider\n * @param {PlaceholderProvider} [props.placeholderProvider]\n * @param {Array<GroupDefinition|ListGroupDefinition>} props.groups\n * @param {Object} [props.layoutConfig]\n * @param {Function} [props.layoutChanged]\n * @param {DescriptionConfig} [props.descriptionConfig]\n * @param {Function} [props.descriptionLoaded]\n * @param {TooltipConfig} [props.tooltipConfig]\n * @param {Function} [props.tooltipLoaded]\n * @param {HTMLElement} [props.feelPopupContainer]\n * @param {Function} [props.getFeelPopupLinks]\n * @param {Object} [props.eventBus]\n */\nexport default function PropertiesPanel(props) {\n  const {\n    element,\n    headerProvider,\n    placeholderProvider,\n    groups,\n    layoutConfig,\n    layoutChanged,\n    descriptionConfig,\n    descriptionLoaded,\n    tooltipConfig,\n    tooltipLoaded,\n    eventBus\n  } = props;\n\n  // set-up layout context\n  const [ layout, setLayout ] = useState(createLayout(layoutConfig));\n\n  // react to external changes in the layout config\n  useUpdateLayoutEffect(() => {\n    const newLayout = createLayout(layoutConfig);\n\n    setLayout(newLayout);\n  }, [ layoutConfig ]);\n\n  useEffect(() => {\n    if (typeof layoutChanged === 'function') {\n      layoutChanged(layout);\n    }\n  }, [ layout, layoutChanged ]);\n\n  const getLayoutForKey = (key, defaultValue) => {\n    return get(layout, key, defaultValue);\n  };\n\n  const setLayoutForKey = (key, config) => {\n    const newLayout = assign({}, layout);\n    set(newLayout, key, config);\n    setLayout(newLayout);\n  };\n\n  const layoutContext = {\n    layout,\n    setLayout,\n    getLayoutForKey,\n    setLayoutForKey\n  };\n\n  // set-up description context\n  const description = useMemo(() => createDescriptionContext(descriptionConfig), [ descriptionConfig ]);\n\n  useEffect(() => {\n    if (typeof descriptionLoaded === 'function') {\n      descriptionLoaded(description);\n    }\n  }, [ description, descriptionLoaded ]);\n\n\n  const getDescriptionForId = (id, element) => {\n    return description[id] && description[id](element);\n  };\n\n  const descriptionContext = {\n    description,\n    getDescriptionForId\n  };\n\n  // set-up tooltip context\n  const tooltip = useMemo(() => createTooltipContext(tooltipConfig), [ tooltipConfig ]);\n\n  useEffect(() => {\n    if (typeof tooltipLoaded === 'function') {\n      tooltipLoaded(tooltip);\n    }\n  }, [ tooltip, tooltipLoaded ]);\n\n  const getTooltipForId = (id, element) => {\n    return tooltip[id] && tooltip[id](element);\n  };\n\n  const tooltipContext = {\n    tooltip,\n    getTooltipForId\n  };\n\n  const [ errors, setErrors ] = useState({});\n\n  const onSetErrors = ({ errors }) => setErrors(errors);\n\n  useEvent('propertiesPanel.setErrors', onSetErrors, eventBus);\n\n  const errorsContext = {\n    errors\n  };\n\n  const eventContext = {\n    eventBus\n  };\n\n  const propertiesPanelContext = {\n    element\n  };\n\n  // empty state\n  if (placeholderProvider && !element) {\n    return <Placeholder { ...placeholderProvider.getEmpty() } />;\n  }\n\n  // multiple state\n  if (placeholderProvider && isArray(element)) {\n    return <Placeholder { ...placeholderProvider.getMultiple() } />;\n  }\n\n  return (\n    <PropertiesPanelContext.Provider value={ propertiesPanelContext }>\n      <ErrorsContext.Provider value={ errorsContext }>\n        <DescriptionContext.Provider value={ descriptionContext }>\n          <TooltipContext.Provider value={ tooltipContext }>\n            <LayoutContext.Provider value={ layoutContext }>\n              <EventContext.Provider value={ eventContext }>\n                <div class=\"bio-properties-panel\">\n                  <Header\n                    element={ element }\n                    headerProvider={ headerProvider } />\n                  <div class=\"bio-properties-panel-scroll-container\">\n                    {\n                      groups.map(group => {\n                        const {\n                          component: Component = Group,\n                          id\n                        } = group;\n\n                        return (\n                          <Component\n                            { ...group }\n                            key={ id }\n                            element={ element } />\n                        );\n                      })\n                    }\n                  </div>\n                </div>\n              </EventContext.Provider>\n            </LayoutContext.Provider>\n          </TooltipContext.Provider>\n        </DescriptionContext.Provider>\n      </ErrorsContext.Provider>\n    </PropertiesPanelContext.Provider>\n  );\n}\n\n\n// helpers //////////////////\n\nfunction createLayout(overrides = {}, defaults = DEFAULT_LAYOUT) {\n  return {\n    ...defaults,\n    ...overrides\n  };\n}\n\nfunction createDescriptionContext(overrides = {}) {\n  return {\n    ...DEFAULT_DESCRIPTION,\n    ...overrides\n  };\n}\n\nfunction createTooltipContext(overrides = {}) {\n  return {\n    ...DEFAULT_TOOLTIP,\n    ...overrides\n  };\n}\n\n// hooks //////////////////\n\n/**\n * This hook behaves like useLayoutEffect, but does not trigger on the first render.\n *\n * @param {Function} effect\n * @param {Array} deps\n */\nfunction useUpdateLayoutEffect(effect, deps) {\n  const isMounted = useRef(false);\n\n  useLayoutEffect(() => {\n    if (isMounted.current) {\n      return effect();\n    } else {\n      isMounted.current = true;\n    }\n  }, deps);\n}","import {\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n *\n * @param {object} props\n * @param {string} [props.class]\n * @param {import('preact').Component[]} [props.menuItems]\n * @returns\n */\nexport function DropdownButton(props) {\n  const {\n    class: className,\n    children,\n    menuItems = []\n  } = props;\n\n  const dropdownRef = useRef(null);\n  const menuRef = useRef(null);\n\n  const [ open, setOpen ] = useState(false);\n  const close = () => setOpen(false);\n\n  function onDropdownToggle(event) {\n    if (menuRef.current && menuRef.current.contains(event.target)) {\n      return;\n    }\n\n    event.stopPropagation();\n\n    setOpen(open => !open);\n  }\n\n  function onActionClick(event, action) {\n    event.stopPropagation();\n\n    close();\n    action();\n  }\n\n  useGlobalClick([ dropdownRef.current ], () => close());\n\n  return (\n    <div\n      class={ classnames('bio-properties-panel-dropdown-button', { open }, className) }\n      onClick={ onDropdownToggle }\n      ref={ dropdownRef }\n    >\n      { children }\n      <div class=\"bio-properties-panel-dropdown-button__menu\" ref={ menuRef }>\n        { menuItems.map((item, index) => (\n          <MenuItem onClick={ onActionClick } item={ item } key={ index } />\n        )) }\n      </div>\n    </div>\n  );\n}\n\nfunction MenuItem({ item, onClick }) {\n  if (item.separator) {\n    return <div class=\"bio-properties-panel-dropdown-button__menu-item bio-properties-panel-dropdown-button__menu-item--separator\" />;\n  }\n\n  if (item.action) {\n    return (<button\n      type=\"button\"\n      class=\"bio-properties-panel-dropdown-button__menu-item bio-properties-panel-dropdown-button__menu-item--actionable\"\n      onClick={ event => onClick(event, item.action) }\n    >\n      {item.entry}\n    </button>);\n  }\n\n  return <div\n    class=\"bio-properties-panel-dropdown-button__menu-item\"\n  >\n    {item.entry}\n  </div>;\n}\n\n/**\n *\n * @param {Array<null | Element>} ignoredElements\n * @param {Function} callback\n */\nfunction useGlobalClick(ignoredElements, callback) {\n  useEffect(() => {\n\n    /**\n     * @param {MouseEvent} event\n     */\n    function listener(event) {\n      if (ignoredElements.some(element => element && element.contains(event.target))) {\n        return;\n      }\n\n      callback();\n    }\n\n    document.addEventListener('click', listener, { capture: true });\n\n    return () => document.removeEventListener('click', listener, { capture: true });\n  }, [ ...ignoredElements, callback ]);\n}\n","import classnames from 'classnames';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nexport function HeaderButton(props) {\n  const {\n    children = null,\n    class: classname,\n    onClick = () => {},\n    ...otherProps\n  } = props;\n\n  return <button\n    type=\"button\"\n    { ...otherProps }\n    onClick={ onClick }\n    class={ classnames('bio-properties-panel-group-header-button', classname) }>\n    { children }\n  </button>;\n}\n","/**\n * @typedef { {\n *   [key: string]: string;\n * } } TranslateReplacements\n */\n\n/**\n * A simple translation stub to be used for multi-language support.\n * Can be easily replaced with a more sophisticated solution.\n *\n * @param {string} template to interpolate\n * @param {TranslateReplacements} [replacements] a map with substitutes\n *\n * @return {string} the translated string\n */\nexport default function translateFallback(template, replacements) {\n\n  replacements = replacements || {};\n\n  return template.replace(/{([^}]+)}/g, function(_, key) {\n    return replacements[key] || '{' + key + '}';\n  });\n}","import {\n  useCallback,\n  useContext,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  ArrowIcon,\n  DeleteIcon,\n} from '../icons';\n\nimport { PropertiesPanelContext } from '../../context';\n\nimport translateFallback from '../util/translateFallback';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n\nexport default function CollapsibleEntry(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    open: shouldOpen,\n    remove,\n    translate = translateFallback\n  } = props;\n\n  const [ open, setOpen ] = useState(shouldOpen);\n\n  const toggleOpen = () => setOpen(!open);\n\n  const { onShow } = useContext(PropertiesPanelContext);\n\n  const propertiesPanelContext = {\n    ...useContext(PropertiesPanelContext),\n    onShow: useCallback(() => {\n      setOpen(true);\n\n      if (isFunction(onShow)) {\n        onShow();\n      }\n    }, [ onShow, setOpen ])\n  };\n\n\n  const placeholderLabel = translate('<empty>');\n\n  return (\n    <div\n      data-entry-id={ id }\n      class={ classnames(\n        'bio-properties-panel-collapsible-entry',\n        open ? 'open' : ''\n      ) }>\n      <div class=\"bio-properties-panel-collapsible-entry-header\" onClick={ toggleOpen }>\n        <div\n          class={ classnames(\n            'bio-properties-panel-collapsible-entry-header-title',\n            !label && 'empty'\n          ) }>\n          { label || placeholderLabel }\n        </div>\n        <button\n          type=\"button\"\n          title={ translate('Toggle list item') }\n          class=\"bio-properties-panel-arrow  bio-properties-panel-collapsible-entry-arrow\"\n        >\n          <ArrowIcon class={ open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right' } />\n        </button>\n        {\n          remove\n            ?\n            (\n              <button type=\"button\" title={ translate('Delete item') } class=\"bio-properties-panel-remove-entry\" onClick={ remove }>\n                <DeleteIcon />\n              </button>\n            )\n            : null\n        }\n      </div>\n      <div class={ classnames(\n        'bio-properties-panel-collapsible-entry-entries',\n        open ? 'open' : ''\n      ) }>\n        <PropertiesPanelContext.Provider value={ propertiesPanelContext }>\n          {\n            entries.map(entry => {\n              const {\n                component: Component,\n                id\n              } = entry;\n\n              return (\n                <Component\n                  { ...entry }\n                  element={ element }\n                  key={ id } />\n              );\n            })\n          }\n        </PropertiesPanelContext.Provider>\n      </div>\n    </div>\n  );\n}","import {\n  useEffect\n} from 'preact/hooks';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport { isFunction } from 'min-dash';\n\nimport CollapsibleEntry from './entries/Collapsible';\nimport translateFallback from './util/translateFallback';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * @param {import('../PropertiesPanel').ListItemDefinition} props\n */\nexport default function ListItem(props) {\n  const {\n    autoFocusEntry,\n    autoOpen,\n    translate = translateFallback\n  } = props;\n\n  // focus specified entry on auto open\n  useEffect(() => {\n    if (autoOpen && autoFocusEntry) {\n      const entry = domQuery(`[data-entry-id=\"${autoFocusEntry}\"]`);\n\n      const focusableInput = domQuery('.bio-properties-panel-input', entry);\n\n      if (focusableInput) {\n\n        if (isFunction(focusableInput.select)) {\n          focusableInput.select();\n        } else if (isFunction(focusableInput.focus)) {\n          focusableInput.focus();\n        }\n\n        focusableInput.scrollIntoView();\n      }\n    }\n  }, [ autoOpen, autoFocusEntry ]);\n\n\n  return (\n    <div class=\"bio-properties-panel-list-item\">\n      <CollapsibleEntry\n        { ...props }\n        open={ autoOpen }\n        translate={ translate }\n      />\n    </div>\n  );\n\n}\n","import {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport Tooltip from './entries/Tooltip';\n\nimport classnames from 'classnames';\n\nimport {\n  useErrors,\n  useLayoutState,\n  usePrevious\n} from '../hooks';\n\nimport ListItem from './ListItem';\n\nimport {\n  ArrowIcon,\n  CreateIcon\n} from './icons';\n\nimport { PropertiesPanelContext } from '../context';\n\nimport { useStickyIntersectionObserver } from '../hooks';\n\nimport translateFallback from './util/translateFallback';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nconst noop = () => {};\n\n/**\n * @param {import('../PropertiesPanel').ListGroupDefinition} props\n */\nexport default function ListGroup(props) {\n  const {\n    add,\n    element,\n    id,\n    items,\n    label,\n    shouldOpen = false,\n    translate = translateFallback\n  } = props;\n\n  useEffect(() => {\n    if (props.shouldSort != undefined) {\n      console.warn('the property \\'shouldSort\\' is no longer supported');\n    }\n  }, [ props.shouldSort ]);\n\n  const groupRef = useRef(null);\n\n  const [ open, setOpen ] = useLayoutState(\n    [ 'groups', id, 'open' ],\n    shouldOpen\n  );\n\n  const [ sticky, setSticky ] = useState(false);\n\n  const onShow = useCallback(() => setOpen(true), [ setOpen ]);\n\n  const [ localItems, setLocalItems ] = useState([]);\n\n  // Flag to mark that add button was clicked in the last render cycle\n  const [ addTriggered, setAddTriggered ] = useState(false);\n\n  const prevElement = usePrevious(element);\n\n  const toggleOpen = useCallback(() => setOpen(!open), [ open ]);\n\n  const openItemIds = (element === prevElement && open && addTriggered)\n    ? getNewItemIds(items, localItems)\n    : [];\n\n  // reset local state after items changed\n  useEffect(() => {\n    setLocalItems(items);\n    setAddTriggered(false);\n  }, [ items ]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n\n  const hasItems = !!items.length;\n\n  const propertiesPanelContext = {\n    ...useContext(PropertiesPanelContext),\n    onShow\n  };\n\n  const handleAddClick = e => {\n    setAddTriggered(true);\n    setOpen(true);\n\n    add(e);\n  };\n\n  const allErrors = useErrors();\n  const hasError = items.some(item => {\n    if (allErrors[item.id]) {\n      return true;\n    }\n\n    if (!item.entries) {\n      return;\n    }\n\n    // also check if the error is nested, e.g. for name-value entries\n    return item.entries.some(entry => allErrors[entry.id]);\n  });\n\n\n  return <div class=\"bio-properties-panel-group\" data-group-id={ 'group-' + id } ref={ groupRef }>\n    <div\n      class={ classnames(\n        'bio-properties-panel-group-header',\n        hasItems ? '' : 'empty',\n        (hasItems && open) ? 'open' : '',\n        (sticky && open) ? 'sticky' : ''\n      ) }\n      onClick={ hasItems ? toggleOpen : noop }>\n      <div\n        class=\"bio-properties-panel-group-header-title\"\n      >\n        <Tooltip value={ props.tooltip } forId={ 'group-' + id } element={ element } parent={ groupRef }>\n          { label }\n        </Tooltip>\n      </div>\n      <div class=\"bio-properties-panel-group-header-buttons\">\n        {\n          add\n            ? (\n              <button\n                type=\"button\"\n                title={ translate('Create new list item') }\n                class=\"bio-properties-panel-group-header-button bio-properties-panel-add-entry\"\n                onClick={ handleAddClick }\n              >\n                <CreateIcon />\n                {\n                  !hasItems ? (\n                    <span class=\"bio-properties-panel-add-entry-label\">{ translate('Create') }</span>\n                  )\n                    : null\n                }\n              </button>\n            )\n            : null\n        }\n        {\n          hasItems\n            ? (\n              <div\n                title={ translate(`List contains {numOfItems} item${items.length != 1 ? 's' : ''}`, { numOfItems: items.length }) }\n                class={\n                  classnames(\n                    'bio-properties-panel-list-badge',\n                    hasError ? 'bio-properties-panel-list-badge--error' : ''\n                  )\n                }\n              >\n                { items.length }\n              </div>\n            )\n            : null\n        }\n        {\n          hasItems\n            ? (\n              <button\n                type=\"button\"\n                title={ translate('Toggle section') }\n                class=\"bio-properties-panel-group-header-button bio-properties-panel-arrow\"\n              >\n                <ArrowIcon class={ open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right' } />\n              </button>\n            )\n            : null\n        }\n      </div>\n    </div>\n    <div class={ classnames(\n      'bio-properties-panel-list',\n      open && hasItems ? 'open' : ''\n    ) }>\n      <PropertiesPanelContext.Provider value={ propertiesPanelContext }>\n\n        {\n          items.map((item, index) => {\n            if (!item) {\n              return;\n            }\n\n            const { id } = item;\n\n            // if item was added, open it\n            // existing items will not be affected as autoOpen\n            // is only applied on first render\n            const autoOpen = openItemIds.includes(item.id);\n\n            return (\n              <ListItem\n                { ...item }\n                autoOpen={ autoOpen }\n                element={ element }\n                index={ index }\n                key={ id }\n                translate={ translate } />\n            );\n          })\n        }\n      </PropertiesPanelContext.Provider>\n    </div>\n  </div>;\n}\n\n\nfunction getNewItemIds(newItems, oldItems) {\n  const newIds = newItems.map(item => item.id);\n  const oldIds = oldItems.map(item => item.id);\n\n  return newIds.filter(itemId => !oldIds.includes(itemId));\n}","import {\n  useDescriptionContext\n} from '../../hooks';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.forId - id of the entry the description is used for\n * @param {String} props.value\n */\nexport default function Description(props) {\n  const {\n    element,\n    forId,\n    value\n  } = props;\n\n  const contextDescription = useDescriptionContext(forId, element);\n\n  const description = value || contextDescription;\n\n  if (description) {\n    return (\n      <div class=\"bio-properties-panel-description\">\n        { description }\n      </div>\n    );\n  }\n}\n","import {\n  useError,\n  useShowEntryEvent\n} from '../../hooks';\n\nimport {\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport Description from './Description';\nimport Tooltip from './Tooltip';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nfunction Checkbox(props) {\n  const {\n    id,\n    label,\n    onChange,\n    disabled,\n    value = false,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleChangeCallback = ({ target }) => {\n    onChange(target.checked);\n  };\n\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  const ref = useShowEntryEvent(id);\n\n  return (\n    <div class=\"bio-properties-panel-checkbox\">\n      <input\n        ref={ ref }\n        id={ prefixId(id) }\n        name={ id }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        type=\"checkbox\"\n        class=\"bio-properties-panel-input\"\n        onChange={ handleChange }\n        checked={ localValue }\n        disabled={ disabled } />\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          { label }\n        </Tooltip>\n      </label>\n    </div>\n  );\n}\n\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n * @param {boolean} [props.disabled]\n */\nexport default function CheckboxEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    disabled,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const value = getValue(element);\n\n  const error = useError(id);\n\n  return (\n    <div class=\"bio-properties-panel-entry bio-properties-panel-checkbox-entry\" data-entry-id={ id }>\n      <Checkbox\n        disabled={ disabled }\n        id={ id }\n        key={ element }\n        label={ label }\n        onChange={ setValue }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        value={ value }\n        tooltip={ tooltip }\n        element={ element } />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.checked;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import Checkbox from './Checkbox';\nimport Description from './Description';\nimport Tooltip from './Tooltip';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.label\n * @param {Array<{label: String, value: *}>} props.options\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {String} [props.description]\n * @param {string|import('preact').Component} [props.tooltip]\n * @param {boolean} [props.disabled]\n * @param {Function} [props.onFocus]\n * @param {Function} [props.onBlur]\n */\nexport default function CheckboxGroup(props) {\n  const {\n    element,\n    id,\n    label,\n    description,\n    tooltip,\n    options = [],\n    getValue,\n    setValue,\n    disabled,\n    onFocus,\n    onBlur\n  } = props;\n\n  const value = getValue(element) || [];\n\n  const handleOptionChange = (optionValue, checked) => {\n    const newValue = checked\n      ? [ ...value, optionValue ]\n      : value.filter(v => v !== optionValue);\n\n    setValue(newValue);\n  };\n\n  return (\n    <div class=\"bio-properties-panel-entry bio-properties-panel-checkbox-group\" data-entry-id={ id }>\n      <div class=\"bio-properties-panel-group-header\">\n        <p class=\"bio-properties-panel-label\">\n          <Tooltip value={ tooltip } forId={ id } element={ element }>\n            { label }\n          </Tooltip>\n        </p>\n      </div>\n      <div class=\"bio-properties-panel-checkbox-group-entries\">\n        {\n          options.map((option) => (\n            <Checkbox\n              key={ option.value }\n              id={ `${id}-${option.value}` }\n              label={ option.label }\n              setValue={ (checked) => handleOptionChange(option.value, checked) }\n              getValue={ () => value.includes(option.value) }\n              disabled={ disabled }\n              onFocus={ onFocus }\n              onBlur={ onBlur }\n              element={ element } />\n          ))\n        }\n      </div>\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n","import { OpenPopupIcon } from './icons';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * Button to open popups.\n *\n * @param {Object} props\n * @param {Function} props.onClick - Callback to trigger when the button is clicked.\n * @param {string} [props.title] - Tooltip text for the button.\n * @param {boolean} [props.disabled] - Whether the button is disabled.\n * @param {string} [props.className] - Additional class names for the button.\n */\nexport function OpenPopupButton({\n  onClick,\n  title = 'Open pop-up editor',\n}) {\n  return (\n    <button\n      type=\"button\"\n      title={ title }\n      class={ 'bio-properties-panel-open-feel-popup' }\n      onClick={ onClick }\n    >\n      <OpenPopupIcon />\n    </button>\n  );\n}\n","import classNames from 'classnames';\nimport { useEffect, useMemo, useRef, useState } from 'preact/hooks';\nimport { forwardRef } from 'preact/compat';\n\nimport { FeelersEditor } from 'feelers';\nimport { useStaticCallback } from '../../../hooks';\n\nimport { OpenPopupButton } from '../../OpenPopupButton';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nconst noop = () => {};\n\n/**\n * Buffer `.focus()` calls while the editor is not initialized.\n * Set Focus inside when the editor is ready.\n */\nconst useBufferedFocus = function(editor, ref) {\n\n  const [ buffer, setBuffer ] = useState(undefined);\n\n  ref.current = useMemo(() => ({\n    focus: (offset) => {\n      if (editor) {\n        editor.focus(offset);\n      } else {\n        if (typeof offset === 'undefined') {\n          offset = Infinity;\n        }\n        setBuffer(offset);\n      }\n    }\n  }), [ editor ]);\n\n  useEffect(() => {\n    if (typeof buffer !== 'undefined' && editor) {\n      editor.focus(buffer);\n      setBuffer(false);\n    }\n  }, [ editor, buffer ]);\n};\n\nconst TemplatingEditor = forwardRef((props, ref) => {\n\n  const {\n    onInput,\n    disabled,\n    tooltipContainer,\n    enableGutters,\n    value,\n    onLint = noop,\n    onOpenPopup = noop,\n    popupOpen,\n    contentAttributes = {},\n    hostLanguage = null,\n    singleLine = false\n  } = props;\n\n  const inputRef = useRef();\n  const [ editor, setEditor ] = useState();\n  const [ localValue, setLocalValue ] = useState(value || '');\n\n  useBufferedFocus(editor, ref);\n\n  const handleInput = useStaticCallback(newValue => {\n    onInput(newValue);\n    setLocalValue(newValue);\n  });\n\n  useEffect(() => {\n\n    let editor;\n\n    editor = new FeelersEditor({\n      container: inputRef.current,\n      onChange: handleInput,\n      value: localValue,\n      onLint,\n      contentAttributes,\n      tooltipContainer,\n      enableGutters,\n      hostLanguage,\n      singleLine,\n      lineWrap: true,\n    });\n\n    setEditor(\n      editor\n    );\n\n    return () => {\n      onLint([]);\n      inputRef.current.innerHTML = '';\n      setEditor(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    if (value === localValue) {\n      return;\n    }\n\n    editor.setValue(value);\n    setLocalValue(value);\n  }, [ value ]);\n\n  const handleClick = () => {\n    ref.current.focus();\n  };\n\n  return <div class={ classNames(\n    'bio-properties-panel-feelers-editor-container',\n    popupOpen ? 'popupOpen' : null\n  ) }>\n    {\n      popupOpen && <div class=\"bio-properties-panel-feelers-editor__popup-placeholder\">Opened in popup</div>\n    }\n    <div\n      name={ props.name }\n      class={ classNames('bio-properties-panel-feelers-editor bio-properties-panel-input', localValue ? 'edited' : null, disabled ? 'disabled' : null) }\n      ref={ inputRef }\n      onClick={ handleClick }\n    ></div>\n    {!disabled && <OpenPopupButton\n      onClick={ () => onOpenPopup('feelers') }\n    /> }\n  </div>;\n});\n\nexport default TemplatingEditor;","import classNames from 'classnames';\nimport { useEffect, useMemo, useRef, useState } from 'preact/hooks';\nimport { forwardRef } from 'preact/compat';\n\nimport Editor from '@bpmn-io/feel-editor';\n\nimport { EditorView, lineNumbers } from '@codemirror/view';\n\nimport { useStaticCallback } from '../../../hooks';\n\nimport { OpenPopupButton } from '../../OpenPopupButton';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nconst noop = () => {};\n\n/**\n * Buffer `.focus()` calls while the editor is not initialized.\n * Set Focus inside when the editor is ready.\n */\nconst useBufferedFocus = function(editor, ref) {\n\n  const [ buffer, setBuffer ] = useState(undefined);\n\n  ref.current = useMemo(() => ({\n    focus: (offset) => {\n      if (editor) {\n        editor.focus(offset);\n      } else {\n        if (typeof offset === 'undefined') {\n          offset = Infinity;\n        }\n        setBuffer(offset);\n      }\n    }\n  }), [ editor ]);\n\n  useEffect(() => {\n    if (typeof buffer !== 'undefined' && editor) {\n      editor.focus(buffer);\n      setBuffer(false);\n    }\n  }, [ editor, buffer ]);\n};\n\nconst FeelEditor = forwardRef((props, ref) => {\n\n  const {\n    contentAttributes,\n    enableGutters,\n    value,\n    onInput,\n    onKeyDown: onKeyDownProp = noop,\n    onFeelToggle = noop,\n    onLint = noop,\n    onOpenPopup = noop,\n    placeholder,\n    popupOpen,\n    disabled,\n    tooltipContainer,\n    variables,\n    feelLanguageContext\n  } = props;\n\n  const inputRef = useRef();\n  const [ editor, setEditor ] = useState();\n  const [ localValue, setLocalValue ] = useState(value || '');\n\n  const {\n    builtins,\n    dialect,\n    parserDialect\n  } = feelLanguageContext || {};\n\n  useBufferedFocus(editor, ref);\n\n  const handleInput = useStaticCallback(newValue => {\n    onInput(newValue);\n    setLocalValue(newValue);\n  });\n\n  useEffect(() => {\n\n    let editor;\n\n    /* Trigger FEEL toggle when\n     *\n     * - `backspace` is pressed\n     * - AND the cursor is at the beginning of the input\n     */\n    const onKeyDown = e => {\n\n      // Call parent onKeyDown handler first\n      onKeyDownProp(e);\n\n      if (e.key !== 'Backspace' || !editor) {\n        return;\n      }\n\n      const selection = editor.getSelection();\n      const range = selection.ranges[selection.mainIndex];\n\n      if (range.from === 0 && range.to === 0) {\n        onFeelToggle();\n      }\n    };\n\n    editor = new Editor({\n      container: inputRef.current,\n      onChange: handleInput,\n      onKeyDown: onKeyDown,\n      onLint: onLint,\n      placeholder: placeholder,\n      tooltipContainer: tooltipContainer,\n      value: localValue,\n      variables,\n      builtins,\n      dialect,\n      parserDialect,\n      extensions: [\n        ...enableGutters ? [ lineNumbers() ] : [],\n        EditorView.lineWrapping\n      ],\n      contentAttributes\n    });\n\n    setEditor(\n      editor\n    );\n\n    return () => {\n      onLint([]);\n      inputRef.current.innerHTML = '';\n      setEditor(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    if (value === localValue) {\n      return;\n    }\n\n    editor.setValue(value);\n    setLocalValue(value);\n  }, [ value ]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    editor.setVariables(variables);\n  }, [ variables ]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    editor.setPlaceholder(placeholder);\n  }, [ placeholder ]);\n\n  const handleClick = () => {\n    ref.current.focus();\n  };\n\n  return <div class={ classNames(\n    'bio-properties-panel-feel-editor-container',\n    disabled ? 'disabled' : null,\n    popupOpen ? 'popupOpen' : null)\n  }>\n    {\n      popupOpen && <div class=\"bio-properties-panel-feel-editor__open-popup-placeholder\">Opened in editor</div>\n    }\n    <div\n      name={ props.name }\n      class={ classNames('bio-properties-panel-input', localValue ? 'edited' : null) }\n      ref={ inputRef }\n      onClick={ handleClick }\n    ></div>\n    {!disabled && <OpenPopupButton\n      onClick={ () => onOpenPopup('feel') }\n    /> }\n  </div>;\n});\n\nexport default FeelEditor;","export function FeelIndicator(props) {\n  const {\n    active\n  } = props;\n\n  if (!active) {\n    return null;\n  }\n\n  return <span class=\"bio-properties-panel-feel-indicator\">\n    =\n  </span>;\n}","import classNames from 'classnames';\nimport { FeelIcon as FeelIconSvg } from '../../icons';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nconst noop = () => {};\n\n/**\n * @param {Object} props\n * @param {Object} props.label\n * @param {String} props.feel\n */\nexport default function FeelIcon(props) {\n\n  const {\n    feel = false,\n    active,\n    disabled = false,\n    onClick = noop\n  } = props;\n\n  const feelRequiredLabel = 'FEEL expression is mandatory';\n  const feelOptionalLabel = `Click to ${active ? 'remove' : 'set a'} dynamic value with FEEL expression`;\n\n  const handleClick = e => {\n    onClick(e);\n\n    // when pointer event was created from keyboard, keep focus on button\n    if (!e.pointerType) {\n      e.stopPropagation();\n    }\n  };\n\n  return (\n    <button\n      type=\"button\"\n      class={ classNames('bio-properties-panel-feel-icon',\n        active ? 'active' : null,\n        feel === 'required' ? 'required' : 'optional') }\n      onClick={ handleClick }\n      disabled={ feel === 'required' || disabled }\n      title={\n        feel === 'required' ? feelRequiredLabel : feelOptionalLabel\n      }\n    >\n      <FeelIconSvg />\n    </button>\n  );\n}","/**\n * @param {KeyboardEvent} event\n * @return {boolean}\n */\nexport function isCmd(event) {\n\n  // ensure we don't react to AltGr\n  // (mapped to CTRL + ALT)\n  if (event.altKey) {\n    return false;\n  }\n\n  return event.ctrlKey || event.metaKey;\n}\n\nexport function isCmdWithChar(event) {\n  return isCmd(event) && event.key.length === 1 && /^[a-zA-Z]$/.test(event.key);\n}","import Description from './Description';\n\nimport {\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport classNames from 'classnames';\nimport Tooltip from './Tooltip';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nexport function ToggleSwitch(props) {\n  const {\n    id,\n    label,\n    onInput,\n    value,\n    switcherLabel,\n    inline,\n    onFocus,\n    onBlur,\n    inputRef,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleInputCallback = async () => {\n    onInput(!value);\n  };\n\n  const handleInput = e => {\n    handleInputCallback(e);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  return (\n    <div class={ classNames(\n      'bio-properties-panel-toggle-switch',\n      { inline }\n    ) }>\n      <label class=\"bio-properties-panel-label\"\n        for={ prefixId(id) }>\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          { label }\n        </Tooltip>\n      </label>\n      <div class=\"bio-properties-panel-field-wrapper\">\n        <label class=\"bio-properties-panel-toggle-switch__switcher\">\n          <input\n            ref={ inputRef }\n            id={ prefixId(id) }\n            class=\"bio-properties-panel-input\"\n            type=\"checkbox\"\n            onFocus={ onFocus }\n            onBlur={ onBlur }\n            name={ id }\n            onInput={ handleInput }\n            checked={ !!localValue } />\n          <span class=\"bio-properties-panel-toggle-switch__slider\" />\n        </label>\n        { switcherLabel && <p class=\"bio-properties-panel-toggle-switch__label\">{ switcherLabel }</p> }\n      </div>\n    </div>\n  );\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.label\n * @param {String} props.switcherLabel\n * @param {Boolean} props.inline\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n */\nexport default function ToggleSwitchEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    switcherLabel,\n    inline,\n    getValue,\n    setValue,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const value = getValue(element);\n  return (\n    <div class=\"bio-properties-panel-entry bio-properties-panel-toggle-switch-entry\" data-entry-id={ id }>\n      <ToggleSwitch\n        id={ id }\n        label={ label }\n        value={ value }\n        onInput={ setValue }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        switcherLabel={ switcherLabel }\n        inline={ inline }\n        tooltip={ tooltip }\n        element={ element } />\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.checked;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import Description from './Description';\nimport Tooltip from './Tooltip';\n\nimport {\n  useEffect,\n  useMemo,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  useError\n} from '../../hooks';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nexport function NumberField(props) {\n\n  const {\n    debounce,\n    disabled,\n    displayLabel = true,\n    id,\n    inputRef,\n    label,\n    max,\n    min,\n    onInput,\n    step,\n    value = '',\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleInputCallback = useMemo(() => {\n    return debounce((target) => {\n\n      if (target.validity.valid) {\n        onInput(target.value ? parseFloat(target.value) : undefined);\n      }\n    });\n  }, [ onInput, debounce ]);\n\n  const handleInput = e => {\n    handleInputCallback(e.target);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  return (\n    <div class=\"bio-properties-panel-numberfield\">\n      {displayLabel && (\n        <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n          <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n            { label }\n          </Tooltip>\n        </label>\n      )}\n      <input\n        id={ prefixId(id) }\n        ref={ inputRef }\n        type=\"number\"\n        name={ id }\n        spellCheck=\"false\"\n        autoComplete=\"off\"\n        disabled={ disabled }\n        class=\"bio-properties-panel-input\"\n        max={ max }\n        min={ min }\n        onInput={ handleInput }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        step={ step }\n        value={ localValue } />\n    </div>\n  );\n}\n\n/**\n * @param {Object} props\n * @param {Boolean} props.debounce\n * @param {String} props.description\n * @param {Boolean} props.disabled\n * @param {Object} props.element\n * @param {Function} props.getValue\n * @param {String} props.id\n * @param {String} props.label\n * @param {String} props.max\n * @param {String} props.min\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {String} props.step\n * @param {Function} props.validate\n */\nexport default function NumberFieldEntry(props) {\n  const {\n    debounce,\n    description,\n    disabled,\n    element,\n    getValue,\n    id,\n    label,\n    max,\n    min,\n    setValue,\n    step,\n    onFocus,\n    onBlur,\n    validate,\n    tooltip\n  } = props;\n\n  const globalError = useError(id);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setLocalError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = (newValue) => {\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n\n  const error = globalError || localError;\n\n  return (\n    <div class={ classnames(\n      'bio-properties-panel-entry',\n      error ? 'has-error' : '') } data-entry-id={ id }>\n      <NumberField\n        debounce={ debounce }\n        disabled={ disabled }\n        id={ id }\n        key={ element }\n        label={ label }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        onInput={ onInput }\n        max={ max }\n        min={ min }\n        step={ step }\n        value={ value }\n        tooltip={ tooltip }\n      />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import Description from '../Description';\nimport TemplatingEditor from '../templating/TemplatingEditor';\n\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport { forwardRef } from 'preact/compat';\n\nimport classnames from 'classnames';\n\nimport { isFunction, isString } from 'min-dash';\n\nimport {\n  useDebounce,\n  useError,\n  useShowEntryEvent,\n  useStaticCallback\n} from '../../../hooks';\n\nimport FeelEditor from './FeelEditor';\nimport { FeelIndicator } from './FeelIndicator';\nimport FeelIcon from './FeelIcon';\n\nimport { EventContext, FeelLanguageContext } from '../../../context';\nimport { isCmdWithChar } from '../../util/keyboardUtils';\n\nimport { ToggleSwitch } from '../ToggleSwitch';\n\nimport { NumberField } from '../NumberField';\nimport Tooltip from '../Tooltip';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nconst noop = () => {};\n\n/**\n * @typedef {'required'|'optional'|'static'} FeelType\n */\n\n/**\n * @param {Object} props\n * @param {Boolean} props.debounce\n * @param {String} props.id\n * @param {Object} props.element\n * @param {String} props.label\n * @param {String} props.hostLanguage\n * @param {Function} props.onInput\n * @param {Function} props.onBlur\n * @param {Function} props.onError\n * @param {FeelType} [props.feel]\n * @param {String} props.value\n * @param {Boolean} [props.singleLine]\n * @param {Function} props.tooltipContainer\n * @param {Function | import('preact').Component} props.OptionalComponent\n * @param {Boolean} props.disabled\n * @param {Array} props.variables\n * @param {string} [props.placeholder]\n * @param {string | import('preact').Component} props.tooltip\n */\nfunction FeelTextfield(props) {\n  const {\n    debounce,\n    id,\n    element,\n    label,\n    hostLanguage,\n    onInput: commitValue,\n    onBlur,\n    onError,\n    placeholder,\n    feel,\n    value = '',\n    disabled = false,\n    variables,\n    singleLine,\n    tooltipContainer,\n    OptionalComponent = OptionalFeelInput,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const editorRef = useShowEntryEvent(id);\n  const containerRef = useRef();\n\n  const onInput = useCallback(newValue => {\n\n    // we don't commit empty FEEL expressions,\n    // but instead serialize them as <undefined>\n    const newModelValue = (newValue === '' || newValue === '=') ? undefined : newValue;\n    commitValue(newModelValue);\n  }, [ commitValue ]);\n\n  const feelActive = (isString(localValue) && localValue.startsWith('=')) || feel === 'required';\n  const feelOnlyValue = (isString(localValue) && localValue.startsWith('=')) ? localValue.substring(1) : localValue;\n  const feelLanguageContext = useContext(FeelLanguageContext);\n\n  const [ focus, _setFocus ] = useState(undefined);\n\n  const {\n    eventBus\n  } = useContext(EventContext);\n\n  const [ isPopupOpen, setIsPopupOpen ] = useState(false);\n\n  const setFocus = (offset = 0) => {\n    const hasFocus = containerRef.current.contains(document.activeElement);\n\n    // Keep caret position if it is already focused, otherwise focus at the end\n    const position = hasFocus ? document.activeElement.selectionStart : Infinity;\n\n    _setFocus(position + offset);\n  };\n\n  /**\n   * @type { import('min-dash').DebouncedFunction }\n   */\n  const handleInput = useDebounce(onInput, debounce);\n\n  const handleFeelToggle = useStaticCallback(() => {\n    if (feel === 'required') {\n      return;\n    }\n\n    if (!feelActive) {\n      setLocalValue('=' + localValue);\n      handleInput('=' + localValue);\n    } else {\n      setLocalValue(feelOnlyValue);\n      handleInput(feelOnlyValue);\n    }\n  });\n\n  const handleLocalInput = (newValue, useDebounce = true) => {\n    if (feelActive) {\n      newValue = '=' + newValue;\n    }\n\n    if (newValue === localValue) {\n      return;\n    }\n\n    setLocalValue(newValue);\n    if (useDebounce) {\n      handleInput(newValue);\n    } else {\n      onInput(newValue);\n    }\n\n    if (!feelActive && isString(newValue) && newValue.startsWith('=')) {\n\n      // focus is behind `=` sign that will be removed\n      setFocus(-1);\n    }\n  };\n\n  const handleOnBlur = (e) => {\n    handleInput.cancel?.();\n    if (e.target.type === 'checkbox') {\n      onInput(e.target.checked);\n    } else {\n      const trimmedValue = e.target.value.trim();\n      handleLocalInput(trimmedValue, false);\n    }\n\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  const handleOnKeyDown = e => {\n    if (isCmdWithChar(e)) {\n      handleInput.flush();\n    }\n  };\n\n  const handleLint = useStaticCallback((lint = []) => {\n\n    const syntaxError = lint.some(report => report.type === 'Syntax Error');\n\n    if (syntaxError) {\n      onError('Unparsable FEEL expression.');\n    } else {\n      onError(undefined);\n    }\n  });\n\n  const handleOpenPopup = (type = 'feel') => {\n    const isOpen = eventBus.fire('propertiesPanel.openPopup', {\n      element,\n      entryId: id,\n      hostLanguage,\n      label,\n      onInput: handleLocalInput,\n      singleLine,\n      sourceElement: editorRef.current,\n      tooltipContainer,\n      type,\n      value: feelOnlyValue,\n      variables,\n      feelLanguageContext,\n    });\n\n    if (isOpen) {\n      eventBus.once('propertiesPanelPopup.close', () => {\n        setIsPopupOpen(false);\n      });\n    }\n\n    setIsPopupOpen(isOpen === true);\n  };\n\n  useEffect(() => {\n    if (typeof focus !== 'undefined') {\n      editorRef.current.focus(focus);\n      _setFocus(undefined);\n    }\n  }, [ focus ]);\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    // External value change removed content => keep FEEL configuration\n    if (!value) {\n      setLocalValue(feelActive ? '=' : '');\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  useEffect(() => {\n    return () => {\n      eventBus.fire('propertiesPanel.closePopup');\n    };\n  }, []);\n\n  // copy-paste integration\n  useEffect(() => {\n    const copyHandler = event => {\n      if (!feelActive) {\n        return;\n      }\n      event.clipboardData.setData('application/FEEL', event.clipboardData.getData('text'));\n    };\n\n    const pasteHandler = event => {\n      if (feelActive || isPopupOpen) {\n        return;\n      }\n\n      const feelData = event.clipboardData.getData('application/FEEL');\n      if (feelData) {\n        setTimeout(() => {\n          handleFeelToggle();\n          setFocus();\n        });\n        return;\n      }\n\n      const input = event.target;\n      const isFieldEmpty = !input.value;\n      const isAllSelected = input.selectionStart === 0 && input.selectionEnd === input.value.length;\n\n      if (isFieldEmpty || isAllSelected) {\n        const textData = event.clipboardData.getData('text');\n        const trimmedValue = textData.trim();\n\n        setLocalValue(trimmedValue);\n        handleInput(trimmedValue);\n\n        if (!feelActive && isString(trimmedValue) && trimmedValue.startsWith('=')) {\n          setFocus(trimmedValue.length - 1);\n        }\n\n        event.preventDefault();\n      }\n    };\n    containerRef.current.addEventListener('copy', copyHandler);\n    containerRef.current.addEventListener('cut', copyHandler);\n    containerRef.current.addEventListener('paste', pasteHandler);\n\n    return () => {\n      containerRef.current.removeEventListener('copy', copyHandler);\n      containerRef.current.removeEventListener('cut', copyHandler);\n      containerRef.current.removeEventListener('paste', pasteHandler);\n    };\n  }, [ containerRef, feelActive, handleFeelToggle, setFocus ]);\n\n  return (\n    <div class={ classnames(\n      'bio-properties-panel-feel-entry',\n      { 'feel-active': feelActive }\n    ) }>\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\" onClick={ () => setFocus() }>\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          {label}\n        </Tooltip>\n        <FeelIcon\n          label={ label }\n          feel={ feel }\n          onClick={ handleFeelToggle }\n          active={ feelActive }></FeelIcon>\n      </label>\n\n      <div class=\"bio-properties-panel-feel-container\" ref={ containerRef }>\n        <FeelIndicator\n          active={ feelActive }\n          disabled={ feel !== 'optional' || disabled }\n          onClick={ handleFeelToggle }\n        />\n        {feelActive ?\n          <FeelEditor\n            name={ id }\n            onInput={ handleLocalInput }\n            onKeyDown={ handleOnKeyDown }\n            contentAttributes={ { 'id': prefixId(id), 'aria-label': label } }\n            disabled={ disabled }\n            popupOpen={ isPopupOpen }\n            onFeelToggle={ () => {\n              handleFeelToggle();\n              setFocus(true);\n            } }\n            onLint={ handleLint }\n            onOpenPopup={ handleOpenPopup }\n            placeholder={ placeholder }\n            value={ feelOnlyValue }\n            variables={ variables }\n            feelLanguageContext={ feelLanguageContext }\n            ref={ editorRef }\n            tooltipContainer={ tooltipContainer }\n          /> :\n          <OptionalComponent\n            { ...props }\n            popupOpen={ isPopupOpen }\n            onInput={ handleLocalInput }\n            onKeyDown={ handleOnKeyDown }\n            onBlur={ handleOnBlur }\n            contentAttributes={ { 'id': prefixId(id), 'aria-label': label } }\n            value={ localValue }\n            ref={ editorRef }\n            onOpenPopup={ handleOpenPopup }\n            containerRef={ containerRef }\n          />\n        }\n      </div>\n    </div>\n  );\n}\n\n\nconst OptionalFeelInput = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    onKeyDown,\n    value,\n    onFocus,\n    onBlur,\n    placeholder\n  } = props;\n\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: (position) => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n      if (typeof position === 'number') {\n        if (position > value.length) {\n          position = value.length;\n        }\n        input.setSelectionRange(position, position);\n      }\n\n    }\n  };\n\n  return <input\n    id={ prefixId(id) }\n    type=\"text\"\n    ref={ inputRef }\n    name={ id }\n    spellCheck=\"false\"\n    autoComplete=\"off\"\n    disabled={ disabled }\n    class=\"bio-properties-panel-input\"\n    onInput={ e => onInput(e.target.value) }\n    onFocus={ onFocus }\n    onKeyDown={ onKeyDown }\n    onBlur={ onBlur }\n    placeholder={ placeholder }\n    value={ value || '' } />;\n});\n\nconst OptionalFeelNumberField = forwardRef((props, ref) => {\n  const {\n    id,\n    debounce,\n    disabled,\n    onInput,\n    value,\n    min,\n    max,\n    step,\n    onFocus,\n    onBlur\n  } = props;\n\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: (position) => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n      if (typeof position === 'number' && position !== Infinity) {\n        if (position > value.length) {\n          position = value.length;\n        }\n        input.setSelectionRange(position, position);\n      }\n\n    }\n  };\n\n  return <NumberField\n    id={ id }\n    debounce={ debounce }\n    disabled={ disabled }\n    displayLabel={ false }\n    inputRef={ inputRef }\n    max={ max }\n    min={ min }\n    onInput={ onInput }\n    step={ step }\n    value={ value }\n    onFocus={ onFocus }\n    onBlur={ onBlur }\n  />;\n});\n\nconst OptionalFeelTextArea = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur,\n    placeholder\n  } = props;\n\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n      input.setSelectionRange(0, 0);\n    }\n  };\n\n  return <textarea\n    id={ prefixId(id) }\n    type=\"text\"\n    ref={ inputRef }\n    name={ id }\n    spellCheck=\"false\"\n    autoComplete=\"off\"\n    disabled={ disabled }\n    class=\"bio-properties-panel-input\"\n    onInput={ e => onInput(e.target.value) }\n    onFocus={ onFocus }\n    onBlur={ onBlur }\n    placeholder={ placeholder }\n    value={ value || '' }\n    data-gramm=\"false\"\n  />;\n});\n\nconst OptionalFeelToggleSwitch = forwardRef((props, ref) => {\n  const {\n    id,\n    onInput,\n    value,\n    onFocus,\n    onBlur,\n    switcherLabel\n  } = props;\n\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n    }\n  };\n\n  return <ToggleSwitch\n    id={ id }\n    value={ value }\n    inputRef={ inputRef }\n    onInput={ onInput }\n    onFocus={ onFocus }\n    onBlur={ onBlur }\n    switcherLabel={ switcherLabel } />;\n});\n\nconst OptionalFeelCheckbox = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur\n  } = props;\n\n  const inputRef = useRef();\n\n  const handleChange = ({ target }) => {\n    onInput(target.checked);\n  };\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n\n      input.focus();\n    }\n  };\n\n  return <input\n    ref={ inputRef }\n    id={ prefixId(id) }\n    name={ id }\n    onFocus={ onFocus }\n    onBlur={ onBlur }\n    type=\"checkbox\"\n    class=\"bio-properties-panel-input\"\n    onChange={ handleChange }\n    checked={ value }\n    disabled={ disabled } />;\n});\n\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string} [props.placeholder]\n * @param {string|import('preact').Component} props.tooltip\n */\nexport default function FeelEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    feel,\n    label,\n    getValue,\n    setValue,\n    tooltipContainer,\n    hostLanguage,\n    singleLine,\n    validate,\n    show = noop,\n    example,\n    variables,\n    onFocus,\n    onBlur,\n    placeholder,\n    tooltip\n  } = props;\n\n  const [ validationError, setValidationError ] = useState(null);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setValidationError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = useStaticCallback((newValue) => {\n    const value = getValue(element);\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    // don't create multiple commandStack entries for the same value\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n\n    setValidationError(newValidationError);\n  });\n\n  const onError = useCallback(err => {\n    setLocalError(err);\n  }, []);\n\n  const temporaryError = useError(id);\n\n  const error = temporaryError || localError || validationError;\n\n  return (\n    <div\n      class={ classnames(\n        props.class,\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <FeelTextfield\n        { ...props }\n        debounce={ debounce }\n        disabled={ disabled }\n        feel={ feel }\n        id={ id }\n        key={ element }\n        label={ label }\n        onInput={ onInput }\n        onError={ onError }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        placeholder={ placeholder }\n        example={ example }\n        hostLanguage={ hostLanguage }\n        singleLine={ singleLine }\n        show={ show }\n        value={ value }\n        variables={ variables }\n        tooltipContainer={ tooltipContainer }\n        OptionalComponent={ props.OptionalComponent }\n        tooltip={ tooltip } />\n      {error && <div class=\"bio-properties-panel-error\">{error}</div>}\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.max\n * @param {String} props.min\n * @param {String} props.step\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nexport function FeelNumberEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-number\" OptionalComponent={ OptionalFeelNumberField } { ...props } />;\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string} [props.placeholder]\n */\nexport function FeelTextAreaEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-textarea\" OptionalComponent={ OptionalFeelTextArea } { ...props } />;\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nexport function FeelToggleSwitchEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-toggle-switch\" OptionalComponent={ OptionalFeelToggleSwitch } { ...props } />;\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nexport function FeelCheckboxEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-checkbox\" OptionalComponent={ OptionalFeelCheckbox } { ...props } />;\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.hostLanguage\n * @param {Boolean} props.singleLine\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {FeelType} [props.feel]\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Array} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nexport function FeelTemplatingEntry(props) {\n  return <FeelEntry class=\"bio-properties-panel-feel-templating\" OptionalComponent={ TemplatingEditor } { ...props } />;\n}\n\nexport function isEdited(node) {\n  if (!node) {\n    return false;\n  }\n\n  if (node.type === 'checkbox') {\n    return !!node.checked || node.classList.contains('edited');\n  }\n\n  return !!node.value || node.classList.contains('edited');\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${id}`;\n}\n","import { useCallback, useEffect, useState, useMemo, useRef } from 'preact/hooks';\nimport { useStaticCallback, useShowEntryEvent } from '../../../hooks';\nimport { isFunction } from 'min-dash';\nimport { useError } from '../../../hooks';\nimport classnames from 'classnames';\nimport Description from '../Description';\nimport TemplatingEditor from './TemplatingEditor';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nconst noop = () => {};\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n */\nexport default function TemplatingEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    label,\n    getValue,\n    setValue,\n    tooltipContainer,\n    validate,\n    show = noop,\n  } = props;\n\n  const [ validationError, setValidationError ] = useState(null);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setValidationError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = useStaticCallback((newValue) => {\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    // don't create multiple commandStack entries for the same value\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n\n    setValidationError(newValidationError);\n  });\n\n  const onError = useCallback(err => {\n    setLocalError(err);\n  }, []);\n\n  const temporaryError = useError(id);\n\n  const error = localError || temporaryError || validationError;\n\n  return (\n    <div\n      class={ classnames(\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <Templating\n        debounce={ debounce }\n        disabled={ disabled }\n        id={ id }\n        key={ element }\n        label={ label }\n        onInput={ onInput }\n        onError={ onError }\n        show={ show }\n        value={ value }\n        tooltipContainer={ tooltipContainer } />\n      {error && <div class=\"bio-properties-panel-error\">{error}</div>}\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nfunction Templating(props) {\n  const {\n    debounce,\n    id,\n    label,\n    onInput,\n    onError,\n    value = '',\n    disabled = false,\n    tooltipContainer\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const editorRef = useShowEntryEvent(id);\n  const containerRef = useRef();\n\n  const [ focus, _setFocus ] = useState(undefined);\n\n  const setFocus = (offset = 0) => {\n    const hasFocus = containerRef.current.contains(document.activeElement);\n\n    // Keep caret position if it is already focused, otherwise focus at the end\n    const position = hasFocus ? document.activeElement.selectionStart : Infinity;\n\n    _setFocus(position + offset);\n  };\n\n  const handleInputCallback = useMemo(() => {\n    return debounce((newValue) => onInput(newValue.length ? newValue : undefined));\n  }, [ onInput, debounce ]);\n\n  const handleInput = newValue => {\n    handleInputCallback(newValue);\n    setLocalValue(newValue);\n  };\n\n  const handleLint = useStaticCallback(lint => {\n\n    const errors = lint && lint.length && lint.filter(e => e.severity === 'error') || [];\n\n    if (!errors.length) {\n      onError(undefined);\n      return;\n    }\n\n    const error = lint[0];\n    const message = `${error.source}: ${error.message}`;\n\n    onError(message);\n  });\n\n  useEffect(() => {\n    if (typeof focus !== 'undefined') {\n      editorRef.current.focus(focus);\n      _setFocus(undefined);\n    }\n  }, [ focus ]);\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value ? value : '');\n  }, [ value ]);\n\n  return (\n    <div class=\"bio-properties-panel-feelers\">\n      <label id={ prefixIdLabel(id) } class=\"bio-properties-panel-label\" onClick={ () => setFocus() }>\n        {label}\n      </label>\n      <div class=\"bio-properties-panel-feelers-input\" ref={ containerRef }>\n        <TemplatingEditor\n          name={ id }\n          onInput={ handleInput }\n          contentAttributes={ { 'aria-labelledby': prefixIdLabel(id) } }\n          disabled={ disabled }\n          onLint={ handleLint }\n          value={ localValue }\n          ref={ editorRef }\n          tooltipContainer={ tooltipContainer }\n        />\n      </div>\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && (!!node.value || node.classList.contains('edited'));\n}\n\n// helpers /////////////////\n\nfunction prefixIdLabel(id) {\n  return `bio-properties-panel-feelers-${id}-label`;\n}","import {\n  useEffect,\n  useState,\n  useRef\n} from 'preact/hooks';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  useKeyFactory,\n  usePrevious,\n  useStickyIntersectionObserver\n} from '../../hooks';\n\nimport classnames from 'classnames';\n\nimport {\n  ArrowIcon,\n  CreateIcon,\n  DeleteIcon\n} from '../icons';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * Entry for handling lists represented as nested entries.\n *\n * @template Item\n * @param {object} props\n * @param {string} props.id\n * @param {*} props.element\n * @param {Function} props.onAdd\n * @param {import('preact').Component} props.component\n * @param {string} [props.label='<empty>']\n * @param {Function} [props.onRemove]\n * @param {Item[]} [props.items]\n * @param {boolean} [props.open]\n * @param {string|boolean} [props.autoFocusEntry] either a custom selector string or true to focus the first input\n * @returns\n */\nexport default function List(props) {\n  const {\n    id,\n    element,\n    items = [],\n    component,\n    label = '<empty>',\n    open: shouldOpen,\n    onAdd,\n    onRemove,\n    autoFocusEntry,\n    ...restProps\n  } = props;\n\n  const entryRef = useRef(null);\n  const [ open, setOpen ] = useState(!!shouldOpen);\n  const [ sticky, setSticky ] = useState(false);\n\n  const hasItems = !!items.length;\n  const toggleOpen = () => hasItems && setOpen(!open);\n\n  const elementChanged = usePrevious(element) !== element;\n  const newItems = useNewItems(items, elementChanged);\n\n  useEffect(() => {\n    if (open && !hasItems) {\n      setOpen(false);\n    }\n  }, [ open, hasItems ]);\n\n  /**\n   * @param {MouseEvent} event\n   */\n  function addItem(event) {\n    event.stopPropagation();\n    onAdd();\n\n    if (!open) {\n      setOpen(true);\n    }\n  }\n\n  // set css class when entry is sticky to top\n  useStickyIntersectionObserver(entryRef, 'div.bio-properties-panel-scroll-container', setSticky);\n\n  return (\n    <div\n      data-entry-id={ id }\n      class={ classnames(\n        'bio-properties-panel-entry',\n        'bio-properties-panel-list-entry',\n        hasItems ? '' : 'empty',\n        open ? 'open' : ''\n      ) }\n      ref={ entryRef }>\n      <div\n        class={ classnames(\n          'bio-properties-panel-list-entry-header',\n          (sticky && open) ? 'sticky' : ''\n        ) }\n        onClick={ toggleOpen }>\n        <div\n          class={ classnames(\n            'bio-properties-panel-list-entry-header-title',\n            open && 'open'\n          ) }>\n          { label }\n        </div>\n        <div\n          class=\"bio-properties-panel-list-entry-header-buttons\"\n        >\n          <button\n            type=\"button\"\n            title=\"Create new list item\"\n            onClick={ addItem }\n            class=\"bio-properties-panel-add-entry\"\n          >\n            <CreateIcon />\n            {\n              !hasItems ? (\n                <span class=\"bio-properties-panel-add-entry-label\">Create</span>\n              )\n                : null\n            }\n          </button>\n          {\n            hasItems && (\n              <div\n                title={ `List contains ${items.length} item${items.length != 1 ? 's' : ''}` }\n                class=\"bio-properties-panel-list-badge\"\n              >\n                { items.length }\n              </div>\n            )\n          }\n          {\n            hasItems && (\n              <button\n                type=\"button\"\n                title=\"Toggle list item\"\n                class=\"bio-properties-panel-arrow\"\n              >\n                <ArrowIcon class={ open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right' } />\n              </button>\n            )\n          }\n        </div>\n      </div>\n      {\n        hasItems && (\n          <ItemsList\n            { ...restProps }\n            autoFocusEntry={ autoFocusEntry }\n            component={ component }\n            element={ element }\n            id={ id }\n            items={ items }\n            newItems={ newItems }\n            onRemove={ onRemove }\n            open={ open }\n          />\n        )\n      }\n    </div>\n  );\n}\n\nfunction ItemsList(props) {\n  const {\n    autoFocusEntry,\n    component: Component,\n    element,\n    id,\n    items,\n    newItems,\n    onRemove,\n    open,\n    ...restProps\n  } = props;\n\n  const getKey = useKeyFactory();\n\n  const newItem = newItems[0];\n\n  useEffect(() => {\n    if (newItem && autoFocusEntry) {\n\n      // (0) select the parent entry (containing all list items)\n      const entry = domQuery(`[data-entry-id=\"${id}\"]`);\n\n      // (1) select the first input or a custom element to be focussed\n      const selector = typeof(autoFocusEntry) === 'boolean' ?\n        '.bio-properties-panel-input' :\n        autoFocusEntry;\n      const focusableInput = domQuery(selector, entry);\n\n      // (2) set focus\n      if (focusableInput) {\n\n        if (isFunction(focusableInput.select)) {\n          focusableInput.select();\n        } else if (isFunction(focusableInput.focus)) {\n          focusableInput.focus();\n        }\n\n      }\n    }\n  }, [ newItem, autoFocusEntry, id ]);\n\n  return <ol class={ classnames(\n    'bio-properties-panel-list-entry-items',\n    open ? 'open' : ''\n  ) }>\n    {\n      items.map((item, index) => {\n        const key = getKey(item);\n\n        return (<li class=\"bio-properties-panel-list-entry-item\" key={ key }>\n          <Component\n            { ...restProps }\n            element={ element }\n            id={ id }\n            index={ index }\n            item={ item }\n            open={ item === newItem } />\n          {\n            onRemove && (\n              <button\n                type=\"button\"\n                title=\"Delete item\"\n                class=\"bio-properties-panel-remove-entry bio-properties-panel-remove-list-entry\"\n                onClick={ () => onRemove && onRemove(item) }\n              ><DeleteIcon /></button>\n            )\n          }\n        </li>);\n      })\n    }\n  </ol>;\n}\n\nfunction useNewItems(items = [], shouldReset) {\n  const previousItems = usePrevious(items.slice()) || [];\n\n  if (shouldReset) {\n    return [];\n  }\n\n  return previousItems ? items.filter(item => !previousItems.includes(item)) : [];\n}\n","import classNames from 'classnames';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  useError,\n  useShowEntryEvent\n} from '../../hooks';\n\nimport {\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport Description from './Description';\nimport Tooltip from './Tooltip';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * @typedef { { value: string, label: string, disabled: boolean, children: { value: string, label: string, disabled: boolean } } } Option\n */\n\n/**\n * Provides basic select input.\n *\n * @param {object} props\n * @param {string} props.id\n * @param {string[]} props.path\n * @param {string} props.label\n * @param {Function} props.onChange\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {Array<Option>} [props.options]\n * @param {string} props.value\n * @param {boolean} [props.disabled]\n */\nfunction Select(props) {\n  const {\n    id,\n    label,\n    onChange,\n    options = [],\n    value = '',\n    disabled,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n\n  const ref = useShowEntryEvent(id);\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleChangeCallback = ({ target }) => {\n    onChange(target.value);\n  };\n\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  return (\n    <div class=\"bio-properties-panel-select\">\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          {label}\n        </Tooltip>\n      </label>\n      <select\n        ref={ ref }\n        id={ prefixId(id) }\n        name={ id }\n        class=\"bio-properties-panel-input\"\n        onInput={ handleChange }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        value={ localValue }\n        disabled={ disabled }\n      >\n        {options.map((option, idx) => {\n          if (option.children) {\n            return (\n              <optgroup key={ idx } label={ option.label }>\n                {option.children.map((child, idx) => (\n                  <option\n                    key={ idx }\n                    value={ child.value }\n                    disabled={ child.disabled }\n                  >\n                    {child.label}\n                  </option>\n                ))}\n              </optgroup>\n            );\n          }\n\n          return (\n            <option key={ idx } value={ option.value } disabled={ option.disabled }>\n              {option.label}\n            </option>\n          );\n        })}\n      </select>\n    </div>\n  );\n}\n\n/**\n * @param {object} props\n * @param {object} props.element\n * @param {string} props.id\n * @param {string} [props.description]\n * @param {string} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {Function} props.getOptions\n * @param {boolean} [props.disabled]\n * @param {Function} [props.validate]\n * @param {string|import('preact').Component} props.tooltip\n */\nexport default function SelectEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    getOptions,\n    disabled,\n    onFocus,\n    onBlur,\n    validate,\n    tooltip\n  } = props;\n\n  const options = getOptions(element);\n  const globalError = useError(id);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setLocalError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n\n  const onChange = (newValue) => {\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n\n  const error = globalError || localError;\n\n  return (\n    <div\n      class={ classNames(\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <Select\n        id={ id }\n        key={ element }\n        label={ label }\n        value={ value }\n        onChange={ onChange }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        options={ options }\n        disabled={ disabled }\n        tooltip={ tooltip }\n        element={ element } />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}","import {\n  useMemo,\n  useEffect,\n  useState\n} from 'preact/hooks';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * @param {Object} props\n * @param {Function} props.debounce\n * @param {Boolean} [props.disabled]\n * @param {Object} props.element\n * @param {Function} props.getValue\n * @param {String} props.id\n * @param {Function} [props.onBlur]\n * @param {Function} [props.onFocus]\n * @param {Function} props.setValue\n */\nexport default function Simple(props) {\n  const {\n    debounce,\n    disabled,\n    element,\n    getValue,\n    id,\n    onBlur,\n    onFocus,\n    setValue\n  } = props;\n\n  const value = getValue(element);\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const handleInputCallback = useMemo(() => {\n    return debounce((target) => setValue(target.value.length ? target.value : undefined));\n  }, [ setValue, debounce ]);\n\n  const handleInput = e => {\n    handleInputCallback(e.target);\n    setLocalValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n\n  return (\n    <div class=\"bio-properties-panel-simple\">\n      <input\n        id={ prefixId(id) }\n        key={ element }\n        type=\"text\"\n        name={ id }\n        spellCheck=\"false\"\n        autoComplete=\"off\"\n        disabled={ disabled }\n        class=\"bio-properties-panel-input\"\n        onInput={ handleInput }\n        aria-label={ localValue || '<empty>' }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        value={ localValue } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import Description from './Description';\n\nimport {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\nimport {\n  useDebounce,\n  useElementVisible,\n  useError,\n  useShowEntryEvent,\n  useStaticCallback\n} from '../../hooks';\n\nimport { isFunction } from 'min-dash';\nimport Tooltip from './Tooltip';\nimport { isCmdWithChar } from '../util/keyboardUtils';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nfunction resizeToContents(element) {\n  element.style.height = 'auto';\n\n  // a 2px pixel offset is required to prevent scrollbar from\n  // appearing on OS with a full length scroll bar (Windows/Linux)\n  element.style.height = `${ element.scrollHeight + 2 }px`;\n}\n\nfunction TextArea(props) {\n\n  const {\n    id,\n    label,\n    debounce,\n    onInput: commitValue,\n    value = '',\n    disabled,\n    monospace,\n    onFocus,\n    onBlur,\n    onPaste,\n    autoResize = true,\n    placeholder,\n    rows = autoResize ? 1 : 2,\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value);\n\n  const ref = useShowEntryEvent(id);\n\n  const onInput = useCallback(newValue => {\n    const newModelValue = newValue === '' ? undefined : newValue;\n    commitValue(newModelValue);\n  }, [ commitValue ]);\n\n  const visible = useElementVisible(ref.current);\n\n  /**\n   * @type { import('min-dash').DebouncedFunction }\n   */\n  const handleInput = useDebounce(onInput, debounce);\n\n  const handleLocalInput = e => {\n    autoResize && resizeToContents(e.target);\n\n    if (e.target.value === localValue) {\n      return;\n    }\n\n    setLocalValue(e.target.value);\n    handleInput(e.target.value);\n  };\n\n  const handleOnBlur = e => {\n    const trimmedValue = e.target.value.trim();\n\n    // trim and commit on blur\n    handleInput.cancel?.();\n    onInput(trimmedValue);\n    setLocalValue(trimmedValue);\n\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  const handleOnPaste = e => {\n    const input = e.target;\n    const isFieldEmpty = !input.value;\n    const isAllSelected = input.selectionStart === 0 && input.selectionEnd === input.value.length;\n\n    // Trim and handle paste if field is empty or all content is selected\n    if (isFieldEmpty || isAllSelected) {\n      const trimmedValue = e.clipboardData.getData('text').trim();\n\n      setLocalValue(trimmedValue);\n      handleInput(trimmedValue);\n\n      if (onPaste) {\n        onPaste(e);\n      }\n\n      e.preventDefault();\n      return;\n    }\n\n    // Allow default paste behavior for normal text editing\n    if (onPaste) {\n      onPaste(e);\n    }\n  };\n\n  const handleOnKeyDown = e => {\n    if (isCmdWithChar(e)) {\n      handleInput.flush();\n    }\n  };\n\n  useLayoutEffect(() => {\n    autoResize && resizeToContents(ref.current);\n  }, []);\n\n  useLayoutEffect(() => {\n    visible && autoResize && resizeToContents(ref.current);\n  }, [ visible ]);\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  return (\n    <div class=\"bio-properties-panel-textarea\">\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          { label }\n        </Tooltip>\n      </label>\n      <textarea\n        ref={ ref }\n        id={ prefixId(id) }\n        name={ id }\n        spellCheck=\"false\"\n        class={ classnames(\n          'bio-properties-panel-input',\n          monospace ? 'bio-properties-panel-input-monospace' : '',\n          autoResize ? 'auto-resize' : '')\n        }\n        onInput={ handleLocalInput }\n        onFocus={ onFocus }\n        onKeyDown={ handleOnKeyDown }\n        onBlur={ handleOnBlur }\n        onPaste={ handleOnPaste }\n        placeholder={ placeholder }\n        rows={ rows }\n        value={ localValue }\n        disabled={ disabled }\n        data-gramm=\"false\"\n      />\n    </div>\n  );\n}\n\n/**\n * @param {object} props\n * @param {object} props.element\n * @param {string} props.id\n * @param {string} props.description\n * @param {boolean} props.debounce\n * @param {string} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {Function} props.onPaste\n * @param {number} props.rows\n * @param {boolean} props.monospace\n * @param {Function} [props.validate]\n * @param {boolean} [props.disabled]\n */\nexport default function TextAreaEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    label,\n    getValue,\n    setValue,\n    rows,\n    monospace,\n    disabled,\n    validate,\n    onFocus,\n    onBlur,\n    onPaste,\n    placeholder,\n    autoResize,\n    tooltip\n  } = props;\n\n  const globalError = useError(id);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setLocalError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = useStaticCallback((newValue) => {\n    const value = getValue(element);\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n\n    setLocalError(newValidationError);\n  });\n\n\n  const error = globalError || localError;\n\n  return (\n    <div\n      class={ classnames(\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <TextArea\n        id={ id }\n        key={ element }\n        label={ label }\n        value={ value }\n        onInput={ onInput }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        onPaste={ onPaste }\n        rows={ rows }\n        debounce={ debounce }\n        monospace={ monospace }\n        disabled={ disabled }\n        placeholder={ placeholder }\n        autoResize={ autoResize }\n        tooltip={ tooltip }\n        element={ element } />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}\n","import Description from './Description';\nimport Tooltip from './Tooltip';\n\nimport {\n  useCallback,\n  useEffect,\n  useState\n} from 'preact/hooks';\n\nimport classnames from 'classnames';\n\nimport { isFunction } from 'min-dash';\n\nimport {\n  useDebounce,\n  useError,\n  useShowEntryEvent,\n  useStaticCallback\n} from '../../hooks';\nimport { isCmdWithChar } from '../util/keyboardUtils';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nfunction Textfield(props) {\n\n  const {\n    debounce,\n    disabled = false,\n    id,\n    label,\n    onInput: commitValue,\n    onFocus,\n    onBlur,\n    onPaste,\n    placeholder,\n    value = '',\n    tooltip\n  } = props;\n\n  const [ localValue, setLocalValue ] = useState(value || '');\n\n  const ref = useShowEntryEvent(id);\n\n  const onInput = useCallback(newValue => {\n    const newModelValue = newValue === '' ? undefined : newValue;\n    commitValue(newModelValue);\n  }, [ commitValue ]);\n\n  /**\n   * @type { import('min-dash').DebouncedFunction }\n   */\n  const handleInput = useDebounce(onInput, debounce);\n\n  const handleOnBlur = e => {\n    const trimmedValue = e.target.value.trim();\n\n    // trim and commit on blur\n    handleInput.cancel?.();\n    onInput(trimmedValue);\n    setLocalValue(trimmedValue);\n\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  const handleOnPaste = e => {\n    const input = e.target;\n    const isFieldEmpty = !input.value;\n    const isAllSelected = input.selectionStart === 0 && input.selectionEnd === input.value.length;\n\n    // Trim and handle paste if field is empty or all content is selected (overwrite)\n    if (isFieldEmpty || isAllSelected) {\n      const trimmedValue = e.clipboardData.getData('text').trim();\n\n      setLocalValue(trimmedValue);\n      handleInput(trimmedValue);\n\n      if (onPaste) {\n        onPaste(e);\n      }\n\n      e.preventDefault();\n      return;\n    }\n\n    // Allow default paste behavior for normal text editing\n    if (onPaste) {\n      onPaste(e);\n    }\n  };\n\n  const handleLocalInput = e => {\n\n    if (e.target.value === localValue) {\n      return;\n    }\n\n    setLocalValue(e.target.value);\n    handleInput(e.target.value);\n  };\n\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    setLocalValue(value);\n  }, [ value ]);\n\n  const handleOnKeyDown = e => {\n    if (isCmdWithChar(e)) {\n      handleInput.flush();\n    }\n  };\n\n  return (\n    <div class=\"bio-properties-panel-textfield\">\n      <label for={ prefixId(id) } class=\"bio-properties-panel-label\">\n        <Tooltip value={ tooltip } forId={ id } element={ props.element }>\n          { label }\n        </Tooltip>\n      </label>\n      <input\n        ref={ ref }\n        id={ prefixId(id) }\n        type=\"text\"\n        name={ id }\n        spellCheck=\"false\"\n        autoComplete=\"off\"\n        disabled={ disabled }\n        class=\"bio-properties-panel-input\"\n        onInput={ handleLocalInput }\n        onFocus={ onFocus }\n        onKeyDown={ handleOnKeyDown }\n        onBlur={ handleOnBlur }\n        onPaste={ handleOnPaste }\n        placeholder={ placeholder }\n        value={ localValue } />\n    </div>\n  );\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n * @param {Function} props.validate\n */\nexport default function TextfieldEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    label,\n    getValue,\n    setValue,\n    validate,\n    onFocus,\n    onBlur,\n    onPaste,\n    placeholder,\n    tooltip\n  } = props;\n\n  const globalError = useError(id);\n  const [ localError, setLocalError ] = useState(null);\n\n  let value = getValue(element);\n\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n\n      setLocalError(newValidationError);\n    }\n  }, [ value, validate ]);\n\n  const onInput = useStaticCallback((newValue) => {\n    const value = getValue(element);\n    let newValidationError = null;\n\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n\n    setLocalError(newValidationError);\n  });\n\n\n  const error = globalError || localError;\n\n  return (\n    <div\n      class={ classnames(\n        'bio-properties-panel-entry',\n        error ? 'has-error' : '')\n      }\n      data-entry-id={ id }>\n      <Textfield\n        debounce={ debounce }\n        disabled={ disabled }\n        id={ id }\n        key={ element }\n        label={ label }\n        onInput={ onInput }\n        onFocus={ onFocus }\n        onBlur={ onBlur }\n        onPaste={ onPaste }\n        placeholder={ placeholder }\n        value={ value }\n        tooltip={ tooltip }\n        element={ element } />\n      { error && <div class=\"bio-properties-panel-error\">{ error }</div> }\n      <Description forId={ id } element={ element } value={ description } />\n    </div>\n  );\n}\n\nexport function isEdited(node) {\n  return node && !!node.value;\n}\n\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${ id }`;\n}","import {\n  debounce as _debounce,\n  isNumber\n} from 'min-dash';\n\nconst DEFAULT_DEBOUNCE_TIME = 600;\n\n/**\n * Creates a debounced version of a function, delaying its execution based on `debounceDelay`.\n *\n * - If `debounceDelay` is `false`, the function executes immediately without debouncing.\n * - If a number is provided, the function execution is delayed by the given time in milliseconds.\n *\n * @param { Boolean | Number } [debounceDelay=600]\n *\n * @example\n * const debounce = debounceInput();\n * const debouncedFn = debounce(fn);\n *\n * debouncedFn(); // Executes after 300ms (default) if no further calls occur.\n */\nexport default function debounceInput(debounceDelay) {\n\n  /**\n   * Applies debounce to the provided function, with a previously setup delay.\n   *\n   * @template { (...args: any[]) => any } T\n   *\n   * @param {T} fn\n   *\n   * @return { (...p: Parameters<T>) => any }\n   */\n  return function debounce(fn) {\n    if (debounceDelay === false) {\n      return fn;\n    }\n\n    var debounceTime =\n      isNumber(debounceDelay) ?\n        debounceDelay :\n        DEFAULT_DEBOUNCE_TIME;\n\n    return _debounce(fn, debounceTime);\n  };\n}\n\ndebounceInput.$inject = [ 'config.debounceInput' ];\n","import debounceInput from './debounceInput';\n\nexport default {\n  debounceInput: [ 'factory', debounceInput ]\n};\n","import { domify } from 'min-dom';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * Add a dragger that calls back the passed function with\n * { event, delta } on drag.\n *\n * @example\n *\n * function dragMove(event, delta) {\n *   // we are dragging (!!)\n * }\n *\n * domElement.addEventListener('dragstart', dragger(dragMove));\n *\n * @param {Function} fn\n * @param {Element} [dragPreview]\n *\n * @return {Function} drag start callback function\n */\nexport function createDragger(fn, dragPreview) {\n\n  let self;\n\n  let startX, startY;\n\n  /** drag start */\n  function onDragStart(event) {\n\n    self = this;\n\n    startX = event.clientX;\n    startY = event.clientY;\n\n    // (1) prevent preview image\n    if (event.dataTransfer) {\n      event.dataTransfer.setDragImage(dragPreview || emptyCanvas(), 0, 0);\n    }\n\n    // (2) setup drag listeners\n\n    // attach drag + cleanup event\n    // we need to do this to make sure we track cursor\n    // movements before we reach other drag event handlers,\n    // e.g. in child containers.\n    document.addEventListener('dragover', onDrag, true);\n    document.addEventListener('dragenter', preventDefault, true);\n\n    document.addEventListener('dragend', onEnd);\n    document.addEventListener('drop', preventDefault);\n  }\n\n  function onDrag(event) {\n    const delta = {\n      x: event.clientX - startX,\n      y: event.clientY - startY\n    };\n\n    // call provided fn with event, delta\n    return fn.call(self, event, delta);\n  }\n\n  function onEnd() {\n    document.removeEventListener('dragover', onDrag, true);\n    document.removeEventListener('dragenter', preventDefault, true);\n\n    document.removeEventListener('dragend', onEnd);\n    document.removeEventListener('drop', preventDefault);\n  }\n\n  return onDragStart;\n}\n\nfunction preventDefault(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nfunction emptyCanvas() {\n  return domify('<canvas width=\"0\" height=\"0\" />');\n}","import { forwardRef } from 'preact/compat';\n\nimport { useEffect, useRef } from 'preact/hooks';\n\nimport classNames from 'classnames';\n\nimport * as focusTrap from 'focus-trap';\n\nimport { DragIcon, CloseIcon } from '../../../components/icons';\n\nimport { createDragger } from '../../../components/util/dragger';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\nconst noop = () => {};\n\n/**\n * A generic popup component.\n *\n * @param {Object} props\n * @param {string} [props.className]\n * @param {boolean} [props.delayInitialFocus]\n * @param {{top: number, left: number}} [props.position]\n * @param {number} [props.width]\n * @param {number} [props.height]\n * @param {Function} props.onClose\n * @param {Function} [props.onPostActivate]\n * @param {Function} [props.onPostDeactivate]\n * @param {boolean} [props.returnFocus]\n * @param {boolean} [props.closeOnEscape]\n * @param {string} props.title\n * @param {Ref} [ref]\n */\nfunction PopupComponent(props, globalRef) {\n  const {\n    className,\n    delayInitialFocus,\n    position,\n    width,\n    height,\n    onClose,\n    onPostActivate = noop,\n    onPostDeactivate = noop,\n    returnFocus = true,\n    closeOnEscape = true,\n    title\n  } = props;\n\n  const focusTrapRef = useRef(null);\n  const localRef = useRef(null);\n  const popupRef = globalRef || localRef;\n\n  const handleKeydown = (event) => {\n\n    // do not allow keyboard events to bubble\n    event.stopPropagation();\n\n    if (closeOnEscape && event.key === 'Escape') {\n      onClose();\n    }\n  };\n\n  // re-activate focus trap on focus\n  const handleFocus = () => {\n    if (focusTrapRef.current) {\n      focusTrapRef.current.activate();\n    }\n  };\n\n  let style = {};\n\n  if (position) {\n    style = {\n      ...style,\n      top: position.top + 'px',\n      left: position.left + 'px',\n    };\n  }\n\n  if (width) {\n    style.width = width + 'px';\n  }\n\n  if (height) {\n    style.height = height + 'px';\n  }\n\n  useEffect(() => {\n    if (popupRef.current) {\n      popupRef.current.addEventListener('focusin', handleFocus);\n    }\n\n    return () => {\n      if (popupRef.current) {\n        popupRef.current.removeEventListener('focusin', handleFocus);\n      }\n    };\n  }, [ popupRef ]);\n\n  useEffect(() => {\n    if (popupRef.current) {\n      focusTrapRef.current = focusTrap.createFocusTrap(popupRef.current, {\n        clickOutsideDeactivates: true,\n        delayInitialFocus,\n        fallbackFocus: popupRef.current,\n        onPostActivate,\n        onPostDeactivate,\n        returnFocusOnDeactivate: returnFocus,\n      });\n\n      focusTrapRef.current.activate();\n    }\n\n    return () => focusTrapRef.current && focusTrapRef.current.deactivate();\n  }, [ popupRef ]);\n\n  return (\n    <div\n      aria-label={ title }\n      tabIndex={ -1 }\n      ref={ popupRef }\n      onKeyDown={ handleKeydown }\n      role=\"dialog\"\n      class={ classNames('bio-properties-panel-popup', className) }\n      style={ style }\n    >\n      {props.children}\n    </div>\n  );\n}\n\nexport const Popup = forwardRef(PopupComponent);\n\nPopup.Title = Title;\nPopup.Body = Body;\nPopup.Footer = Footer;\n\nfunction Title(props) {\n  const {\n    children,\n    className,\n    draggable,\n    eventBus,\n    title,\n    showCloseButton = false,\n    closeButtonTooltip = 'Close popup',\n    onClose,\n    ...rest\n  } = props;\n\n  // we can't use state as we need to\n  // manipulate this inside dragging events\n  const context = useRef({\n    startPosition: null,\n    newPosition: null,\n  });\n\n  const dragPreviewRef = useRef();\n\n  const titleRef = useRef();\n\n  const onMove = (event, delta) => {\n    cancel(event);\n\n    const { x: dx, y: dy } = delta;\n\n    const newPosition = {\n      x: context.current.startPosition.x + dx,\n      y: context.current.startPosition.y + dy,\n    };\n\n    const popupParent = getPopupParent(titleRef.current);\n\n    popupParent.style.top = newPosition.y + 'px';\n    popupParent.style.left = newPosition.x + 'px';\n\n    eventBus?.fire('feelPopup.dragover', { newPosition, delta });\n  };\n\n  const onMoveStart = (event) => {\n\n    // initialize drag handler\n    const onDragStart = createDragger(onMove, dragPreviewRef.current);\n    onDragStart(event);\n\n    event.stopPropagation();\n\n    const popupParent = getPopupParent(titleRef.current);\n\n    const bounds = popupParent.getBoundingClientRect();\n    context.current.startPosition = {\n      x: bounds.left,\n      y: bounds.top,\n    };\n\n    eventBus?.fire('feelPopup.dragstart');\n  };\n\n  const onMoveEnd = () => {\n    context.current.newPosition = null;\n\n    eventBus?.fire('feelPopup.dragend');\n  };\n\n  return (\n    <div\n      class={ classNames(\n        'bio-properties-panel-popup__header',\n        draggable && 'draggable',\n        className\n      ) }\n      ref={ titleRef }\n      draggable={ draggable }\n      onDragStart={ onMoveStart }\n      onDragEnd={ onMoveEnd }\n      { ...rest }\n    >\n      {draggable && (\n        <>\n          <div\n            ref={ dragPreviewRef }\n            class=\"bio-properties-panel-popup__drag-preview\"\n          ></div>\n          <div class=\"bio-properties-panel-popup__drag-handle\">\n            <DragIcon />\n          </div>\n        </>\n      )}\n      <div class=\"bio-properties-panel-popup__title\">{title}</div>\n      {children}\n      {showCloseButton && (\n        <button\n          title={ closeButtonTooltip }\n          class=\"bio-properties-panel-popup__close\"\n          onClick={ onClose }\n        >\n          <CloseIcon />\n        </button>\n      )}\n    </div>\n  );\n}\n\nfunction Body(props) {\n  const { children, className, ...rest } = props;\n\n  return (\n    <div\n      class={ classNames('bio-properties-panel-popup__body', className) }\n      { ...rest }\n    >\n      {children}\n    </div>\n  );\n}\n\nfunction Footer(props) {\n  const { children, className, ...rest } = props;\n\n  return (\n    <div\n      class={ classNames('bio-properties-panel-popup__footer', className) }\n      { ...rest }\n    >\n      {props.children}\n    </div>\n  );\n}\n\n// helpers //////////////////////\n\nfunction getPopupParent(node) {\n  return node.closest('.bio-properties-panel-popup');\n}\n\nfunction cancel(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n","import { useEffect, useRef } from 'preact/hooks';\nimport FeelEditor from '../../../components/entries/FEEL/FeelEditor';\nimport TemplatingEditor from '../../../components/entries/templating/TemplatingEditor';\nimport { LaunchIcon } from '../../../components/icons';\nimport { Popup } from './Popup';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n/**\n * @typedef {Object} FeelPopupProps\n * @property {string} entryId\n * @property {Function} onInput\n * @property {Function} onClose\n * @property {string} title\n * @property {'feel'|'feelers'} type\n * @property {string} value\n * @property {Array} [links]\n * @property {Array|Object} [variables]\n * @property {Object} [position]\n * @property {string} [hostLanguage]\n * @property {boolean} [singleLine]\n * @property {HTMLElement} [sourceElement]\n * @property {HTMLElement|string} [tooltipContainer]\n * @property {Object} [eventBus]\n */\n\nexport const FEEL_POPUP_WIDTH = 700;\nexport const FEEL_POPUP_HEIGHT = 250;\n\n/**\n * FEEL expression editor popup component\n * @param {FeelPopupProps} props\n */\nexport function FeelPopup(props) {\n  const {\n    entryId,\n    onInput,\n    onClose,\n    title,\n    type,\n    value,\n    links,\n    variables,\n    position,\n    hostLanguage,\n    singleLine,\n    sourceElement,\n    tooltipContainer,\n    eventBus,\n    feelLanguageContext,\n  } = props;\n\n  const editorRef = useRef();\n  const popupRef = useRef();\n\n  const isAutoCompletionOpen = useRef(false);\n\n  const handleSetReturnFocus = () => {\n    sourceElement && sourceElement.focus();\n  };\n\n  const onKeyDownCapture = (event) => {\n\n    // we use capture here to make sure we handle the event before the editor does\n    if (event.key === 'Escape') {\n      isAutoCompletionOpen.current = autoCompletionOpen(event.target);\n    }\n  };\n\n  const onKeyDown = (event) => {\n    if (event.key === 'Escape') {\n\n      // close popup only if auto completion is not open\n      if (!isAutoCompletionOpen.current) {\n        onClose();\n        isAutoCompletionOpen.current = false;\n      }\n    }\n  };\n\n  useEffect(() => {\n\n    // set focus on editor when popup is opened\n    if (editorRef.current) {\n      editorRef.current.focus();\n    }\n  }, [ editorRef ]);\n\n  return (\n    <Popup\n      className=\"bio-properties-panel-feel-popup\"\n      position={ position }\n      title={ title }\n      returnFocus={ false }\n      closeOnEscape={ false }\n      delayInitialFocus={ false }\n      onPostDeactivate={ handleSetReturnFocus }\n      height={ FEEL_POPUP_HEIGHT }\n      width={ FEEL_POPUP_WIDTH }\n      ref={ popupRef }\n    >\n      <Popup.Title\n        title={ title }\n        eventBus={ eventBus }\n        showCloseButton={ true }\n        closeButtonTooltip=\"Save and close\"\n        onClose={ onClose }\n        draggable\n      >\n        <>\n          {(links || []).map((link, index) => {\n            return (\n              <a\n                key={ index }\n                rel=\"noreferrer\"\n                href={ link.href }\n                target=\"_blank\"\n                class=\"bio-properties-panel-feel-popup__title-link\"\n              >\n                {link.title}\n                <LaunchIcon />\n              </a>\n            );\n          })}\n        </>\n      </Popup.Title>\n      <Popup.Body>\n        <div\n          onKeyDownCapture={ onKeyDownCapture }\n          onKeyDown={ onKeyDown }\n          class=\"bio-properties-panel-feel-popup__body\"\n        >\n          {type === 'feel' && (\n            <FeelEditor\n              enableGutters={ true }\n              id={ prefixId(entryId) }\n              name={ entryId }\n              onInput={ onInput }\n              value={ value }\n              variables={ variables }\n              feelLanguageContext={ feelLanguageContext }\n              ref={ editorRef }\n              tooltipContainer={ tooltipContainer }\n            />\n          )}\n\n          {type === 'feelers' && (\n            <TemplatingEditor\n              id={ prefixId(entryId) }\n              contentAttributes={ { 'aria-label': title } }\n              enableGutters={ true }\n              hostLanguage={ hostLanguage }\n              name={ entryId }\n              onInput={ onInput }\n              value={ value }\n              ref={ editorRef }\n              singleLine={ singleLine }\n              tooltipContainer={ tooltipContainer }\n            />\n          )}\n        </div>\n      </Popup.Body>\n    </Popup>\n  );\n}\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction autoCompletionOpen(element) {\n  const editor = element.closest('.cm-editor');\n  return editor ? editor.querySelector('.cm-tooltip-autocomplete') : null;\n}\n","import { FEEL_POPUP_WIDTH, FEEL_POPUP_HEIGHT } from './FeelPopup';\n\nexport function getPopupTitle({ element, label }) {\n  let popupTitle = '';\n\n  if (element && element.type) {\n    popupTitle = `${element.type} / `;\n  }\n\n  return `${popupTitle}${label}`;\n}\n\nexport function getPopupPosition() {\n  const viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n  const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n\n  return {\n    left: Math.max(0, (viewportWidth - FEEL_POPUP_WIDTH) / 2),\n    top: Math.max(0, (viewportHeight - FEEL_POPUP_HEIGHT) / 2)\n  };\n}","import { getPopupPosition, getPopupTitle } from './components/helpers';\n\n/**\n * FEEL popup component, built as a singleton.\n *\n * In order to implement a custom replacement, handle the following events:\n * - `propertiesPanel.openPopup`\n * - `propertiesPanel.closePopup`\n * - `propertiesPanel.detach`\n *\n * Within the custom renderer, make sure to emit the following events:\n *  - `feelPopup.open` - fired before the popup is mounted\n *  - `feelPopup.opened` - fired after the popup is mounted. Event context contains the DOM node of the popup as `domNode`\n *  - `feelPopup.close` - fired before the popup is unmounted. Event context contains the DOM node of the popup as `domNode`\n *  - `feelPopup.closed` - fired after the popup is unmounted\n */\nexport class FeelPopup {\n  constructor(eventBus, config = {}) {\n    this._eventBus = eventBus;\n    this._config = config;\n\n    this._isOpen = false;\n\n    eventBus.on('propertiesPanel.openPopup', (_, context) => {\n      this.open(context.entryId, context, context.sourceElement);\n\n      // return true to indicate that popup was opened\n      return true;\n    });\n\n    eventBus.on([\n      'propertiesPanel.closePopup',\n      'propertiesPanel.detach'\n    ], () => {\n      this.close();\n    });\n  }\n\n  /**\n   * Check if the FEEL popup is open.\n   * @return {Boolean}\n   */\n  isOpen() {\n    return this._isOpen;\n  }\n\n  /**\n   * Open the FEEL popup.\n   *\n   * @param {String} entryId\n   * @param {Object} popupConfig\n   * @param {HTMLElement} sourceElement\n   */\n  open(entryId, popupConfig, sourceElement) {\n\n    // close before opening a new one\n    this.close();\n\n    this._openPopup({\n      ...popupConfig,\n      entryId,\n      sourceElement\n    });\n  }\n\n  /**\n   * Close the FEEL popup.\n   */\n  close() {\n    this._closePopup();\n  }\n\n  _openPopup(context) {\n    const {\n      element,\n      label,\n      sourceElement,\n      type\n    } = context;\n\n    this._isOpen = true;\n\n    this._eventBus.fire('propertiesPanelPopup.open', {\n      container: this._config.feelPopupContainer,\n      config: {\n        ...context,\n        links: this._config.getFeelPopupLinks?.(type) || [],\n        onClose: () => {\n          this._closePopup();\n\n          // setTimeout to ensure the focus happens after the DOM updates make it focusable\n          setTimeout(() => {\n            sourceElement && sourceElement.focus();\n          }, 0);\n        },\n        position: getPopupPosition(),\n        title: getPopupTitle({ element, label })\n      }\n    });\n  }\n\n  _closePopup() {\n    if (this._isOpen) {\n      this._isOpen = false;\n\n      this._eventBus.fire('propertiesPanelPopup.close');\n    }\n  }\n}\n\nFeelPopup.$inject = [ 'eventBus', 'config.propertiesPanel' ];\n","import { render } from 'preact';\nimport { FeelPopup } from './components';\nimport { query as domQuery } from 'min-dom';\nimport { isString } from 'min-dash';\n\n{ /* Required to break up imports, see https://github.com/babel/babel/issues/15156 */ }\n\n\nexport class FeelPopupRenderer {\n  constructor(eventBus) {\n    this._eventBus = eventBus;\n\n    this._container = null;\n    this._element = null;\n\n    eventBus.on('propertiesPanelPopup.open', (context) => {\n      this._renderPopup(context);\n    });\n\n    eventBus.on('propertiesPanelPopup.close', () => {\n      this._removePopup();\n    });\n  }\n\n  _renderPopup(context) {\n    let { container, config } = context;\n\n    container = this._container = getContainer(container) || document.body;\n\n    const element = this._element = createElement();\n\n    container.appendChild(element);\n\n    // TODO(philippfromme): there is no useService in this context, so we need\n    // to pass the event bus as a prop or create a context provider, however,\n    // a custom renderer would have to use that context provider as well to have\n    // access to the event bus and other services\n    this._emit('feelPopup.open');\n\n    render(\n      <FeelPopup { ...config } eventBus={ this._eventBus } />,\n      element\n    );\n\n    this._emit('feelPopup.opened', {\n      domNode: element\n    });\n  }\n\n  _removePopup() {\n    if (!this._container) {\n      return;\n    }\n\n    this._emit('feelPopup.close', {\n      domNode: this._element\n    });\n\n    render(null, this._element);\n\n    this._container.removeChild(this._element);\n\n    this._container = null;\n\n    this._emit('feelPopup.closed');\n  }\n\n  _emit(event, context) {\n    this._eventBus.fire(event, context);\n  }\n}\n\nFeelPopupRenderer.$inject = [ 'eventBus' ];\n\n// helpers /////////////////\n\nfunction createElement() {\n  const element = document.createElement('div');\n\n  element.classList.add('bio-properties-panel-popup-container');\n\n  return element;\n}\n\nfunction getContainer(container) {\n  if (isString(container)) {\n    return domQuery(container);\n  }\n\n  return container;\n}","import { FeelPopup } from './FeelPopup';\nimport { FeelPopupRenderer } from './FeelPopupRenderer';\n\nexport default {\n  __init__: [ 'feelPopup', 'feelPopupRenderer' ],\n  feelPopup: [ 'type', FeelPopup ],\n  feelPopupRenderer: [ 'type', FeelPopupRenderer ],\n};"],"names":["Header","props","element","headerProvider","getElementIcon","getDocumentationRef","getElementLabel","getTypeLabel","label","type","documentationRef","ElementIcon","_jsxs","class","children","_jsx","width","height","viewBox","rel","href","title","target","ExternalLinkIcon","DescriptionContext","createContext","description","getDescriptionForId","ErrorsContext","errors","EventContext","eventBus","FeelLanguageContext","LayoutContext","layout","setLayout","getLayoutForKey","setLayoutForKey","TooltipContext","tooltip","getTooltipForId","useTooltipContext","id","useContext","TooltipWrapper","forId","contextDescription","value","Tooltip","parent","direction","position","showDelay","hideDelay","visible","setVisible","useState","showTimeoutRef","useRef","hideTimeoutRef","wrapperRef","tooltipRef","show","_","delay","clearTimeout","current","setTimeout","handleWrapperMouseEnter","e","hide","useEffect","handleClickOutside","contains","document","addEventListener","removeEventListener","handleMouseLeave","relatedTarget","parentElement","selection","window","getSelection","toString","length","selectionRange","getRangeAt","commonAncestorContainer","anchorNode","focusNode","handleTooltipMouseEnter","handleFocusOut","hideTooltipViaEscape","code","renderTooltip","role","style","getTooltipPosition","ref","onClick","stopPropagation","onMouseEnter","onMouseLeave","tabIndex","onFocus","onBlur","onKeyDown","createPortal","refElement","refPosition","getBoundingClientRect","right","x","top","useDescriptionContext","useDebounce","callback","debounceFn","debouncedCallback","useCallback","cancel","useError","useErrors","useEvent","event","eventContext","didMount","on","off","useKeyFactory","dependencies","map","useMemo","Map","getKey","el","key","get","Math","random","slice","set","useLayoutState","path","defaultValue","layoutForKey","setState","newValue","usePrevious","useShowEntryEvent","onShow","PropertiesPanelContext","focus","onShowEntry","isFunction","select","useStickyIntersectionObserver","scrollContainerSelector","setSticky","scrollContainer","setScrollContainer","domQuery","updateScrollContainer","newScrollContainer","Observer","IntersectionObserver","observer","entries","scrollHeight","forEach","entry","intersectionRatio","root","rootMargin","threshold","observe","unobserve","useStaticCallback","callbackRef","args","useElementVisible","clientHeight","useLayoutEffect","resizeObserver","ResizeObserver","requestAnimationFrame","newVisible","contentRect","disconnect","Group","shouldOpen","groupRef","open","setOpen","toggleOpen","edited","setEdited","sticky","scheduled","hasOneEditedEntry","find","isEdited","entryNode","inputNode","cancelAnimationFrame","allErrors","hasErrors","some","propertiesPanelContext","classnames","DataMarker","ArrowIcon","Provider","component","Component","_createElement","Placeholder","text","icon","Icon","DEFAULT_LAYOUT","DEFAULT_DESCRIPTION","DEFAULT_TOOLTIP","PropertiesPanel","placeholderProvider","groups","layoutConfig","layoutChanged","descriptionConfig","descriptionLoaded","tooltipConfig","tooltipLoaded","createLayout","useUpdateLayoutEffect","newLayout","config","assign","layoutContext","createDescriptionContext","descriptionContext","createTooltipContext","tooltipContext","setErrors","onSetErrors","errorsContext","getEmpty","isArray","getMultiple","group","overrides","defaults","effect","deps","isMounted","DropdownButton","className","menuItems","dropdownRef","menuRef","close","onDropdownToggle","onActionClick","action","useGlobalClick","item","index","MenuItem","separator","ignoredElements","listener","capture","HeaderButton","classname","otherProps","translateFallback","template","replacements","replace","CollapsibleEntry","remove","translate","placeholderLabel","DeleteIcon","ListItem","autoFocusEntry","autoOpen","focusableInput","scrollIntoView","noop","ListGroup","add","items","shouldSort","undefined","console","warn","localItems","setLocalItems","addTriggered","setAddTriggered","prevElement","openItemIds","getNewItemIds","hasItems","handleAddClick","hasError","CreateIcon","numOfItems","includes","newItems","oldItems","newIds","oldIds","filter","itemId","Description","Checkbox","onChange","disabled","localValue","setLocalValue","handleChangeCallback","checked","handleChange","prefixId","name","for","CheckboxEntry","getValue","setValue","error","node","CheckboxGroup","options","handleOptionChange","optionValue","v","option","OpenPopupButton","OpenPopupIcon","useBufferedFocus","editor","buffer","setBuffer","offset","Infinity","TemplatingEditor","forwardRef","onInput","tooltipContainer","enableGutters","onLint","onOpenPopup","popupOpen","contentAttributes","hostLanguage","singleLine","inputRef","setEditor","handleInput","FeelersEditor","container","lineWrap","innerHTML","handleClick","classNames","FeelEditor","onKeyDownProp","onFeelToggle","placeholder","variables","feelLanguageContext","builtins","dialect","parserDialect","range","ranges","mainIndex","from","to","Editor","extensions","lineNumbers","EditorView","lineWrapping","setVariables","setPlaceholder","FeelIndicator","active","FeelIcon","feel","feelRequiredLabel","feelOptionalLabel","pointerType","FeelIconSvg","isCmd","altKey","ctrlKey","metaKey","isCmdWithChar","test","ToggleSwitch","switcherLabel","inline","handleInputCallback","ToggleSwitchEntry","NumberField","debounce","displayLabel","max","min","step","validity","valid","parseFloat","spellCheck","autoComplete","NumberFieldEntry","validate","globalError","localError","setLocalError","newValidationError","FeelTextfield","commitValue","onError","OptionalComponent","OptionalFeelInput","editorRef","containerRef","newModelValue","feelActive","isString","startsWith","feelOnlyValue","substring","_setFocus","isPopupOpen","setIsPopupOpen","setFocus","hasFocus","activeElement","selectionStart","handleFeelToggle","handleLocalInput","handleOnBlur","trimmedValue","trim","handleOnKeyDown","flush","handleLint","lint","syntaxError","report","handleOpenPopup","isOpen","fire","entryId","sourceElement","once","copyHandler","clipboardData","setData","getData","pasteHandler","feelData","input","isFieldEmpty","isAllSelected","selectionEnd","textData","preventDefault","setSelectionRange","OptionalFeelNumberField","OptionalFeelTextArea","OptionalFeelToggleSwitch","OptionalFeelCheckbox","FeelEntry","example","validationError","setValidationError","err","temporaryError","FeelNumberEntry","FeelTextAreaEntry","FeelToggleSwitchEntry","FeelCheckboxEntry","FeelTemplatingEntry","classList","TemplatingEntry","Templating","severity","message","source","prefixIdLabel","List","onAdd","onRemove","restProps","entryRef","elementChanged","useNewItems","addItem","ItemsList","newItem","selector","shouldReset","previousItems","Select","idx","child","SelectEntry","getOptions","Simple","resizeToContents","TextArea","monospace","onPaste","autoResize","rows","handleOnPaste","TextAreaEntry","Textfield","TextfieldEntry","DEFAULT_DEBOUNCE_TIME","debounceInput","debounceDelay","fn","debounceTime","isNumber","_debounce","$inject","createDragger","dragPreview","self","startX","startY","onDragStart","clientX","clientY","dataTransfer","setDragImage","emptyCanvas","onDrag","onEnd","delta","y","call","domify","PopupComponent","globalRef","delayInitialFocus","onClose","onPostActivate","onPostDeactivate","returnFocus","closeOnEscape","focusTrapRef","localRef","popupRef","handleKeydown","handleFocus","activate","left","focusTrap","createFocusTrap","clickOutsideDeactivates","fallbackFocus","returnFocusOnDeactivate","deactivate","Popup","Title","Body","Footer","draggable","showCloseButton","closeButtonTooltip","rest","context","startPosition","newPosition","dragPreviewRef","titleRef","onMove","dx","dy","popupParent","getPopupParent","onMoveStart","bounds","onMoveEnd","onDragEnd","_Fragment","DragIcon","CloseIcon","closest","FEEL_POPUP_WIDTH","FEEL_POPUP_HEIGHT","FeelPopup","links","isAutoCompletionOpen","handleSetReturnFocus","onKeyDownCapture","autoCompletionOpen","link","LaunchIcon","querySelector","getPopupTitle","popupTitle","getPopupPosition","viewportWidth","innerWidth","documentElement","clientWidth","viewportHeight","innerHeight","constructor","_eventBus","_config","_isOpen","popupConfig","_openPopup","_closePopup","feelPopupContainer","getFeelPopupLinks","FeelPopupRenderer","_container","_element","_renderPopup","_removePopup","getContainer","body","createElement","appendChild","_emit","render","domNode","removeChild","__init__","feelPopup","feelPopupRenderer"],"mappings":"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"}