import {
  c as c2,
  l
} from "./chunk-TLURKUXV.js";
import {
  c2 as c,
  e2 as e3
} from "./chunk-4ZTHXCOS.js";
import {
  I as I2,
  a as a3,
  r
} from "./chunk-TCGVPS3X.js";
import {
  D,
  I,
  O
} from "./chunk-POOHJZAR.js";
import {
  e as e4
} from "./chunk-XMJZJ562.js";
import {
  y as y2
} from "./chunk-QUNQAVSE.js";
import {
  e as e2,
  t
} from "./chunk-YUQFVZCH.js";
import {
  o
} from "./chunk-ZK4LSXOH.js";
import {
  W2 as W
} from "./chunk-X3IFQMC4.js";
import {
  n as n2
} from "./chunk-Z6R2SP3D.js";
import {
  S,
  y
} from "./chunk-TJUEGVVG.js";
import {
  a3 as a2
} from "./chunk-GEH2VXFC.js";
import {
  e
} from "./chunk-BJY5ADVY.js";
import {
  L
} from "./chunk-VMWKLHJD.js";
import {
  a,
  n2 as n
} from "./chunk-YNL57W4I.js";
import {
  has
} from "./chunk-2PA5UPTB.js";

// ../node_modules/@arcgis/core/layers/effects/EffectView.js
var l2 = -1;
var h = class extends S {
  constructor(t3) {
    super(t3), this._from = null, this._to = null, this._final = null, this._current = [], this._time = 0, this.duration = has("mapview-transitions-duration"), this.effects = [];
  }
  set effect(t3) {
    if (this._get("effect") !== (t3 = t3 || "")) {
      this._set("effect", t3);
      try {
        this._transitionTo(a4(t3));
      } catch (e6) {
        this._transitionTo([]), n.getLogger(this).warn("Invalid Effect", { effect: t3, error: e6 });
      }
    }
  }
  get hasEffects() {
    return this.transitioning || !!this.effects.length;
  }
  set scale(t3) {
    this._updateForScale(t3);
  }
  get transitioning() {
    return null !== this._to;
  }
  canTransitionTo(t3) {
    try {
      return this.scale > 0 && u(this._current, a4(t3), this.scale);
    } catch {
      return false;
    }
  }
  transitionStep(t3, e6) {
    this._applyTimeTransition(t3), this._updateForScale(e6);
  }
  endTransitions() {
    this._applyTimeTransition(this.duration);
  }
  _transitionTo(t3) {
    this.scale > 0 && u(this._current, t3, this.scale) ? (this._final = t3, this._to = a(t3), _(this._current, this._to, this.scale), this._from = a(this._current), this._time = 0) : (this._from = this._to = this._final = null, this._current = t3), this._set("effects", this._current[0] ? a(this._current[0].effects) : []);
  }
  _applyTimeTransition(t3) {
    if (!(this._to && this._from && this._current && this._final)) return;
    this._time += t3;
    const e6 = Math.min(1, this._time / this.duration);
    for (let s5 = 0; s5 < this._current.length; s5++) {
      const t4 = this._current[s5], r3 = this._from[s5], i2 = this._to[s5];
      t4.scale = p(r3.scale, i2.scale, e6);
      for (let s6 = 0; s6 < t4.effects.length; s6++) {
        const n4 = t4.effects[s6], c4 = r3.effects[s6], o3 = i2.effects[s6];
        n4.interpolate(c4, o3, e6);
      }
    }
    1 === e6 && (this._current = this._final, this._set("effects", this._current[0] ? a(this._current[0].effects) : []), this._from = this._to = this._final = null);
  }
  _updateForScale(t3) {
    if (this._set("scale", t3), 0 === this._current.length) return;
    const e6 = this._current, s5 = this._current.length - 1;
    let r3, i2, n4 = 1;
    if (1 === e6.length || t3 >= e6[0].scale) i2 = r3 = e6[0].effects;
    else if (t3 <= e6[s5].scale) i2 = r3 = e6[s5].effects;
    else for (let c4 = 0; c4 < s5; c4++) {
      const s6 = e6[c4], o3 = e6[c4 + 1];
      if (s6.scale >= t3 && o3.scale <= t3) {
        n4 = (t3 - s6.scale) / (o3.scale - s6.scale), r3 = s6.effects, i2 = o3.effects;
        break;
      }
    }
    for (let c4 = 0; c4 < this.effects.length; c4++) {
      this.effects[c4].interpolate(r3[c4], i2[c4], n4);
    }
  }
};
function a4(t3) {
  const e6 = y2(t3) || [];
  return m(e6) ? [{ scale: l2, effects: e6 }] : e6;
}
function u(t3, e6, s5) {
  var _a, _b, _c, _d;
  if (!((_a = t3[0]) == null ? void 0 : _a.effects) || !((_b = e6[0]) == null ? void 0 : _b.effects)) return true;
  return !((((_c = t3[0]) == null ? void 0 : _c.scale) === l2 || ((_d = e6[0]) == null ? void 0 : _d.scale) === l2) && (t3.length > 1 || e6.length > 1) && s5 <= 0) && t(t3[0].effects, e6[0].effects);
}
function _(t3, e6, s5) {
  const r3 = t3.length > e6.length ? t3 : e6, i2 = t3.length > e6.length ? e6 : t3, n4 = i2[i2.length - 1], c4 = (n4 == null ? void 0 : n4.scale) ?? s5, o3 = (n4 == null ? void 0 : n4.effects) ?? [];
  for (let f2 = i2.length; f2 < r3.length; f2++) i2.push({ scale: c4, effects: [...o3] });
  for (let h5 = 0; h5 < r3.length; h5++) i2[h5].scale = i2[h5].scale === l2 ? s5 : i2[h5].scale, r3[h5].scale = r3[h5].scale === l2 ? s5 : r3[h5].scale, e2(i2[h5].effects, r3[h5].effects);
}
function p(t3, e6, s5) {
  return t3 + (e6 - t3) * s5;
}
function m(t3) {
  const e6 = t3[0];
  return !!e6 && "type" in e6;
}
e([y()], h.prototype, "_to", void 0), e([y()], h.prototype, "duration", void 0), e([y({ value: "" })], h.prototype, "effect", null), e([y({ readOnly: true })], h.prototype, "effects", void 0), e([y({ readOnly: true })], h.prototype, "hasEffects", null), e([y({ value: 0 })], h.prototype, "scale", null), e([y({ readOnly: true })], h.prototype, "transitioning", null), h = e([a2("esri.layers.effects.EffectView")], h);

// ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var T;
var E;
var L2;
var I3;
var A;
var _2;
var R;
var N;
var S2;
!function(T2) {
  T2[T2.FILL = 0] = "FILL", T2[T2.LINE = 1] = "LINE", T2[T2.MARKER = 2] = "MARKER", T2[T2.TEXT = 3] = "TEXT", T2[T2.LABEL = 4] = "LABEL";
}(T || (T = {})), function(T2) {
  T2[T2.NONE = 0] = "NONE", T2[T2.MAP = 1] = "MAP", T2[T2.LABEL = 2] = "LABEL", T2[T2.LABEL_ALPHA = 4] = "LABEL_ALPHA", T2[T2.HITTEST = 8] = "HITTEST", T2[T2.HIGHLIGHT = 16] = "HIGHLIGHT", T2[T2.CLIP = 32] = "CLIP", T2[T2.DEBUG = 64] = "DEBUG", T2[T2.NUM_DRAW_PHASES = 9] = "NUM_DRAW_PHASES";
}(E || (E = {})), function(T2) {
  T2[T2.SIZE = 0] = "SIZE", T2[T2.COLOR = 1] = "COLOR", T2[T2.OPACITY = 2] = "OPACITY", T2[T2.ROTATION = 3] = "ROTATION";
}(L2 || (L2 = {})), function(T2) {
  T2[T2.MINMAX_TARGETS_OUTLINE = 128] = "MINMAX_TARGETS_OUTLINE", T2[T2.SCALE_TARGETS_OUTLINE = 256] = "SCALE_TARGETS_OUTLINE", T2[T2.FIELD_TARGETS_OUTLINE = 512] = "FIELD_TARGETS_OUTLINE", T2[T2.UNIT_TARGETS_OUTLINE = 1024] = "UNIT_TARGETS_OUTLINE";
}(I3 || (I3 = {})), function(T2) {
  T2[T2.SPRITE = 0] = "SPRITE", T2[T2.GLYPH = 1] = "GLYPH";
}(A || (A = {})), function(T2) {
  T2[T2.DEFAULT = 0] = "DEFAULT", T2[T2.SIMPLE = 1] = "SIMPLE", T2[T2.DOT_DENSITY = 2] = "DOT_DENSITY", T2[T2.OUTLINE_FILL = 3] = "OUTLINE_FILL", T2[T2.OUTLINE_FILL_SIMPLE = 4] = "OUTLINE_FILL_SIMPLE", T2[T2.HEATMAP = 5] = "HEATMAP", T2[T2.PIE_CHART = 6] = "PIE_CHART";
}(_2 || (_2 = {})), function(T2) {
  T2[T2.All = 0] = "All", T2[T2.Highlight = 1] = "Highlight", T2[T2.InsideEffect = 2] = "InsideEffect", T2[T2.OutsideEffect = 3] = "OutsideEffect";
}(R || (R = {})), function(T2) {
  T2[T2.BATCHING = 0] = "BATCHING", T2[T2.STRICT_ORDER = 1] = "STRICT_ORDER", T2[T2.STRICT_MARKERS_AND_TEXT = 2] = "STRICT_MARKERS_AND_TEXT";
}(N || (N = {})), function(T2) {
  T2[T2.FILL = 0] = "FILL", T2[T2.LINE = 1] = "LINE", T2[T2.MARKER = 2] = "MARKER", T2[T2.TEXT = 3] = "TEXT";
}(S2 || (S2 = {}));

// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js
var s = { color: { write: [true, true, true, true], blendMode: "composite" }, depth: false, stencil: { write: false, test: { ref: (t3) => t3.stencilRef, compare: O.EQUAL, mask: 255, op: { fail: I.KEEP, zFail: I.KEEP, zPass: I.REPLACE } } } };
var l3 = { color: { write: [true, true, true, true], blendMode: "additive" }, depth: false, stencil: false };
var a5 = { ...s, color: { write: [true, true, true, true], blendMode: "delete" } };
function c3({ pixelRatio: e6, state: i2, displayLevel: o3, requiredLevel: r3 }, n4) {
  const s5 = 1 / 2 ** (o3 - n4.key.level), l5 = 1 / 2 ** (r3 - n4.key.level);
  return { displayMat3: Array.from(i2.displayMat3), displayViewMat3: Array.from(i2.displayViewMat3), displayViewScreenMat3: Array.from(n4.transforms.displayViewScreenMat3), viewMat3: Array.from(i2.viewMat3), tileMat3: Array.from(n4.transforms.tileMat3), displayZoomFactor: s5, requiredZoomFactor: l5, tileOffset: [n4.x, n4.y], currentScale: i2.scale, currentZoom: o3, metersPerSRUnit: W(i2.spatialReference), rotation: i2.rotation, pixelRatio: e6 };
}
function f(t3) {
  var _a;
  return "highlight" === ((_a = t3.passOptions) == null ? void 0 : _a.type);
}
function p2(t3) {
  var _a;
  return "hittest" === ((_a = t3.passOptions) == null ? void 0 : _a.type);
}
function u2(t3) {
  if (!p2(t3)) return null;
  const { position: e6, distance: i2, smallSymbolDistance: o3, smallSymbolSizeThreshold: r3 } = t3.passOptions;
  return { position: e6, distance: i2, smallSymbolDistance: o3, smallSymbolSizeThreshold: r3 };
}
function m2(t3) {
  if (!f(t3)) return null;
  const { activeReasons: e6, highlightAll: i2 } = t3.passOptions;
  return { activeReasons: e6, highlightAll: i2 ? 1 : 0 };
}
function d(t3, e6, i2) {
  const o3 = {};
  for (const r3 in i2) i2[r3] instanceof Function ? o3[r3] = i2[r3](t3, e6) : o3[r3] = i2[r3];
  return o3;
}
function y3(t3, e6) {
  const { attributeView: i2, context: o3 } = t3;
  return { storage: i2.getUniforms(o3), view: c3(t3, e6), hittestRequest: u2(t3), highlight: m2(t3) };
}
function h2(t3) {
  return { inside: t3.selection === R.InsideEffect, outside: t3.selection === R.OutsideEffect };
}
function M(t3) {
  return p2(t3) ? l3 : f(t3) && "clear" === t3.passOptions.stepType ? a5 : s;
}
function w(t3) {
  const { row: o3, col: r3 } = t3.key, n4 = r3 * a3, s5 = o3 * a3;
  return { tileOffsetFromLocalOrigin: [n4 % r, s5 % r], maxIntsToLocalOrigin: [Math.floor(n4 / r), Math.floor(s5 / r)] };
}

// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/parameters.js
var o2 = 1;
var t2 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1];
var i = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
var n3 = 256;
var e5 = { outlineWidth: 1.3, outerHaloWidth: 0.4, innerHaloWidth: 0.4, outlinePosition: 0 };

// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightGradient.js
var a6 = () => n.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");
function u3(o3, i2) {
  i2.fillColor[0] = o3.color.r / 255, i2.fillColor[1] = o3.color.g / 255, i2.fillColor[2] = o3.color.b / 255, i2.fillColor[3] = o3.color.a, o3.haloColor ? (i2.outlineColor[0] = o3.haloColor.r / 255, i2.outlineColor[1] = o3.haloColor.g / 255, i2.outlineColor[2] = o3.haloColor.b / 255, i2.outlineColor[3] = o3.haloColor.a) : (i2.outlineColor[0] = i2.fillColor[0], i2.outlineColor[1] = i2.fillColor[1], i2.outlineColor[2] = i2.fillColor[2], i2.outlineColor[3] = i2.fillColor[3]), i2.fillColor[3] *= o3.fillOpacity, i2.outlineColor[3] *= o3.haloOpacity, i2.fillColor[0] *= i2.fillColor[3], i2.fillColor[1] *= i2.fillColor[3], i2.fillColor[2] *= i2.fillColor[3], i2.outlineColor[0] *= i2.outlineColor[3], i2.outlineColor[1] *= i2.outlineColor[3], i2.outlineColor[2] *= i2.outlineColor[3], i2.outlineWidth = e5.outlineWidth, i2.outerHaloWidth = e5.outerHaloWidth, i2.innerHaloWidth = e5.innerHaloWidth, i2.outlinePosition = e5.outlinePosition;
}
var d2 = [0, 0, 0, 0];
var g = class {
  constructor() {
    this.type = "single", this._convertedHighlightOptions = { fillColor: [0.2 * 0.75, 0.6 * 0.75, 0.675, 0.75], outlineColor: [0.2 * 0.9, 0.54, 0.81, 0.9], outlinePosition: e5.outlinePosition, outlineWidth: e5.outlineWidth, innerHaloWidth: e5.innerHaloWidth, outerHaloWidth: e5.outerHaloWidth }, this._shadeTexChanged = true, this._texelData = new Uint8Array(4 * n3), this._minMaxDistance = [0, 0];
  }
  setHighlightOptions(o3) {
    const i2 = this._convertedHighlightOptions;
    u3(o3, i2);
    const t3 = i2.outlinePosition - i2.outlineWidth / 2 - i2.outerHaloWidth, e6 = i2.outlinePosition - i2.outlineWidth / 2, n4 = i2.outlinePosition + i2.outlineWidth / 2, h5 = i2.outlinePosition + i2.outlineWidth / 2 + i2.innerHaloWidth, s5 = Math.sqrt(Math.PI / 2) * o2, g2 = Math.abs(t3) > s5 ? Math.round(10 * (Math.abs(t3) - s5)) / 10 : 0, f2 = Math.abs(h5) > s5 ? Math.round(10 * (Math.abs(h5) - s5)) / 10 : 0;
    let C;
    g2 && !f2 ? a6().error("The outer rim of the highlight is " + g2 + "px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards).") : !g2 && f2 ? a6().error("The inner rim of the highlight is " + f2 + "px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards).") : g2 && f2 && a6().error("The highlight is " + Math.max(g2, f2) + "px away from the edge of the feature; consider reducing some width values.");
    const c4 = [void 0, void 0, void 0, void 0];
    function m3(o4, i3, t4) {
      c4[0] = (1 - t4) * o4[0] + t4 * i3[0], c4[1] = (1 - t4) * o4[1] + t4 * i3[1], c4[2] = (1 - t4) * o4[2] + t4 * i3[2], c4[3] = (1 - t4) * o4[3] + t4 * i3[3];
    }
    const { _texelData: p3 } = this;
    for (let r3 = 0; r3 < n3; ++r3) C = t3 + r3 / (n3 - 1) * (h5 - t3), C < t3 ? (c4[0] = 0, c4[1] = 0, c4[2] = 0, c4[3] = 0) : C < e6 ? m3(d2, i2.outlineColor, (C - t3) / (e6 - t3)) : C < n4 ? [c4[0], c4[1], c4[2], c4[3]] = i2.outlineColor : C < h5 ? m3(i2.outlineColor, i2.fillColor, (C - n4) / (h5 - n4)) : [c4[0], c4[1], c4[2], c4[3]] = i2.fillColor, p3[4 * r3] = 255 * c4[0], p3[4 * r3 + 1] = 255 * c4[1], p3[4 * r3 + 2] = 255 * c4[2], p3[4 * r3 + 3] = 255 * c4[3];
    this._minMaxDistance[0] = t3, this._minMaxDistance[1] = h5, this._shadeTexChanged = true;
  }
  applyHighlightOptions(o3, i2) {
    if (!this._shadeTex) {
      const i3 = new e3();
      i3.wrapMode = D.CLAMP_TO_EDGE, i3.width = n3, i3.height = 1, this._shadeTex = new c(o3, i3);
    }
    this._shadeTexChanged && (this._shadeTex.updateData(0, 0, 0, n3, 1, this._texelData), this._shadeTexChanged = false), o3.bindTexture(this._shadeTex, I2), i2.setUniform2fv("u_minMaxDistance", this._minMaxDistance);
  }
  destroy() {
    var _a;
    (_a = this._shadeTex) == null ? void 0 : _a.dispose(), this._shadeTex = null;
  }
  getReasonsWithGradients() {
    return [{ activeReasons: (1 << l.length) - 1, activeGradient: this }];
  }
};

// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/MultiHighlightGradient.js
var s2 = class {
  constructor() {
    this.type = "multi";
    const s5 = {};
    for (const n4 in c2) s5[n4] = new g();
    this.gradients = s5;
  }
  setHighlightOptions(i2) {
    for (const s5 in c2) {
      const n4 = c2[s5](i2);
      this.gradients[s5].setHighlightOptions(n4);
    }
  }
  applyHighlightOptions(t3, i2, s5) {
    this.gradients[s5].applyHighlightOptions(t3, i2);
  }
  destroy() {
    for (const i2 in c2) this.gradients[i2].destroy();
  }
  getReasonsWithGradients() {
    let t3 = 1;
    const i2 = [];
    for (const s5 in this.gradients) {
      const n4 = this.gradients[s5];
      i2.push({ activeReasons: t3, activeGradient: n4 }), t3 <<= 1;
    }
    return i2;
  }
};

// ../node_modules/@arcgis/core/views/2d/layers/support/util.js
var l4 = new n2({ esriGeometryPoint: "point", esriGeometryMultipoint: "multipoint", esriGeometryPolyline: "polyline", esriGeometryPolygon: "polygon", esriGeometryMultiPatch: "multipatch", mesh: "mesh" });
function s3(t3) {
  return l4.toJSON(t3);
}
function r2(t3) {
  const { bandCount: e6, attributeTable: i2, colormap: n4, pixelType: l5 } = t3.raster.rasterInfo;
  return 1 === e6 && (null != i2 || null != n4 || "u8" === l5 || "s8" === l5);
}
function h3(t3, n4) {
  return "single" === (t3 == null ? void 0 : t3.type) && n4.multiHighlightEnabled && (t3.destroy(), t3 = null), "multi" !== (t3 == null ? void 0 : t3.type) || n4.multiHighlightEnabled || (t3.destroy(), t3 = null), t3 || (t3 = n4.multiHighlightEnabled ? new s2() : new g()), t3.setHighlightOptions(n4), t3;
}
function a7(t3, e6, i2) {
  const { painter: l5, highlightGradient: s5 } = t3, { highlight: o3 } = l5.effects;
  if (!s5) return;
  const r3 = t3.passOptions, h5 = s5.getReasonsWithGradients();
  for (let a8 = 0; a8 < h5.length; a8++) {
    const s6 = { ...t3, passOptions: { type: "highlight", activeGradient: h5[a8].activeGradient, activeReasons: h5[a8].activeReasons, stepType: "burn", highlightAll: e6 } };
    if (o3.bind(s6), i2(s6), a8 < h5.length - 1) {
      let n4 = 0;
      for (let t4 = a8 + 1; t4 < h5.length; t4++) n4 |= h5[t4].activeReasons;
      i2({ ...t3, passOptions: { type: "highlight", activeGradient: h5[a8].activeGradient, activeReasons: n4, stepType: "clear", highlightAll: e6 } });
    }
    const r4 = { ...t3, passOptions: { type: "highlight", activeGradient: h5[a8].activeGradient, activeReasons: h5[a8].activeReasons, stepType: "draw", highlightAll: e6 } };
    l5.setPipelineState(M(t3)), l5.updatePipelineState(t3.context), o3.draw(r4), o3.unbind();
  }
  t3.passOptions = r3;
}

// ../node_modules/@arcgis/core/views/2d/engine/DisplayObject.js
var s4 = class extends o {
  constructor() {
    super(...arguments), this._fadeOutResolver = null, this._fadeInResolver = null, this._clips = null, this.computedVisible = true, this.computedOpacity = 1, this.fadeTransitionEnabled = false, this.inFadeTransition = false, this._isReady = false, this._opacity = 1, this.parent = null, this._stage = null, this._visible = true;
  }
  get clips() {
    return this._clips;
  }
  set clips(e6) {
    this._clips = e6, this.requestRender();
  }
  get isReady() {
    return this._isReady;
  }
  get opacity() {
    return this._opacity;
  }
  set opacity(e6) {
    this._opacity !== e6 && (this._opacity = Math.min(1, Math.max(e6, 0)), this.requestRender());
  }
  get stage() {
    return this._stage;
  }
  set stage(e6) {
    var _a;
    if (this._stage === e6) return;
    const t3 = this._stage;
    this._stage = e6, e6 ? ((_a = this._stage) == null ? void 0 : _a.untrashDisplayObject(this)) || (this.onAttach(), this.emit("attach")) : t3 == null ? void 0 : t3.trashDisplayObject(this);
  }
  get transforms() {
    return this._getTransforms();
  }
  _getTransforms() {
    return null == this._transforms && (this._transforms = this._createTransforms()), this._transforms;
  }
  get visible() {
    return this._visible;
  }
  set visible(e6) {
    this._visible !== e6 && (this._visible = e6, this.requestRender());
  }
  get hasLabels() {
    return false;
  }
  get hasHighlight() {
    return false;
  }
  get hasBlending() {
    return false;
  }
  fadeIn() {
    return this._fadeInResolver || (this._fadeOutResolver && (this._fadeOutResolver(), this._fadeOutResolver = null), this.opacity = 1, this.computedOpacity = 0, this.fadeTransitionEnabled = true, this._fadeInResolver = L(), this.requestRender()), this._fadeInResolver.promise;
  }
  fadeOut() {
    return this._fadeOutResolver || (this.opacity = 0, this._fadeInResolver && (this._fadeInResolver(), this._fadeInResolver = null), this.fadeTransitionEnabled = true, this._fadeOutResolver = L(), this.requestRender()), this._fadeOutResolver.promise;
  }
  endTransitions() {
    var _a, _b;
    (_a = this._fadeInResolver) == null ? void 0 : _a.call(this), this._fadeInResolver = null, (_b = this._fadeOutResolver) == null ? void 0 : _b.call(this), this._fadeOutResolver = null, this.computedOpacity = this.visible ? this.opacity : 0, this.requestRender();
  }
  beforeRender(e6) {
    this.updateTransitionProperties(e6.deltaTime, e6.state.scale), this.setTransform(e6.state);
  }
  afterRender(e6) {
    this._fadeInResolver && this.computedOpacity === this.opacity ? (this._fadeInResolver(), this._fadeInResolver = null) : this._fadeOutResolver && 0 === this.computedOpacity && (this._fadeOutResolver(), this._fadeOutResolver = null);
  }
  remove() {
    var _a;
    (_a = this.parent) == null ? void 0 : _a.removeChild(this);
  }
  setTransform(e6) {
  }
  processRender(e6) {
    this.stage && this.computedVisible && this.doRender(e6);
  }
  requestRender() {
    this.stage && this.stage.requestRender();
  }
  processDetach() {
    this._fadeInResolver && (this._fadeInResolver(), this._fadeInResolver = null), this._fadeOutResolver && (this._fadeOutResolver(), this._fadeOutResolver = null), this.onDetach(), this.emit("detach");
  }
  updateTransitionProperties(e6, t3) {
    const s5 = 0 === has("mapview-transitions-duration") ? 0 : 1 / has("mapview-transitions-duration");
    if (this.fadeTransitionEnabled && 0 !== s5) {
      const t4 = this._fadeOutResolver || !this.visible ? 0 : this.opacity, i2 = this.computedOpacity;
      if (i2 === t4) this.computedVisible = this.visible;
      else {
        const r3 = e6 * s5;
        this.computedOpacity = i2 > t4 ? Math.max(t4, i2 - r3) : Math.min(t4, i2 + r3), this.computedVisible = this.computedOpacity > 0;
        const a8 = t4 === this.computedOpacity;
        this.inFadeTransition = !a8, a8 || this.requestRender();
      }
    } else this.computedOpacity = this.opacity, this.computedVisible = this.visible;
  }
  onAttach() {
  }
  onDetach() {
  }
  doRender(e6) {
  }
  ready() {
    this._isReady || (this._isReady = true, this.emit("isReady"), this.requestRender());
  }
};

// ../node_modules/@arcgis/core/views/2d/engine/Container.js
var h4 = class extends s4 {
  constructor() {
    super(...arguments), this._childrenSet = /* @__PURE__ */ new Set(), this._needsSort = false, this._children = [], this._effectView = null, this._highlightOptions = null, this._highlightGradient = null;
  }
  get blendMode() {
    return this._blendMode;
  }
  set blendMode(e6) {
    this._blendMode = e6, this.requestRender();
  }
  get children() {
    return this._children;
  }
  get clips() {
    return this._clips;
  }
  set clips(e6) {
    this._clips = e6, this.children.forEach((t3) => t3.clips = e6);
  }
  get computedEffects() {
    var _a;
    return ((_a = this._effectView) == null ? void 0 : _a.effects) ?? null;
  }
  get effect() {
    var _a;
    return ((_a = this._effectView) == null ? void 0 : _a.effect) ?? "";
  }
  set effect(e6) {
    (this._effectView || e6) && (this._effectView || (this._effectView = new h()), this._effectView.effect = e6, this.requestRender());
  }
  get highlightOptions() {
    return this._highlightOptions;
  }
  set highlightOptions(e6) {
    var _a;
    if (!e6) return this._highlightOptions = null, void (this._highlightGradient && (this._highlightGradient.destroy(), this._highlightGradient = null, this.requestRender()));
    ((_a = this._highlightOptions) == null ? void 0 : _a.equals(e6)) || (this._highlightOptions = e6, this._highlightGradient = h3(this._highlightGradient, e6), this.requestRender());
  }
  get hasBlending() {
    return !!this.blendMode;
  }
  get hasHighlight() {
    return this.children.some((e6) => e6.hasHighlight);
  }
  get hasLabels() {
    return this.children.some((e6) => e6.hasLabels);
  }
  get requiresDedicatedFBO() {
    return this.children.some((e6) => "blendMode" in e6 && e6.blendMode && "normal" !== e6.blendMode);
  }
  updateTransitionProperties(e6, t3) {
    super.updateTransitionProperties(e6, t3), this._effectView && (this._effectView.transitionStep(e6, t3), this._effectView.transitioning && this.requestRender());
  }
  doRender(e6) {
    var _a;
    const t3 = this.createRenderParams(e6), { painter: i2 } = t3;
    i2.beforeRenderLayer(t3, ((_a = this._clips) == null ? void 0 : _a.length) ? 255 : 0, this.computedOpacity), this.renderChildren(t3), i2.afterRenderLayer(t3, this.computedOpacity);
  }
  addChild(e6) {
    return this.addChildAt(e6, this.children.length);
  }
  addChildAt(e6, t3 = this.children.length) {
    if (!e6) return e6;
    if (this.contains(e6)) return e6;
    this._needsSort = true;
    const i2 = e6.parent;
    return i2 && i2 !== this && i2.removeChild(e6), t3 >= this.children.length ? this.children.push(e6) : this.children.splice(t3, 0, e6), this._childrenSet.add(e6), e6.parent = this, e6.stage = this.stage, this !== this.stage && (e6.clips = this.clips), this.requestRender(), e6;
  }
  contains(e6) {
    return this._childrenSet.has(e6);
  }
  endTransitions() {
    super.endTransitions(), this._effectView && (this._effectView.endTransitions(), this.requestRender());
  }
  removeAllChildren() {
    this._childrenSet.clear(), this._needsSort = true;
    for (const e6 of this.children) this !== this.stage && (e6.clips = null), e6.stage = null, e6.parent = null;
    this.children.length = 0;
  }
  removeChild(e6) {
    return this.contains(e6) ? this.removeChildAt(this.children.indexOf(e6)) : e6;
  }
  removeChildAt(e6) {
    if (e6 < 0 || e6 >= this.children.length) return null;
    this._needsSort = true;
    const t3 = this.children.splice(e6, 1)[0];
    return this._childrenSet.delete(t3), this !== this.stage && (t3.clips = null), t3.stage = null, t3.parent = null, t3;
  }
  sortChildren(e6) {
    this._needsSort && (this.children.sort(e6), this._needsSort = false);
  }
  beforeRender(e6) {
    super.beforeRender(e6);
    for (const t3 of this.children) t3.beforeRender(e6);
  }
  afterRender(e6) {
    super.afterRender(e6);
    for (const t3 of this.children) t3.afterRender(e6);
  }
  _createTransforms() {
    return { displayViewScreenMat3: e4() };
  }
  onAttach() {
    super.onAttach();
    const e6 = this.stage;
    for (const t3 of this.children) t3.stage = e6;
  }
  onDetach() {
    super.onDetach();
    for (const e6 of this.children) e6.stage = null;
  }
  renderChildren(e6) {
    for (const t3 of this.children) t3.processRender(e6);
  }
  createRenderParams(e6) {
    return { ...e6, requireFBO: this.requiresDedicatedFBO, blendMode: this.blendMode, effects: this.computedEffects, globalOpacity: e6.globalOpacity * this.computedOpacity, inFadeTransition: this.inFadeTransition, highlightGradient: this._highlightGradient || e6.highlightGradient };
  }
};

export {
  h,
  s4 as s,
  o2 as o,
  t2 as t,
  i,
  E,
  L2 as L,
  A,
  R,
  N,
  S2 as S,
  c3 as c,
  f,
  p2 as p,
  d,
  y3 as y,
  h2,
  M,
  w,
  s3 as s2,
  r2 as r,
  a7 as a,
  h4 as h3
};
//# sourceMappingURL=chunk-55VZQ2O4.js.map
