import {
  $,
  H,
  It,
  K,
  U,
  at,
  ht,
  x as x2
} from "./chunk-F54TE5DA.js";
import {
  e
} from "./chunk-ZVC7ZICV.js";
import {
  t as t2
} from "./chunk-VBYAAZGS.js";
import {
  R
} from "./chunk-P3MZKJDB.js";
import {
  J,
  N as N2,
  O as O2
} from "./chunk-RTULPMO3.js";
import {
  f,
  m,
  p,
  s as s2,
  y as y2
} from "./chunk-ZH4RVBER.js";
import {
  l
} from "./chunk-BTSZKQPH.js";
import {
  M,
  Z,
  o,
  r,
  t,
  x,
  y
} from "./chunk-66KCMKB5.js";
import {
  A,
  G,
  N,
  X,
  g,
  w
} from "./chunk-X3IFQMC4.js";
import {
  n
} from "./chunk-Z6R2SP3D.js";
import {
  L
} from "./chunk-VMWKLHJD.js";
import {
  s2 as s
} from "./chunk-YNL57W4I.js";
import {
  O
} from "./chunk-2PA5UPTB.js";

// ../node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js
var c = [0, 0];
function h(s4, t6) {
  if (!t6) return null;
  if ("x" in t6) {
    const e5 = { x: 0, y: 0 };
    return [e5.x, e5.y] = s4(t6.x, t6.y, c), null != t6.z && (e5.z = t6.z), null != t6.m && (e5.m = t6.m), e5;
  }
  if ("xmin" in t6) {
    const e5 = { xmin: 0, ymin: 0, xmax: 0, ymax: 0 };
    return [e5.xmin, e5.ymin] = s4(t6.xmin, t6.ymin, c), [e5.xmax, e5.ymax] = s4(t6.xmax, t6.ymax, c), t6.hasZ && (e5.zmin = t6.zmin, e5.zmax = t6.zmax, e5.hasZ = true), t6.hasM && (e5.mmin = t6.mmin, e5.mmax = t6.mmax, e5.hasM = true), e5;
  }
  return "rings" in t6 ? { rings: l2(t6.rings, s4), hasM: t6.hasM, hasZ: t6.hasZ } : "paths" in t6 ? { paths: l2(t6.paths, s4), hasM: t6.hasM, hasZ: t6.hasZ } : "points" in t6 ? { points: f2(t6.points, s4), hasM: t6.hasM, hasZ: t6.hasZ } : null;
}
function l2(s4, t6) {
  const e5 = [];
  for (const n5 of s4) e5.push(f2(n5, t6));
  return e5;
}
function f2(s4, t6) {
  const e5 = [];
  for (const n5 of s4) {
    const s5 = t6(n5[0], n5[1], [0, 0]);
    e5.push(s5), n5.length > 2 && s5.push(n5[2]), n5.length > 3 && s5.push(n5[3]);
  }
  return e5;
}
async function x3(t6, n5) {
  if (!t6 || !n5) return;
  const r4 = Array.isArray(t6) ? t6.map((s4) => null != s4.geometry ? s4.geometry.spatialReference : null).filter(O) : [t6];
  await N2(r4.map((s4) => ({ source: s4, dest: n5 })));
}
var y3 = h.bind(null, M);
var g2 = h.bind(null, y);
function j(s4, t6, e5, m3) {
  if (!s4) return s4;
  if (e5 || (e5 = t6, t6 = s4.spatialReference), !N(t6) || !N(e5) || G(t6, e5)) return s4;
  if (x(t6, e5)) {
    const t7 = w(e5) ? y3(s4) : g2(s4);
    return t7.spatialReference = e5, t7;
  }
  return O2(t2, [s4], t6, e5, null, m3)[0];
}
var _ = class {
  constructor() {
    this._jobs = [], this._timer = null, this._process = this._process.bind(this);
  }
  async push(s4, e5, n5, r4) {
    if (!(s4 == null ? void 0 : s4.length) || !e5 || !n5 || G(e5, n5)) return s4;
    const i2 = { geometries: s4, inSpatialReference: e5, outSpatialReference: n5, geographicTransformation: r4, resolve: L() };
    return this._jobs.push(i2), this._timer ?? (this._timer = setTimeout(this._process, 10)), i2.resolve.promise;
  }
  _process() {
    this._timer = null;
    const s4 = this._jobs.shift();
    if (!s4) return;
    const { geometries: t6, inSpatialReference: e5, outSpatialReference: i2, resolve: o4, geographicTransformation: m3 } = s4;
    x(e5, i2) ? w(i2) ? o4(t6.map(y3)) : o4(t6.map(g2)) : o4(O2(t2, t6, e5, i2, m3, null)), this._jobs.length > 0 && (this._timer = setTimeout(this._process, 10));
  }
};
var M2 = new _();
function b(s4, t6, e5, n5) {
  return M2.push(s4, t6, e5, n5);
}

// ../node_modules/@arcgis/core/layers/graphics/data/geometryUtils.js
var u = new e();
var f3 = new e();
var m2 = new e();
var c2 = { esriGeometryPoint: x2, esriGeometryPolyline: $, esriGeometryPolygon: H, esriGeometryMultipoint: U };
function y4(r4, t6, o4, i2 = r4.hasZ, s4 = r4.hasM) {
  if (null == t6) return null;
  const l4 = r4.hasZ && i2, u4 = r4.hasM && s4;
  if (o4) {
    const f6 = at(m2, t6, r4.hasZ, r4.hasM, "esriGeometryPoint", o4, i2, s4);
    return x2(f6, l4, u4);
  }
  return x2(t6, l4, u4);
}
function a(e5, o4, i2, s4, l4, y5, a2 = o4, h5 = i2) {
  var _a, _b, _c;
  const p4 = o4 && a2, G5 = i2 && h5, g5 = null != s4 ? "coords" in s4 ? s4 : s4.geometry : null;
  if (null == g5) return null;
  if (l4) {
    let t6 = ht(f3, g5, o4, i2, e5, l4, a2, h5);
    return y5 && (t6 = at(m2, t6, p4, G5, e5, y5)), ((_a = c2[e5]) == null ? void 0 : _a.call(c2, t6, p4, G5)) ?? null;
  }
  if (y5) {
    const r4 = at(m2, g5, o4, i2, e5, y5, a2, h5);
    return ((_b = c2[e5]) == null ? void 0 : _b.call(c2, r4, p4, G5)) ?? null;
  }
  return It(u, g5, o4, i2, a2, h5), ((_c = c2[e5]) == null ? void 0 : _c.call(c2, u, p4, G5)) ?? null;
}
function h2(n5) {
  return n5 && p2 in n5 ? JSON.parse(JSON.stringify(n5, G2)) : n5;
}
var p2 = "_geVersion";
var G2 = (n5, e5) => n5 !== p2 ? e5 : void 0;

// ../node_modules/@arcgis/core/layers/graphics/data/queryUtils.js
var R2 = new n({ esriSRUnit_Meter: "meters", esriSRUnit_Kilometer: "kilometers", esriSRUnit_Foot: "feet", esriSRUnit_StatuteMile: "miles", esriSRUnit_NauticalMile: "nautical-miles", esriSRUnit_USNauticalMile: "us-nautical-miles" });
var g3 = Object.freeze({});
async function S(e5, t6, i2) {
  const { outFields: r4, orderByFields: n5, groupByFieldsForStatistics: o4, outStatistics: s4 } = e5;
  if (r4) for (let a2 = 0; a2 < r4.length; a2++) r4[a2] = r4[a2].trim();
  if (n5) for (let a2 = 0; a2 < n5.length; a2++) n5[a2] = n5[a2].trim();
  if (o4) for (let a2 = 0; a2 < o4.length; a2++) o4[a2] = o4[a2].trim();
  if (s4) for (let a2 = 0; a2 < s4.length; a2++) s4[a2].onStatisticField && (s4[a2].onStatisticField = s4[a2].onStatisticField.trim());
  return e5.geometry && !e5.outSR && (e5.outSR = e5.geometry.spatialReference), j2(e5, t6, i2);
}
async function j2(e5, t6, i2) {
  var _a;
  if (!e5) return null;
  let { where: o4 } = e5;
  if (e5.where = o4 = o4 == null ? void 0 : o4.trim(), (!o4 || /^1 *= *1$/.test(o4) || t6 && t6 === o4) && (e5.where = null), !e5.geometry) return e5;
  let s4 = await d(e5);
  if (e5.distance = 0, e5.units = null, "esriSpatialRelEnvelopeIntersects" === e5.spatialRel) {
    const { spatialReference: t7 } = e5.geometry;
    s4 = l(s4), s4.spatialReference = t7;
  }
  if (s4) {
    await x3(s4.spatialReference, i2), s4 = x4(s4, i2);
    const t7 = (await R(y2(s4)))[0];
    if (null == t7) throw g3;
    const r4 = "quantizationParameters" in e5 && ((_a = e5.quantizationParameters) == null ? void 0 : _a.tolerance) || "maxAllowableOffset" in e5 && e5.maxAllowableOffset || 0, o5 = r4 && w2(s4, i2) ? { densificationStep: 8 * r4 } : void 0, a2 = t7.toJSON(), m3 = j(a2, a2.spatialReference, i2, o5);
    if (!m3) throw g3;
    m3.spatialReference = i2, e5.geometry = m3;
  }
  return e5;
}
function w2(e5, t6) {
  if (!e5) return false;
  const r4 = e5.spatialReference;
  return (m(e5) || f(e5) || s2(e5)) && !G(r4, t6) && !J(r4, t6);
}
function x4(e5, t6) {
  const i2 = e5.spatialReference;
  return w2(e5, t6) && m(e5) ? { spatialReference: i2, rings: [[[e5.xmin, e5.ymin], [e5.xmin, e5.ymax], [e5.xmax, e5.ymax], [e5.xmax, e5.ymin], [e5.xmin, e5.ymin]]] } : e5;
}
async function d(e5) {
  const { distance: i2, units: r4 } = e5, n5 = e5.geometry;
  if (null == i2 || "vertexAttributes" in n5) return n5;
  const o4 = n5.spatialReference, s4 = r4 ? R2.fromJSON(r4) : X(o4), a2 = o4 && (A(o4) || w(o4)) ? n5 : await x3(o4, g).then(() => j(n5, g));
  return (await U2())(a2.spatialReference, a2, i2, s4);
}
async function U2() {
  return (await import("./geometryEngineJSON-2NHTEQ5O.js")).geodesicBuffer;
}

// ../node_modules/@arcgis/core/geometry/support/intersects.js
function s3(s4) {
  return "mesh" === s4 ? o : Z(s4);
}

// ../node_modules/@arcgis/core/layers/graphics/contains.js
function n2(n5, t6) {
  return n5 ? t6 ? 4 : 3 : t6 ? 3 : 2;
}
function t3(n5, t6, r4, e5) {
  return o2(n5, t6, r4, e5.coords[0], e5.coords[1]);
}
function r2(t6, r4, e5, c3, u4, f6) {
  const s4 = n2(u4, f6), { coords: i2, lengths: l4 } = c3;
  if (!l4) return false;
  for (let n5 = 0, d2 = 0; n5 < l4.length; n5++, d2 += s4) if (!o2(t6, r4, e5, i2[d2], i2[d2 + 1])) return false;
  return true;
}
function o2(t6, r4, o4, c3, u4) {
  if (!t6) return false;
  const f6 = n2(r4, o4), { coords: s4, lengths: i2 } = t6;
  let l4 = false, d2 = 0;
  for (const n5 of i2) l4 = e2(l4, s4, f6, d2, n5, c3, u4), d2 += n5 * f6;
  return l4;
}
function e2(n5, t6, r4, o4, e5, c3, u4) {
  let f6 = n5, s4 = o4;
  for (let i2 = o4, l4 = o4 + e5 * r4; i2 < l4; i2 += r4) {
    s4 = i2 + r4, s4 === l4 && (s4 = o4);
    const n6 = t6[i2], e6 = t6[i2 + 1], d2 = t6[s4], g5 = t6[s4 + 1];
    (e6 < u4 && g5 >= u4 || g5 < u4 && e6 >= u4) && n6 + (u4 - e6) / (g5 - e6) * (d2 - n6) < c3 && (f6 = !f6);
  }
  return f6;
}

// ../node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js
var f5 = "unsupported-query";
var R3 = { esriSpatialRelIntersects: "intersects", esriSpatialRelContains: "contains", esriSpatialRelCrosses: "crosses", esriSpatialRelDisjoint: "disjoint", esriSpatialRelEnvelopeIntersects: "intersects", esriSpatialRelIndexIntersects: null, esriSpatialRelOverlaps: "overlaps", esriSpatialRelTouches: "touches", esriSpatialRelWithin: "within", esriSpatialRelRelation: null };
var S2 = { spatialRelationship: { esriSpatialRelIntersects: true, esriSpatialRelContains: true, esriSpatialRelWithin: true, esriSpatialRelCrosses: true, esriSpatialRelDisjoint: true, esriSpatialRelTouches: true, esriSpatialRelOverlaps: true, esriSpatialRelEnvelopeIntersects: true, esriSpatialRelIndexIntersects: false, esriSpatialRelRelation: false }, queryGeometry: { esriGeometryPoint: true, esriGeometryMultipoint: true, esriGeometryPolyline: true, esriGeometryPolygon: true, esriGeometryEnvelope: true }, layerGeometry: { esriGeometryPoint: true, esriGeometryMultipoint: true, esriGeometryPolyline: true, esriGeometryPolygon: true, esriGeometryEnvelope: false } };
function G4(e5) {
  return null != e5 && true === S2.spatialRelationship[e5];
}
function g4(e5) {
  return null != e5 && true === S2.queryGeometry[p(e5)];
}
function j3(e5) {
  return null != e5 && true === S2.layerGeometry[e5];
}
function h4() {
  return import("./geometryEngineJSON-2NHTEQ5O.js");
}
function v(e5, n5, l4, c3, f6) {
  if (f(n5) && "esriGeometryPoint" === l4 && ("esriSpatialRelIntersects" === e5 || "esriSpatialRelContains" === e5)) {
    const e6 = K(new e(), n5, false, false);
    return Promise.resolve((r4) => t3(e6, false, false, r4));
  }
  if (f(n5) && "esriGeometryMultipoint" === l4) {
    const r4 = K(new e(), n5, false, false);
    if ("esriSpatialRelContains" === e5) return Promise.resolve((e6) => r2(r4, false, false, e6, c3, f6));
  }
  if (m(n5) && "esriGeometryPoint" === l4 && ("esriSpatialRelIntersects" === e5 || "esriSpatialRelContains" === e5)) return Promise.resolve((e6) => t(n5, a(l4, c3, f6, e6)));
  if (m(n5) && "esriGeometryMultipoint" === l4 && "esriSpatialRelContains" === e5) return Promise.resolve((e6) => r(n5, a(l4, c3, f6, e6)));
  if (m(n5) && "esriSpatialRelIntersects" === e5) {
    const e6 = s3(l4);
    return Promise.resolve((r4) => e6(n5, a(l4, c3, f6, r4)));
  }
  return h4().then((r4) => {
    const t6 = r4[R3[e5]].bind(null, n5.spatialReference, n5);
    return (e6) => t6(a(l4, c3, f6, e6));
  });
}
async function P(r4, t6, i2) {
  var _a;
  const { spatialRel: s4, geometry: o4 } = r4;
  if (o4) {
    if (!G4(s4)) throw new s(f5, "Unsupported query spatial relationship", { query: r4 });
    if (N(o4.spatialReference) && N(i2)) {
      if (!g4(o4)) throw new s(f5, "Unsupported query geometry type", { query: r4 });
      if (!j3(t6)) throw new s(f5, "Unsupported layer geometry type", { query: r4 });
      if (r4.outSR) return x3((_a = r4.geometry) == null ? void 0 : _a.spatialReference, r4.outSR);
    }
  }
}
function I(e5) {
  if (m(e5)) return true;
  if (f(e5)) {
    for (const r4 of e5.rings) {
      if (5 !== r4.length) return false;
      if (r4[0][0] !== r4[1][0] || r4[0][0] !== r4[4][0] || r4[2][0] !== r4[3][0] || r4[0][1] !== r4[3][1] || r4[0][1] !== r4[4][1] || r4[1][1] !== r4[2][1]) return false;
    }
    return true;
  }
  return false;
}

// ../node_modules/@arcgis/core/layers/graphics/data/timeSupport.js
async function n3(n5, t6) {
  if (!n5) return null;
  const l4 = t6.featureAdapter, { startTimeField: u4, endTimeField: e5 } = n5;
  let r4 = Number.POSITIVE_INFINITY, i2 = Number.NEGATIVE_INFINITY;
  if (u4 && e5) await t6.forEach((n6) => {
    const t7 = l4.getAttribute(n6, u4), o4 = l4.getAttribute(n6, e5);
    null == t7 || isNaN(t7) || (r4 = Math.min(r4, t7)), null == o4 || isNaN(o4) || (i2 = Math.max(i2, o4));
  });
  else {
    const n6 = u4 || e5;
    await t6.forEach((t7) => {
      const u5 = l4.getAttribute(t7, n6);
      null == u5 || isNaN(u5) || (r4 = Math.min(r4, u5), i2 = Math.max(i2, u5));
    });
  }
  return { start: r4, end: i2 };
}
function t4(n5, t6, r4) {
  var _a;
  if (!t6 || !n5) return null;
  const { startTimeField: i2, endTimeField: o4 } = n5;
  if (!i2 && !o4) return null;
  const { start: s4, end: a2 } = t6;
  if (null === s4 && null === a2) return null;
  if (void 0 === s4 && void 0 === a2) return e3();
  const c3 = ((_a = r4.getAttributeAsTimestamp) == null ? void 0 : _a.bind(r4)) ?? r4.getAttribute.bind(r4);
  return i2 && o4 ? l3(c3, i2, o4, s4, a2) : u2(c3, i2 || o4, s4, a2);
}
function l3(n5, t6, l4, u4, e5) {
  return null != u4 && null != e5 ? (r4) => {
    const i2 = n5(r4, t6), o4 = n5(r4, l4);
    return (null == i2 || i2 <= e5) && (null == o4 || o4 >= u4);
  } : null != u4 ? (t7) => {
    const e6 = n5(t7, l4);
    return null == e6 || e6 >= u4;
  } : null != e5 ? (l5) => {
    const u5 = n5(l5, t6);
    return null == u5 || u5 <= e5;
  } : void 0;
}
function u2(n5, t6, l4, u4) {
  return null != l4 && null != u4 && l4 === u4 ? (u5) => n5(u5, t6) === l4 : null != l4 && null != u4 ? (e5) => {
    const r4 = n5(e5, t6);
    return null != r4 && r4 >= l4 && r4 <= u4;
  } : null != l4 ? (u5) => {
    const e5 = n5(u5, t6);
    return null != e5 && e5 >= l4;
  } : null != u4 ? (l5) => {
    const e5 = n5(l5, t6);
    return null != e5 && e5 <= u4;
  } : void 0;
}
function e3() {
  return () => false;
}

// ../node_modules/@arcgis/core/layers/graphics/centroid.js
function t5(t6, n5) {
  return t6 ? n5 ? 4 : 3 : n5 ? 3 : 2;
}
function n4(n5, I3, u4, o4) {
  if (!(I3 == null ? void 0 : I3.lengths.length)) return null;
  n5.lengths.length && (n5.lengths.length = 0), n5.coords.length && (n5.coords.length = 0);
  const N4 = n5.coords, l4 = [], s4 = u4 ? [Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY] : [Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY], { lengths: c3, coords: T } = I3, f6 = t5(u4, o4);
  let h5 = 0;
  for (const t6 of c3) {
    const n6 = e4(s4, T, h5, t6, u4, o4);
    n6 && l4.push(n6), h5 += t6 * f6;
  }
  if (l4.sort((t6, n6) => {
    let e5 = t6[2] - n6[2];
    return 0 === e5 && u4 && (e5 = t6[4] - n6[4]), e5;
  }), l4.length) {
    let t6 = 6 * l4[0][2];
    N4[0] = l4[0][0] / t6, N4[1] = l4[0][1] / t6, u4 && (t6 = 6 * l4[0][4], N4[2] = 0 !== t6 ? l4[0][3] / t6 : 0), (N4[0] < s4[0] || N4[0] > s4[1] || N4[1] < s4[2] || N4[1] > s4[3] || u4 && (N4[2] < s4[4] || N4[2] > s4[5])) && (N4.length = 0);
  }
  if (!N4.length) {
    const t6 = I3.lengths[0] ? r3(T, 0, c3[0], u4, o4) : null;
    if (!t6) return null;
    N4[0] = t6[0], N4[1] = t6[1], u4 && t6.length > 2 && (N4[2] = t6[2]);
  }
  return n5;
}
function e4(n5, e5, r4, I3, u4, o4) {
  const N4 = t5(u4, o4);
  let l4 = r4, s4 = r4 + N4, c3 = 0, T = 0, f6 = 0, h5 = 0, i2 = 0;
  for (let t6 = 0, g5 = I3 - 1; t6 < g5; t6++, l4 += N4, s4 += N4) {
    const t7 = e5[l4], r5 = e5[l4 + 1], I4 = e5[l4 + 2], o5 = e5[s4], N5 = e5[s4 + 1], E2 = e5[s4 + 2];
    let g6 = t7 * N5 - o5 * r5;
    h5 += g6, c3 += (t7 + o5) * g6, T += (r5 + N5) * g6, u4 && (g6 = t7 * E2 - o5 * I4, f6 += (I4 + E2) * g6, i2 += g6), t7 < n5[0] && (n5[0] = t7), t7 > n5[1] && (n5[1] = t7), r5 < n5[2] && (n5[2] = r5), r5 > n5[3] && (n5[3] = r5), u4 && (I4 < n5[4] && (n5[4] = I4), I4 > n5[5] && (n5[5] = I4));
  }
  if (h5 > 0 && (h5 *= -1), i2 > 0 && (i2 *= -1), !h5) return null;
  const E = [c3, T, 0.5 * h5];
  return u4 && (E[3] = f6, E[4] = 0.5 * i2), E;
}
function r3(n5, e5, r4, l4, s4) {
  const c3 = t5(l4, s4);
  let T = e5, f6 = e5 + c3, h5 = 0, i2 = 0, E = 0, g5 = 0;
  for (let t6 = 0, b2 = r4 - 1; t6 < b2; t6++, T += c3, f6 += c3) {
    const t7 = n5[T], e6 = n5[T + 1], r5 = n5[T + 2], s5 = n5[f6], c4 = n5[f6 + 1], b3 = n5[f6 + 2], m3 = l4 ? u3(t7, e6, r5, s5, c4, b3) : I2(t7, e6, s5, c4);
    if (m3) if (h5 += m3, l4) {
      const n6 = N3(t7, e6, r5, s5, c4, b3);
      i2 += m3 * n6[0], E += m3 * n6[1], g5 += m3 * n6[2];
    } else {
      const n6 = o3(t7, e6, s5, c4);
      i2 += m3 * n6[0], E += m3 * n6[1];
    }
  }
  return h5 > 0 ? l4 ? [i2 / h5, E / h5, g5 / h5] : [i2 / h5, E / h5] : r4 > 0 ? l4 ? [n5[e5], n5[e5 + 1], n5[e5 + 2]] : [n5[e5], n5[e5 + 1]] : null;
}
function I2(t6, n5, e5, r4) {
  const I3 = e5 - t6, u4 = r4 - n5;
  return Math.sqrt(I3 * I3 + u4 * u4);
}
function u3(t6, n5, e5, r4, I3, u4) {
  const o4 = r4 - t6, N4 = I3 - n5, l4 = u4 - e5;
  return Math.sqrt(o4 * o4 + N4 * N4 + l4 * l4);
}
function o3(t6, n5, e5, r4) {
  return [t6 + 0.5 * (e5 - t6), n5 + 0.5 * (r4 - n5)];
}
function N3(t6, n5, e5, r4, I3, u4) {
  return [t6 + 0.5 * (r4 - t6), n5 + 0.5 * (I3 - n5), e5 + 0.5 * (u4 - e5)];
}

export {
  y4 as y,
  a,
  h2 as h,
  n4 as n,
  x3 as x,
  j,
  b,
  g3 as g,
  S,
  j2,
  v,
  P,
  I,
  n3 as n2,
  t4 as t
};
//# sourceMappingURL=chunk-5T4GYCDT.js.map
