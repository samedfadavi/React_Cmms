{
  "version": 3,
  "sources": ["../../../../node_modules/@arcgis/core/geometry/support/meshUtils/projection.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{hasScaling as r,deg2rad as t}from\"../../../core/mathUtils.js\";import{normalFromMat4 as o,fromMat4 as e}from\"../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as n}from\"../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{multiply as i,equals as c,invert as a}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as f,create as s}from\"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as l,n as m,e as u}from\"../../../chunks/vec32.js\";import{ZEROS as p,create as T}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{canProjectWithoutEngine as y}from\"../../projection.js\";import{getSphericalPCPF as A}from\"../../spatialReferenceEllipsoidUtils.js\";import{computeTranslationToOriginAndRotation as d}from\"../../projection/computeTranslationToOriginAndRotation.js\";import{projectBuffer as P}from\"../../projection/projectBuffer.js\";import{newDoubleArray as g,copyInto as j}from\"../DoubleArray.js\";import{earth as M}from\"../Ellipsoid.js\";import{isCGCS2000 as h,isMars as N,isMoon as R}from\"../spatialReferenceUtils.js\";import{y2lat as O}from\"../webMercatorUtils.js\";import{BufferViewVec3f as F,BufferViewVec3f64 as E}from\"../buffer/BufferView.js\";import{t as _,n as b,a as x}from\"../../../chunks/vec3.js\";import{t as C}from\"../../../chunks/vec4.js\";const L=\"Projection may be possible after calling projection.load().\";function S(r,t,o,e){r.error(`Failed to project from (wkid:${t.wkid}) to (wkid:${o.wkid}).${e?\" \":\"\"}${e}`)}function v(r,t,o,e,n){return I(z.TO_PCPF,F.fromTypedArray(r),D.NORMAL,E.fromTypedArray(t),E.fromTypedArray(o),e,F.fromTypedArray(n))?n:null}function k(r,t,o,e,n){return I(z.FROM_PCPF,F.fromTypedArray(r),D.NORMAL,E.fromTypedArray(t),E.fromTypedArray(o),e,F.fromTypedArray(n))?n:null}function w(r,t,o){return P(r,t,0,o,A(t),0,r.length/3)?o:null}function G(r,t,o){return P(r,A(o),0,t,o,0,r.length/3)?t:null}function V(t,e,n){return o(or,n),_(e,t,or),r(or)&&b(e,e),e}function B(t,o,n){return e(or,n),C(o,t,or),r(or)&&b(o,o,4),o}function U(r,o,e,n){const i=o===D.NORMAL;return W(r,o,e,((r,o)=>{const e=Math.cos(t(r));o[0]=i?e:1/e,o[1]=1}),n)}function $(r,t,o,e){const n=t===D.NORMAL;return W(r,t,o,((r,t)=>{const o=Math.cosh(-r/M.radius);t[0]=1,t[1]=n?o:1/o}),e)}function W(r,t,o,e,n){const i=t===D.NORMAL?3:4,c=[0,0];for(let a=0,f=1;a<r.length;a+=i,f+=3){e(o[f],c);const t=r[a]*c[0],s=r[a+1]*c[1],l=r[a+2],m=1/Math.sqrt(t*t+s*s+l*l);n[a]=t*m,n[a+1]=s*m,n[a+2]=l*m,4===i&&(n[a+3]=r[a+3])}return n}function Y(r,t,o,e,n){if(!I(z.TO_PCPF,F.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),D.TANGENT,E.fromTypedArray(t),E.fromTypedArray(o),e,F.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let i=3;i<r.length;i+=4)n[i]=r[i];return n}function q(r,t,o,e,n){if(!I(z.FROM_PCPF,F.fromTypedArray(r,16),D.TANGENT,E.fromTypedArray(t),E.fromTypedArray(o),e,F.fromTypedArray(n,16)))return null;for(let i=3;i<r.length;i+=4)n[i]=r[i];return n}var D,z;function H(r,t,n,i,c){switch(d(i,n,tr,i),r===z.FROM_PCPF&&a(tr,tr),t){case D.NORMAL:return o(c,tr);case D.TANGENT:return e(c,tr)}}function I(r,t,o,e,n,i,c){if(!t)return;const a=e.count,f=A(i);if(X(i))for(let s=0;s<a;s++)n.getVec(s,Z),t.getVec(s,rr),l(rr,rr,H(r,o,Z,f,or)),c.setVec(s,rr);else for(let s=0;s<a;s++){n.getVec(s,Z),t.getVec(s,rr);const i=O(e.get(s,1));let a=Math.cos(i);o===D.TANGENT!=(r===z.TO_PCPF)&&(a=1/a),H(r,o,Z,f,or),r===z.TO_PCPF?(or[0]*=a,or[1]*=a,or[2]*=a,or[3]*=a,or[4]*=a,or[5]*=a):(or[0]*=a,or[3]*=a,or[6]*=a,or[1]*=a,or[4]*=a,or[7]*=a),l(rr,rr,or),m(rr,rr),c.setVec(s,rr)}return c}function J(r){return\"local\"===r.vertexSpace.type?K(r):Q(r)}function K({vertexSpace:r,transform:t,inSpatialReference:o,outSpatialReference:e,localMode:n,outPositions:c,positions:a}){const s=r.origin??p,l=null!=r.origin?t?.localMatrix??f:f,m=A(o),u=e.isWebMercator&&n||!y(o,m)?o:m;d(o,s,tr,u),i(tr,tr,l);const T=c??g(a.length);return x(T,a,tr),P(T,u,0,T,e,0,T.length/3),T}function Q({vertexSpace:r,transform:t,outPositions:o,positions:e,inSpatialReference:n,outSpatialReference:i}){const a=null!=r.origin?t?.localMatrix??f:f,s=o??g(e.length);c(a,f)?j(s,e):x(s,e,a);const l=r.origin??p;if(!u(l,p)){const[r,t,o]=l;for(let e=0;e<s.length;e+=3)s[e]+=r,s[e+1]+=t,s[e+2]+=o}return P(s,n,0,s,i,0,s.length/3)?s:null}function X(r){return r.isWGS84||h(r)||N(r)||R(r)}!function(r){r[r.NORMAL=0]=\"NORMAL\",r[r.TANGENT=1]=\"TANGENT\"}(D||(D={})),function(r){r[r.TO_PCPF=0]=\"TO_PCPF\",r[r.FROM_PCPF=1]=\"FROM_PCPF\"}(z||(z={}));const Z=T(),rr=T(),tr=s(),or=n();export{D as VectorType,L as loadProjectErrorMessage,S as logProjectionError,J as project,G as projectFromPCPF,k as projectNormalFromPCPF,v as projectNormalToPCPF,q as projectTangentFromPCPF,Y as projectTangentToPCPF,w as projectToPCPF,V as transformNormal,B as transformTangent,U as transformVectorENUPlateCarree,$ as transformVectorWMPlateCarree};\n"],
  "mappings": "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",
  "names": ["S", "t", "o", "e", "n", "z", "k", "G", "f", "l", "i", "r", "c", "a", "s", "h", "J", "u", "T"]
}
