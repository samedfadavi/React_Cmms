import {
  $
} from "./chunk-FHB57LTD.js";
import {
  N
} from "./chunk-PM3JMBUP.js";
import {
  i,
  o
} from "./chunk-4CS2XXGQ.js";
import "./chunk-XOGASIUG.js";
import "./chunk-PO74HSB6.js";
import "./chunk-U4K563LI.js";
import {
  s
} from "./chunk-RMOPI4S6.js";
import "./chunk-GRVB2MLZ.js";
import "./chunk-5BIU5HC2.js";
import "./chunk-4K57JS64.js";
import "./chunk-DOINOMWZ.js";
import "./chunk-NSJBY6SI.js";
import "./chunk-KWTQCB43.js";
import "./chunk-OUWBUGHV.js";
import "./chunk-3ZIQJRQY.js";
import "./chunk-GE4FYJHC.js";
import "./chunk-MKSCPZ7O.js";
import "./chunk-UPW2DNCP.js";
import "./chunk-6KYG4MCU.js";
import "./chunk-LSYTXHXV.js";
import "./chunk-VJBBHRSD.js";
import "./chunk-D7WIM7VD.js";
import "./chunk-XIC3SN6R.js";
import "./chunk-WX4IZMIC.js";
import "./chunk-T5CIHLIU.js";
import "./chunk-XXTMACWZ.js";
import "./chunk-YH5YACEX.js";
import "./chunk-TNRF7MOE.js";
import "./chunk-PNPG5IXD.js";
import "./chunk-CYGO6TZX.js";
import {
  d
} from "./chunk-647CGSDX.js";
import "./chunk-NREDFKHH.js";
import "./chunk-DCOKV3EO.js";
import "./chunk-TXIL3QUC.js";
import "./chunk-2ASAB4KA.js";
import "./chunk-T4EIRKFE.js";
import "./chunk-RTULPMO3.js";
import "./chunk-AJ6PR43V.js";
import "./chunk-6LV4OO46.js";
import "./chunk-JQIB7GFW.js";
import {
  d as d2
} from "./chunk-CJJCN7PA.js";
import "./chunk-IJUFAIOF.js";
import "./chunk-MNMU4ARP.js";
import "./chunk-7OW2VNCC.js";
import "./chunk-AFBYZF6Q.js";
import "./chunk-IJ42YN7D.js";
import "./chunk-4AGGGL2W.js";
import "./chunk-FJPG3YI6.js";
import "./chunk-BJHLU2MM.js";
import "./chunk-E5KBRIJQ.js";
import "./chunk-Z32PAECZ.js";
import "./chunk-TW7VY7XV.js";
import "./chunk-CAC7FEOV.js";
import "./chunk-KK4UI5LV.js";
import "./chunk-BL2UGYYZ.js";
import "./chunk-Q4D7WYWB.js";
import "./chunk-NYWHVRZC.js";
import "./chunk-ZH4RVBER.js";
import "./chunk-UGXIDNPX.js";
import "./chunk-FADA7L64.js";
import "./chunk-YTTIKQNA.js";
import "./chunk-PNUUOKAJ.js";
import "./chunk-7PMYO342.js";
import "./chunk-4K4GIBGP.js";
import "./chunk-WMMHQ2SA.js";
import "./chunk-AZ7WOCBW.js";
import "./chunk-3DBICPHD.js";
import "./chunk-7R5XEKR3.js";
import "./chunk-ZK4LSXOH.js";
import "./chunk-XFBTC3BA.js";
import "./chunk-XFU3BDEI.js";
import "./chunk-IZXTMJPP.js";
import "./chunk-5MMVRBZL.js";
import "./chunk-RS5OZZZ5.js";
import "./chunk-VRHSV3YE.js";
import "./chunk-OVORXUCO.js";
import "./chunk-WLUQPLAY.js";
import "./chunk-BTSZKQPH.js";
import "./chunk-AL3F322A.js";
import "./chunk-6N5YXCNN.js";
import "./chunk-MJ2NSPP7.js";
import "./chunk-6YSPJNLC.js";
import {
  _,
  w
} from "./chunk-66KCMKB5.js";
import "./chunk-ZART2Y5J.js";
import {
  f
} from "./chunk-F4OBDVPS.js";
import "./chunk-X3IFQMC4.js";
import "./chunk-4ZEH5SNV.js";
import "./chunk-Z6R2SP3D.js";
import "./chunk-K4UOG562.js";
import "./chunk-WC4SPMPL.js";
import "./chunk-TJUEGVVG.js";
import "./chunk-FXNOKZ3B.js";
import {
  r
} from "./chunk-GEH2VXFC.js";
import "./chunk-BJY5ADVY.js";
import "./chunk-VMWKLHJD.js";
import "./chunk-5AEITAWU.js";
import "./chunk-G36SOMYZ.js";
import {
  n2 as n
} from "./chunk-YNL57W4I.js";
import "./chunk-2PA5UPTB.js";
import "./chunk-XZXEUADC.js";

// ../node_modules/@arcgis/core/rest/support/meshFeatureSet.js
var m = () => n.getLogger("esri.rest.support.meshFeatureSet");
function p(t, r2, o2) {
  const n2 = o2.features;
  o2.features = [], delete o2.geometryType;
  const s2 = d.fromJSON(o2);
  if (s2.geometryType = "mesh", !o2.assetMaps) return s2;
  const i2 = d3(r2, o2.assetMaps), u = t.sourceSpatialReference ?? f.WGS84, f2 = o2.globalIdFieldName, { outFields: c } = t, m2 = null != c && c.length > 0 ? g(c.includes("*") ? null : new Set(c)) : () => ({});
  for (const a of n2) {
    const t2 = y(a, f2, u, r2, i2);
    s2.features.push(new d2({ geometry: t2, attributes: m2(a) }));
  }
  return s2;
}
function g(e) {
  return ({ attributes: t }) => {
    if (!t) return {};
    if (!e) return t;
    for (const r2 in t) e.has(r2) || delete t[r2];
    return t;
  };
}
function y(e, t, r2, s2, a) {
  const i2 = e.attributes[t], u = a.get(i2);
  if (null == u || !e.geometry) return null;
  const f2 = E(e, r2, s2), c = w.fromJSON(e.geometry);
  c.spatialReference = r2;
  const l = h(e.attributes, s2), m2 = r2.isGeographic ? "local" : "georeferenced", p2 = D(u);
  return p2 ? $.createWithExternalSource(f2, p2, { extent: c, transform: l, vertexSpace: m2 }) : $.createIncomplete(f2, { extent: c, transform: l, vertexSpace: m2 });
}
function E({ attributes: e }, t, { transformFieldRoles: r2 }) {
  const o2 = e[r2.originX], n2 = e[r2.originY], a = e[r2.originZ];
  return new _({ x: o2, y: n2, z: a, spatialReference: t });
}
function h(e, { transformFieldRoles: t }) {
  return new N({ translation: [e[t.translationX], -e[t.translationZ], e[t.translationY]], rotationAxis: [e[t.rotationX], -e[t.rotationZ], e[t.rotationY]], rotationAngle: e[t.rotationDeg], scale: [e[t.scaleX], e[t.scaleZ], e[t.scaleY]] });
}
var S;
function d3(e, t) {
  const o2 = /* @__PURE__ */ new Map();
  for (const n2 of t) {
    const t2 = n2.parentGlobalId;
    if (null == t2) continue;
    const s2 = n2.assetName, a = n2.assetType, i2 = n2.assetHash, u = n2.assetURL, f2 = n2.conversionStatus, l = n2.seqNo, p2 = s(a, e.supportedFormats);
    if (!p2) {
      m().error("mesh-feature-set:unknown-format", `Service returned an asset of type ${a}, but it does not list it as a supported type`);
      continue;
    }
    const g2 = r(o2, t2, () => ({ files: /* @__PURE__ */ new Map() }));
    r(g2.files, s2, () => ({ name: s2, type: a, mimeType: p2, status: M(f2), parts: [] })).parts[l] = { hash: i2, url: u };
  }
  return o2;
}
function D(e) {
  const t = Array.from(e.files.values()), r2 = new Array();
  for (const o2 of t) {
    if (o2.status !== S.COMPLETED) return null;
    const e2 = new Array();
    for (const t2 of o2.parts) {
      if (!t2) return null;
      e2.push(new o(t2.url, t2.hash));
    }
    r2.push(new i(o2.name, o2.mimeType, e2));
  }
  return r2;
}
function M(e) {
  switch (e) {
    case "COMPLETED":
    case "SUBMITTED":
      return S.COMPLETED;
    case "INPROGRESS":
      return S.PENDING;
    default:
      return S.FAILED;
  }
}
!function(e) {
  e[e.FAILED = 0] = "FAILED", e[e.PENDING = 1] = "PENDING", e[e.COMPLETED = 2] = "COMPLETED";
}(S || (S = {}));
export {
  d3 as assetMapFromAssetMapsJSON,
  y as extractMesh,
  p as meshFeatureSetFromJSON
};
//# sourceMappingURL=meshFeatureSet-LX6IBTPY.js.map
