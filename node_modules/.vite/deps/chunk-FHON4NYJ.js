import {
  I,
  j
} from "./chunk-CAC7FEOV.js";

// ../node_modules/@arcgis/core/views/layers/support/popupUtils.js
async function n(n2, p2 = n2.popupTemplate) {
  var _a, _b;
  if (null == p2) return [];
  const u = await p2.getRequiredFields(n2.fieldsIndex), { lastEditInfoEnabled: t } = p2, { objectIdField: d, typeIdField: s, globalIdField: i, relationships: a } = n2;
  if (u.includes("*")) return ["*"];
  const o = t ? j(n2) : [], f = I(n2.fieldsIndex, [...u, ...o]);
  return s && f.push(s), f && d && ((_a = n2.fieldsIndex) == null ? void 0 : _a.has(d)) && !f.includes(d) && f.push(d), f && i && ((_b = n2.fieldsIndex) == null ? void 0 : _b.has(i)) && !f.includes(i) && f.push(i), a && a.forEach((e) => {
    var _a2;
    const { keyField: l } = e;
    f && l && ((_a2 = n2.fieldsIndex) == null ? void 0 : _a2.has(l)) && !f.includes(l) && f.push(l);
  }), f;
}
function p(e, l) {
  return e.popupTemplate ? e.popupTemplate : null != l && l.defaultPopupTemplateEnabled && null != e.defaultPopupTemplate ? e.defaultPopupTemplate : null;
}

export {
  n,
  p
};
//# sourceMappingURL=chunk-FHON4NYJ.js.map
