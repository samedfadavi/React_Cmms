{
  "version": 3,
  "sources": ["../../../../node_modules/@arcgis/core/layers/support/rasterTransforms/IdentityTransform.js", "../../../../node_modules/@arcgis/core/layers/support/rasterTransforms/utils.js", "../../../../node_modules/@arcgis/core/layers/support/RasterWorker.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/Error.js\";import{enumeration as o}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"./BaseRasterTransform.js\";var e;let a=e=class extends t{constructor(){super(...arguments),this.type=\"identity\"}clone(){return new e}};r([o({IdentityXform:\"identity\"})],a.prototype,\"type\",void 0),a=e=r([s(\"esri.layers.support.rasterTransforms.IdentityTransform\")],a);const p=a;export{p as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport r from\"./GCSShiftTransform.js\";import t from\"./IdentityTransform.js\";import n from\"./PolynomialTransform.js\";const o={GCSShiftXform:r,IdentityXform:t,PolynomialXform:n},e=Object.keys(o);function f(r){const t=r?.type;return!r||e.includes(t)}function i(r){const t=r?.type;if(!t)return null;const n=o[r?.type];if(n){const t=new n;return t.read(r),t}return null}export{f as isTransformSupported,i as readTransform};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import r from\"../../geometry/support/GeographicTransformation.js\";import e from\"./PixelBlock.js\";import{decode as t}from\"./rasterFormats/RasterCodec.js\";import{split as s,clipTile as o,mosaic as i,approximateTransform as n,getLocalArithmeticNorthRotations as a}from\"./rasterFunctions/pixelUtils.js\";import{create as l}from\"./rasterFunctions/rasterFunctionHelper.js\";import{requirePE as m,load as c,getProjectionOffsetGrid as f}from\"./rasterFunctions/rasterProjectionHelper.js\";import{computeStatisticsHistograms as p,estimateStatisticsHistograms as u}from\"./rasterFunctions/stretchUtils.js\";import{convertVectorFieldData as S,convertToLocalDirections as d}from\"./rasterFunctions/vectorFieldUtils.js\";import{readTransform as x}from\"./rasterTransforms/utils.js\";import y from\"../../renderers/support/RasterSymbolizer.js\";import{createFlowMesh as O}from\"../../views/2d/engine/flow/dataUtils.js\";import h from\"../../geometry/Extent.js\";import N from\"../../geometry/Point.js\";class J{convertVectorFieldData(r){const t=e.fromJSON(r.pixelBlock),s=S(t,r.type);return Promise.resolve(null!=s?s.toJSON():null)}computeStatisticsHistograms(r){const t=e.fromJSON(r.pixelBlock),s=p(t);return Promise.resolve(s)}async decode(r){const e=await t(r.data,r.options);return e&&e.toJSON()}symbolize(r){r.pixelBlock=e.fromJSON(r.pixelBlock),r.extent=r.extent?h.fromJSON(r.extent):null;const t=this.symbolizer.symbolize(r);return Promise.resolve(null!=t?t.toJSON():null)}async updateSymbolizer(r){this.symbolizer=y.fromJSON(r.symbolizerJSON),r.histograms&&\"rasterStretch\"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=r.histograms)}async updateRasterFunction(r){this.rasterFunction=l(r.rasterFunctionJSON)}async process(r){const t=this.rasterFunction.process({extent:h.fromJSON(r.extent),primaryPixelBlocks:r.primaryPixelBlocks.map((r=>null!=r?e.fromJSON(r):null)),primaryPixelSizes:r.primaryPixelSizes?.map((r=>null!=r?N.fromJSON(r):null)),primaryRasterIds:r.primaryRasterIds});return null!=t?t.toJSON():null}stretch(r){const t=this.symbolizer.simpleStretch(e.fromJSON(r.srcPixelBlock),r.stretchParams);return Promise.resolve(t?.toJSON())}estimateStatisticsHistograms(r){const t=u(e.fromJSON(r.srcPixelBlock));return Promise.resolve(t)}split(r){const t=s(e.fromJSON(r.srcPixelBlock),r.tileSize,r.maximumPyramidLevel??0,!1===r.useBilinear);return t&&t.forEach(((r,e)=>{t.set(e,r?.toJSON())})),Promise.resolve(t)}clipTile(r){const t=e.fromJSON(r.pixelBlock),s=o({...r,pixelBlock:t});return Promise.resolve(s?.toJSON())}async mosaicAndTransform(r){const t=r.srcPixelBlocks.map((r=>r?new e(r):null)),s=i(t,r.srcMosaicSize,{blockWidths:r.blockWidths,alignmentInfo:r.alignmentInfo,clipOffset:r.clipOffset,clipSize:r.clipSize});let o,l=s;return r.coefs&&(l=n(s,r.destDimension,r.coefs,r.sampleSpacing,r.interpolation)),r.projectDirections&&r.gcsGrid&&(o=a(r.destDimension,r.gcsGrid),l=d(l,r.isUV?\"vector-uv\":\"vector-magdir\",o)),{pixelBlock:l?.toJSON(),localNorthDirections:o}}async createFlowMesh(r,e){const t={data:new Float32Array(r.flowData.buffer),mask:new Uint8Array(r.flowData.maskBuffer),width:r.flowData.width,height:r.flowData.height},{vertexData:s,indexData:o}=await O(r.meshType,r.simulationSettings,t,e.signal);return{result:{vertexBuffer:s.buffer,indexBuffer:o.buffer},transferList:[s.buffer,o.buffer]}}async getProjectionOffsetGrid(e){const t=h.fromJSON(e.projectedExtent),s=h.fromJSON(e.srcBufferExtent);let o=null;e.datumTransformationSteps&&(o=new r({steps:e.datumTransformationSteps})),(e.includeGCSGrid||m(t.spatialReference,s.spatialReference,o))&&await c();const i=e.rasterTransform?x(e.rasterTransform):null;return f({...e,projectedExtent:t,srcBufferExtent:s,datumTransformation:o,rasterTransform:i})}}export{J as default};\n"],
  "mappings": "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",
  "names": ["e", "a", "o", "e", "o", "t", "s", "e", "r", "o", "i"]
}
