import {
  Z2 as Z,
  c as c2,
  m as m2,
  r as r4,
  x,
  y as y2,
  y2 as y3
} from "./chunk-SG6UMYIZ.js";
import {
  l
} from "./chunk-FPRNSQ4P.js";
import {
  t as t2
} from "./chunk-BCJB3EA6.js";
import {
  N
} from "./chunk-7OXDVEBM.js";
import {
  B2 as B,
  E2 as E,
  Fe,
  He,
  Me,
  Ne,
  Oe,
  P,
  Q,
  U as U2,
  X,
  Ze,
  a as a2,
  ae,
  ee,
  ge,
  me,
  r as r3,
  te,
  xe
} from "./chunk-YTRTOAGA.js";
import {
  A,
  B as B2,
  C as C2,
  D,
  E as E2,
  F,
  H,
  J,
  K,
  L,
  M,
  N as N2,
  O,
  P as P2,
  R,
  S,
  T,
  U as U3,
  V,
  W as W2,
  b,
  d,
  g,
  h,
  j as j2,
  k,
  m as m3,
  p,
  v,
  w as w2,
  x as x2,
  y as y4
} from "./chunk-C23B3UIJ.js";
import {
  a,
  c,
  r as r2
} from "./chunk-OBN3TJ5S.js";
import {
  y
} from "./chunk-ZH4RVBER.js";
import {
  C
} from "./chunk-FADA7L64.js";
import {
  m,
  u
} from "./chunk-RS5OZZZ5.js";
import {
  j
} from "./chunk-VRHSV3YE.js";
import {
  _,
  n,
  w
} from "./chunk-66KCMKB5.js";
import {
  W2 as W
} from "./chunk-X3IFQMC4.js";
import {
  U,
  r2 as r,
  t2 as t
} from "./chunk-WC4SPMPL.js";

// ../node_modules/@arcgis/core/portal/support/utils.js
async function n2(n3, t3, s) {
  var _a, _b;
  const u2 = (_a = t) == null ? void 0 : _a.findCredential(n3.restUrl);
  if (!u2) return null;
  if ("loaded" === n3.loadStatus && "" === t3 && ((_b = n3.user) == null ? void 0 : _b.sourceJSON) && false === s) return n3.user.sourceJSON;
  const o = { responseType: "json", query: { f: "json" } };
  if (s && (o.query.returnUserLicenseTypeExtensions = true), "" === t3) {
    const e = await U(n3.restUrl + "/community/self", o);
    if (e.data) {
      const r5 = e.data;
      if (r5 == null ? void 0 : r5.username) return r5;
    }
    return null;
  }
  const i = await U(n3.restUrl + "/community/users/" + t3, o);
  if (i.data) {
    const e = i.data;
    return e.error ? null : e;
  }
  return null;
}

// ../node_modules/@arcgis/core/arcade/functions/geomasync.js
function Fn(t3) {
  return 0 === r.indexOf("4.") ? j.fromExtent(t3) : new j({ spatialReference: t3.spatialReference, rings: [[[t3.xmin, t3.ymin], [t3.xmin, t3.ymax], [t3.xmax, t3.ymax], [t3.xmax, t3.ymin], [t3.xmin, t3.ymin]]] });
}
function Rn(n3, t3, e) {
  if (ae(n3, 2, 2, t3, e), n3[0] instanceof n && n3[1] instanceof n) ;
  else if (n3[0] instanceof n && null === n3[1]) ;
  else if (n3[1] instanceof n && null === n3[0]) ;
  else if (null !== n3[0] || null !== n3[1]) throw new a2(t3, r3.InvalidParameter, e);
}
async function jn(n3, t3) {
  if ("polygon" !== n3.type && "polyline" !== n3.type && "extent" !== n3.type) return 0;
  let e = 1;
  if (n3.spatialReference.vcsWkid || n3.spatialReference.latestVcsWkid) {
    e = c2(n3.spatialReference) / W(n3.spatialReference);
  }
  let r5 = 0;
  if ("polyline" === n3.type) for (const a3 of n3.paths) for (let n4 = 1; n4 < a3.length; n4++) r5 += r4(a3[n4], a3[n4 - 1], e);
  else if ("polygon" === n3.type) for (const a3 of n3.rings) {
    for (let n4 = 1; n4 < a3.length; n4++) r5 += r4(a3[n4], a3[n4 - 1], e);
    (a3[0][0] !== a3[a3.length - 1][0] || a3[0][1] !== a3[a3.length - 1][1] || void 0 !== a3[0][2] && a3[0][2] !== a3[a3.length - 1][2]) && (r5 += r4(a3[0], a3[a3.length - 1], e));
  }
  else "extent" === n3.type && (r5 += 2 * r4([n3.xmin, n3.ymin, 0], [n3.xmax, n3.ymin, 0], e), r5 += 2 * r4([n3.xmin, n3.ymin, 0], [n3.xmin, n3.ymax, 0], e), r5 *= 2, r5 += 4 * Math.abs(P(n3.zmax, 0) * e - P(n3.zmin, 0) * e));
  const i = new m({ hasZ: false, hasM: false, spatialReference: n3.spatialReference, paths: [[0, 0], [0, r5]] });
  return F(i, t3);
}
function xn(n3) {
  "async" === n3.mode && (n3.functions.disjoint = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null === i[0] || null === i[1] || A(i[0], i[1])));
  }, n3.functions.intersects = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null !== i[0] && null !== i[1] && h(i[0], i[1])));
  }, n3.functions.touches = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null !== i[0] && null !== i[1] && S(i[0], i[1])));
  }, n3.functions.crosses = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null !== i[0] && null !== i[1] && m3(i[0], i[1])));
  }, n3.functions.within = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null !== i[0] && null !== i[1] && x2(i[0], i[1])));
  }, n3.functions.contains = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null !== i[0] && null !== i[1] && p(i[0], i[1])));
  }, n3.functions.overlaps = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null !== i[0] && null !== i[1] && O(i[0], i[1])));
  }, n3.functions.equals = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (ae(i, 2, 2, t3, e), i[0] === i[1] || (i[0] instanceof n && i[1] instanceof n ? g(i[0], i[1]) : (X(i[0]) && X(i[1]) || !!(te(i[0]) && te(i[1]) || ee(i[0]) && ee(i[1]))) && i[0].equals(i[1]))));
  }, n3.functions.relate = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 3, 3, t3, e), o[0] instanceof n && o[1] instanceof n) return R(o[0], o[1], me(o[2]));
      if (o[0] instanceof n && null === o[1]) return false;
      if (o[1] instanceof n && null === o[0]) return false;
      if (null === o[0] && null === o[1]) return false;
      throw new a2(t3, r3.InvalidParameter, e);
    });
  }, n3.functions.intersection = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null === i[0] || null === i[1] ? null : D(i[0], i[1])));
  }, n3.functions.union = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, o, l2) => {
      const u2 = [];
      if (0 === (l2 = Fe(l2)).length) throw new a2(t3, r3.WrongNumberOfParameters, e);
      if (1 === l2.length) if (U2(l2[0])) {
        const n5 = Fe(l2[0]);
        for (let a3 = 0; a3 < n5.length; a3++) if (null !== n5[a3]) {
          if (!(n5[a3] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
          u2.push(n5[a3]);
        }
      } else {
        if (!Q(l2[0])) {
          if (l2[0] instanceof n) return Ze(c(l2[0]), t3.spatialReference);
          if (null === l2[0]) return null;
          throw new a2(t3, r3.InvalidParameter, e);
        }
        {
          const n5 = Fe(l2[0].toArray());
          for (let a3 = 0; a3 < n5.length; a3++) if (null !== n5[a3]) {
            if (!(n5[a3] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
            u2.push(n5[a3]);
          }
        }
      }
      else for (let a3 = 0; a3 < l2.length; a3++) if (null !== l2[a3]) {
        if (!(l2[a3] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
        u2.push(l2[a3]);
      }
      return 0 === u2.length ? null : b(u2);
    });
  }, n3.functions.difference = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null === i[0] ? null : null === i[1] ? c(i[0]) : E2(i[0], i[1])));
  }, n3.functions.symmetricdifference = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, r5, i) => (Rn(i = Fe(i), t3, e), null === i[0] && null === i[1] ? null : null === i[0] ? c(i[1]) : null === i[1] ? c(i[0]) : k(i[0], i[1])));
  }, n3.functions.clip = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 2, 2, t3, e), !(o[1] instanceof w) && null !== o[1]) throw new a2(t3, r3.InvalidParameter, e);
      if (null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return null === o[1] ? null : y4(o[0], o[1]);
    });
  }, n3.functions.cut = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, o, l2) => {
      if (l2 = Fe(l2), ae(l2, 2, 2, t3, e), !(l2[1] instanceof m) && null !== l2[1]) throw new a2(t3, r3.InvalidParameter, e);
      if (null === l2[0]) return [];
      if (!(l2[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return null === l2[1] ? [c(l2[0])] : w2(l2[0], l2[1]);
    });
  }, n3.functions.area = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, async (n4, a3, l2) => {
      if (ae(l2, 1, 2, t3, e), null === (l2 = Fe(l2))[0]) return 0;
      if (B(l2[0])) {
        const n5 = await l2[0].sumArea(r2(P(l2[1], -1)), false, t3.abortSignal);
        if (t3.abortSignal.aborted) throw new a2(t3, r3.Cancelled, e);
        return n5;
      }
      if (U2(l2[0]) || Q(l2[0])) {
        const n5 = xe(l2[0], t3.spatialReference);
        return null === n5 ? 0 : W2(n5, r2(P(l2[1], -1)));
      }
      if (!(l2[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return W2(l2[0], r2(P(l2[1], -1)));
    });
  }, n3.functions.areageodetic = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, async (n4, a3, l2) => {
      if (ae(l2, 1, 2, t3, e), null === (l2 = Fe(l2))[0]) return 0;
      if (B(l2[0])) {
        const n5 = await l2[0].sumArea(r2(P(l2[1], -1)), true, t3.abortSignal);
        if (t3.abortSignal.aborted) throw new a2(t3, r3.Cancelled, e);
        return n5;
      }
      if (U2(l2[0]) || Q(l2[0])) {
        const n5 = xe(l2[0], t3.spatialReference);
        return null === n5 ? 0 : K(n5, r2(P(l2[1], -1)));
      }
      if (!(l2[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return K(l2[0], r2(P(l2[1], -1)));
    });
  }, n3.functions.length = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, async (n4, a3, o) => {
      if (ae(o, 1, 2, t3, e), null === (o = Fe(o))[0]) return 0;
      if (B(o[0])) {
        const n5 = await o[0].sumLength(a(P(o[1], -1)), false, t3.abortSignal);
        if (t3.abortSignal.aborted) throw new a2(t3, r3.Cancelled, e);
        return n5;
      }
      if (U2(o[0]) || Q(o[0])) {
        const n5 = Me(o[0], t3.spatialReference);
        return null === n5 ? 0 : F(n5, a(P(o[1], -1)));
      }
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return F(o[0], a(P(o[1], -1)));
    });
  }, n3.functions.length3d = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (ae(o, 1, 2, t3, e), null === (o = Fe(o))[0]) return 0;
      if (U2(o[0]) || Q(o[0])) {
        const n5 = Me(o[0], t3.spatialReference);
        return null === n5 ? 0 : true === n5.hasZ ? jn(n5, a(P(o[1], -1))) : F(n5, a(P(o[1], -1)));
      }
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return true === o[0].hasZ ? jn(o[0], a(P(o[1], -1))) : F(o[0], a(P(o[1], -1)));
    });
  }, n3.functions.lengthgeodetic = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, async (n4, a3, o) => {
      if (ae(o, 1, 2, t3, e), null === (o = Fe(o))[0]) return 0;
      if (B(o[0])) {
        const n5 = await o[0].sumLength(a(P(o[1], -1)), true, t3.abortSignal);
        if (t3.abortSignal.aborted) throw new a2(t3, r3.Cancelled, e);
        return n5;
      }
      if (U2(o[0]) || Q(o[0])) {
        const n5 = Me(o[0], t3.spatialReference);
        return null === n5 ? 0 : M(n5, a(P(o[1], -1)));
      }
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return M(o[0], a(P(o[1], -1)));
    });
  }, n3.functions.distance = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      o = Fe(o), ae(o, 2, 3, t3, e);
      let c3 = o[0];
      (U2(o[0]) || Q(o[0])) && (c3 = Oe(o[0], t3.spatialReference));
      let f = o[1];
      if ((U2(o[1]) || Q(o[1])) && (f = Oe(o[1], t3.spatialReference)), !(c3 instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      if (!(f instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return d(c3, f, a(P(o[2], -1)));
    });
  }, n3.functions.distancegeodetic = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      o = Fe(o), ae(o, 2, 3, t3, e);
      const c3 = o[0], f = o[1];
      if (!(c3 instanceof _)) throw new a2(t3, r3.InvalidParameter, e);
      if (!(f instanceof _)) throw new a2(t3, r3.InvalidParameter, e);
      const d2 = new m({ paths: [], spatialReference: c3.spatialReference });
      return d2.addPath([c3, f]), M(d2, a(P(o[2], -1)));
    });
  }, n3.functions.densify = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 2, 3, t3, e), null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      const c3 = ge(o[1]);
      if (isNaN(c3)) throw new a2(t3, r3.InvalidParameter, e);
      if (c3 <= 0) throw new a2(t3, r3.InvalidParameter, e);
      return o[0] instanceof j || o[0] instanceof m ? C2(o[0], c3, a(P(o[2], -1))) : o[0] instanceof w ? C2(Fn(o[0]), c3, a(P(o[2], -1))) : o[0];
    });
  }, n3.functions.densifygeodetic = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 2, 3, t3, e), null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      const c3 = ge(o[1]);
      if (isNaN(c3)) throw new a2(t3, r3.InvalidParameter, e);
      if (c3 <= 0) throw new a2(t3, r3.InvalidParameter, e);
      return o[0] instanceof j || o[0] instanceof m ? U3(o[0], c3, a(P(o[2], -1))) : o[0] instanceof w ? U3(Fn(o[0]), c3, a(P(o[2], -1))) : o[0];
    });
  }, n3.functions.generalize = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 2, 4, t3, e), null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      const c3 = ge(o[1]);
      if (isNaN(c3)) throw new a2(t3, r3.InvalidParameter, e);
      return B2(o[0], c3, Ne(P(o[2], true)), a(P(o[3], -1)));
    });
  }, n3.functions.buffer = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, o, c3) => {
      if (c3 = Fe(c3), ae(c3, 2, 3, t3, e), null === c3[0]) return null;
      if (!(c3[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      const f = ge(c3[1]);
      if (isNaN(f)) throw new a2(t3, r3.InvalidParameter, e);
      return 0 === f ? c(c3[0]) : L(c3[0], f, a(P(c3[2], -1)));
    });
  }, n3.functions.buffergeodetic = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, o, c3) => {
      if (c3 = Fe(c3), ae(c3, 2, 3, t3, e), null === c3[0]) return null;
      if (!(c3[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      const f = ge(c3[1]);
      if (isNaN(f)) throw new a2(t3, r3.InvalidParameter, e);
      return 0 === f ? c(c3[0]) : P2(c3[0], f, a(P(c3[2], -1)));
    });
  }, n3.functions.offset = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 2, 6, t3, e), null === o[0]) return null;
      if (!(o[0] instanceof j || o[0] instanceof m)) throw new a2(t3, r3.InvalidParameter, e);
      const c3 = ge(o[1]);
      if (isNaN(c3)) throw new a2(t3, r3.InvalidParameter, e);
      const f = ge(P(o[4], 10));
      if (isNaN(f)) throw new a2(t3, r3.InvalidParameter, e);
      const d2 = ge(P(o[5], 0));
      if (isNaN(d2)) throw new a2(t3, r3.InvalidParameter, e);
      return v(o[0], c3, a(P(o[2], -1)), me(P(o[3], "round")).toLowerCase(), f, d2);
    });
  }, n3.functions.rotate = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 2, 3, t3, e), null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      const l2 = o[0] instanceof w ? j.fromExtent(o[0]) : o[0], c3 = ge(o[1]);
      if (isNaN(c3)) throw new a2(t3, r3.InvalidParameter, e);
      const f = P(o[2], null);
      if (null === f) return H(l2, c3);
      if (f instanceof _) return H(l2, c3, f);
      throw new a2(t3, r3.InvalidParameter, e);
    });
  }, n3.functions.centroid = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, o, l2) => {
      if (l2 = Fe(l2), ae(l2, 1, 1, t3, e), null === l2[0]) return null;
      let c3 = l2[0];
      if ((U2(l2[0]) || Q(l2[0])) && (c3 = Oe(l2[0], t3.spatialReference)), null === c3) return null;
      if (!(c3 instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return c3 instanceof _ ? Ze(c(c3), t3.spatialReference) : c3 instanceof j ? c3.centroid : c3 instanceof m ? y2(c3) : c3 instanceof u ? m2(c3) : c3 instanceof w ? c3.center : null;
    });
  }, n3.functions.measuretocoordinate = function(t3, a3) {
    return n3.standardFunctionAsync(t3, a3, (n4, o, l2) => {
      if (l2 = Fe(l2), ae(l2, 2, 2, t3, a3), null === l2[0]) return null;
      let c3 = l2[0];
      if ((U2(l2[0]) || Q(l2[0])) && (c3 = Me(l2[0], t3.spatialReference)), null === c3) return null;
      if (!(c3 instanceof n)) throw new a2(t3, r3.InvalidParameter, a3);
      if (!(c3 instanceof m)) throw new a2(t3, r3.InvalidParameter, a3);
      if (E(false === l2[1])) throw new a2(t3, r3.InvalidParameter, a3);
      const f = y3(c3, l2[1]);
      return f ? N.convertObjectToArcadeDictionary(f, He(t3), false, true) : null;
    });
  }, n3.functions.pointtocoordinate = function(t3, a3) {
    return n3.standardFunctionAsync(t3, a3, (n4, o, l2) => {
      if (l2 = Fe(l2), ae(l2, 2, 2, t3, a3), null === l2[0]) return null;
      let c3 = l2[0];
      if ((U2(l2[0]) || Q(l2[0])) && (c3 = Me(l2[0], t3.spatialReference)), null === c3) return null;
      if (!(c3 instanceof n)) throw new a2(t3, r3.InvalidParameter, a3);
      if (!(c3 instanceof m)) throw new a2(t3, r3.InvalidParameter, a3);
      const f = l2[1];
      if (null === f) return null;
      if (!(f instanceof _)) throw new a2(t3, r3.InvalidParameter, a3);
      if (E(false === l2[1])) throw new a2(t3, r3.InvalidParameter, a3);
      const d2 = x(c3, f);
      return d2 ? N.convertObjectToArcadeDictionary(d2, He(t3), false, true) : null;
    });
  }, n3.functions.distancetocoordinate = function(t3, a3) {
    return n3.standardFunctionAsync(t3, a3, (n4, o, l2) => {
      if (l2 = Fe(l2), ae(l2, 2, 2, t3, a3), null === l2[0]) return null;
      let c3 = l2[0];
      if ((U2(l2[0]) || Q(l2[0])) && (c3 = Me(l2[0], t3.spatialReference)), null === c3) return null;
      if (!(c3 instanceof n)) throw new a2(t3, r3.InvalidParameter, a3);
      if (!(c3 instanceof m)) throw new a2(t3, r3.InvalidParameter, a3);
      if (E(false === l2[1])) throw new a2(t3, r3.InvalidParameter, a3);
      const f = Z(c3, l2[1]);
      return f ? N.convertObjectToArcadeDictionary(f, He(t3), false, true) : null;
    });
  }, n3.functions.multiparttosinglepart = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, async (n4, o, l2) => {
      if (l2 = Fe(l2), ae(l2, 1, 1, t3, e), null === l2[0]) return null;
      if (!(l2[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      if (l2[0] instanceof _) return [Ze(c(l2[0]), t3.spatialReference)];
      if (l2[0] instanceof w) return [Ze(c(l2[0]), t3.spatialReference)];
      const c3 = await N2(l2[0]);
      if (c3 instanceof j) {
        const n5 = [], t4 = [];
        for (let e2 = 0; e2 < c3.rings.length; e2++) if (c3.isClockwise(c3.rings[e2])) {
          const t5 = y({ rings: [c3.rings[e2]], hasZ: true === c3.hasZ, hasM: true === c3.hasM, spatialReference: c3.spatialReference.toJSON() });
          n5.push(t5);
        } else t4.push({ ring: c3.rings[e2], pt: c3.getPoint(e2, 0) });
        for (let e2 = 0; e2 < t4.length; e2++) for (let r5 = 0; r5 < n5.length; r5++) if (n5[r5].contains(t4[e2].pt)) {
          n5[r5].addRing(t4[e2].ring);
          break;
        }
        return n5;
      }
      if (c3 instanceof m) {
        const n5 = [];
        for (let t4 = 0; t4 < c3.paths.length; t4++) {
          const e2 = y({ paths: [c3.paths[t4]], hasZ: true === c3.hasZ, hasM: true === c3.hasM, spatialReference: c3.spatialReference.toJSON() });
          n5.push(e2);
        }
        return n5;
      }
      if (l2[0] instanceof u) {
        const n5 = [], e2 = Ze(c(l2[0]), t3.spatialReference);
        for (let t4 = 0; t4 < e2.points.length; t4++) n5.push(e2.getPoint(t4));
        return n5;
      }
      return null;
    });
  }, n3.functions.issimple = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 1, 1, t3, e), null === o[0]) return true;
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return J(o[0]);
    });
  }, n3.functions.simplify = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 1, 1, t3, e), null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return N2(o[0]);
    });
  }, n3.functions.convexhull = function(t3, e) {
    return n3.standardFunctionAsync(t3, e, (n4, a3, o) => {
      if (o = Fe(o), ae(o, 1, 1, t3, e), null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(t3, r3.InvalidParameter, e);
      return j2(o[0]);
    });
  }, n3.functions.getuser = function(a3, o) {
    return n3.standardFunctionAsync(a3, o, async (n4, l2, s) => {
      var _a, _b;
      ae(s, 0, 2, a3, o);
      let c3 = P(s[1], ""), f = true === c3;
      if (c3 = true === c3 || false === c3 ? "" : me(c3), 0 === s.length || s[0] instanceof t2) {
        let n5;
        n5 = ((_a = a3.services) == null ? void 0 : _a.portal) ? a3.services.portal : C.getDefault(), s.length > 0 && (n5 = l(s[0], n5));
        const t3 = await n2(n5, c3, f);
        if (t3) {
          const n6 = JSON.parse(JSON.stringify(t3));
          for (const t4 of ["lastLogin", "created", "modified"]) void 0 !== n6[t4] && null !== n6[t4] && (n6[t4] = new Date(n6[t4]));
          return N.convertObjectToArcadeDictionary(n6, He(a3));
        }
        return null;
      }
      let d2 = null;
      if (B(s[0]) && (d2 = s[0]), d2) {
        if (f = false, c3) return null;
        await d2.load();
        const n5 = await d2.getOwningSystemUrl();
        if (!n5) {
          if (!c3) {
            const n6 = await d2.getIdentityUser();
            return n6 ? N.convertObjectToArcadeDictionary({ username: n6 }, He(a3)) : null;
          }
          return null;
        }
        let r5;
        r5 = ((_b = a3.services) == null ? void 0 : _b.portal) ? a3.services.portal : C.getDefault(), r5 = l(new t2(n5), r5);
        const i = await n2(r5, c3, f);
        if (i) {
          const n6 = JSON.parse(JSON.stringify(i));
          for (const t3 of ["lastLogin", "created", "modified"]) void 0 !== n6[t3] && null !== n6[t3] && (n6[t3] = new Date(n6[t3]));
          return N.convertObjectToArcadeDictionary(n6, He(a3));
        }
        return null;
      }
      throw new a2(a3, r3.InvalidParameter, o);
    });
  }, n3.functions.nearestcoordinate = function(t3, a3) {
    return n3.standardFunctionAsync(t3, a3, async (n4, o, l2) => {
      if (l2 = Fe(l2), ae(l2, 2, 2, t3, a3), !(l2[0] instanceof n || null === l2[0])) throw new a2(t3, r3.InvalidParameter, a3);
      if (!(l2[1] instanceof _ || null === l2[1])) throw new a2(t3, r3.InvalidParameter, a3);
      if (null === l2[0] || null === l2[1]) return null;
      const c3 = await T(l2[0], l2[1]);
      return null === c3 ? null : N.convertObjectToArcadeDictionary({ coordinate: c3.coordinate, distance: c3.distance, sideOfLine: 0 === c3.distance ? "straddle" : c3.isRightSide ? "right" : "left" }, He(t3), false, true);
    });
  }, n3.functions.nearestvertex = function(t3, a3) {
    return n3.standardFunctionAsync(t3, a3, async (n4, o, l2) => {
      if (l2 = Fe(l2), ae(l2, 2, 2, t3, a3), !(l2[0] instanceof n || null === l2[0])) throw new a2(t3, r3.InvalidParameter, a3);
      if (!(l2[1] instanceof _ || null === l2[1])) throw new a2(t3, r3.InvalidParameter, a3);
      if (null === l2[0] || null === l2[1]) return null;
      const c3 = await V(l2[0], l2[1]);
      return null === c3 ? null : N.convertObjectToArcadeDictionary({ coordinate: c3.coordinate, distance: c3.distance, sideOfLine: 0 === c3.distance ? "straddle" : c3.isRightSide ? "right" : "left" }, He(t3), false, true);
    });
  });
}

export {
  xn
};
//# sourceMappingURL=chunk-DXP6ELIW.js.map
