import {
  s as s7
} from "./chunk-6RWJHMUC.js";
import {
  n as n5,
  p as p3
} from "./chunk-FHON4NYJ.js";
import {
  a as a5,
  m as m3,
  p as p2,
  y as y3
} from "./chunk-LM32XFFX.js";
import {
  C,
  L,
  r
} from "./chunk-7VIMGDT3.js";
import {
  $ as $2,
  Z as Z2,
  w as w2
} from "./chunk-2RXPQJAL.js";
import {
  $
} from "./chunk-NRWOW5I4.js";
import "./chunk-4RKJDHFK.js";
import "./chunk-GRO6TRQ6.js";
import "./chunk-BMX34DUY.js";
import "./chunk-2CZAGFZF.js";
import "./chunk-V4RHVJ2H.js";
import "./chunk-2PUGZZAH.js";
import "./chunk-CL2YKTVD.js";
import "./chunk-3MDFTQ3N.js";
import "./chunk-ZEOXREFF.js";
import "./chunk-5BIU5HC2.js";
import "./chunk-4K57JS64.js";
import "./chunk-DOINOMWZ.js";
import "./chunk-RRSX64BO.js";
import "./chunk-GE4FYJHC.js";
import "./chunk-D7WIM7VD.js";
import "./chunk-XIC3SN6R.js";
import "./chunk-WX4IZMIC.js";
import "./chunk-T5CIHLIU.js";
import "./chunk-OXBW45CN.js";
import "./chunk-UPDXKN2W.js";
import "./chunk-LAB5SETU.js";
import "./chunk-7W2VQZZM.js";
import "./chunk-XPEOBWSB.js";
import "./chunk-PYM2YVDF.js";
import {
  s as s4
} from "./chunk-7SBYPGB2.js";
import "./chunk-CBN77ZVG.js";
import "./chunk-TNRF7MOE.js";
import "./chunk-PNPG5IXD.js";
import "./chunk-JSJ34DFQ.js";
import {
  Ze
} from "./chunk-4X27YGEY.js";
import "./chunk-KW3Q5OC2.js";
import "./chunk-XNYIPE5U.js";
import "./chunk-YHUE64L3.js";
import "./chunk-QP7JUYAO.js";
import "./chunk-25PFK4XY.js";
import "./chunk-M6HMVFJK.js";
import "./chunk-NRWI2SUH.js";
import "./chunk-IFLXRJZP.js";
import "./chunk-PS567YZP.js";
import {
  i
} from "./chunk-NGPLQQSE.js";
import {
  l as l2
} from "./chunk-HN3UL7DT.js";
import "./chunk-IEANCNX6.js";
import "./chunk-MUYRQ7CH.js";
import "./chunk-GPH64EJR.js";
import "./chunk-U6JPKU6C.js";
import "./chunk-FY5GOH3U.js";
import {
  s as s6
} from "./chunk-AMKKU676.js";
import "./chunk-QBW6ZJYD.js";
import {
  u
} from "./chunk-S7J6OTBX.js";
import "./chunk-GMJ4G37M.js";
import "./chunk-CSCLMZ7J.js";
import "./chunk-BIJ6AA2G.js";
import {
  p
} from "./chunk-FTURJXD3.js";
import "./chunk-LNOEFEG3.js";
import {
  e as e2
} from "./chunk-TJWXOPWU.js";
import "./chunk-T7UJMFMF.js";
import "./chunk-4SCOCLA2.js";
import "./chunk-WF67GKPJ.js";
import "./chunk-PVGZCS2Z.js";
import "./chunk-4HOM27T6.js";
import "./chunk-FO4JQZA5.js";
import "./chunk-XEELLOJE.js";
import "./chunk-647CGSDX.js";
import "./chunk-EELMLJ53.js";
import "./chunk-JVNKXKH7.js";
import "./chunk-ZT5UNVCE.js";
import "./chunk-2FW7ECQ2.js";
import "./chunk-LGQJAMGK.js";
import "./chunk-PVAXLXWO.js";
import "./chunk-D6KE2FST.js";
import "./chunk-W3XB5XWO.js";
import "./chunk-6QBE4YDH.js";
import "./chunk-QG2IIIZW.js";
import {
  Z
} from "./chunk-LXDJBJSP.js";
import "./chunk-OPCT64AO.js";
import "./chunk-4BM24IVD.js";
import {
  j
} from "./chunk-5LNCGIUN.js";
import "./chunk-CFIKP7ET.js";
import "./chunk-VEAHCP5W.js";
import "./chunk-WO4V65CJ.js";
import "./chunk-QUNQAVSE.js";
import {
  t as t2
} from "./chunk-HNXXFTFZ.js";
import {
  b as b2
} from "./chunk-KVPS4KFB.js";
import {
  b,
  c,
  d,
  s as s5,
  y as y2
} from "./chunk-NSXZC33R.js";
import {
  S,
  m as m2
} from "./chunk-E7HFITKU.js";
import {
  h
} from "./chunk-ZFQCSBZ4.js";
import "./chunk-4PAHN45R.js";
import "./chunk-CRUGTXEH.js";
import "./chunk-CPGVDDHW.js";
import "./chunk-VEOZVJAT.js";
import "./chunk-3D32E2TW.js";
import "./chunk-ACWF4COQ.js";
import "./chunk-P35RWHDU.js";
import "./chunk-G5U2OA3R.js";
import "./chunk-OIFKYPGO.js";
import "./chunk-JNGB7HKP.js";
import "./chunk-NREDFKHH.js";
import "./chunk-DCOKV3EO.js";
import "./chunk-CZ3DCLKN.js";
import "./chunk-7TO4QD67.js";
import "./chunk-DZNQTDMC.js";
import {
  l
} from "./chunk-Z2KLKC47.js";
import {
  a as a4,
  t
} from "./chunk-E5ZJCKHO.js";
import "./chunk-ZRA2NDCA.js";
import "./chunk-RM4VMFVT.js";
import "./chunk-JJIIUFER.js";
import "./chunk-ITGBXG45.js";
import {
  b as b3
} from "./chunk-LLJZCFHW.js";
import "./chunk-VIUFBDIY.js";
import "./chunk-TXIL3QUC.js";
import "./chunk-2ASAB4KA.js";
import {
  f as f3
} from "./chunk-EA74CF7B.js";
import "./chunk-IGNUVZ34.js";
import "./chunk-LTSQHA4C.js";
import "./chunk-YUQFVZCH.js";
import "./chunk-TQBRYTUC.js";
import "./chunk-T4EIRKFE.js";
import "./chunk-OHUWK5XV.js";
import "./chunk-PHVKM5OH.js";
import "./chunk-KQ5GHUVQ.js";
import "./chunk-RTULPMO3.js";
import "./chunk-AJ6PR43V.js";
import "./chunk-6LV4OO46.js";
import {
  n as n4
} from "./chunk-ZK2DM5OJ.js";
import "./chunk-JQIB7GFW.js";
import {
  d as d2
} from "./chunk-CJJCN7PA.js";
import {
  k
} from "./chunk-IJUFAIOF.js";
import {
  s as s3
} from "./chunk-MNMU4ARP.js";
import {
  t as t3
} from "./chunk-7OW2VNCC.js";
import "./chunk-AFBYZF6Q.js";
import "./chunk-IJ42YN7D.js";
import "./chunk-4AGGGL2W.js";
import "./chunk-FJPG3YI6.js";
import "./chunk-BJHLU2MM.js";
import "./chunk-E5KBRIJQ.js";
import {
  o as o2
} from "./chunk-Z32PAECZ.js";
import "./chunk-TW7VY7XV.js";
import {
  x
} from "./chunk-CAC7FEOV.js";
import "./chunk-KK4UI5LV.js";
import "./chunk-BL2UGYYZ.js";
import "./chunk-Q4D7WYWB.js";
import "./chunk-NYWHVRZC.js";
import "./chunk-ZH4RVBER.js";
import "./chunk-UGXIDNPX.js";
import "./chunk-FADA7L64.js";
import {
  m
} from "./chunk-YTTIKQNA.js";
import "./chunk-PNUUOKAJ.js";
import "./chunk-7PMYO342.js";
import "./chunk-4K4GIBGP.js";
import "./chunk-WMMHQ2SA.js";
import "./chunk-AZ7WOCBW.js";
import {
  V as V2
} from "./chunk-3DBICPHD.js";
import "./chunk-7R5XEKR3.js";
import "./chunk-ZK4LSXOH.js";
import {
  n as n3
} from "./chunk-XFBTC3BA.js";
import "./chunk-XFU3BDEI.js";
import "./chunk-IZXTMJPP.js";
import "./chunk-5MMVRBZL.js";
import "./chunk-RS5OZZZ5.js";
import "./chunk-VRHSV3YE.js";
import "./chunk-OVORXUCO.js";
import "./chunk-WLUQPLAY.js";
import "./chunk-BTSZKQPH.js";
import "./chunk-AL3F322A.js";
import "./chunk-6N5YXCNN.js";
import "./chunk-MJ2NSPP7.js";
import "./chunk-6YSPJNLC.js";
import {
  w
} from "./chunk-66KCMKB5.js";
import {
  o
} from "./chunk-ZART2Y5J.js";
import {
  f as f2
} from "./chunk-F4OBDVPS.js";
import "./chunk-X3IFQMC4.js";
import "./chunk-4ZEH5SNV.js";
import {
  n as n2
} from "./chunk-Z6R2SP3D.js";
import "./chunk-K4UOG562.js";
import {
  U,
  V
} from "./chunk-WC4SPMPL.js";
import {
  f2 as f,
  y
} from "./chunk-TJUEGVVG.js";
import "./chunk-FXNOKZ3B.js";
import {
  N,
  a3 as a2,
  s3 as s2
} from "./chunk-GEH2VXFC.js";
import {
  e
} from "./chunk-BJY5ADVY.js";
import {
  a as a3
} from "./chunk-VMWKLHJD.js";
import "./chunk-5AEITAWU.js";
import "./chunk-G36SOMYZ.js";
import {
  a,
  n2 as n,
  s2 as s
} from "./chunk-YNL57W4I.js";
import "./chunk-2PA5UPTB.js";
import "./chunk-XZXEUADC.js";

// ../node_modules/@arcgis/core/layers/buildingSublayers/BuildingSublayer.js
var n6 = class extends s3(m2) {
  constructor(e4) {
    super(e4), this.title = "", this.id = -1, this.modelName = null, this.isEmpty = null, this.legendEnabled = true, this.visible = true, this.opacity = 1;
  }
  readTitle(e4, o3) {
    return "string" == typeof o3.alias ? o3.alias : "string" == typeof o3.name ? o3.name : "";
  }
  readIdOnlyOnce(e4) {
    return -1 !== this.id ? this.id : "number" == typeof e4 ? e4 : -1;
  }
};
e([y({ type: String, json: { origins: { "web-scene": { write: true }, "portal-item": { write: true } } } })], n6.prototype, "title", void 0), e([o("service", "title", ["alias", "name"])], n6.prototype, "readTitle", null), e([y()], n6.prototype, "layer", void 0), e([y({ type: N, readOnly: true, json: { read: false, write: { ignoreOrigin: true } } })], n6.prototype, "id", void 0), e([o("service", "id")], n6.prototype, "readIdOnlyOnce", null), e([y(c(String))], n6.prototype, "modelName", void 0), e([y(c(Boolean))], n6.prototype, "isEmpty", void 0), e([y({ type: Boolean, nonNullable: true })], n6.prototype, "legendEnabled", void 0), e([y({ type: Boolean, json: { name: "visibility", write: true } })], n6.prototype, "visible", void 0), e([y({ type: Number, json: { write: true } })], n6.prototype, "opacity", void 0), n6 = e([a2("esri.layers.buildingSublayers.BuildingSublayer")], n6);
var a6 = n6;

// ../node_modules/@arcgis/core/layers/buildingSublayers/BuildingComponentSublayer.js
var Q = s6();
var E = class extends m.LoadableMixin(n3(a6)) {
  constructor(e4) {
    super(e4), this.type = "building-component", this.nodePages = null, this.materialDefinitions = [], this.textureSetDefinitions = [], this.geometryDefinitions = [], this.indexInfo = null, this.serviceUpdateTimeStamp = null, this.store = null, this.attributeStorageInfo = [], this.fields = [], this.associatedLayer = null, this.outFields = null, this.listMode = "show", this.renderer = null, this.definitionExpression = null, this.popupEnabled = true, this.popupTemplate = null, this.layerType = "3d-object";
  }
  get parsedUrl() {
    var _a2, _b;
    return this.layer ? { path: `${(_a2 = this.layer.parsedUrl) == null ? void 0 : _a2.path}/sublayers/${this.id}`, query: (_b = this.layer.parsedUrl) == null ? void 0 : _b.query } : { path: "" };
  }
  get fieldsIndex() {
    return new Z(this.fields);
  }
  readAssociatedLayer(e4, t7) {
    const r2 = this.layer.associatedFeatureServiceItem, o3 = t7.associatedLayerID;
    return null != r2 && "number" == typeof o3 ? new Ze({ portalItem: r2, customParameters: this.customParameters, layerId: o3 }) : null;
  }
  get objectIdField() {
    if (null != this.fields) {
      for (const e4 of this.fields) if ("oid" === e4.type) return e4.name;
    }
    return null;
  }
  get displayField() {
    return null != this.associatedLayer ? this.associatedLayer.displayField : void 0;
  }
  get apiKey() {
    return this.layer.apiKey;
  }
  get customParameters() {
    return this.layer.customParameters;
  }
  get fullExtent() {
    return this.layer.fullExtent;
  }
  get spatialReference() {
    return this.layer.spatialReference;
  }
  get version() {
    return this.layer.version;
  }
  get elevationInfo() {
    return this.layer.elevationInfo;
  }
  get minScale() {
    return this.layer.minScale;
  }
  get maxScale() {
    return this.layer.maxScale;
  }
  get effectiveScaleRange() {
    return this.layer.effectiveScaleRange;
  }
  get defaultPopupTemplate() {
    return this.createPopupTemplate();
  }
  load(e4) {
    const t7 = null != e4 ? e4.signal : null, r2 = this._fetchService(t7).then(() => {
      this.indexInfo = r(this.parsedUrl.path, this.rootNode, this.nodePages, this.customParameters, this.apiKey, n.getLogger(this), t7);
    });
    return this.addResolvingPromise(r2), Promise.resolve(this);
  }
  createPopupTemplate(e4) {
    return p(this, e4);
  }
  async _fetchService(e4) {
    const t7 = (await U(this.parsedUrl.path, { query: { f: "json", ...this.customParameters, token: this.apiKey }, responseType: "json", signal: e4 })).data;
    this.read(t7, { origin: "service", url: this.parsedUrl });
  }
  getField(e4) {
    return this.fieldsIndex.get(e4);
  }
  getFieldDomain(e4, t7) {
    var _a2, _b, _c;
    const r2 = (_b = (_a2 = this.getFeatureType(t7 == null ? void 0 : t7.feature)) == null ? void 0 : _a2.domains) == null ? void 0 : _b[e4];
    return r2 && "inherited" !== r2.type ? r2 : ((_c = this.getField(e4)) == null ? void 0 : _c.domain) ?? null;
  }
  getFeatureType(e4) {
    return e4 && null != this.associatedLayer ? this.associatedLayer.getFeatureType(e4) : null;
  }
  get types() {
    return null != this.associatedLayer ? this.associatedLayer.types ?? [] : [];
  }
  get typeIdField() {
    return null != this.associatedLayer ? this.associatedLayer.typeIdField : null;
  }
  get geometryType() {
    return "3d-object" === this.layerType ? "mesh" : "point";
  }
  get profile() {
    return "3d-object" === this.layerType ? "mesh-pyramids" : "points";
  }
  get capabilities() {
    const e4 = null != this.associatedLayer && this.associatedLayer.capabilities ? this.associatedLayer.capabilities : s7, { query: t7, data: { supportsZ: r2, supportsM: o3, isVersioned: s8 } } = e4;
    return { query: t7, data: { supportsZ: r2, supportsM: o3, isVersioned: s8 } };
  }
  createQuery() {
    const e4 = new b3();
    return "mesh" !== this.geometryType && (e4.returnGeometry = true, e4.returnZ = true), e4.where = this.definitionExpression || "1=1", e4.sqlFormat = "standard", e4;
  }
  queryExtent(e4, t7) {
    return this._getAssociatedLayerForQuery().then((r2) => r2.queryExtent(e4 || this.createQuery(), t7));
  }
  queryFeatureCount(e4, t7) {
    return this._getAssociatedLayerForQuery().then((r2) => r2.queryFeatureCount(e4 || this.createQuery(), t7));
  }
  queryFeatures(e4, t7) {
    return this._getAssociatedLayerForQuery().then((r2) => r2.queryFeatures(e4 || this.createQuery(), t7)).then((e5) => {
      if (e5 == null ? void 0 : e5.features) for (const t8 of e5.features) t8.layer = this.layer, t8.sourceLayer = this;
      return e5;
    });
  }
  queryObjectIds(e4, t7) {
    return this._getAssociatedLayerForQuery().then((r2) => r2.queryObjectIds(e4 || this.createQuery(), t7));
  }
  async queryCachedAttributes(e4, t7) {
    const r2 = x(this.fieldsIndex, await n5(this, p3(this)));
    return $(this.parsedUrl.path, this.attributeStorageInfo, e4, t7, r2, this.apiKey, this.customParameters);
  }
  async queryCachedFeature(e4, r2) {
    const o3 = await this.queryCachedAttributes(e4, [r2]);
    if (!o3 || 0 === o3.length) throw new s("scenelayer:feature-not-in-cached-data", "Feature not found in cached data");
    return new d2({ attributes: o3[0], layer: this, sourceLayer: this });
  }
  getFieldUsageInfo(e4) {
    return this.fieldsIndex.has(e4) ? { supportsLabelingInfo: false, supportsRenderer: false, supportsPopupTemplate: false, supportsLayerQuery: false } : { supportsLabelingInfo: false, supportsRenderer: true, supportsPopupTemplate: true, supportsLayerQuery: null != this.associatedLayer };
  }
  _getAssociatedLayerForQuery() {
    const e4 = this.associatedLayer;
    return null != e4 && e4.loaded ? Promise.resolve(e4) : this._loadAssociatedLayerForQuery();
  }
  async _loadAssociatedLayerForQuery() {
    if (await this.load(), null == this.associatedLayer) throw new s("buildingscenelayer:query-not-available", "BuildingSceneLayer component layer queries are not available without an associated feature layer", { layer: this });
    try {
      await this.associatedLayer.load();
    } catch (e4) {
      throw new s("buildingscenelayer:query-not-available", "BuildingSceneLayer associated feature layer could not be loaded", { layer: this, error: e4 });
    }
    return this.associatedLayer;
  }
};
e([y({ readOnly: true })], E.prototype, "parsedUrl", null), e([y({ type: p2, readOnly: true })], E.prototype, "nodePages", void 0), e([y({ type: [a5], readOnly: true })], E.prototype, "materialDefinitions", void 0), e([y({ type: [y3], readOnly: true })], E.prototype, "textureSetDefinitions", void 0), e([y({ type: [m3], readOnly: true })], E.prototype, "geometryDefinitions", void 0), e([y({ readOnly: true })], E.prototype, "serviceUpdateTimeStamp", void 0), e([y({ readOnly: true })], E.prototype, "store", void 0), e([y({ type: String, readOnly: true, json: { read: { source: "store.rootNode" } } })], E.prototype, "rootNode", void 0), e([y({ readOnly: true })], E.prototype, "attributeStorageInfo", void 0), e([y(Q.fields)], E.prototype, "fields", void 0), e([y({ readOnly: true })], E.prototype, "fieldsIndex", null), e([y({ readOnly: true, type: Ze })], E.prototype, "associatedLayer", void 0), e([o("service", "associatedLayer", ["associatedLayerID"])], E.prototype, "readAssociatedLayer", null), e([y(Q.outFields)], E.prototype, "outFields", void 0), e([y({ type: String, readOnly: true })], E.prototype, "objectIdField", null), e([y({ readOnly: true, type: String, json: { read: false } })], E.prototype, "displayField", null), e([y({ readOnly: true, type: String })], E.prototype, "apiKey", null), e([y({ readOnly: true, type: String })], E.prototype, "customParameters", null), e([y({ readOnly: true, type: w })], E.prototype, "fullExtent", null), e([y({ readOnly: true, type: f2 })], E.prototype, "spatialReference", null), e([y({ readOnly: true })], E.prototype, "version", null), e([y({ readOnly: true, type: h })], E.prototype, "elevationInfo", null), e([y({ readOnly: true, type: Number })], E.prototype, "minScale", null), e([y({ readOnly: true, type: Number })], E.prototype, "maxScale", null), e([y({ readOnly: true, type: Number })], E.prototype, "effectiveScaleRange", null), e([y({ type: ["hide", "show"], json: { write: true } })], E.prototype, "listMode", void 0), e([y({ types: u, json: { origins: { service: { read: { source: "drawingInfo.renderer" } } }, name: "layerDefinition.drawingInfo.renderer", write: true }, value: null })], E.prototype, "renderer", void 0), e([y({ type: String, json: { origins: { service: { read: false, write: false } }, name: "layerDefinition.definitionExpression", write: { enabled: true, allowNull: true } } })], E.prototype, "definitionExpression", void 0), e([y(s5)], E.prototype, "popupEnabled", void 0), e([y({ type: k, json: { read: { source: "popupInfo" }, write: { target: "popupInfo" } } })], E.prototype, "popupTemplate", void 0), e([y({ readOnly: true, type: String, json: { origins: { service: { read: { source: "store.normalReferenceFrame" } } }, read: false } })], E.prototype, "normalReferenceFrame", void 0), e([y({ readOnly: true, json: { read: false } })], E.prototype, "defaultPopupTemplate", null), e([y()], E.prototype, "types", null), e([y()], E.prototype, "typeIdField", null), e([y({ json: { write: false } }), o2(new n2({ "3DObject": "3d-object", Point: "point" }))], E.prototype, "layerType", void 0), e([y()], E.prototype, "geometryType", null), e([y()], E.prototype, "profile", null), e([y({ readOnly: true, json: { read: false } })], E.prototype, "capabilities", null), e([y({ readOnly: true })], E.prototype, "statisticsInfo", void 0), E = e([a2("esri.layers.buildingSublayers.BuildingComponentSublayer")], E);
var A = E;

// ../node_modules/@arcgis/core/layers/buildingSublayers/BuildingGroupSublayer.js
var a7;
var l3 = { type: V2, readOnly: true, json: { origins: { service: { read: { source: "sublayers", reader: p4 } } }, read: false } };
function p4(r2, o3, t7) {
  if (r2 && Array.isArray(r2)) return new V2(r2.map((r3) => {
    const e4 = y4(r3);
    if (e4) {
      const o4 = new e4();
      return o4.read(r3, t7), o4;
    }
    return (t7 == null ? void 0 : t7.messages) && r3 && t7.messages.push(new s2("building-scene-layer:unsupported-sublayer-type", "Building scene sublayer of type '" + (r3.type || "unknown") + "' are not supported", { definition: r3, context: t7 })), null;
  }));
}
var c2 = a7 = class extends a6 {
  constructor(r2) {
    super(r2), this.type = "building-group", this.listMode = "show", this.sublayers = null;
  }
  loadAll() {
    return a4(this, (r2) => a7.forEachSublayer(this.sublayers, (e4) => {
      "building-group" !== e4.type && r2(e4);
    }));
  }
};
function y4(r2) {
  return "group" === r2.layerType ? c2 : A;
}
e([y({ type: ["hide", "show", "hide-children"], json: { write: true } })], c2.prototype, "listMode", void 0), e([y(l3)], c2.prototype, "sublayers", void 0), c2 = a7 = e([a2("esri.layers.buildingSublayers.BuildingGroupSublayer")], c2), function(r2) {
  function e4(r3, o3) {
    r3.forEach((r4) => {
      o3(r4), "building-group" === r4.type && e4(r4.sublayers, o3);
    });
  }
  r2.sublayersProperty = l3, r2.readSublayers = p4, r2.forEachSublayer = e4;
}(c2 || (c2 = {}));
var d3 = c2;

// ../node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfo.js
var e3 = class extends f {
  constructor() {
    super(...arguments), this.type = null;
  }
};
e([y({ type: String, readOnly: true, json: { write: true } })], e3.prototype, "type", void 0), e3 = e([a2("esri.layers.support.BuildingFilterAuthoringInfo")], e3);
var p5 = e3;

// ../node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfoType.js
var i2;
var p6 = i2 = class extends f {
  constructor() {
    super(...arguments), this.filterType = null, this.filterValues = null;
  }
  clone() {
    return new i2({ filterType: this.filterType, filterValues: a(this.filterValues) });
  }
};
e([y({ type: String, json: { write: true } })], p6.prototype, "filterType", void 0), e([y({ type: [String], json: { write: true } })], p6.prototype, "filterValues", void 0), p6 = i2 = e([a2("esri.layers.support.BuildingFilterAuthoringInfoType")], p6);
var l4 = p6;

// ../node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfoBlock.js
var c3;
var l5 = V2.ofType(l4);
var m4 = c3 = class extends f {
  clone() {
    return new c3({ filterTypes: a(this.filterTypes) });
  }
};
e([y({ type: l5, json: { write: true } })], m4.prototype, "filterTypes", void 0), m4 = c3 = e([a2("esri.layers.support.BuildingFilterAuthoringInfoBlock")], m4);
var n7 = m4;

// ../node_modules/@arcgis/core/layers/support/BuildingFilterAuthoringInfoCheckbox.js
var p7;
var l6 = V2.ofType(n7);
var n8 = p7 = class extends p5 {
  constructor() {
    super(...arguments), this.type = "checkbox";
  }
  clone() {
    return new p7({ filterBlocks: a(this.filterBlocks) });
  }
};
e([y({ type: ["checkbox"] })], n8.prototype, "type", void 0), e([y({ type: l6, json: { write: true } })], n8.prototype, "filterBlocks", void 0), n8 = p7 = e([a2("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")], n8);
var m5 = n8;

// ../node_modules/@arcgis/core/layers/support/BuildingFilterMode.js
var t4 = class extends f {
};
e([y({ readOnly: true, json: { read: false } })], t4.prototype, "type", void 0), t4 = e([a2("esri.layers.support.BuildingFilterMode")], t4);
var p8 = t4;

// ../node_modules/@arcgis/core/layers/support/BuildingFilterModeSolid.js
var t5;
var p9 = t5 = class extends p8 {
  constructor() {
    super(...arguments), this.type = "solid";
  }
  clone() {
    return new t5();
  }
};
e([y({ type: ["solid"], readOnly: true, json: { write: true } })], p9.prototype, "type", void 0), p9 = t5 = e([a2("esri.layers.support.BuildingFilterModeSolid")], p9);
var i3 = p9;

// ../node_modules/@arcgis/core/layers/support/BuildingFilterModeWireFrame.js
var c4;
var m6 = c4 = class extends p8 {
  constructor() {
    super(...arguments), this.type = "wire-frame", this.edges = null;
  }
  clone() {
    return new c4({ edges: a(this.edges) });
  }
};
e([o2({ wireFrame: "wire-frame" })], m6.prototype, "type", void 0), e([y(t3)], m6.prototype, "edges", void 0), m6 = c4 = e([a2("esri.layers.support.BuildingFilterModeWireFrame")], m6);
var a8 = m6;

// ../node_modules/@arcgis/core/layers/support/BuildingFilterModeXRay.js
var t6;
var p10 = t6 = class extends p8 {
  constructor() {
    super(...arguments), this.type = "x-ray";
  }
  clone() {
    return new t6();
  }
};
e([y({ type: ["x-ray"], readOnly: true, json: { write: true } })], p10.prototype, "type", void 0), p10 = t6 = e([a2("esri.layers.support.BuildingFilterModeXRay")], p10);
var c5 = p10;

// ../node_modules/@arcgis/core/layers/support/BuildingFilterBlock.js
var d4;
var a9 = { nonNullable: true, types: { key: "type", base: p8, typeMap: { solid: i3, "wire-frame": a8, "x-ray": c5 } }, json: { read: (e4) => {
  switch (e4 == null ? void 0 : e4.type) {
    case "solid":
      return i3.fromJSON(e4);
    case "wireFrame":
      return a8.fromJSON(e4);
    case "x-ray":
      return c5.fromJSON(e4);
    default:
      return;
  }
}, write: { enabled: true, isRequired: true } } };
var m7 = d4 = class extends f {
  constructor() {
    super(...arguments), this.filterExpression = null, this.filterMode = new i3(), this.title = "";
  }
  clone() {
    return new d4({ filterExpression: this.filterExpression, filterMode: a(this.filterMode), title: this.title });
  }
};
e([y({ type: String, json: { write: { enabled: true, isRequired: true } } })], m7.prototype, "filterExpression", void 0), e([y(a9)], m7.prototype, "filterMode", void 0), e([y({ type: String, json: { write: { enabled: true, isRequired: true } } })], m7.prototype, "title", void 0), m7 = d4 = e([a2("esri.layers.support.BuildingFilterBlock")], m7);
var c6 = m7;

// ../node_modules/@arcgis/core/layers/support/BuildingFilter.js
var d5;
var u2 = V2.ofType(c6);
var m8 = d5 = class extends f {
  constructor() {
    super(...arguments), this.description = null, this.filterBlocks = null, this.id = n4(), this.name = null;
  }
  clone() {
    return new d5({ description: this.description, filterBlocks: a(this.filterBlocks), id: this.id, name: this.name, filterAuthoringInfo: a(this.filterAuthoringInfo) });
  }
};
e([y({ type: String, json: { write: true } })], m8.prototype, "description", void 0), e([y({ type: u2, json: { write: { enabled: true, isRequired: true } } })], m8.prototype, "filterBlocks", void 0), e([y({ types: { key: "type", base: p5, typeMap: { checkbox: m5 } }, json: { read: (o3) => "checkbox" === (o3 == null ? void 0 : o3.type) ? m5.fromJSON(o3) : null, write: true } })], m8.prototype, "filterAuthoringInfo", void 0), e([y({ type: String, constructOnly: true, json: { write: { enabled: true, isRequired: true } } })], m8.prototype, "id", void 0), e([y({ type: String, json: { write: { enabled: true, isRequired: true } } })], m8.prototype, "name", void 0), m8 = d5 = e([a2("esri.layers.support.BuildingFilter")], m8);
var f4 = m8;

// ../node_modules/@arcgis/core/layers/support/BuildingSummaryStatistics.js
var p11 = class extends f {
  constructor() {
    super(...arguments), this.fieldName = null, this.modelName = null, this.label = null, this.min = null, this.max = null, this.mostFrequentValues = null, this.subLayerIds = null;
  }
};
e([y({ type: String })], p11.prototype, "fieldName", void 0), e([y({ type: String })], p11.prototype, "modelName", void 0), e([y({ type: String })], p11.prototype, "label", void 0), e([y({ type: Number })], p11.prototype, "min", void 0), e([y({ type: Number })], p11.prototype, "max", void 0), e([y({ json: { read: (e4) => Array.isArray(e4) && (e4.every((e5) => "string" == typeof e5) || e4.every((e5) => "number" == typeof e5)) ? e4.slice() : null } })], p11.prototype, "mostFrequentValues", void 0), e([y({ type: [Number] })], p11.prototype, "subLayerIds", void 0), p11 = e([a2("esri.layers.support.BuildingSummaryStatistics.BuildingFieldStatistics")], p11);
var n9 = class extends m.LoadableMixin(n3(f)) {
  constructor() {
    super(...arguments), this.url = null;
  }
  get fields() {
    return this.loaded || "loading" === this.loadStatus ? this._get("fields") : (n.getLogger(this).error("building summary statistics are not loaded"), null);
  }
  load(e4) {
    const t7 = null != e4 ? e4.signal : null;
    return this.addResolvingPromise(this._fetchService(t7)), Promise.resolve(this);
  }
  async _fetchService(e4) {
    const r2 = (await U(this.url, { query: { f: "json" }, responseType: "json", signal: e4 })).data;
    this.read(r2, { origin: "service" });
  }
};
e([y({ constructOnly: true, type: String })], n9.prototype, "url", void 0), e([y({ readOnly: true, type: [p11], json: { read: { source: "summary" } } })], n9.prototype, "fields", null), n9 = e([a2("esri.layers.support.BuildingSummaryStatistics")], n9);
var u3 = n9;

// ../node_modules/@arcgis/core/layers/BuildingSceneLayer.js
var C2 = V2.ofType(f4);
var R = a(d3.sublayersProperty);
var _a;
var U2 = (_a = R.json) == null ? void 0 : _a.origins;
U2 && (U2["web-scene"] = { type: [A], write: { enabled: true, overridePolicy: () => ({ enabled: false }) } }, U2["portal-item"] = { type: [A], write: { enabled: true, overridePolicy: () => ({ enabled: false }) } });
var M = class extends L(l2(b2(j(t2(S(e2(i(f3)))))))) {
  constructor(e4) {
    super(e4), this.operationalLayerType = "BuildingSceneLayer", this.allSublayers = new l({ getCollections: () => [this.sublayers], getChildrenFunction: (e5) => "building-group" === e5.type ? e5.sublayers : null }), this.sublayers = null, this._sublayerOverrides = null, this.filters = new C2(), this.activeFilterId = null, this.summaryStatistics = null, this.outFields = null, this.legendEnabled = true, this.type = "building-scene";
  }
  normalizeCtorArgs(e4) {
    return "string" == typeof e4 ? { url: e4 } : e4 ?? {};
  }
  destroy() {
    this.allSublayers.destroy();
  }
  readSublayers(e4, r2, t7) {
    const s8 = d3.readSublayers(e4, r2, t7);
    return d3.forEachSublayer(s8, (e5) => e5.layer = this), this._sublayerOverrides && (this.applySublayerOverrides(s8, this._sublayerOverrides), this._sublayerOverrides = null), s8;
  }
  applySublayerOverrides(e4, { overrides: r2, context: t7 }) {
    d3.forEachSublayer(e4, (e5) => e5.read(r2.get(e5.id), t7));
  }
  readSublayerOverrides(e4, r2) {
    var _a2;
    const t7 = /* @__PURE__ */ new Map();
    for (const i4 of e4) null != i4 && "object" == typeof i4 && "number" == typeof i4.id ? t7.set(i4.id, i4) : (_a2 = r2.messages) == null ? void 0 : _a2.push(new s("building-scene-layer:invalid-sublayer-override", "Invalid value for sublayer override. Not an object or no id specified.", { value: i4 }));
    return { overrides: t7, context: r2 };
  }
  writeSublayerOverrides(e4, r2, t7) {
    const s8 = [];
    d3.forEachSublayer(this.sublayers, (e5) => {
      const r3 = e5.write({}, t7);
      Object.keys(r3).length > 1 && s8.push(r3);
    }), s8.length > 0 && (r2.sublayers = s8);
  }
  writeUnappliedOverrides(e4, r2) {
    r2.sublayers = [], e4.overrides.forEach((e5) => {
      r2.sublayers.push(a(e5));
    });
  }
  write(e4, r2) {
    return e4 = super.write(e4, r2), !r2 || "web-scene" !== r2.origin && "portal-item" !== r2.origin || (this.sublayers ? this.writeSublayerOverrides(this.sublayers, e4, r2) : this._sublayerOverrides && this.writeUnappliedOverrides(this._sublayerOverrides, e4)), e4;
  }
  read(e4, r2) {
    if (super.read(e4, r2), r2 && ("web-scene" === r2.origin || "portal-item" === r2.origin) && null != e4 && Array.isArray(e4.sublayers)) {
      const t7 = this.readSublayerOverrides(e4.sublayers, r2);
      this.sublayers ? this.applySublayerOverrides(this.sublayers, t7) : this._sublayerOverrides = t7;
    }
  }
  readSummaryStatistics(e4, r2) {
    var _a2;
    if ("string" == typeof r2.statisticsHRef) {
      const e5 = V((_a2 = this.parsedUrl) == null ? void 0 : _a2.path, r2.statisticsHRef);
      return new u3({ url: e5 });
    }
    return null;
  }
  set elevationInfo(e4) {
    this._set("elevationInfo", e4), this._validateElevationInfo();
  }
  load(e4) {
    const r2 = null != e4 ? e4.signal : null, t7 = this.loadFromPortal({ supportedTypes: ["Scene Service"] }, e4).catch(a3).then(() => this._fetchService(r2)).then(() => this._fetchAssociatedFeatureService(r2));
    return this.addResolvingPromise(t7), Promise.resolve(this);
  }
  loadAll() {
    return t(this, (e4) => {
      d3.forEachSublayer(this.sublayers, (r2) => {
        "building-group" !== r2.type && e4(r2);
      }), this.summaryStatistics && e4(this.summaryStatistics);
    });
  }
  async saveAs(e4, r2) {
    return this._debouncedSaveOperations(C.SAVE_AS, { ...r2, getTypeKeywords: () => this._getTypeKeywords(), portalItemLayerType: "building-scene" }, e4);
  }
  async save() {
    const e4 = { getTypeKeywords: () => this._getTypeKeywords(), portalItemLayerType: "building-scene" };
    return this._debouncedSaveOperations(C.SAVE, e4);
  }
  validateLayer(e4) {
    if (!e4.layerType || "Building" !== e4.layerType) throw new s("buildingscenelayer:layer-type-not-supported", "BuildingSceneLayer does not support this layer type", { layerType: e4.layerType });
  }
  _getTypeKeywords() {
    return ["Building"];
  }
  async _fetchAssociatedFeatureService(e4) {
    try {
      const { portalItem: r2 } = await s4(`${this.url}/layers/${this.layerId}`, { sceneLayerItem: this.portalItem, customParameters: this.customParameters, apiKey: this.apiKey, signal: e4 });
      this.associatedFeatureServiceItem = r2;
    } catch (r2) {
      n.getLogger(this).warn("Associated feature service item could not be loaded", r2);
    }
  }
  _validateElevationInfo() {
    const e4 = this.elevationInfo, r2 = "Building scene layers";
    $2(n.getLogger(this), Z2(r2, "absolute-height", e4)), $2(n.getLogger(this), w2(r2, e4));
  }
};
e([y({ type: ["BuildingSceneLayer"] })], M.prototype, "operationalLayerType", void 0), e([y({ readOnly: true })], M.prototype, "allSublayers", void 0), e([y(R)], M.prototype, "sublayers", void 0), e([o("service", "sublayers")], M.prototype, "readSublayers", null), e([y({ type: C2, nonNullable: true, json: { write: true } })], M.prototype, "filters", void 0), e([y({ type: String, json: { write: true } })], M.prototype, "activeFilterId", void 0), e([y({ readOnly: true, type: u3 })], M.prototype, "summaryStatistics", void 0), e([o("summaryStatistics", ["statisticsHRef"])], M.prototype, "readSummaryStatistics", null), e([y({ type: [String], json: { read: false } })], M.prototype, "outFields", void 0), e([y(b)], M.prototype, "fullExtent", void 0), e([y(y2)], M.prototype, "legendEnabled", void 0), e([y({ type: ["show", "hide", "hide-children"] })], M.prototype, "listMode", void 0), e([y(c(f2))], M.prototype, "spatialReference", void 0), e([y(d)], M.prototype, "elevationInfo", null), e([y({ json: { read: false }, readOnly: true })], M.prototype, "type", void 0), e([y()], M.prototype, "associatedFeatureServiceItem", void 0), M = e([a2("esri.layers.BuildingSceneLayer")], M);
var H = M;
export {
  H as default
};
//# sourceMappingURL=BuildingSceneLayer-C7UQFB47.js.map
