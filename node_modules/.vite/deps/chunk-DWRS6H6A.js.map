{
  "version": 3,
  "sources": ["../../../../node_modules/@arcgis/core/symbols/cim/SDFHelper.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as t}from\"../../core/floatRGBA.js\";import{isExtent as o}from\"../../geometry/support/jsonUtils.js\";import n from\"./Rect.js\";import{defaultSdfTextureSize as r,spritePadding as e}from\"../../views/2d/engine/webgl/definitions.js\";function l(t){switch(t.type){case\"CIMPointSymbol\":{const o=t.symbolLayers;if(!o||1!==o.length)return null;const n=o[0];return\"CIMVectorMarker\"!==n.type?null:l(n)}case\"CIMVectorMarker\":{const o=t.markerGraphics;if(!o||1!==o.length)return null;const n=o[0];if(!n)return null;const r=n.geometry;if(!r)return null;const e=n.symbol;return!e||\"CIMPolygonSymbol\"!==e.type&&\"CIMLineSymbol\"!==e.type||e.symbolLayers?.some((t=>!!t.effects))?null:{type:\"sdf\",geom:r,asFill:\"CIMPolygonSymbol\"===e.type}}}}function i(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function s(t){let o=1/0,r=-1/0,e=1/0,l=-1/0;for(const n of t)for(const t of n)t[0]<o&&(o=t[0]),t[0]>r&&(r=t[0]),t[1]<e&&(e=t[1]),t[1]>l&&(l=t[1]);return new n(o,e,r-o,l-e)}function f(t){let o=1/0,n=-1/0,r=1/0,e=-1/0;for(const l of t)for(const t of l)t[0]<o&&(o=t[0]),t[0]>n&&(n=t[0]),t[1]<r&&(r=t[1]),t[1]>e&&(e=t[1]);return[o,r,n,e]}function m(t){return t?t.rings?f(t.rings):t.paths?f(t.paths):o(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null}function a(t,o,n,l,i){const[s,f,m,a]=t;if(m<s||a<f)return[0,0,0,1];const c=m-s,u=a-f,y=r,h=e,x=Math.floor(.5*(.5*y-h)),M=(y-2*(x+h))/Math.max(c,u),p=Math.round(c*M)+2*x,g=Math.round(u*M)+2*x;let d=1;if(o){d=g/M/(o.ymax-o.ymin)}let b=0,w=0,C=1;l&&(i?o&&n&&o.ymax-o.ymin>0&&(C=(o.xmax-o.xmin)/(o.ymax-o.ymin),b=l.x/(n*C),w=l.y/n):(b=l.x,w=l.y)),o&&(b=.5*(o.xmax+o.xmin)+b*(o.xmax-o.xmin),w=.5*(o.ymax+o.ymin)+w*(o.ymax-o.ymin)),b-=s,w-=f,b*=M,w*=M,b+=x,w+=x;let I=b/p-.5,j=w/g-.5;return i&&n&&(I*=n*C,j*=n),[d,I,j,C]}function c(t){const o=i(t.geom),n=s(o),l=r,f=e,m=Math.floor(.5*(.5*l-f)),a=(l-2*(m+f))/Math.max(n.width,n.height),c=Math.round(n.width*a)+2*m,x=Math.round(n.height*a)+2*m,M=[];for(const r of o)if(r&&r.length>1){const o=[];for(const e of r){let[r,l]=e;r-=n.x,l-=n.y,r*=a,l*=a,r+=m-.5,l+=m-.5,t.asFill?o.push([r,l]):o.push([Math.round(r),Math.round(l)])}if(t.asFill){const t=o.length-1;o[0][0]===o[t][0]&&o[0][1]===o[t][1]||o.push(o[0])}M.push(o)}const p=u(M,c,x,m);return t.asFill&&y(M,c,x,m,p),[h(p,m),c,x]}function u(t,o,n,r){const e=o*n,l=new Array(e),i=r*r+1;for(let s=0;s<e;++s)l[s]=i;for(const s of t){const t=s.length;for(let e=1;e<t;++e){const t=s[e-1],i=s[e];let f,m,a,c;t[0]<i[0]?(f=t[0],m=i[0]):(f=i[0],m=t[0]),t[1]<i[1]?(a=t[1],c=i[1]):(a=i[1],c=t[1]);let u=Math.floor(f)-r,y=Math.floor(m)+r,h=Math.floor(a)-r,x=Math.floor(c)+r;u<0&&(u=0),y>o&&(y=o),h<0&&(h=0),x>n&&(x=n);const M=i[0]-t[0],p=i[1]-t[1],g=M*M+p*p;for(let r=u;r<y;r++)for(let e=h;e<x;e++){const s=r+.5,f=e+.5;let m,a,c=(s-t[0])*M+(f-t[1])*p;c<0?(m=t[0],a=t[1]):c>g?(m=i[0],a=i[1]):(c/=g,m=t[0]+c*M,a=t[1]+c*p);const u=(s-m)*(s-m)+(f-a)*(f-a),y=(n-e-1)*o+r;u<l[y]&&(l[y]=u)}}}for(let s=0;s<e;++s)l[s]=Math.sqrt(l[s]);return l}function y(t,o,n,r,e){for(const l of t){const t=l.length;for(let i=1;i<t;++i){const t=l[i-1],s=l[i];let f,m,a,c;t[0]<s[0]?(f=t[0],m=s[0]):(f=s[0],m=t[0]),t[1]<s[1]?(a=t[1],c=s[1]):(a=s[1],c=t[1]);let u=Math.floor(f),y=Math.floor(m)+1,h=Math.floor(a),x=Math.floor(c)+1;u<r&&(u=r),y>o-r&&(y=o-r),h<r&&(h=r),x>n-r&&(x=n-r);for(let l=h;l<x;++l){if(t[1]>l==s[1]>l)continue;const i=l+.5,f=(n-l-1)*o;for(let o=u;o<y;++o){o+.5<(s[0]-t[0])*(i-t[1])/(s[1]-t[1])+t[0]&&(e[f+o]=-e[f+o])}for(let t=r;t<u;++t)e[f+t]=-e[f+t]}}}}function h(o,n){const r=2*n,e=o.length,l=new Uint8Array(4*e);for(let i=0;i<e;++i){const n=.5-o[i]/r;t(n,l,4*i)}return l}export{c as buildSDF,m as getExtent,l as getSDFInfo,a as getSDFMetrics};\n"],
  "mappings": "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",
  "names": ["t", "o", "l", "m", "i", "s", "f", "a", "c", "u", "y", "h", "r", "e", "n"]
}
