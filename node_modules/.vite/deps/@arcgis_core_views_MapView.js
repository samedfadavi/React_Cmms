import {
  e as e11,
  o as o10,
  t as t9,
  t2 as t10
} from "./chunk-GYNLRYIJ.js";
import {
  a as a3,
  c as c8,
  e as e14,
  r as r10,
  s as s11
} from "./chunk-AAFC7EUR.js";
import {
  _ as _4,
  d as d7,
  t as t8
} from "./chunk-BMXGQGJZ.js";
import {
  Gt,
  H,
  Y,
  Z,
  _ as _5,
  at,
  e as e12,
  ft,
  gt,
  ht,
  jt,
  kt,
  lt,
  mt,
  ot,
  pt,
  tt,
  ut,
  wt,
  xt,
  yt
} from "./chunk-4OMAFSPD.js";
import {
  e as e15
} from "./chunk-2RHJP66D.js";
import {
  m as m8
} from "./chunk-FOXLFMHH.js";
import {
  e as e13
} from "./chunk-XMJZJ562.js";
import {
  t as t7
} from "./chunk-OELB7RPX.js";
import "./chunk-AKR4324J.js";
import {
  c as c7,
  l as l5,
  n as n13
} from "./chunk-ANPA5OMO.js";
import {
  r as r9,
  t as t6
} from "./chunk-WWC7JPAN.js";
import {
  n as n11
} from "./chunk-3N4YJI4N.js";
import {
  i as i7
} from "./chunk-K7XS7LRW.js";
import "./chunk-JST26BJY.js";
import {
  h as h5,
  s as s8
} from "./chunk-OUP4H5QN.js";
import {
  p as p3
} from "./chunk-Z5AGOKPI.js";
import {
  f as f6,
  i as i6,
  n as n10,
  s as s10,
  u as u5
} from "./chunk-QKCF7BZB.js";
import {
  e as e10
} from "./chunk-RBI6SFEB.js";
import {
  t as t5
} from "./chunk-O45ZPWWN.js";
import "./chunk-PTAB5LZK.js";
import {
  s as s9
} from "./chunk-KPZ6T27N.js";
import {
  l as l3
} from "./chunk-CBN77ZVG.js";
import "./chunk-BSRWVAJC.js";
import {
  n as n9
} from "./chunk-TNRF7MOE.js";
import {
  M as M3,
  h as h3,
  i as i5,
  o as o9,
  r as r8
} from "./chunk-PNPG5IXD.js";
import {
  S as S3,
  e as e9,
  m as m4,
  o as o8,
  r as r7
} from "./chunk-CYGO6TZX.js";
import {
  h as h4
} from "./chunk-SWNP6UNA.js";
import {
  p as p2,
  z
} from "./chunk-7WGA6BPA.js";
import "./chunk-4N73DVTU.js";
import "./chunk-22COVJ5Q.js";
import {
  P as P2
} from "./chunk-L43X3QBS.js";
import "./chunk-TU4XXLQN.js";
import "./chunk-UFNQVX5G.js";
import {
  B,
  e as e4,
  e2 as e5,
  i,
  n as n4,
  o as o7,
  r as r5
} from "./chunk-2XBXVYNT.js";
import {
  i as i2,
  n2 as n6
} from "./chunk-225ILMZS.js";
import {
  n as n7
} from "./chunk-YYWBDW7S.js";
import {
  g as g4
} from "./chunk-L2WMWCR5.js";
import "./chunk-GP37RDGU.js";
import "./chunk-QGSDZEP4.js";
import "./chunk-3XW4ZFBO.js";
import "./chunk-EV4X7SZU.js";
import {
  L as L2,
  m as m7
} from "./chunk-V63BIDFE.js";
import {
  m as m6
} from "./chunk-24LHJJBM.js";
import "./chunk-44DGTEO5.js";
import {
  n as n12
} from "./chunk-Q7LXYMJI.js";
import {
  l as l4
} from "./chunk-4L475FFF.js";
import "./chunk-RP6X3ODZ.js";
import "./chunk-PUMH7Z6T.js";
import "./chunk-T4VYLXNQ.js";
import "./chunk-RXDW37SG.js";
import "./chunk-QNHSMBZU.js";
import "./chunk-QCNVYWDT.js";
import {
  v as v3
} from "./chunk-VWT7JGEJ.js";
import "./chunk-DYSGJMXJ.js";
import {
  m as m5
} from "./chunk-HVBTPERJ.js";
import "./chunk-6YWHPE5R.js";
import "./chunk-II233HEX.js";
import {
  b as b2
} from "./chunk-O3SWUDKA.js";
import {
  c as c4
} from "./chunk-UFM3NKC4.js";
import {
  d as d5
} from "./chunk-AMI6SB22.js";
import "./chunk-5ZXL4RVG.js";
import "./chunk-LTSQHA4C.js";
import "./chunk-642KQGGU.js";
import "./chunk-2ASAB4KA.js";
import "./chunk-YUQFVZCH.js";
import "./chunk-TQBRYTUC.js";
import {
  c as c5,
  l as l2
} from "./chunk-VFWQXRTI.js";
import "./chunk-T4EIRKFE.js";
import {
  B as B2,
  J,
  K,
  W,
  _ as _3
} from "./chunk-EWMAY5HD.js";
import "./chunk-VYHMQE3X.js";
import "./chunk-BT3LWQ6Y.js";
import "./chunk-ZK2DM5OJ.js";
import "./chunk-VBDV4BWI.js";
import "./chunk-JQIB7GFW.js";
import {
  d as d6
} from "./chunk-GA33WQKZ.js";
import "./chunk-BQZ6TOTM.js";
import {
  i as i3
} from "./chunk-TNZHXX4A.js";
import "./chunk-ZKK6RCCC.js";
import "./chunk-F6ACLFA4.js";
import "./chunk-M3PKU65V.js";
import "./chunk-JZGMMNDS.js";
import {
  u as u6
} from "./chunk-ZN4OIFSY.js";
import {
  i as i4
} from "./chunk-MVBB7F4W.js";
import "./chunk-QKIDJKBT.js";
import {
  n as n8
} from "./chunk-GYV64L3V.js";
import "./chunk-YJZITPMF.js";
import "./chunk-27UXPB5G.js";
import {
  c as c6
} from "./chunk-BL2UGYYZ.js";
import "./chunk-UGXIDNPX.js";
import "./chunk-JJMAFAM2.js";
import "./chunk-NYWHVRZC.js";
import "./chunk-PEJ2S5HH.js";
import "./chunk-KJ6J7JNN.js";
import "./chunk-G6DJH3CW.js";
import {
  A as A3,
  C,
  P,
  d as d3,
  p,
  v as v2,
  w
} from "./chunk-WP3NIOC7.js";
import "./chunk-JETDCAWM.js";
import "./chunk-WMMHQ2SA.js";
import {
  o as o6,
  r as r4
} from "./chunk-AZ7WOCBW.js";
import {
  V
} from "./chunk-6NYXETS3.js";
import {
  o as o5
} from "./chunk-V7QGLYRG.js";
import {
  _,
  d as d2
} from "./chunk-QK7AIGQQ.js";
import "./chunk-MEX3YBVG.js";
import "./chunk-TJDYFJHM.js";
import {
  m as m3
} from "./chunk-Q2U7WLKD.js";
import "./chunk-YHCFUSPR.js";
import {
  m as m2,
  n as n5
} from "./chunk-BXPMJL6U.js";
import "./chunk-IZXTMJPP.js";
import {
  c as c3,
  f as f2
} from "./chunk-5MMVRBZL.js";
import {
  j
} from "./chunk-Z7HMQHKC.js";
import {
  s as s6
} from "./chunk-OVORXUCO.js";
import {
  M as M2,
  s as s7,
  u as u4
} from "./chunk-ECT4H6LN.js";
import "./chunk-WLUQPLAY.js";
import {
  M,
  e as e8,
  f as f5,
  h as h2
} from "./chunk-6N5YXCNN.js";
import {
  g as g6
} from "./chunk-MJ2NSPP7.js";
import {
  e as e7,
  u as u3
} from "./chunk-6YSPJNLC.js";
import {
  _ as _2,
  d as d4,
  e as e6,
  f2 as f4,
  g as g5,
  t as t4,
  w as w2
} from "./chunk-2KWVV6W7.js";
import "./chunk-IZCBO6R3.js";
import {
  f as f3
} from "./chunk-RRHSGQXL.js";
import {
  G,
  r as r6,
  s3 as s5
} from "./chunk-5OH3WELH.js";
import {
  s as s4
} from "./chunk-45G2MIVV.js";
import "./chunk-Z6R2SP3D.js";
import "./chunk-NJ5SNYWR.js";
import "./chunk-BTK7J76U.js";
import {
  A as A2,
  S as S2,
  a,
  c as c2,
  f2 as f,
  o2 as o,
  o3 as o2,
  r,
  t2 as t,
  t4 as t2,
  v,
  y2 as y
} from "./chunk-VCPBB4O5.js";
import {
  a3 as a2,
  g2 as g3,
  n as n3,
  r2 as r3,
  s3
} from "./chunk-H3VP623Y.js";
import {
  e
} from "./chunk-BJY5ADVY.js";
import {
  A,
  E,
  L,
  S,
  b,
  c2 as c,
  d,
  e as e3,
  g as g2,
  h,
  m,
  o2 as o3,
  o3 as o4,
  s as s2,
  u as u2
} from "./chunk-VMWKLHJD.js";
import {
  e as e2,
  l,
  u
} from "./chunk-5AEITAWU.js";
import {
  n as n2,
  r as r2,
  t as t3
} from "./chunk-FXNOKZ3B.js";
import "./chunk-G36SOMYZ.js";
import {
  n2 as n,
  s2 as s
} from "./chunk-YNL57W4I.js";
import {
  O,
  g,
  has
} from "./chunk-2PA5UPTB.js";
import "./chunk-WG7MCETX.js";

// ../node_modules/@arcgis/core/views/BreakpointsOwner.js
var l6 = { widthBreakpoint: { getValue(e29) {
  const i22 = e29.viewSize[0], s29 = e29.breakpoints, a22 = this.values;
  return i22 <= s29.xsmall ? a22.xsmall : i22 <= s29.small ? a22.small : i22 <= s29.medium ? a22.medium : i22 <= s29.large ? a22.large : a22.xlarge;
}, values: { xsmall: "xsmall", small: "small", medium: "medium", large: "large", xlarge: "xlarge" }, valueToClassName: { xsmall: "esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge", small: "esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge", medium: "esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge", large: "esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge", xlarge: "esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large" } }, heightBreakpoint: { getValue(e29) {
  const i22 = e29.viewSize[1], s29 = e29.breakpoints, a22 = this.values;
  return i22 <= s29.xsmall ? a22.xsmall : i22 <= s29.small ? a22.small : i22 <= s29.medium ? a22.medium : i22 <= s29.large ? a22.large : a22.xlarge;
}, values: { xsmall: "xsmall", small: "small", medium: "medium", large: "large", xlarge: "xlarge" }, valueToClassName: { xsmall: "esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge", small: "esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge", medium: "esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge", large: "esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge", xlarge: "esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large" } }, orientation: { getValue(e29) {
  const i22 = e29.viewSize, s29 = i22[0], a22 = i22[1], t29 = this.values;
  return a22 >= s29 ? t29.portrait : t29.landscape;
}, values: { portrait: "portrait", landscape: "landscape" }, valueToClassName: { portrait: "esri-view-orientation-portrait", landscape: "esri-view-orientation-landscape" } } };
var h6 = { xsmall: 544, small: 768, medium: 992, large: 1200 };
function n14(e29) {
  const i22 = e29;
  return i22 && i22.xsmall < i22.small && i22.small < i22.medium && i22.medium < i22.large;
}
function m9(e29, i22) {
  return i22 ? l6[e29].valueToClassName[i22].split(" ") : [];
}
var o11 = (o31) => {
  let g16 = class extends o31 {
    constructor(...e29) {
      super(...e29), this.orientation = null, this.widthBreakpoint = null, this.heightBreakpoint = null, this.breakpoints = h6;
    }
    initialize() {
      this.addHandles(d3(() => [this.breakpoints, this.size], () => this._updateClassNames(), P));
    }
    destroy() {
      this.destroyed || this._removeActiveClassNames();
    }
    set breakpoints(e29) {
      if (e29 === this._get("breakpoints")) return;
      if (!n14(e29)) {
        const i22 = JSON.stringify(h6, null, 2);
        console.warn("provided breakpoints are not valid, using defaults:" + i22), e29 = h6;
      }
      this._set("breakpoints", { ...e29 });
    }
    _updateClassNames() {
      if (!this.container) return;
      const e29 = t2.acquire(), s29 = t2.acquire();
      let a22, t29 = false;
      for (a22 in l6) {
        const i22 = this[a22], r26 = l6[a22].getValue({ viewSize: this.size, breakpoints: this.breakpoints });
        i22 !== r26 && (t29 = true, this[a22] = r26, m9(a22, i22).forEach((e30) => s29.push(e30)), m9(a22, r26).forEach((i23) => e29.push(i23)));
      }
      t29 && (this._applyClassNameChanges(e29, s29), t2.release(e29), t2.release(s29));
    }
    _applyClassNameChanges(e29, i22) {
      const s29 = this.container;
      s29 && (i22.forEach((e30) => s29.classList.remove(e30)), e29.forEach((e30) => s29.classList.add(e30)));
    }
    _removeActiveClassNames() {
      const e29 = this.container;
      if (!e29) return;
      let i22;
      for (i22 in l6) m9(i22, this[i22]).forEach((i23) => e29.classList.remove(i23));
    }
  };
  return e([y()], g16.prototype, "breakpoints", null), e([y()], g16.prototype, "orientation", void 0), e([y()], g16.prototype, "widthBreakpoint", void 0), e([y()], g16.prototype, "heightBreakpoint", void 0), g16 = e([a2("esri.views.BreakpointsOwner")], g16), g16;
};

// ../node_modules/@arcgis/core/views/overlay/ViewOverlay.js
var a4 = class extends S2 {
  constructor() {
    super(...arguments), this.items = new V(), this._watchUpdatingTracking = new h4(), this._callbacks = /* @__PURE__ */ new Map(), this._projector = i2(), this._hiddenProjector = i2();
  }
  get needsRender() {
    return this.items.length > 0;
  }
  get updating() {
    var _a;
    return ((_a = this._watchUpdatingTracking) == null ? void 0 : _a.updating) ?? false;
  }
  initialize() {
    const t29 = document.createElement("div");
    t29.className = "esri-overlay-surface", this._set("surface", t29), this._hiddenSurface = document.createElement("div"), this._hiddenSurface.setAttribute("style", "visibility: hidden;"), t29.appendChild(this._hiddenSurface), this._watchUpdatingTracking.addOnCollectionChange(() => this.items, (t30) => {
      for (const e29 of t30.added) {
        const t31 = () => e29.render();
        this._callbacks.set(e29, t31), this._projector.append(this.surface, t31);
      }
      for (const e29 of t30.removed) {
        const t31 = this._projector.detach(this._callbacks.get(e29));
        this.surface.removeChild(t31.domNode), this._callbacks.delete(e29);
      }
    });
  }
  addItem(t29) {
    this.items.add(t29);
  }
  removeItem(t29) {
    this.items.remove(t29);
  }
  destroy() {
    this.items.removeAll(), this._callbacks.forEach((t29) => this._projector.detach(t29)), this._callbacks = null, this._projector = null, this._watchUpdatingTracking.destroy();
  }
  render() {
    this._projector.renderNow();
  }
  computeBoundingRect(t29) {
    const e29 = this._hiddenSurface, o31 = this._hiddenProjector;
    let r26;
    const s29 = () => (r26 = t29.render(), r26);
    o31.append(e29, s29), o31.renderNow();
    const i22 = { left: 0, top: 0, right: 0, bottom: 0 };
    if (r26 == null ? void 0 : r26.domNode) {
      const t30 = r26.domNode.getBoundingClientRect();
      i22.left = t30.left, i22.top = t30.top, i22.right = t30.right, i22.bottom = t30.bottom;
    }
    for (o31.detach(s29); e29.firstChild; ) e29.removeChild(e29.firstChild);
    return i22;
  }
  overlaps(t29, e29) {
    const o31 = this.computeBoundingRect(t29), r26 = this.computeBoundingRect(e29);
    return Math.max(o31.left, r26.left) <= Math.min(o31.right, r26.right) && Math.max(o31.top, r26.top) <= Math.min(o31.bottom, r26.bottom);
  }
  get hasVisibleItems() {
    return this.items.some((t29) => t29.visible);
  }
  async prepare() {
    await document.fonts.load(this._fontString()).catch(() => {
    });
  }
  renderCanvas(t29, e29) {
    const o31 = !!(e29 == null ? void 0 : e29.disableDecorations);
    if (!this.items.some((t30) => t30.visible && !(o31 && t30.isDecoration))) return;
    const r26 = t29.getContext("2d");
    r26.save(), r26.font = this._fontString(), this.items.forEach((t30) => {
      o31 && t30.isDecoration || (r26.save(), t30.renderCanvas(r26), r26.restore());
    }), r26.restore();
  }
  _fontString() {
    return `10px ${getComputedStyle(this.surface).fontFamily}`;
  }
};
e([y({ readOnly: true })], a4.prototype, "surface", void 0), e([y({ readOnly: true })], a4.prototype, "items", void 0), e([y({ readOnly: true })], a4.prototype, "needsRender", null), e([y({ readOnly: true })], a4.prototype, "_watchUpdatingTracking", void 0), e([y({ readOnly: true })], a4.prototype, "updating", null), a4 = e([a2("esri.views.overlay.ViewOverlay")], a4);
var c9 = a4;

// ../node_modules/@arcgis/core/views/DOMContainer.js
var m10 = [0, 0];
function f7(e29) {
  const t29 = (e29.ownerDocument || window.document).defaultView, s29 = e29.getBoundingClientRect();
  return m10[0] = s29.left + ((t29 == null ? void 0 : t29.pageXOffset) ?? 0), m10[1] = s29.top + ((t29 == null ? void 0 : t29.pageYOffset) ?? 0), m10;
}
function g7(e29) {
  e29 && (n4(e29), e29.parentNode && e29.parentNode.removeChild(e29));
}
function y2(e29) {
  const t29 = document.createElement("div");
  return e29.appendChild(t29), t29;
}
var _6 = 16;
var v4 = 750;
var w3 = 512;
var C2 = 2;
var H2 = (i22) => {
  let m24 = class extends i22 {
    constructor(...e29) {
      super(...e29), this._freqInfo = { freq: _6, time: v4 }, this._overlayRenderTaskHandle = null, this.height = 0, this.messagesCommon = null, this.overlay = null, this.position = null, this.resizing = false, this.root = null, this.surface = null, this.suspended = true, this.ui = null, this.userContent = null, this.width = 0, this.widthBreakpoint = null, this.addHandles([d3(() => this.cursor, (e30) => {
        const { surface: t29 } = this;
        t29 && t29.setAttribute("data-cursor", e30);
      }), d3(() => this.navigating, (e30) => {
        const { surface: t29 } = this;
        t29 && t29.setAttribute("data-navigating", e30.toString());
      })]);
    }
    initialize() {
      this.addHandles([d3(() => this.ui, (e29, t29) => this._handleUIChange(e29, t29), P), this.on("focus", () => this.notifyChange("focused")), this.on("blur", () => this.notifyChange("focused"))]);
    }
    destroy() {
      this.destroyed || (this.ui = u(this.ui), this.container = null);
    }
    get container() {
      return this._get("container") ?? null;
    }
    set container(e29) {
      const i23 = this._get("container"), r26 = e4(e29);
      if (r26 || "string" != typeof e29 || n.getLogger(this).error("#container", `element with id '${e29}' not found`), i23 === r26) return;
      if (this._stopMeasuring(), i23 && (i23.classList.remove("esri-view"), this._overlayRenderTaskHandle && (this._overlayRenderTaskHandle.remove(), this._overlayRenderTaskHandle = null), this.overlay && (this.overlay.destroy(), this._set("overlay", null)), this.root && (g7(this.root), this._set("root", null)), this.userContent && (i(this.userContent, i23), g7(this.userContent), this._set("userContent", null))), !r26) return this._set("width", 0), this._set("height", 0), this._set("position", null), this._set("suspended", true), this._set("surface", null), void this._set("container", null);
      r26.classList.add("esri-view");
      const n31 = document.createElement("div");
      n31.className = "esri-view-user-storage", i(r26, n31), r26.appendChild(n31), this._set("userContent", n31);
      const d21 = document.createElement("div");
      d21.className = "esri-view-root", r26.insertBefore(d21, r26.firstChild), this._set("root", d21);
      const u17 = document.createElement("div");
      u17.className = "esri-view-surface", u17.setAttribute("role", "application"), u17.tabIndex = 0, d21.appendChild(u17), this._set("surface", u17);
      const c28 = new c9();
      d21.appendChild(c28.surface), this._set("overlay", c28), this.addHandles(d3(() => c28.needsRender, (e30) => {
        e30 && !this._overlayRenderTaskHandle ? this._overlayRenderTaskHandle = A2({ render: () => {
          var _a;
          return (_a = this.overlay) == null ? void 0 : _a.render();
        } }) : this._overlayRenderTaskHandle = l(this._overlayRenderTaskHandle);
      })), this.forceDOMReadyCycle(), this._set("container", r26), this._startMeasuring();
    }
    get focused() {
      const e29 = document.activeElement === this.surface;
      return document.hasFocus() && e29;
    }
    get size() {
      return [this.width, this.height];
    }
    blur() {
      var _a;
      (_a = this.surface) == null ? void 0 : _a.blur();
    }
    focus() {
      var _a;
      (_a = this.surface) == null ? void 0 : _a.focus();
    }
    pageToContainer(e29, t29, s29) {
      const i23 = this.position;
      return e29 -= i23 ? i23[0] : 0, t29 -= i23 ? i23[1] : 0, s29 ? (s29[0] = e29, s29[1] = t29) : s29 = [e29, t29], s29;
    }
    containerToPage(e29, t29, s29) {
      const i23 = this.position;
      return e29 += i23 ? i23[0] : 0, t29 += i23 ? i23[1] : 0, s29 ? (s29[0] = e29, s29[1] = t29) : s29 = [e29, t29], s29;
    }
    _handleUIChange(e29, t29) {
      this.removeHandles("ui"), t29 && t29 !== e29 && t29.destroy(), e29 && (e29.view = this, this.addHandles(d3(() => this.root, (t30) => {
        e29.container = t30 ? y2(t30) : null;
      }, P), "ui")), this._set("ui", e29);
    }
    _stopMeasuring() {
      this.removeHandles("measuring"), this._get("resizing") && this._set("resizing", false);
    }
    _startMeasuring() {
      const e29 = this._freqInfo;
      e29.freq = _6, e29.time = v4, this.addHandles([o4(window, "resize", () => {
        e29.freq = _6, e29.time = v4;
      }), A2({ prepare: (e30) => {
        const t29 = this._measure(), s29 = this._freqInfo;
        if (s29.time += e30.deltaTime, t29 && (s29.freq = _6, this._get("resizing") || this._set("resizing", true)), s29.time < s29.freq) return;
        s29.time = 0;
        const i23 = this._position();
        s29.freq = i23 || t29 ? _6 : Math.min(v4, s29.freq * C2), !t29 && s29.freq >= w3 && this._get("resizing") && this._set("resizing", false);
      } })], "measuring"), this._measure(), this._position();
    }
    _measure() {
      const e29 = this.container, t29 = e29 ? e29.clientWidth : 0, s29 = e29 ? e29.clientHeight : 0;
      if (0 === t29 || 0 === s29) return this.suspended || this._set("suspended", true), false;
      const i23 = this.width, r26 = this.height;
      return t29 === i23 && s29 === r26 ? (this.suspended && this._set("suspended", false), false) : (this._set("width", t29), this._set("height", s29), this.suspended && this._set("suspended", false), this.emit("resize", { oldWidth: i23, oldHeight: r26, width: t29, height: s29 }), true);
    }
    _position() {
      const e29 = this.container, t29 = this.position, s29 = e29 && f7(e29);
      return !!s29 && ((!t29 || s29[0] !== t29[0] || s29[1] !== t29[1]) && (this._set("position", [s29[0], s29[1]]), true));
    }
    forceDOMReadyCycle() {
    }
  };
  return e([y()], m24.prototype, "container", null), e([y({ readOnly: true })], m24.prototype, "focused", null), e([y({ readOnly: true })], m24.prototype, "height", void 0), e([y()], m24.prototype, "messagesCommon", void 0), e([y({ type: c9 })], m24.prototype, "overlay", void 0), e([y({ readOnly: true })], m24.prototype, "position", void 0), e([y({ readOnly: true })], m24.prototype, "resizing", void 0), e([y({ readOnly: true })], m24.prototype, "root", void 0), e([y({ value: null, readOnly: true })], m24.prototype, "size", null), e([y({ readOnly: true })], m24.prototype, "surface", void 0), e([y({ readOnly: true })], m24.prototype, "suspended", void 0), e([y()], m24.prototype, "ui", void 0), e([y({ readOnly: true })], m24.prototype, "userContent", void 0), e([y({ readOnly: true })], m24.prototype, "width", void 0), e([y()], m24.prototype, "widthBreakpoint", void 0), m24 = e([a2("esri.views.DOMContainer")], m24), m24;
};

// ../node_modules/@arcgis/core/views/PopupView.js
function m11(e29) {
  return null != e29 && "open" in e29 && "declaredClass" in e29;
}
function f8(e29) {
  return null != e29 && "declaredClass" in e29 && "dockOptions" in e29;
}
var y3 = (n31) => {
  let y11 = class extends n31 {
    constructor() {
      super(...arguments), this._popupSetupTask = null, this.popup = {}, this.popupEnabled = true;
    }
    initialize() {
      this.addHandles([d3(() => [this.ui, this.popup], ([e29, p24], t29) => {
        const o31 = "popup", i22 = "manual";
        if (t29) {
          const [e30, p25] = t29;
          e30 && m11(p25) && (p25.view = null, f8(p25) && e30.remove(p25, o31));
        }
        e29 && m11(p24) && (p24.view = this, f8(p24) && e29.add(p24, { key: o31, position: i22, internal: true }));
      }, P), this.on("click", (e29) => {
        this.popup && this.popupEnabled && ("mouse" !== e29.pointerType || 0 === e29.button) && (m11(this.popup) ? this.popup.viewModel.handleViewClick(e29) : e29.async(async () => {
          await this.setupPopup(), m11(this.popup) && !this.destroyed && this.ready && this.popupEnabled && this.popup.viewModel.handleViewClick(e29);
        }));
      }, _4.WIDGET)]), w(() => this.ready && this.popupEnabled && !this.updating).then(() => {
        import("./Popup-2A2CIY2W.js");
      });
    }
    destroy() {
      this.destroyed || this.closePopup();
    }
    async openPopup(e29) {
      if (m11(this.popup)) return this.popup.open(e29);
      try {
        if (await this.setupPopup(), !this.popup) return void n.getLogger(this).error(new s("view:null-popup", "Popup is null and can't be opened"));
        this.popup.open(e29);
      } catch {
      }
    }
    closePopup() {
      var _a;
      (_a = this._popupSetupTask) == null ? void 0 : _a.abort(), m11(this.popup) && this.popup.close();
    }
    async fetchPopupFeatures(e29, p24) {
      return await this.when(), this._popupHitsToFeatures(await this._getPopupHits(e29, p24), p24);
    }
    async setupPopup() {
      var _a;
      if ((_a = this._popupSetupTask) == null ? void 0 : _a.abort(), this.popup && !m11(this.popup)) return this._popupSetupTask = d2(async (e29) => {
        const { default: p24 } = await import("./Popup-2A2CIY2W.js");
        if (s2(e29), !this.popup || m11(this.popup)) return;
        const t29 = this.popup;
        delete t29.open, delete t29.close, this.popup = new p24(t29);
      }), this._popupSetupTask.promise;
    }
    async _popupHitsToFeatures({ location: e29, hits: p24 }, t29) {
      const o31 = [], i22 = [];
      let s29 = false;
      const n32 = E(t29, has("popup-view-fetch-timeout") ?? P3), u17 = (e30) => {
        const p25 = new g8(e30);
        return i22.push(p25), o31.push(p25.promise), p25;
      }, c28 = (e30) => {
        const p25 = i22.at(-1);
        return p25 && p25.layerView === e30 && !s29 ? p25 : u17(e30);
      };
      for (const r26 of p24) if ("graphic" in r26) {
        c28(r26.layerView).graphics.push(r26.graphic), s29 = false;
      } else o31.push(r26.layerView.fetchPopupFeaturesAtLocation(r26.mapPoint, n32)), s29 = true;
      i22.map((e30) => e30.resolve(n32));
      const l18 = g2(o31).then((e30) => e30.filter((e31) => !!e31).flat());
      return { pendingFeatures: o31, allGraphicsPromise: l18, location: e29 };
    }
    async _getPopupHits(e29, p24) {
      const { hits: t29, location: o31 } = await this.popupHitTest(e29);
      s2(p24);
      const i22 = [];
      for (const s29 of t29) if ("graphic" in s29) {
        if (this._isValidPopupGraphic(s29.graphic, p24)) {
          const e30 = this._isValidPopupGraphicsLayerView(s29.layerView) ? s29.layerView : void 0;
          i22.push({ graphic: s29.graphic, layerView: e30 });
        }
      } else this._isValidPopupLocationLayerView(s29.layerView) && i22.push({ mapPoint: s29.mapPoint, layerView: s29.layerView });
      return { hits: i22, location: o31 };
    }
    _isValidPopupGraphic(e29, p24) {
      return e29 && !!e29.getEffectivePopupTemplate(p24 == null ? void 0 : p24.defaultPopupTemplateEnabled);
    }
    _isValidPopupGraphicsLayerView(e29) {
      return !e29 || (!("layer" in e29) || !e29.suspended) && "fetchPopupFeaturesFromGraphics" in e29;
    }
    _isValidPopupLocationLayerView(e29) {
      return (!("layer" in e29) || !e29.suspended) && "fetchPopupFeaturesAtLocation" in e29;
    }
  };
  return e([y({ cast(e29) {
    return !e29 || m11(e29) || "object" == typeof e29 && (e29.open = (e30) => (a(n.getLogger(this), "view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created", { replacement: "Use view.openPopup() instead.", version: "4.27" }), this.openPopup(e30)), e29.close = () => (a(n.getLogger(this), "view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created", { replacement: "Use view.closePopup() instead.", version: "4.27" }), this.closePopup())), e29;
  } })], y11.prototype, "popup", void 0), e([y()], y11.prototype, "popupEnabled", void 0), y11 = e([a2("esri.views.PopupView")], y11), y11;
};
var g8 = class {
  constructor(e29) {
    this.layerView = e29, this._resolver = L(), this.graphics = [];
  }
  get promise() {
    return this._resolver.promise;
  }
  resolve(e29) {
    const { layerView: p24, graphics: t29, _resolver: o31 } = this;
    if (!p24) return o31.resolve(t29), o31.promise;
    let i22;
    return p24.fetchPopupFeaturesFromGraphics(t29, e29).catch((e30) => (i22 = e30, null)).then((e30) => {
      e30 ? o31.resolve(e30) : o31.reject(i22);
    }), o31.promise;
  }
};
var P3 = 5e3;

// ../node_modules/@arcgis/core/support/AnalysesCollection.js
var t11 = class extends n13 {
  constructor(e29) {
    super(e29), this.addHandles(this.on("before-add", (e30) => {
      null != e30.item && e30.item.parent === this.owner && (n.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."), e30.preventDefault());
    }));
  }
  _own(e29) {
    e29.parent = this.owner;
  }
  _release(e29) {
    e29.parent = null;
  }
};
t11 = e([a2("esri.support.AnalysesCollection")], t11);

// ../node_modules/@arcgis/core/views/BasemapView.js
var n15 = class extends S2 {
  constructor(e29) {
    super(e29), this.view = null, this.baseLayerViews = new V(), this.referenceLayerViews = new V(), this._loadingHandle = d3(() => {
      var _a, _b;
      return (_b = (_a = this.view) == null ? void 0 : _a.map) == null ? void 0 : _b.basemap;
    }, (e30) => {
      e30 && e30.load().catch(() => {
      });
    }, P);
  }
  destroy() {
    this._set("view", null), this._loadingHandle && (this._loadingHandle.remove(), this._loadingHandle = null);
    for (const e29 of this.baseLayerViews) e29.destroy();
    this.baseLayerViews.length = 0;
    for (const e29 of this.referenceLayerViews) e29.destroy();
    this.referenceLayerViews.length = 0;
  }
  get suspended() {
    return !this.view || this.view.suspended;
  }
  get updating() {
    var _a, _b, _c;
    if ((_a = this.view) == null ? void 0 : _a.suspended) return false;
    const e29 = (_c = (_b = this.view) == null ? void 0 : _b.map) == null ? void 0 : _c.basemap;
    return !!e29 && (!!e29.loaded && (this.baseLayerViews.some((e30) => e30.updating) || this.referenceLayerViews.some((e30) => e30.updating)));
  }
};
e([y({ constructOnly: true })], n15.prototype, "view", void 0), e([y({ readOnly: true })], n15.prototype, "baseLayerViews", void 0), e([y({ readOnly: true })], n15.prototype, "referenceLayerViews", void 0), e([y({ readOnly: true })], n15.prototype, "suspended", null), e([y({ type: Boolean, readOnly: true })], n15.prototype, "updating", null), n15 = e([a2("esri.views.BasemapView")], n15);

// ../node_modules/@arcgis/core/views/LayerViewManager.js
function V2(e29) {
  return "tryRecycleWith" in e29;
}
function v5(e29) {
  return null != e29 && "object" == typeof e29 && "layerViews" in e29;
}
var L3 = class {
  constructor(e29, r26, t29) {
    this.layer = e29, this.view = r26, this.layerViewImporter = t29, this._controller = new AbortController(), this._deferred = L(), this._started = false, this.done = false, this.promise = this._deferred.promise, m(this._controller.signal, () => {
      const r27 = new s("cancelled:layerview-create", "layerview creation cancelled", { layer: e29 });
      this._deferred.reject(r27);
    });
  }
  tryRecycle(e29) {
    if (!this.done || !this.layerView || !V2(this.layerView)) return null;
    const r26 = this.layer.type, i22 = this._controller.signal;
    for (let t29 = 0; t29 < e29.length; t29++) {
      const s29 = e29[t29];
      if (s29.type !== r26) continue;
      const a22 = this.layerView.tryRecycleWith(s29, { signal: i22 });
      if (a22) {
        e29.splice(t29, 1), this.layer = s29;
        const r27 = this.layerView, i23 = r27.view;
        return this.promise = Promise.race([a22.then(() => (s2(this._controller.signal), s29.emit("layerview-destroy", { view: i23, layerView: r27 }), i23.emit("layerview-destroy", { view: i23, layerView: r27 }), s29.emit("layerview-create", { view: i23, layerView: r27 }), i23.emit("layerview-create", { view: i23, layerView: r27 }), r27)), new Promise((e30, r28) => m(this._controller.signal, () => r28(u2())))]), this.promise;
      }
    }
    return null;
  }
  destroy() {
    this._controller.abort();
    const { layerView: e29 } = this;
    if (e29) {
      const { layer: r26, view: i22 } = this;
      r26.emit("layerview-destroy", { view: i22, layerView: e29 }), i22.emit("layerview-destroy", { layer: r26, layerView: e29 });
    }
    this.done = true, this.layer = null, this.layerView = null, this.view = null, this.layerViewImporter = null, this._map = null;
  }
  async start() {
    var _a, _b;
    if (this._started) return;
    this._started = true;
    const { _controller: { signal: e29 }, layer: r26, view: t29 } = this;
    this._map = t29.map;
    try {
      let o31, l18;
      if (await r26.load({ signal: e29 }), r26.prefetchResources && await r26.prefetchResources({ signal: e29 }), C3(r26)) o31 = await r26.createLayerView(t29, { signal: e29 });
      else {
        if (!this.layerViewImporter.hasLayerViewModule(r26)) throw new s("layer:view-not-supported", "No layerview implementation was found");
        const s29 = await this.layerViewImporter.importLayerView(r26);
        s2(e29), o31 = "default" in s29 ? new s29.default({ layer: r26, view: t29 }) : new s29({ layer: r26, view: t29 });
      }
      const n31 = () => {
        l18 = l(l18), o31.destroyed || o31.destroy(), o31.layer = null, o31.parent = null, o31.view = null, this.done = true;
      };
      l18 = m(e29, n31), s2(e29);
      try {
        await o31.when();
      } catch (s29) {
        throw n31(), s29;
      }
      const c28 = (_b = (_a = this._map) == null ? void 0 : _a.allLayers) == null ? void 0 : _b.includes(r26);
      if (!c28) return n31(), void this._deferred.reject(new s("view:no-layerview-for-layer", "The layer has been removed from the map", { layer: r26 }));
      this.layerView = o31, r26.emit("layerview-create", { view: t29, layerView: o31 }), t29.emit("layerview-create", { layer: r26, layerView: o31 }), this.done = true, this._deferred.resolve(o31);
    } catch (s29) {
      r26.emit("layerview-create-error", { view: t29, error: s29 }), t29.emit("layerview-create-error", { layer: r26, error: s29 }), this.done = true, this._deferred.reject(new s("layerview:create-error", "layerview creation failed", { layer: r26, error: s29 }));
    }
  }
};
var M4 = class extends S2 {
  constructor(e29) {
    super(e29), this._layerLayerViewInfoMap = /* @__PURE__ */ new Map(), this._recyclingInfoMap = /* @__PURE__ */ new Map(), this._watchUpdatingTracking = new h4(), this.supportsGround = true, this._preloadLayerViewModules = () => {
      var _a;
      const e30 = (_a = this.view.map) == null ? void 0 : _a.allLayers;
      if (e30) for (const r26 of e30) this.layerViewImporter.hasLayerViewModule(r26) && this.layerViewImporter.importLayerView(r26);
    }, this._reschedule = () => this.destroyed ? Promise.reject() : (null == this._workPromise && (this._workPromise = L(), this._workPromise.promise.catch(() => {
    })), this.removeHandles("reschedule"), this.addHandles(v(this._doWork), "reschedule"), this._workPromise.promise), this._doWork = () => {
      var _a, _b, _c;
      if (this.destroyed) return;
      const e30 = this.view.map;
      if (this._map !== e30 && (this.clear(), this._map = e30), null == this._workPromise) return void this.notifyChange("updating");
      this.removeHandles("reschedule"), this.removeHandles("collection-change");
      const r26 = /* @__PURE__ */ new Set(), i22 = [], t29 = this.view.ready, s29 = (e31) => {
        if (null != e31) {
          for (const a23 of e31) if (a23) {
            r26.add(a23);
            const e32 = this._layerLayerViewInfoMap.get(a23);
            e32 && t29 ? e32.start() : e32 || this._recyclingInfoMap.has(a23) || i22.push(a23), "layers" in a23 && a23.layers && s29(a23.layers);
          }
        }
      };
      for (const o31 of this._rootCollectionNames) s29(o2(this, o31));
      for (const [o31, l18] of this._layerLayerViewInfoMap) if (!r26.has(o31)) {
        this._layerLayerViewInfoMap.delete(l18.layer);
        const e31 = l18.tryRecycle(i22);
        e31 ? (this.notifyChange("updating"), this._recyclingInfoMap.set(l18.layer, l18), e31.then(() => {
          this.notifyChange("updating"), this._recyclingInfoMap.delete(l18.layer), this._layerLayerViewInfoMap.set(l18.layer, l18), this._reschedule();
        }).catch(() => {
          this.notifyChange("updating"), this._recyclingInfoMap.delete(l18.layer), l18.destroy(), this._reschedule();
        })) : l18.destroy();
      }
      for (const [o31, l18] of this._recyclingInfoMap) r26.has(o31) || (this.notifyChange("updating"), this._recyclingInfoMap.delete(l18.layer), l18.destroy());
      for (const o31 of i22) this._createLayerView(o31);
      this._refreshCollections();
      const a22 = [(_a = e30 == null ? void 0 : e30.ground) == null ? void 0 : _a.layers, (_b = e30 == null ? void 0 : e30.basemap) == null ? void 0 : _b.baseLayers, (_c = e30 == null ? void 0 : e30.basemap) == null ? void 0 : _c.referenceLayers, e30 == null ? void 0 : e30.layers].filter((e31) => !!e31);
      r26.forEach((e31) => "layers" in e31 && a22.push(e31.layers)), this.addHandles(a22.map((e31) => this._watchUpdatingTracking.addOnCollectionChange(() => e31, this._reschedule)), "collection-change"), this._workPromise.resolve(), this._workPromise = null;
    };
  }
  initialize() {
    this.addHandles([v2(() => {
      var _a, _b;
      return (_b = (_a = this.view) == null ? void 0 : _a.map) == null ? void 0 : _b.allLayers;
    }, "change", this._preloadLayerViewModules, { onListenerAdd: this._preloadLayerViewModules }), d3(() => {
      const e29 = this.view, r26 = e29 == null ? void 0 : e29.map;
      return [r26 == null ? void 0 : r26.basemap, r26 == null ? void 0 : r26.ground, r26 == null ? void 0 : r26.layers, e29 == null ? void 0 : e29.ready];
    }, () => this._reschedule(), A3)]), this._preloadLayerViewModules(), this._reschedule();
  }
  destroy() {
    this.clear(), n12(this._recyclingInfoMap), n12(this._layerLayerViewInfoMap), this._watchUpdatingTracking.destroy(), this._map = null, null != this._workPromise && (this._workPromise.reject(u2()), this._workPromise = null);
  }
  get _layersToLayerViews() {
    const e29 = [["view.map.basemap.baseLayers", "view.basemapView.baseLayerViews"], ["view.map.layers", "view.layerViews"], ["view.map.basemap.referenceLayers", "view.basemapView.referenceLayerViews"]];
    return this.supportsGround && e29.push(["view.map.ground.layers", "view.groundView.layerViews"]), new Map(e29);
  }
  get _rootCollectionNames() {
    return Array.from(this._layersToLayerViews.keys());
  }
  get updating() {
    return null != this._workPromise || this._watchUpdatingTracking.updating || n3(this._layerLayerViewInfoMap, (e29) => !e29.done) || this._recyclingInfoMap.size > 0;
  }
  get updatingRemaining() {
    let e29 = 0;
    for (const r26 of this._layerLayerViewInfoMap.values()) r26.done || ++e29;
    return e29;
  }
  clear() {
    this.destroyed || (n12(this._layerLayerViewInfoMap), this._refreshCollections());
  }
  async whenLayerView(e29) {
    if (await this._reschedule(), !this._layerLayerViewInfoMap.has(e29)) {
      if (this._recyclingInfoMap.has(e29)) return this._recyclingInfoMap.get(e29).promise;
      throw new s("view:no-layerview-for-layer", "No layerview has been found for the layer", { layer: e29 });
    }
    return this._layerLayerViewInfoMap.get(e29).promise;
  }
  isCreatingLayerViewsForLayer(e29, r26) {
    var _a;
    this.commitProperty("updatingRemaining");
    const i22 = this._layerLayerViewInfoMap.get(e29);
    if (!(i22 == null ? void 0 : i22.done)) return true;
    const t29 = i22.layerView;
    return !(!t29 || !r26 || t29.parent === r26) || !!(i22.done && t29 && "layers" in e29 && ((_a = e29.layers) == null ? void 0 : _a.length)) && e29.layers.some((e30) => this.isCreatingLayerViewsForLayer(e30, t29));
  }
  _refreshCollections() {
    for (const [e29, r26] of this._layersToLayerViews) this._populateLayerViewsOwners(o2(this, e29), o2(this, r26), this.view);
    this.notifyChange("updating"), this.notifyChange("updatingRemaining");
  }
  _populateLayerViewsOwners(e29, r26, i22) {
    if (!e29 || !r26) return void (r26 && r26.removeAll());
    let t29 = 0;
    for (const s29 of e29) {
      const e30 = this._layerLayerViewInfoMap.get(s29);
      if (!(e30 == null ? void 0 : e30.layerView)) continue;
      const a22 = e30.layerView;
      a22.layer = s29, a22.parent = i22, r26.at(t29) !== a22 && r26.splice(t29, 0, a22), "layers" in s29 && v5(a22) && this._populateLayerViewsOwners(s29.layers, a22.layerViews, a22), t29 += 1;
    }
    t29 < r26.length && r26.splice(t29, r26.length);
  }
  _createLayerView(e29) {
    e29.load().catch(() => {
    }), this.layerViewImporter.hasLayerViewModule(e29) && this.layerViewImporter.importLayerView(e29);
    const r26 = new L3(e29, this.view, this.layerViewImporter);
    r26.promise.then(() => this._refreshCollections(), (r27) => {
      r27 && (b(r27) || "cancelled:layerview-create" === r27.name) || n.getLogger(this).error(`Failed to create layerview for layer title:'${e29.title ?? "no title"}', id:'${e29.id ?? "no id"}' of type '${e29.type}'.`, { layer: e29, error: r27 }), this._refreshCollections();
    }), this._layerLayerViewInfoMap.set(e29, r26), this.view.ready && r26.start(), this.notifyChange("updating"), this.notifyChange("updatingRemaining");
  }
};
e([y()], M4.prototype, "_workPromise", void 0), e([y({ readOnly: true })], M4.prototype, "_watchUpdatingTracking", void 0), e([y({ readOnly: true })], M4.prototype, "_layersToLayerViews", null), e([y({ readOnly: true })], M4.prototype, "_rootCollectionNames", null), e([y()], M4.prototype, "layerViewImporter", void 0), e([y()], M4.prototype, "supportsGround", void 0), e([y({ readOnly: true })], M4.prototype, "updating", null), e([y({ readOnly: true })], M4.prototype, "updatingRemaining", null), e([y({ constructOnly: true })], M4.prototype, "view", void 0), M4 = e([a2("esri.views.LayerViewManager")], M4);
var I = M4;
function C3(e29) {
  return "createLayerView" in e29 && null != e29.createLayerView;
}

// ../node_modules/@arcgis/core/views/Magnifier.js
var i8 = class extends S2 {
  constructor(o31) {
    super(o31), this.factor = 1.5, this.offset = c6(0, 0), this.position = null, this.size = 120, this.maskUrl = null, this.maskEnabled = true, this.overlayUrl = null, this.overlayEnabled = true, this.visible = true;
  }
  get version() {
    return this.commitProperty("factor"), this.commitProperty("offset"), this.commitProperty("position"), this.commitProperty("visible"), this.commitProperty("size"), this.commitProperty("maskUrl"), this.commitProperty("maskEnabled"), this.commitProperty("overlayUrl"), this.commitProperty("overlayEnabled"), (this._get("version") || 0) + 1;
  }
};
e([y({ type: Number })], i8.prototype, "factor", void 0), e([y({ nonNullable: true })], i8.prototype, "offset", void 0), e([y()], i8.prototype, "position", void 0), e([y({ type: Number, range: { min: 0 } })], i8.prototype, "size", void 0), e([y()], i8.prototype, "maskUrl", void 0), e([y()], i8.prototype, "maskEnabled", void 0), e([y()], i8.prototype, "overlayUrl", void 0), e([y()], i8.prototype, "overlayEnabled", void 0), e([y({ readOnly: true })], i8.prototype, "version", null), e([y({ type: Boolean })], i8.prototype, "visible", void 0), i8 = e([a2("esri.views.Magnifier")], i8);
var p4 = i8;

// ../node_modules/@arcgis/core/views/support/selectionUtils.js
function e16(e29) {
  return !!(null != e29 && "object" == typeof e29 && "createQuery" in e29 && e29.createQuery && "on" in e29 && e29.on);
}

// ../node_modules/@arcgis/core/views/SelectionManager.js
var y4 = class extends o5.EventedAccessor {
  constructor(e29) {
    super(e29), this._selectionMap = new s9(), this._sources = new V(), this._trashCan = [], this._layerEditHandles = new V(), this._vizTaskId = 0, this.showHighlight = true;
  }
  initialize() {
    this.addHandles([d3(() => [this.view, this.showHighlight], () => this._refreshVisualization()), v2(() => this.sources, "change", (e30) => {
      const t29 = this._selectionMap;
      for (const s29 of e30.removed) t29.delete(s29);
      this._refreshListeners(), this._refreshVisualization();
    }, { onListenerAdd: () => this._refreshListeners() })]);
    const e29 = new V();
    this.view.when().then(() => {
      this.view.map && (this.view.map.allLayers.flatten((e30) => "sublayers" in e30 && e30.sublayers ? e30.sublayers : null).forEach((t29) => {
        (e16(t29) && !c5(t29) || l2(t29)) && e29.add(t29);
      }), this.sources = e29);
    });
  }
  destroy() {
    this._layerEditHandles.drain(l);
  }
  get selections() {
    return Array.from(this._selectionMap.entries()).map((e29) => {
      const [t29, s29] = e29;
      return { layer: t29, selection: [...s29.selection] };
    });
  }
  get count() {
    let e29 = 0;
    for (const t29 of this._selectionMap.values()) e29 += t29.selection.length;
    return e29;
  }
  get hasSelection() {
    return this.count > 0;
  }
  get sources() {
    return this._sources;
  }
  set sources(e29) {
    n8(e29, this._sources);
  }
  async getSelectedFeatures(e29, t29 = {}, s29 = "layerView") {
    const { view: i22, selections: o31 } = this, n31 = (void 0 !== e29 ? o31.filter((t30) => e29.includes(t30.layer)) : o31).filter((e30) => e30.selection.length > 0).map(async (e30) => {
      const { layer: o32, selection: n32 } = e30, l18 = l2(o32) ? o32.parent : o32;
      if (null == l18 || !S4(l18)) return null;
      if ("layer" === s29) return M5(l18, n32, t29);
      if (v6(l18)) return null;
      const r26 = await i22.whenLayerView(l18).catch(() => null);
      return r26 ? M5(r26, n32, t29) : null;
    });
    return (await Promise.all(n31)).filter((e30) => null != e30);
  }
  updateSelection(e29) {
    const s29 = /* @__PURE__ */ new Map();
    for (const [t29, n31] of this._selectionMap) s29.set(t29, [...n31.selection]);
    let i22 = false;
    const o31 = e29.current.concat(e29.added);
    for (const t29 of o31) {
      const e30 = t29.sourceLayer, o32 = t29.getObjectId();
      if (this.sources.includes(e30) && (e16(e30) || l2(e30)) && null !== o32) {
        const t30 = r3(s29, e30, () => []);
        t30.includes(o32) || (t30.push(o32), i22 = true);
      }
    }
    for (const t29 of e29.removed) {
      const e30 = t29.sourceLayer, o32 = t29.getObjectId();
      if (this.sources.includes(e30) && (e16(e30) || l2(e30)) && null !== o32) {
        const t30 = s29.get(e30), n31 = t30 == null ? void 0 : t30.indexOf(o32);
        void 0 !== n31 && n31 >= 0 && (t30 == null ? void 0 : t30.splice(n31, 1), i22 = true);
      }
    }
    if (i22) {
      const { _selectionMap: e30, _trashCan: i23 } = this, o32 = [];
      for (const [n31, l18] of s29) {
        const s30 = e30.get(n31);
        void 0 !== s30 && i23.push(s30), e30.set(n31, { selection: l18 }), o32.push({ layer: n31, selection: l18, ...g(void 0 !== s30 ? s30.selection : [], l18) });
      }
      this._onSelectionChange(o32);
    }
  }
  setSelection(e29, t29) {
    this._setSelection(e29, t29);
  }
  getSelection(e29) {
    const t29 = this._selectionMap.get(e29);
    return t29 == null ? void 0 : t29.selection;
  }
  appendToSelection(e29, t29) {
    const s29 = this._selectionMap.get(e29), i22 = void 0 !== s29 ? [...s29.selection] : [];
    for (const o31 of t29) i22.includes(o31) || i22.push(o31);
    this._setSelection(e29, i22);
  }
  removeFromSelection(e29, t29) {
    const s29 = this._selectionMap.get(e29);
    if (!s29) return;
    const i22 = [];
    for (const o31 of s29.selection) t29.includes(o31) || i22.push(o31);
    this._setSelection(e29, i22);
  }
  toggleInSelection(e29, t29) {
    const s29 = this._selectionMap.get(e29);
    if (!s29 || 0 === s29.selection.length) return void this._setSelection(e29, t29);
    const i22 = new Set(s29.selection), o31 = new Set(t29), n31 = c2(i22, o31);
    this._setSelection(e29, Array.from(n31));
  }
  clear() {
    const e29 = this._selectionMap.values();
    this._trashCan.push(...e29);
    const t29 = [];
    for (const [s29, i22] of this._selectionMap.entries()) t29.push({ layer: s29, added: [], removed: [...i22.selection], selection: [] });
    this._selectionMap.clear(), this._onSelectionChange(t29);
  }
  _onSelectionChange(e29) {
    this._refreshVisualization(), this.emit("selection-change", { view: this.view, changes: e29 });
  }
  _refreshVisualization() {
    var _a;
    if (null == this.view || null == this.sources) return;
    for (this._vizTaskId++; this._trashCan.length > 0; ) {
      const e30 = this._trashCan.pop();
      (_a = e30 == null ? void 0 : e30.highlightHandle) == null ? void 0 : _a.remove();
    }
    const { sources: e29, view: t29, _selectionMap: s29, showHighlight: i22 } = this, o31 = this._vizTaskId;
    for (const n31 of e29) {
      const e30 = s29.get(n31), l18 = l2(n31) ? n31.parent : n31;
      if (null != l18 && S4(l18)) {
        if (v6(l18)) continue;
        t29.whenLayerView(l18).then((t30) => {
          var _a2;
          (_a2 = e30 == null ? void 0 : e30.highlightHandle) == null ? void 0 : _a2.remove(), null != e30 && i22 && o31 === this._vizTaskId && "highlight" in t30 && "function" == typeof t30.highlight && e30.selection.length > 0 && (e30.highlightHandle = t30.highlight(e30.selection, "selection"));
        }).catch(() => {
          var _a2;
          (_a2 = e30 == null ? void 0 : e30.highlightHandle) == null ? void 0 : _a2.remove();
        });
      }
    }
  }
  _refreshListeners() {
    this._layerEditHandles.drain(l);
    for (const e29 of this.sources) {
      const t29 = l2(e29) ? e29.parent : e29;
      if (null != t29 && e16(t29)) {
        const s29 = t29.on("edits", (t30) => {
          this._handleEditChanges(t30, e29);
        });
        this._layerEditHandles.push(s29);
      }
    }
  }
  _handleEditChanges(e29, t29) {
    if (void 0 !== e29.deletedFeatures && e29.deletedFeatures.length > 0 && this._selectionMap.has(t29)) {
      const i22 = e29.deletedFeatures.filter((e30) => null == e30.error).map((e30) => e30.objectId).filter(O);
      this.removeFromSelection(t29, i22);
    }
  }
  _setSelection(e29, s29) {
    if (!this.sources.includes(e29)) throw new Error(`Cannot set selection on layer ${e29.title} because it is not in 'sources'`);
    const i22 = this._selectionMap.get(e29);
    if (void 0 === i22 || !j2(i22, { selection: s29 })) {
      void 0 !== i22 && this._trashCan.push(i22), this._selectionMap.set(e29, { selection: [...s29] });
      const o31 = { layer: e29, selection: [...s29], ...g(void 0 !== i22 ? i22.selection : [], s29) };
      this._onSelectionChange([o31]);
    }
  }
};
e([y({ readOnly: true, nonNullable: true })], y4.prototype, "selections", null), e([y({ readOnly: true, nonNullable: true })], y4.prototype, "count", null), e([y({ constructOnly: true, nonNullable: true })], y4.prototype, "view", void 0), e([y({ readOnly: true, nonNullable: true })], y4.prototype, "hasSelection", null), e([y()], y4.prototype, "showHighlight", void 0), e([y()], y4.prototype, "sources", null), y4 = e([a2("esri.views.SelectionManager")], y4);
var v6 = (e29) => {
  var _a;
  return l2(e29) ? true === ((_a = e29.parent) == null ? void 0 : _a.isTable) : e29.isTable;
};
var w4 = (e29) => void 0 !== e29.layer;
var S4 = (e29) => void 0 !== (e29 == null ? void 0 : e29.when);
var j2 = (e29, t29) => {
  if (null == e29 && null == t29) return true;
  if (null != e29 && null == t29 || null == e29 && null != t29) return false;
  if (null != e29 && null != t29 && null != e29.selection && null != t29.selection) {
    const s29 = [...e29.selection], i22 = [...t29.selection];
    if (s29.length !== i22.length) return false;
    s29.sort(), i22.sort();
    for (let e30 = 0; e30 < s29.length; e30++) if (s29[e30] !== i22[e30]) return false;
  }
  return true;
};
var M5 = async (e29, t29, s29 = {}) => {
  let i22;
  if (w4(e29)) {
    const o31 = e29;
    i22 = void 0 === o31 ? null : await o31.queryFeatures(new b2({ ...s29, objectIds: t29 })).then((t30) => ({ data: t30, layer: e29.layer }));
  } else {
    const o31 = e29;
    i22 = void 0 === o31 ? null : await o31.queryFeatures(new b2({ ...s29, objectIds: t29 })).then((e30) => ({ data: e30, layer: o31 }));
  }
  return i22;
};
var b3 = y4;

// ../node_modules/@arcgis/core/views/Theme.js
var p5 = class extends i4(S2) {
  constructor(o31) {
    super(o31), this.accentColor = new u6([255, 127, 0]), this.textColor = new u6([255, 255, 255]);
  }
};
e([y({ type: u6, nonNullable: true })], p5.prototype, "accentColor", void 0), e([y({ type: u6, nonNullable: true })], p5.prototype, "textColor", void 0), p5 = e([a2("esri.views.Theme")], p5);
var l7 = p5;

// ../node_modules/@arcgis/core/views/input/IViewEvents.js
var t12;
!function(t29) {
  t29[t29.Left = 0] = "Left", t29[t29.Middle = 1] = "Middle", t29[t29.Right = 2] = "Right";
}(t12 || (t12 = {}));

// ../node_modules/@arcgis/core/views/input/ViewEvents.js
var r11 = ["click", "double-click", "immediate-click", "immediate-double-click", "hold", "drag", "key-down", "key-up", "pointer-down", "pointer-move", "pointer-up", "pointer-drag", "mouse-wheel", "pointer-enter", "pointer-leave", "gamepad", "focus", "blur"];
var o12 = {};
function s12(t29) {
  return !!o12[t29];
}
function p6(t29) {
  for (const e29 of t29) if (!s12(e29)) return false;
  return true;
}
r11.forEach((t29) => {
  o12[t29] = true;
});
var c10 = class {
  constructor(t29) {
    this._handlers = /* @__PURE__ */ new Map(), this._counter = 0, this._handlerCounts = /* @__PURE__ */ new Map(), this.view = t29, this.inputManager = null;
  }
  connect(t29) {
    t29 && this.disconnect(), this.inputManager = t29, this._handlers.forEach(({ handler: t30, priority: e29 }, n31) => {
      var _a;
      return (_a = this.inputManager) == null ? void 0 : _a.installHandlers(n31, [t30], e29);
    });
  }
  disconnect() {
    this.inputManager && this._handlers.forEach((t29, e29) => {
      var _a;
      return (_a = this.inputManager) == null ? void 0 : _a.uninstallHandlers(e29);
    }), this.inputManager = null;
  }
  destroy() {
    this.disconnect(), this._handlers.clear(), this.view = null;
  }
  on(e29, n31, a22, r26) {
    const o31 = Array.isArray(e29) ? e29 : e29.split(",");
    if (!p6(o31)) return o31.some(s12) && console.error("Error: registering input events and other events on the view at the same time is not supported."), null;
    let c28, u17;
    Array.isArray(n31) ? u17 = n31 : (c28 = n31, u17 = []), "function" == typeof a22 ? c28 = a22 : r26 = a22, r26 = null != r26 ? r26 : _4.DEFAULT;
    const m24 = this._createUniqueGroupName(), d21 = new l8(this.view, o31, u17, c28);
    this._handlers.set(m24, { handler: d21, priority: r26 });
    for (const t29 of o31) {
      const e30 = this._handlerCounts.get(t29) || 0;
      this._handlerCounts.set(t29, e30 + 1);
    }
    return this.inputManager && this.inputManager.installHandlers(m24, [d21], r26), e3(() => this._removeHandler(m24, o31));
  }
  hasHandler(t29) {
    return !!this._handlerCounts.get(t29);
  }
  _removeHandler(t29, e29) {
    if (this._handlers.has(t29)) {
      this._handlers.delete(t29);
      for (const t30 of e29) {
        const e30 = this._handlerCounts.get(t30);
        void 0 === e30 || (1 === e30 ? this._handlerCounts.delete(t30) : this._handlerCounts.set(t30, e30 - 1));
      }
    }
    this.inputManager && this.inputManager.uninstallHandlers(t29);
  }
  _createUniqueGroupName() {
    return this._counter += 1, `viewEvents_${this._counter}`;
  }
};
var l8 = class extends t8 {
  constructor(t29, e29, n31, a22) {
    super(true), this._latestDragStart = void 0, this.view = t29;
    for (const i22 of e29) switch (i22) {
      case "click":
        this.registerIncoming("click", n31, (e30) => a22(d8(t29, e30)));
        break;
      case "double-click":
        this.registerIncoming("double-click", n31, (e30) => a22(g9(t29, e30)));
        break;
      case "immediate-click":
        this.registerIncoming("immediate-click", n31, (e30) => a22(y5(t29, e30)));
        break;
      case "immediate-double-click":
        this.registerIncoming("immediate-double-click", n31, (e30) => a22(v7(t29, e30)));
        break;
      case "hold":
        this.registerIncoming("hold", n31, (e30) => a22(h7(t29, e30)));
        break;
      case "drag":
        this.registerIncoming("drag", n31, (t30) => {
          const e30 = this._wrapDrag(t30);
          e30 && a22(e30);
        });
        break;
      case "key-down":
        this.registerIncoming("key-down", n31, (t30) => a22(f9(t30)));
        break;
      case "key-up":
        this.registerIncoming("key-up", n31, (t30) => a22(k(t30)));
        break;
      case "pointer-down":
        this.registerIncoming("pointer-down", n31, (t30) => a22(I2(t30, "pointer-down")));
        break;
      case "pointer-move":
        this.registerIncoming("pointer-move", n31, (t30) => a22(I2(t30, "pointer-move")));
        break;
      case "pointer-up":
        this.registerIncoming("pointer-up", n31, (t30) => a22(I2(t30, "pointer-up")));
        break;
      case "pointer-drag":
        this.registerIncoming("pointer-drag", n31, (t30) => a22(D(t30)));
        break;
      case "mouse-wheel":
        this.registerIncoming("mouse-wheel", n31, (t30) => a22(P4(t30)));
        break;
      case "pointer-enter":
        this.registerIncoming("pointer-enter", n31, (t30) => a22(I2(t30, "pointer-enter")));
        break;
      case "pointer-leave":
        this.registerIncoming("pointer-leave", n31, (t30) => a22(I2(t30, "pointer-leave")));
        break;
      case "gamepad":
        this.registerIncoming("gamepad", n31, (t30) => {
          a22(_7(t30));
        });
        break;
      case "focus":
        this.registerIncoming("focus", n31, (t30) => {
          a22(u7(t30));
        });
        break;
      case "blur":
        this.registerIncoming("blur", n31, (t30) => {
          a22(m12(t30));
        });
    }
  }
  _wrapDrag(t29) {
    const n31 = t29.data, { x: a22, y: i22 } = n31.center, { action: r26, pointerType: o31, button: s29 } = n31;
    if ("start" === r26 && (this._latestDragStart = n31), !this._latestDragStart) return;
    const p24 = n31.pointer.native, c28 = n31.buttons, { cancelable: l18, timestamp: u17 } = t29, m24 = { x: this._latestDragStart.center.x, y: this._latestDragStart.center.y };
    return "end" === r26 && (this._latestDragStart = void 0), { type: "drag", action: r26, x: a22, y: i22, origin: m24, pointerType: o31, button: s29, buttons: c28, radius: n31.radius, angle: M(n31.angle), native: p24, timestamp: u17, cancelable: l18, stopPropagation: () => t29.stopPropagation(), async: (e29) => t29.async(e29), preventDefault: () => t29.preventDefault() };
  }
};
function u7(t29) {
  return { type: "focus", timestamp: t29.timestamp, native: t29.data.native, cancelable: t29.cancelable, stopPropagation: () => t29.stopPropagation(), async: (e29) => t29.async(e29), preventDefault: () => t29.preventDefault() };
}
function m12(t29) {
  return { type: "blur", timestamp: t29.timestamp, native: t29.data.native, cancelable: t29.cancelable, stopPropagation: () => t29.stopPropagation(), async: (e29) => t29.async(e29), preventDefault: () => t29.preventDefault() };
}
function d8(t29, e29) {
  const { pointerType: a22, button: i22, buttons: r26, x: o31, y: s29, native: p24, eventId: c28 } = e29.data, { cancelable: l18, timestamp: u17 } = e29;
  return { type: "click", pointerType: a22, button: i22, buttons: r26, x: o31, y: s29, native: p24, timestamp: u17, screenPoint: c6(o31, s29), mapPoint: b4(t29, o31, s29), eventId: c28, cancelable: l18, stopPropagation: () => e29.stopPropagation(), async: (t30) => e29.async(t30), preventDefault: () => e29.preventDefault() };
}
function g9(t29, e29) {
  const { pointerType: n31, button: a22, buttons: i22, x: r26, y: o31, native: s29, eventId: p24 } = e29.data, { cancelable: c28, timestamp: l18 } = e29;
  return { type: "double-click", pointerType: n31, button: a22, buttons: i22, x: r26, y: o31, native: s29, timestamp: l18, mapPoint: b4(t29, r26, o31), eventId: p24, cancelable: c28, stopPropagation: () => e29.stopPropagation(), async: (t30) => e29.async(t30), preventDefault: () => e29.preventDefault() };
}
function y5(t29, e29) {
  const { pointerType: n31, button: a22, buttons: i22, x: r26, y: o31, native: s29, eventId: p24 } = e29.data, c28 = s29.pointerId, { cancelable: l18, timestamp: u17 } = e29;
  return { type: "immediate-click", pointerId: c28, pointerType: n31, button: a22, buttons: i22, x: r26, y: o31, native: s29, timestamp: u17, mapPoint: b4(t29, r26, o31), eventId: p24, cancelable: l18, stopPropagation: () => e29.stopPropagation(), async: (t30) => e29.async(t30), preventDefault: () => e29.preventDefault() };
}
function v7(t29, e29) {
  const { pointerType: n31, button: a22, buttons: i22, x: r26, y: o31, native: s29, eventId: p24 } = e29.data, c28 = s29.pointerId, { cancelable: l18, timestamp: u17 } = e29;
  return { type: "immediate-double-click", pointerId: c28, pointerType: n31, button: a22, buttons: i22, x: r26, y: o31, native: s29, timestamp: u17, mapPoint: b4(t29, r26, o31), eventId: p24, cancelable: l18, stopPropagation: () => e29.stopPropagation(), async: (t30) => e29.async(t30), preventDefault: () => e29.preventDefault() };
}
function h7(t29, e29) {
  const { pointerType: n31, button: a22, buttons: i22, x: r26, y: o31, native: s29 } = e29.data, { cancelable: p24, timestamp: c28 } = e29;
  return { type: "hold", pointerType: n31, button: a22, buttons: i22, x: r26, y: o31, native: s29, timestamp: c28, mapPoint: b4(t29, r26, o31), cancelable: p24, stopPropagation: () => e29.stopPropagation(), async: (t30) => e29.async(t30), preventDefault: () => e29.preventDefault() };
}
function b4(t29, e29, a22) {
  return t29.toMap(c6(e29, a22), { exclude: [] });
}
function f9(t29) {
  const { key: e29, repeat: n31, native: a22 } = t29.data, { cancelable: i22, timestamp: r26 } = t29;
  return { type: "key-down", key: e29, repeat: n31, native: a22, timestamp: r26, cancelable: i22, stopPropagation: () => t29.stopPropagation(), async: (e30) => t29.async(e30), preventDefault: () => t29.preventDefault() };
}
function k(t29) {
  const { key: e29, native: n31 } = t29.data, { cancelable: a22, timestamp: i22 } = t29;
  return { type: "key-up", key: e29, native: n31, timestamp: i22, cancelable: a22, stopPropagation: () => t29.stopPropagation(), async: (e30) => t29.async(e30), preventDefault: () => t29.preventDefault() };
}
function I2(t29, e29) {
  const { x: n31, y: a22, button: i22, buttons: r26, native: o31, eventId: s29 } = t29.data, p24 = o31.pointerId, c28 = o31.pointerType, { cancelable: l18, timestamp: u17 } = t29;
  return { type: e29, x: n31, y: a22, pointerId: p24, pointerType: c28, button: i22, buttons: r26, native: o31, timestamp: u17, eventId: s29, cancelable: l18, stopPropagation: () => t29.stopPropagation(), async: (e30) => t29.async(e30), preventDefault: () => t29.preventDefault() };
}
function D(t29) {
  const { x: e29, y: n31, buttons: a22, native: i22, eventId: r26 } = t29.data.currentEvent, { button: o31 } = t29.data.startEvent, s29 = t29.data.startEvent.native.pointerId, p24 = t29.data.startEvent.native.pointerType, c28 = t29.data.action, l18 = { x: t29.data.startEvent.x, y: t29.data.startEvent.y }, { cancelable: u17, timestamp: m24 } = t29;
  return { type: "pointer-drag", x: e29, y: n31, pointerId: s29, pointerType: p24, button: o31, buttons: a22, action: c28, origin: l18, native: i22, timestamp: m24, eventId: r26, cancelable: u17, stopPropagation: () => t29.stopPropagation(), async: (e30) => t29.async(e30), preventDefault: () => t29.preventDefault() };
}
function P4(t29) {
  const { cancelable: e29, data: n31, timestamp: a22 } = t29, { x: i22, y: r26, deltaY: o31, native: s29 } = n31;
  return { type: "mouse-wheel", x: i22, y: r26, deltaY: o31, native: s29, timestamp: a22, cancelable: e29, stopPropagation: () => t29.stopPropagation(), async: (e30) => t29.async(e30), preventDefault: () => t29.preventDefault() };
}
function _7(t29) {
  const { action: e29, state: n31, device: a22 } = t29.data, { cancelable: i22, timestamp: r26 } = t29, { buttons: o31, axes: s29 } = n31;
  return { type: "gamepad", device: a22, timestamp: r26, action: e29, buttons: o31, axes: s29, cancelable: i22, stopPropagation: () => t29.stopPropagation(), async: (e30) => t29.async(e30), preventDefault: () => t29.preventDefault() };
}

// ../node_modules/@arcgis/core/views/interactive/interfaces.js
var o13;
var t13;
var u8;
!function(o31) {
  o31[o31.USER = 0] = "USER", o31[o31.MANAGER = 1] = "MANAGER";
}(o13 || (o13 = {})), function(o31) {
  o31[o31.None = 0] = "None", o31[o31.Unfocused = 1] = "Unfocused", o31[o31.Focused = 2] = "Focused", o31[o31.Unselected = 4] = "Unselected", o31[o31.Selected = 8] = "Selected", o31[o31.All = 15] = "All";
}(t13 || (t13 = {})), function(o31) {
  o31[o31.None = 0] = "None", o31[o31.Custom1 = 16] = "Custom1", o31[o31.Custom2 = 32] = "Custom2", o31[o31.Custom3 = 64] = "Custom3", o31[o31.Custom4 = 128] = "Custom4", o31[o31.Custom5 = 256] = "Custom5", o31[o31.Custom6 = 512] = "Custom6", o31[o31.Custom7 = 1024] = "Custom7", o31[o31.Custom8 = 2048] = "Custom8", o31[o31.Custom9 = 4096] = "Custom9", o31[o31.Custom10 = 8192] = "Custom10", o31[o31.Custom11 = 16384] = "Custom11", o31[o31.Custom12 = 32768] = "Custom12", o31[o31.All = 65520] = "All";
}(u8 || (u8 = {}));

// ../node_modules/@arcgis/core/views/interactive/interactiveToolUtils.js
function o14(t29) {
  return [t29.on("before-add", (o31) => {
    const i22 = o31.item;
    if (null == i22 || t29.includes(i22)) return n.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."), void o31.preventDefault();
    i22.onAdd();
  }), t29.on("after-remove", (e29) => {
    const t30 = e29.item;
    t30.active && (t30.view.activeTool = null), t30.destroy();
  })];
}
function i9(e29) {
  return e29.visible && null != e29.getEditableFlag && e29.getEditableFlag(o13.USER) && e29.getEditableFlag(o13.MANAGER);
}

// ../node_modules/@arcgis/core/views/support/screenUtils.js
function n16(t29) {
  return c6(t29.x, t29.y);
}
function i11(t29, n31) {
  var _a;
  const c28 = (_a = t29 instanceof HTMLElement ? t29 : t29.surface) == null ? void 0 : _a.getBoundingClientRect();
  return c28 ? c6(n31.clientX - c28.left, n31.clientY - c28.top) : c6(0, 0);
}
function r12(e29, t29) {
  return t29 instanceof Event ? i11(e29, t29) : n16(t29);
}
function o15(e29) {
  if (e29 instanceof Event) return true;
  if ("object" == typeof e29 && "type" in e29) {
    switch (e29.type) {
      case "click":
      case "double-click":
      case "pointer-down":
      case "pointer-drag":
      case "pointer-enter":
      case "pointer-leave":
      case "pointer-up":
      case "pointer-move":
      case "immediate-click":
      case "immediate-double-click":
      case "hold":
      case "drag":
      case "mouse-wheel":
        return true;
      default:
        return false;
    }
  }
  return false;
}

// ../node_modules/@arcgis/core/views/interactive/ToolViewManagerManipulatorState.js
var n17 = class {
  constructor() {
    this._pointerLocations = /* @__PURE__ */ new Map(), this._hoveredManipulators = /* @__PURE__ */ new Map(), this._grabbedManipulators = /* @__PURE__ */ new Map(), this._draggedManipulators = /* @__PURE__ */ new Map(), this._stopDrag = false, this._revertToNullActiveTool = false, this._cursor = null;
  }
  get cursor() {
    return this._cursor;
  }
  hasFocusedManipulators() {
    return this._grabbedManipulators.size > 0 || this._draggedManipulators.size > 0;
  }
  handleInputEvent(t29, e29) {
    const a22 = () => t29.stopPropagation();
    switch (t29.type) {
      case "pointer-move":
        p7(t29.pointerType) && this._pointerLocations.set(t29.pointerId, { x: t29.x, y: t29.y, pointerType: t29.pointerType });
        break;
      case "drag":
        this._grabbedManipulators.size > 0 && (this._stopDrag = true), this._stopDrag && (a22(), "end" === t29.action && (this._stopDrag = false));
        break;
      case "pointer-down": {
        if (!u9(t29)) break;
        const o31 = n16(t29), i22 = l9(o31, t29.pointerType, e29.forEachTool);
        if (null == i22) break;
        const n31 = i22.manipulator, s29 = i22.tool;
        null == n31 || null == s29 || !n31.interactive || n31.grabbable && n31.grabbableForEvent(t29) || !n31.grabbing || n31.dragging || this._releaseManipulatorBeforeDragging(n31, t29, e29), null != n31 && null != s29 && n31.interactive && n31.grabbable && n31.grabbableForEvent(t29) && !n31.grabbing && (this._grabbedManipulators.set(t29.pointerId, { manipulator: n31, tool: s29, start: o31, pointerType: t29.pointerType }), 1 === this._grabbedManipulators.size && null == e29.activeTool && (this._revertToNullActiveTool = true, e29.setActiveTool(i22.tool)), n31.grabbing = true, n31.events.emit("grab-changed", { action: "start", pointerType: t29.pointerType, screenPoint: o31 }), a22());
        break;
      }
      case "pointer-up":
        this._draggedManipulators.has(t29.pointerId) || this._handlePointerEnd(t29, e29);
        break;
      case "pointer-drag": {
        if (!u9(t29)) break;
        const i22 = this._grabbedManipulators.get(t29.pointerId), n31 = i22 == null ? void 0 : i22.manipulator, s29 = i22 == null ? void 0 : i22.tool;
        if (null == n31 || null == s29) break;
        const l18 = n16(t29);
        l18.x = e8(l18.x, 0, e29.view.width), l18.y = e8(l18.y, 0, e29.view.height);
        const p24 = i22.start, c28 = this._draggedManipulators.get(t29.pointerId);
        switch (t29.action) {
          case "start":
          case "update":
            "update" !== t29.action && 1 !== this._grabbedManipulators.size || (n31.dragging = true, c28 ? n31.events.emit("drag", { action: "update", start: p24, screenPoint: l18 }) : n31.events.emit("drag", { action: "start", start: p24, screenPoint: l18, pointerType: t29.pointerType }), this._draggedManipulators.set(t29.pointerId, { tool: s29, manipulator: n31, start: p24 }));
            break;
          case "end":
            n31.dragging = false, c28 && n31.events.emit("drag", { action: "end", start: p24, screenPoint: l18 }), this._draggedManipulators.delete(t29.pointerId), this._handlePointerEnd(t29, e29);
        }
        a22();
        break;
      }
      case "immediate-click": {
        const o31 = n16(t29), i22 = l9(o31, t29.pointerType, e29.forEachTool);
        if (c11(t29) || e29.forEachTool((t30) => {
          if ((null == i22 || i22.tool !== t30 || t30.automaticManipulatorSelection) && t30.manipulators) {
            let e30 = false;
            t30.manipulators.forEach(({ manipulator: t31 }) => {
              t31.selected && (t31.selected = false, e30 = true);
            }), e30 && t30.onManipulatorSelectionChanged && t30.onManipulatorSelectionChanged();
          }
        }), null == i22) break;
        const { manipulator: n31, tool: s29 } = i22;
        if (!n31.interactive) break;
        n31.selectable && s29.automaticManipulatorSelection && (n31.selected = !n31.selected, s29.onManipulatorSelectionChanged && s29.onManipulatorSelectionChanged());
        const p24 = t29.native.shiftKey;
        n31.events.emit("immediate-click", { screenPoint: o31, button: t29.button, pointerType: t29.pointerType, shiftKey: p24, stopPropagation: a22 }), d9(n31, a22);
        break;
      }
      case "click": {
        const o31 = n16(t29), i22 = l9(o31, t29.pointerType, e29.forEachTool), n31 = i22 == null ? void 0 : i22.manipulator;
        if (null == n31 || !n31.interactive) break;
        const s29 = t29.native.shiftKey;
        n31.events.emit(t29.type, { screenPoint: o31, button: t29.button, pointerType: t29.pointerType, shiftKey: s29 }), a22();
        break;
      }
      case "double-click": {
        const o31 = n16(t29), i22 = l9(o31, t29.pointerType, e29.forEachTool), n31 = null != i22 ? i22.manipulator : null;
        if (null == n31 || !n31.interactive) break;
        const s29 = t29.native.shiftKey;
        n31.events.emit("double-click", { screenPoint: o31, button: t29.button, pointerType: t29.pointerType, shiftKey: s29, stopPropagation: a22 }), d9(n31, a22);
        break;
      }
      case "immediate-double-click": {
        const o31 = n16(t29), i22 = l9(o31, t29.pointerType, e29.forEachTool), n31 = null != i22 ? i22.manipulator : null;
        if (null == n31 || !n31.interactive) break;
        const s29 = t29.native.shiftKey;
        n31.events.emit("immediate-double-click", { screenPoint: o31, button: t29.button, pointerType: t29.pointerType, shiftKey: s29, stopPropagation: a22 }), d9(n31, a22);
        break;
      }
    }
    this._onFocusChange(e29.forEachTool);
  }
  _releaseManipulatorBeforeDragging(t29, e29, o31) {
    t29.grabbing = false, t29.events.emit("grab-changed", { action: "end", pointerType: e29.pointerType, screenPoint: n16(e29) }), this._grabbedManipulators.forEach(({ manipulator: e30 }, o32) => {
      e30 === t29 && this._grabbedManipulators.delete(o32);
    }), this._afterManipulatorRelease(o31.setActiveTool);
  }
  _handlePointerEnd(t29, e29) {
    var _a;
    const o31 = (_a = this._grabbedManipulators.get(t29.pointerId)) == null ? void 0 : _a.manipulator;
    null != o31 && o31.grabbing && (o31.grabbing = false, o31.events.emit("grab-changed", { action: "end", pointerType: t29.pointerType, screenPoint: n16(t29) }), this._grabbedManipulators.delete(t29.pointerId), this._afterManipulatorRelease(e29.setActiveTool));
  }
  _onFocusChange(t29) {
    this._updateCursor(), this._updateFocusedManipulatorTools(t29);
  }
  _updateCursor() {
    this._grabbedManipulators.size > 0 ? this._cursor = s13(this._grabbedManipulators) || "grabbing" : this._hoveredManipulators.size > 0 ? this._cursor = s13(this._hoveredManipulators) || "pointer" : this._cursor = null;
  }
  _updateFocusedManipulatorTools(e29) {
    const o31 = /* @__PURE__ */ new Set(), a22 = /* @__PURE__ */ new Set();
    this._grabbedManipulators.forEach(({ tool: t29 }) => {
      o31.add(t29);
    }), this._hoveredManipulators.forEach(({ tool: t29 }) => {
      a22.add(t29);
    }), e29((e30) => {
      e30.hasGrabbedManipulators = o31.has(e30), e30.hasHoveredManipulators = a22.has(e30);
      const i22 = this._grabbedManipulators.values(), r26 = o(i22, ({ tool: t29 }) => t29 === e30);
      e30.firstGrabbedManipulator = null != r26 ? r26.manipulator : null;
    });
  }
  clearPointers(t29, { forEachTool: e29, setActiveTool: o31 }, a22 = true, i22) {
    const r26 = (e30, o32) => e30 === t29 && (null == i22 || i22 === o32);
    this._grabbedManipulators.forEach(({ tool: t30, manipulator: e30, pointerType: o32 }, a23) => {
      r26(t30, e30) && (this._grabbedManipulators.delete(a23), e30.grabbing = false, e30.events.emit("grab-changed", { action: "end", screenPoint: null, pointerType: o32 }));
    }), this._draggedManipulators.forEach(({ tool: t30, manipulator: e30 }, o32) => {
      r26(t30, e30) && (this._draggedManipulators.delete(o32), e30.dragging = false, e30.events.emit("drag", { action: "cancel" }));
    }), a22 && this._hoveredManipulators.forEach(({ tool: t30, manipulator: e30 }, o32) => {
      r26(t30, e30) && (this._hoveredManipulators.delete(o32), e30.hovering = false);
    }), this._afterManipulatorRelease(o31), this._onFocusChange(e29);
  }
  updateHoveredStateFromKnownPointers(t29) {
    this._pointerLocations.forEach((e29, o31) => {
      this._updateHoveredStateForPointerAtScreenPosition(c6(e29.x, e29.y), o31, e29.pointerType, t29);
    });
  }
  handleHoverEvent(t29, e29) {
    "pointer-up" !== t29.type && "immediate-click" !== t29.type && "pointer-move" !== t29.type || !p7(t29.pointerType) || this._updateHoveredStateForPointerAtScreenPosition(n16(t29), t29.pointerId, t29.pointerType, e29);
  }
  _updateHoveredStateForPointerAtScreenPosition(t29, e29, o31, a22) {
    var _a;
    let i22 = l9(t29, o31, a22);
    const r26 = (_a = this._hoveredManipulators.get(e29)) == null ? void 0 : _a.manipulator;
    null == i22 || i22.manipulator.interactive || (i22 = null), null != i22 && r26 === i22.manipulator || (null != r26 && (r26.hovering = false), null != i22 ? (i22.manipulator.hovering = true, this._hoveredManipulators.set(e29, i22)) : this._hoveredManipulators.delete(e29), this._onFocusChange(a22));
  }
  _afterManipulatorRelease(t29) {
    0 === this._grabbedManipulators.size && this._revertToNullActiveTool && (t29(null), this._revertToNullActiveTool = false);
  }
};
function s13(t29) {
  let o31 = null;
  return n3(t29, ({ manipulator: t30 }) => !(null == t30 || !t30.interactive) && (t30.grabbing && t30.grabCursor ? (o31 = t30.grabCursor, true) : !!t30.cursor && (o31 = t30.cursor, true))), o31;
}
function l9(t29, e29, o31) {
  let a22 = null;
  return o31((o32) => {
    if (null == o32.manipulators || !i9(o32)) return false;
    const r26 = o32.manipulators.intersect(t29, e29);
    return null != r26 && (a22 = { tool: o32, manipulator: r26 }, true);
  }), a22;
}
function p7(t29) {
  return "mouse" === t29;
}
function u9(t29) {
  return "mouse" !== t29.pointerType || 0 === t29.button;
}
function c11(t29) {
  return !!t29.native.shiftKey;
}
function d9(t29, e29) {
  (t29 == null ? void 0 : t29.consumesClicks) && e29();
}

// ../node_modules/@arcgis/core/views/ToolViewManager.js
var _8 = "attached";
var g10 = "tools";
var T = 1e3;
var f10 = class extends S2 {
  constructor(t29) {
    super(t29), this._updatingHandles = new h4(), this._clock = o3, this._manipulatorState = new n17(), this.tools = new V(), this.cursor = null, this._interacting = false, this._interactingTimeout = T, this._interactingTimeoutHandle = null, this._forEachTool = (t30) => {
      for (const o31 of this.tools.items) if (t30(o31)) return;
    };
  }
  initialize() {
    this.addHandles([this.view.on(r11, (t29) => {
      this._handleInputEvent(t29);
    }, _4.TOOL), ...o14(this.tools), this.tools.on("before-add", ({ item: t29 }) => {
      this._updateToolEditableFlag(t29);
    }), this.tools.on("before-remove", ({ item: t29 }) => {
      this._manipulatorState.clearPointers(t29, this._manipulatorStateEventArgs), this._updateCursor();
    }), this.tools.on("change", () => {
      this._refreshToolWatchers();
    })]);
  }
  destroy() {
    this.activeTool = null, this.tools.drain((t29) => t29.destroy()), this._clearInteractingTimeout(), this._interacting = false, this._updatingHandles.destroy();
  }
  get _manipulatorStateEventArgs() {
    return { forEachTool: this._forEachTool, activeTool: this.activeTool, setActiveTool: (t29) => {
      this.activeTool = t29;
    }, view: this.view };
  }
  set activeTool(t29) {
    if (null != t29 && !this.view.ready) return void n.getLogger(this).error("Cannot set active tool while view is not ready.");
    if (t29 === this.activeTool) return;
    const o31 = this.activeTool;
    this._set("activeTool", t29), null != o31 && o31.deactivate(), null != t29 && t29.activate(), this._removeIncompleteTools(t29);
    for (const e29 of this.tools) {
      this._updateToolEditableFlag(e29);
      const t30 = i9(e29);
      null != this.activeTool && t30 || this._manipulatorState.clearPointers(e29, this._manipulatorStateEventArgs, !t30);
    }
    this._updateCursor();
  }
  get updating() {
    return this._updatingHandles.updating || this.tools.some((t29) => t29.updating);
  }
  get interacting() {
    return this._interacting;
  }
  _clearInteractingTimeout() {
    this._interactingTimeoutHandle = l(this._interactingTimeoutHandle);
  }
  _startInteractingTimeout() {
    this._clearInteractingTimeout(), this._interactingTimeoutHandle = this._clock.setTimeout(() => this._interacting = false, this._interactingTimeout);
  }
  attach() {
    var _a;
    "3d" === this.view.type ? this.addHandles([d3(() => {
      const { state: t29 } = this.view;
      return "camera" in t29 && t29.camera;
    }, () => this._forEachManipulator((t29) => t29.onViewChange())), (_a = this.view.elevationProvider) == null ? void 0 : _a.on("elevation-change", (t29) => this._forEachManipulator((o31) => o31.onElevationChange(t29)))], _8) : this.addHandles(d3(() => this.view.extent, () => this._forEachManipulator((t29) => t29.onViewChange())));
  }
  detach() {
    this.activeTool = null, this.tools.removeAll(), this.removeHandles(_8), this._clearInteractingTimeout(), this._interacting = false;
  }
  _forEachManipulator(t29) {
    this._forEachTool((o31) => {
      o31.manipulators && o31.manipulators.forEach(({ manipulator: e29 }) => t29(e29, o31));
    });
  }
  _handleInputEvent(t29) {
    let o31 = false;
    const e29 = { ...t29, stopPropagation: () => {
      o31 = true, t29.stopPropagation();
    } };
    null != this.activeTool ? this.activeTool.handleInputEvent && this.activeTool.handleInputEvent(e29) : this._forEachTool((t30) => {
      !o31 && t30.visible && t30.handleInputEvent(e29);
    }), !o31 && "key-down" === t29.type && "Escape" === t29.key && this.activeTool && (t29.stopPropagation(), this.activeTool = null), this._manipulatorState.handleInputEvent(e29, this._manipulatorStateEventArgs), o31 || null == this.activeTool || this.activeTool.handleInputEventAfter(e29), this._manipulatorState.handleHoverEvent(e29, this._forEachTool), this._updateCursor(), "pointer-move" === t29.type && (this._manipulatorState.hasFocusedManipulators() || this.activeTool) && (this._interacting = true, this._startInteractingTimeout());
  }
  _refreshToolWatchers() {
    this.removeHandles(g10), this._forEachTool((t29) => {
      if (t29 instanceof S2) {
        const o31 = d3(() => [t29.cursor, t29.visible, t29.editable], () => {
          i9(t29) || this._manipulatorState.clearPointers(t29, this._manipulatorStateEventArgs), this._updateCursor();
        });
        this.addHandles(o31, g10);
      }
      t29.manipulators && this.addHandles([t29.manipulators.on("after-remove", (o31) => {
        this._manipulatorState.clearPointers(t29, this._manipulatorStateEventArgs, true, o31.item.manipulator);
      }), t29.manipulators.on("change", () => {
        this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool), this._updateCursor();
      })], g10);
    }), this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool), this._updateCursor();
  }
  _updateToolEditableFlag(t29) {
    var _a;
    (_a = t29.setEditableFlag) == null ? void 0 : _a.call(t29, o13.MANAGER, null == this.activeTool || t29 === this.activeTool);
  }
  _updateCursor() {
    let t29 = this._manipulatorState.cursor;
    null == t29 && this._forEachTool((o31) => !(null == o31.cursor || !o31.visible) && (t29 = o31.cursor, true)), this._get("cursor") !== t29 && this._set("cursor", t29);
  }
  _removeIncompleteTools(t29) {
    this.tools.filter((o31) => (null == t29 || o31 !== t29) && !o31.created && o31.removeIncompleteOnCancel).forEach((t30) => {
      this.tools.remove(t30);
    });
  }
  get test() {
  }
};
e([y({ constructOnly: true, nonNullable: true })], f10.prototype, "view", void 0), e([y({ value: null })], f10.prototype, "activeTool", null), e([y({ readOnly: true, type: V })], f10.prototype, "tools", void 0), e([y({ readOnly: true })], f10.prototype, "cursor", void 0), e([y({ readOnly: true })], f10.prototype, "updating", null), e([y()], f10.prototype, "_interacting", void 0), e([y({ readOnly: true })], f10.prototype, "interacting", null), f10 = e([a2("esri.views.ToolViewManager")], f10);

// ../node_modules/@arcgis/core/views/input/gamepad/GamepadInputDevice.js
var n18 = class extends S2 {
  constructor(e29) {
    super(), this.nativeIndex = null, this._detectedDeviceType = "unknown", "standard" === e29.mapping ? this._detectedDeviceType = "standard" : i12.test(e29.id) ? this._detectedDeviceType = "spacemouse" : this._detectedDeviceType = "unknown", this.nativeIndex = e29.index;
  }
  get native() {
    const e29 = navigator.getGamepads ? navigator.getGamepads() : [];
    return null != this.nativeIndex && this.nativeIndex < e29.length ? e29[this.nativeIndex] : null;
  }
  get deviceType() {
    return this._detectedDeviceType;
  }
  get axisThreshold() {
    return a5[this.deviceType];
  }
};
e([y({ nonNullable: true, readOnly: true })], n18.prototype, "nativeIndex", void 0), e([y({ type: String, readOnly: true })], n18.prototype, "deviceType", null), e([y({ type: Number, readOnly: true })], n18.prototype, "axisThreshold", null), n18 = e([a2("esri.views.input.gamepad.GamepadInputDevice")], n18);
var o16 = n18;
var i12 = new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))", "i");
var a5 = { standard: 0.15, spacemouse: 0.025, unknown: 0 };

// ../node_modules/@arcgis/core/views/input/gamepad/GamepadSettings.js
var p8 = class extends S2 {
  constructor(...o31) {
    super(...o31), this.devices = new V(), this.enabledFocusMode = "document";
  }
};
e([y({ type: V.ofType(o16), readOnly: true })], p8.prototype, "devices", void 0), e([y({ type: ["document", "view", "none"] })], p8.prototype, "enabledFocusMode", void 0), p8 = e([a2("esri.views.input.gamepad.GamepadSettings")], p8);
var i13 = p8;

// ../node_modules/@arcgis/core/views/input/Input.js
var p9 = class extends S2 {
  constructor() {
    super(...arguments), this.gamepad = new i13();
  }
};
e([y({ readOnly: true })], p9.prototype, "gamepad", void 0), p9 = e([a2("esri.views.input.Input")], p9);
var a6 = p9;

// ../node_modules/@arcgis/core/views/navigation/gamepad/GamepadSettings.js
var s14 = class extends S2 {
  constructor(o31) {
    super(o31), this.enabled = true, this.device = null, this.mode = "pan", this.tiltDirection = "forward-down", this.velocityFactor = 1;
  }
};
e([y({ type: Boolean, nonNullable: true })], s14.prototype, "enabled", void 0), e([y({ type: o16 })], s14.prototype, "device", void 0), e([y({ type: ["pan", "zoom"], nonNullable: true })], s14.prototype, "mode", void 0), e([y({ type: ["forward-down", "forward-up"], nonNullable: true })], s14.prototype, "tiltDirection", void 0), e([y({ type: Number, nonNullable: true })], s14.prototype, "velocityFactor", void 0), s14 = e([a2("esri.views.navigation.gamepad.GamepadSettings")], s14);
var i14 = s14;

// ../node_modules/@arcgis/core/views/navigation/Navigation.js
var m13 = class extends S2 {
  constructor(o31) {
    super(o31), this.browserTouchPanEnabled = true, this.gamepad = new i14(), this.momentumEnabled = true, this.mouseWheelZoomEnabled = true;
  }
  get effectiveMomentumEnabled() {
    return this.momentumEnabled && !o10();
  }
};
e([y({ type: Boolean })], m13.prototype, "browserTouchPanEnabled", void 0), e([y({ type: i14, nonNullable: true })], m13.prototype, "gamepad", void 0), e([y({ type: Boolean })], m13.prototype, "momentumEnabled", void 0), e([y({ type: Boolean })], m13.prototype, "mouseWheelZoomEnabled", void 0), m13 = e([a2("esri.views.navigation.Navigation")], m13);
var p10 = m13;

// ../node_modules/@arcgis/core/geometry/support/heightModelInfoUtils.js
var r13;
function l10(e29) {
  var _a;
  if ("integrated-mesh-3dtiles" === e29.type) return null;
  const i22 = e29.url ? d5(e29.url) : void 0, a22 = (_a = e29.spatialReference) == null ? void 0 : _a.vcsWkid;
  return !(null == a22 && null != i22 && "ImageServer" === i22.serverType) && h8(e29) && e29.heightModelInfo ? e29.heightModelInfo : d10(e29) ? v3.deriveUnitFromSR(p11, e29.spatialReference) : null;
}
function h8(e29) {
  return "heightModelInfo" in e29;
}
function u10(e29) {
  if ("unknown" === e29.type || !("capabilities" in e29)) return false;
  switch (e29.type) {
    case "catalog":
    case "catalog-footprint":
    case "csv":
    case "feature":
    case "geojson":
    case "subtype-group":
    case "ogc-feature":
    case "oriented-imagery":
    case "wfs":
    case "knowledge-graph-sublayer":
      return true;
    default:
      return false;
  }
}
function d10(e29) {
  return u10(e29) ? !!(e29.capabilities && e29.capabilities.data && e29.capabilities.data.supportsZ) : f11(e29);
}
function g11(e29) {
  return null != e29.layers || f11(e29) || u10(e29) || h8(e29);
}
function f11(e29) {
  switch (e29.type) {
    case "building-scene":
    case "elevation":
    case "integrated-mesh":
    case "integrated-mesh-3dtiles":
    case "point-cloud":
    case "scene":
    case "voxel":
      return true;
    case "base-dynamic":
    case "base-elevation":
    case "base-tile":
    case "bing-maps":
    case "catalog":
    case "catalog-footprint":
    case "catalog-dynamic-group":
    case "csv":
    case "dimension":
    case "geojson":
    case "feature":
    case "subtype-group":
    case "geo-rss":
    case "graphics":
    case "group":
    case "imagery":
    case "imagery-tile":
    case "kml":
    case "knowledge-graph":
    case "link-chart":
    case "knowledge-graph-sublayer":
    case "line-of-sight":
    case "map-image":
    case "map-notes":
    case "media":
    case "ogc-feature":
    case "open-street-map":
    case "oriented-imagery":
    case "route":
    case "stream":
    case "tile":
    case "unknown":
    case "unsupported":
    case "vector-tile":
    case "video":
    case "wcs":
    case "web-tile":
    case "wfs":
    case "wms":
    case "wmts":
    case null:
      return false;
  }
  return false;
}
!function(e29) {
  e29[e29.Ok = 0] = "Ok", e29[e29.Units = 1] = "Units", e29[e29.HeightModel = 2] = "HeightModel", e29[e29.CRS = 3] = "CRS", e29[e29.Unsupported = 4] = "Unsupported";
}(r13 || (r13 = {}));
var p11 = new v3({ heightModel: "gravity-related-height" });

// ../node_modules/@arcgis/core/views/support/projectionUtils.js
var n19;
var s15 = null;
async function c12(r26) {
  s15 || (s15 = import("./geometryServiceUtils-KS67UM5S.js").then((e29) => n19 = e29)), await s15, s2(r26);
}
async function p12(e29, s29, a22, m24) {
  if (!e29) return null;
  const l18 = e29.spatialReference;
  return _3() || J(l18, s29) ? K(e29, s29) : n19 ? n19.projectGeometry(e29, s29, a22, m24) : (await Promise.race([c12(m24), W(m24)]), p12(e29, s29, a22, m24));
}

// ../node_modules/@arcgis/core/views/support/DefaultsFromMap.js
var d11 = class extends S2 {
  constructor(e29) {
    super(e29), this.required = { tileInfo: false, heightModelInfo: false, extent: false }, this.defaultSpatialReference = null, this.userSpatialReference = null, this.sourcePreloadCount = 10, this.priorityCollection = null, this.requiresExtentInSpatialReference = true, this.suspended = false, this._projectExtentTask = { task: null, input: null, output: null, spatialReference: null };
  }
  destroy() {
    this._projectExtentTask.task && (this._projectExtentTask.task = e2(this._projectExtentTask.task)), this._set("map", null);
  }
  get ready() {
    return !this._spatialReferenceTask.updating && !this._tileInfoTask.updating && !this._extentTask.updating;
  }
  get heightModelInfoReady() {
    return !this._heightModelInfoTask.updating;
  }
  get spatialReference() {
    return this.userSpatialReference ?? this._spatialReferenceTask.spatialReference;
  }
  get extent() {
    return this._extentTask.extent;
  }
  get heightModelInfo() {
    return this._heightModelInfoTask.heightModelInfo;
  }
  get vcsWkid() {
    return this._heightModelInfoTask.vcsWkid;
  }
  get latestVcsWkid() {
    return this._heightModelInfoTask.latestVcsWkid;
  }
  get viewingMode() {
    return null == this.userSpatialReference || this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference) ? this._spatialReferenceTask.viewingMode : null;
  }
  get tileInfo() {
    return this._tileInfoTask.tileInfo;
  }
  get mapCollections() {
    var _a, _b, _c, _d;
    const e29 = (_a = this.map) == null ? void 0 : _a.call(this), t29 = [];
    return null != this.priorityCollection && t29.push(this.priorityCollection), t29.push({ parent: e29 == null ? void 0 : e29.basemap, layers: (_b = e29 == null ? void 0 : e29.basemap) == null ? void 0 : _b.baseLayers }, { layers: e29 == null ? void 0 : e29.layers }, { parent: e29 == null ? void 0 : e29.ground, layers: (_c = e29 == null ? void 0 : e29.ground) == null ? void 0 : _c.layers }, { parent: e29 == null ? void 0 : e29.basemap, layers: (_d = e29 == null ? void 0 : e29.basemap) == null ? void 0 : _d.referenceLayers }), t29;
  }
  get _allLayers() {
    return this._collectLayers(this.mapCollections);
  }
  get _spatialReferenceTask() {
    if (this.suspended) return this._get("_spatialReferenceTask") ?? { updating: false };
    const { layers: e29, updating: t29 } = this._allLayers;
    let n31 = null;
    for (const s29 of e29) {
      const e30 = this._getSupportedSpatialReferences(s29);
      if (e30.length > 0) {
        const t30 = this._narrowDownSpatialReferenceCandidates(n31, e30);
        null != t30 && (n31 = t30);
      }
      if (null != n31 && 1 === n31.length) break;
    }
    if (t29 && (null == n31 || 1 !== n31.length)) return { updating: true };
    const a22 = this._pickSpatialReferenceCandidate(n31);
    return { spatialReference: (a22 == null ? void 0 : a22.spatialReference) ?? null, viewingMode: (a22 == null ? void 0 : a22.viewingMode) ?? null, updating: false };
  }
  get _tileInfoTask() {
    var _a, _b, _c, _d, _e, _f, _g;
    if (!this.required.tileInfo) return this._get("_tileInfoTask") ?? { updating: false };
    if (!this.spatialReference) return { updating: this._spatialReferenceTask.updating };
    const { layers: e29, updating: t29 } = this._collectLayers([{ parent: (_b = (_a = this.map) == null ? void 0 : _a.call(this)) == null ? void 0 : _b.basemap, layers: (_e = (_d = (_c = this.map) == null ? void 0 : _c.call(this)) == null ? void 0 : _d.basemap) == null ? void 0 : _e.baseLayers }, { layers: (_g = (_f = this.map) == null ? void 0 : _f.call(this)) == null ? void 0 : _g.layers }]);
    if (e29 && e29.length > 0 && "tileInfo" in e29[0]) {
      const t30 = e29[0].tileInfo;
      return { tileInfo: (t30 == null ? void 0 : t30.spatialReference.equals(this.spatialReference)) ? t30 : null, updating: false };
    }
    return { updating: t29 };
  }
  get _heightModelInfoTask() {
    var _a, _b, _c;
    if (!this.required.heightModelInfo || this.suspended && ((_a = this._get("_heightModelInfoTask")) == null ? void 0 : _a.heightModelInfo)) return this._get("_heightModelInfoTask") ?? { updating: false };
    const { layers: e29, updating: t29 } = this._allLayers;
    for (const n31 of e29) if (g11(n31)) {
      const e30 = l10(n31);
      if (e30) return { heightModelInfo: e30, vcsWkid: (_b = n31.spatialReference) == null ? void 0 : _b.vcsWkid, latestVcsWkid: (_c = n31.spatialReference) == null ? void 0 : _c.latestVcsWkid, updating: false };
    }
    return { updating: t29 };
  }
  get _extentCandidatesTask() {
    if (this.suspended || !this.required.extent) return this._get("_extentCandidatesTask") ?? { updating: false };
    if (!this.spatialReference) return { updating: this._spatialReferenceTask.updating };
    const e29 = this._allLayers, t29 = e29.updating, n31 = [];
    for (const a22 of e29.layers) {
      const e30 = "fullExtents" in a22 && a22.fullExtents || (null != a22.fullExtent ? [a22.fullExtent] : []), t30 = this.requiresExtentInSpatialReference ? null : e30[0], s29 = e30.find((e31) => e31.spatialReference.equals(this.spatialReference)) ?? t30;
      if (s29) return { candidates: [{ extent: s29, layer: a22 }], updating: false };
      if (this._getSupportedSpatialReferences(a22).length > 0) for (const i22 of e30) n31.push({ extent: i22, layer: a22 });
    }
    return { candidates: n31, updating: t29 };
  }
  get _extentTask() {
    const { candidates: e29, updating: t29 } = this._extentCandidatesTask;
    if (t29) return { updating: t29 };
    if (null == e29 || 0 === e29.length) return { updating: false };
    if (!this.spatialReference) return { updating: this._spatialReferenceTask.updating };
    const i22 = this._pickExtentCandidate(e29), r26 = this.spatialReference;
    return i22.extent.equals(this._projectExtentTask.input) && r26.equals(this._projectExtentTask.spatialReference) ? { extent: this._projectExtentTask.output, updating: null != this._projectExtentTask.task && !this._projectExtentTask.task.finished } : (null != this._projectExtentTask.task && (this._projectExtentTask.task = e2(this._projectExtentTask.task)), this._projectExtentTask = { input: i22.extent.clone(), output: null, spatialReference: r26.clone(), task: d2(async (e30) => {
      try {
        const t30 = await p12(i22.extent, r26, "portalItem" in i22.layer ? i22.layer.portalItem : void 0, e30);
        this._projectExtentTask = { ...this._projectExtentTask, task: null, output: t30 };
      } catch (t30) {
        if (c(e30)) return;
        this._projectExtentTask = { ...this._projectExtentTask, task: null };
      }
    }) }, { updating: true });
  }
  _narrowDownSpatialReferenceCandidates(e29, t29) {
    if (null == e29) return t29;
    const n31 = new Array();
    for (const a22 of e29) for (const e30 of t29) {
      if (!a22.spatialReference.equals(e30.spatialReference)) continue;
      const t30 = h9(a22.viewingMode, e30.viewingMode);
      if (false !== t30) {
        n31.push({ spatialReference: a22.spatialReference, viewingMode: t30 });
        break;
      }
    }
    return n31.length > 0 ? n31 : null;
  }
  _pickSpatialReferenceCandidate(e29) {
    const t29 = this.defaultSpatialReference;
    return null == e29 || e29.length < 1 ? t29 ? { spatialReference: t29, viewingMode: null } : null : (null != t29 && e29.length > 1 && e29.some(({ spatialReference: e30 }) => e30.equals(t29)) && (e29 = e29.filter(({ spatialReference: e30 }) => e30.equals(t29))), e29.length > 1 && e29.some(({ viewingMode: e30 }) => e30 !== l3.Local) && (e29 = e29.filter(({ viewingMode: e30 }) => e30 !== l3.Local)), e29[0]);
  }
  _getSupportedSpatialReferences(e29) {
    const t29 = "supportedSpatialReferences" in e29 && e29.supportedSpatialReferences || (e29.spatialReference ? [e29.spatialReference] : []);
    if (0 === t29.length) return [];
    const n31 = [];
    for (const a22 of t29) {
      const t30 = this.getSpatialReferenceSupport(a22, e29);
      if (null != t30) {
        const e30 = t30.constraints ?? [{ spatialReference: a22, viewingMode: null }];
        for (const { spatialReference: t31, viewingMode: a23 } of e30) this.requiresExtentInSpatialReference && null != this.userSpatialReference && !t31.equals(this.userSpatialReference) || n31.push({ spatialReference: t31, viewingMode: a23 });
      }
    }
    return n31;
  }
  _pickExtentCandidate(e29) {
    const t29 = this.spatialReference;
    return e29.find(({ extent: e30 }) => t29.equals(e30.spatialReference)) || e29[0];
  }
  _collectLayers(e29) {
    var _a;
    if ("loaded" !== this._loadMaybe((_a = this.map) == null ? void 0 : _a.call(this))) return { layers: [], updating: true };
    const t29 = new f12();
    for (const n31 of e29) if (this._collectCollection(n31, t29), t29.preloading === this.sourcePreloadCount) break;
    return { layers: t29.layers, updating: t29.updating };
  }
  _collectCollection(e29, t29) {
    if (e29.layers) {
      switch (this._loadMaybe(e29.parent)) {
        case "loading":
          return t29.updating = true, void ++t29.preloading;
        case "failed":
          return;
      }
      for (const n31 of e29.layers) {
        switch (this._loadMaybe(n31)) {
          case "failed":
            continue;
          case "loading":
            t29.updating = true, ++t29.preloading;
            break;
          case "loaded":
            t29.updating || t29.layers.push(n31), "layers" in n31 && this._collectCollection({ layers: n31.layers }, t29);
        }
        if (t29.preloading === this.sourcePreloadCount) break;
      }
    }
  }
  _loadMaybe(e29) {
    return e29 && "loadStatus" in e29 && null != e29.loadStatus ? "not-loaded" === e29.loadStatus ? (e29.load().catch((e30) => {
      b(e30) || console.log(e30);
    }), "loading") : e29.loadStatus : "loaded";
  }
};
e([y()], d11.prototype, "required", void 0), e([y({ constructOnly: true })], d11.prototype, "map", void 0), e([y({ constructOnly: true })], d11.prototype, "getSpatialReferenceSupport", void 0), e([y()], d11.prototype, "defaultSpatialReference", void 0), e([y()], d11.prototype, "userSpatialReference", void 0), e([y()], d11.prototype, "sourcePreloadCount", void 0), e([y()], d11.prototype, "priorityCollection", void 0), e([y()], d11.prototype, "requiresExtentInSpatialReference", void 0), e([y()], d11.prototype, "suspended", void 0), e([y({ readOnly: true })], d11.prototype, "ready", null), e([y({ readOnly: true })], d11.prototype, "heightModelInfoReady", null), e([y({ readOnly: true })], d11.prototype, "spatialReference", null), e([y({ readOnly: true })], d11.prototype, "extent", null), e([y({ readOnly: true })], d11.prototype, "heightModelInfo", null), e([y({ readOnly: true })], d11.prototype, "vcsWkid", null), e([y({ readOnly: true })], d11.prototype, "latestVcsWkid", null), e([y({ readOnly: true })], d11.prototype, "viewingMode", null), e([y({ readOnly: true })], d11.prototype, "tileInfo", null), e([y({ readOnly: true })], d11.prototype, "mapCollections", null), e([y({ readOnly: true })], d11.prototype, "_allLayers", null), e([y({ readOnly: true })], d11.prototype, "_spatialReferenceTask", null), e([y({ readOnly: true })], d11.prototype, "_tileInfoTask", null), e([y({ readOnly: true })], d11.prototype, "_heightModelInfoTask", null), e([y({ readOnly: true })], d11.prototype, "_extentCandidatesTask", null), e([y()], d11.prototype, "_extentTask", null), e([y()], d11.prototype, "_projectExtentTask", void 0), d11 = e([a2("esri.views.support.DefaultsFromMap")], d11);
var f12 = class {
  constructor() {
    this.layers = new Array(), this.preloading = -1, this.updating = false;
  }
};
function h9(e29, t29) {
  return null != e29 ? null != t29 ? e29 === t29 && e29 : e29 : t29;
}

// ../node_modules/@arcgis/core/views/View.js
var W2;
var G2 = W2 = class extends o5.EventedMixin(n5(S2)) {
  constructor(e29) {
    super(e29), this._userSpatialReference = null, this._cursor = null, this.handles = new r(), this.updatingHandles = new h4(), this.allLayerViews = new l4({ getCollections: () => {
      var _a, _b, _c;
      return [(_a = this.basemapView) == null ? void 0 : _a.baseLayerViews, (_b = this.groundView) == null ? void 0 : _b.layerViews, this.layerViews, (_c = this.basemapView) == null ? void 0 : _c.referenceLayerViews];
    }, getChildrenFunction: B3 }), this.groundView = null, this.basemapView = null, this.fatalError = null, this.graphics = new c7(), this.analyses = new t11(), this.typeSpecificPreconditionsReady = true, this.layerViews = new V(), this.magnifier = new p4(), this.padding = { left: 0, top: 0, right: 0, bottom: 0 }, this.ready = false, this.spatialReferenceWarningDelay = 1e3, this.supportsGround = true, this.timeExtent = null, this.type = null, this.scale = null, this.updating = false, this.initialExtentRequired = true, this.input = new a6(), this.navigation = new p10(), this.layerViewManager = null, this.analysisViewManager = null, this.isHeightModelInfoRequired = false, this.width = null, this.height = null, this.resizing = false, this.suspended = false, this.viewEvents = new c10(this), this.persistableViewModels = new V(), this._isValid = false, this._readyCycleForced = false, this._lockedSpatialReference = null, this._userTimeZone = null, this._lockedTimeZone = null, this.theme = null, this.handles.add(d3(() => this.preconditionsReady, (e30) => {
      var _a, _b;
      const t29 = this.ready;
      if (e30 ? (this._lockedSpatialReference = this.spatialReference, this._lockedTimeZone = this.timeZone, W2.views.add(this)) : (this._lockedSpatialReference = null, W2.views.remove(this)), this.notifyChange("spatialReference"), !e30 && t29) (_a = this.toolViewManager) == null ? void 0 : _a.detach(), null != this.analysisViewManager && this.analysisViewManager.detach(), (_b = this.layerViewManager) == null ? void 0 : _b.clear(), this._teardown();
      else if (e30 && !t29) {
        try {
          this._startup();
        } catch (i22) {
          return void queueMicrotask(() => {
            this.fatalError = new s("startup-error", null, i22);
          });
        }
        null != this.analysisViewManager && this.analysisViewManager.attach(), this.toolViewManager.attach();
      }
    }, C));
  }
  initialize() {
    this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(), this.validate()]).then(() => (this._isValid = true, w(() => this.ready)))), this.basemapView = new n15({ view: this }), this.layerViewManager = new I({ view: this, layerViewImporter: { importLayerView: (e29) => this.importLayerView(e29), hasLayerViewModule: (e29) => this.hasLayerViewModule(e29) }, supportsGround: this.supportsGround }), this.toolViewManager = new f10({ view: this }), this._setupSpatialReferenceLogger(), this.selectionManager = new b3({ view: this }), this.addHandles([d3(() => this.initialExtentRequired, (e29) => this.defaultsFromMap.required = { ...this.defaultsFromMap.required, extent: e29 }, A3), d3(() => this.ready, (e29) => {
      this.defaultsFromMap && (this.defaultsFromMap.suspended = e29, this.defaultsFromMap.userSpatialReference = e29 ? this.spatialReference : this._userSpatialReference);
    }, C), d3(() => this._userSpatialReference, (e29) => {
      this.defaultsFromMap && (this.defaultsFromMap.userSpatialReference = e29);
    }, A3)]);
  }
  _setupSpatialReferenceLogger() {
    let e29 = null;
    this.addHandles([d3(() => {
      var _a;
      return (_a = this.defaultsFromMap) == null ? void 0 : _a.ready;
    }, (t29) => {
      var _a;
      const i22 = ((_a = this.map) == null ? void 0 : _a.allLayers.length) > 0;
      if (t29 && !this.spatialReference && i22) {
        if (null != e29) return;
        const t30 = e3(() => e29 = e2(e29));
        e29 = d2(async (t31) => {
          try {
            await A(this.spatialReferenceWarningDelay, null, t31);
          } catch {
            return;
          } finally {
            e29 = null;
          }
          n.getLogger(this).warn("#spatialReference", "no spatial reference could be derived from the currently added map layers");
        }), this.addHandles(t30, "spatial-reference-logger-task");
      } else this.removeHandles("spatial-reference-logger-task");
    }, { sync: true })]);
  }
  destroy() {
    var _a, _b;
    this.destroyed || (W2.views.remove(this), this.viewEvents.destroy(), this.allLayerViews.destroy(), this.navigation && (this.navigation.destroy(), this._set("navigation", null)), this.graphics = u(this.graphics), this.analyses = u(this.analyses), this.defaultsFromMap.destroy(), this._set("defaultsFromMap", null), u(this.analysisViewManager), this.toolViewManager = u(this.toolViewManager), this.layerViewManager = u(this.layerViewManager), this.selectionManager = u(this.selectionManager), this.basemapView = u(this.basemapView), (_a = this.groundView) == null ? void 0 : _a.destroy(), (_b = this.layerViews) == null ? void 0 : _b.forEach((e29) => e29.destroy()), this.layerViews.length = 0, this.invalidate(), this._emitter.clear(), this.handles.destroy(), this.map = u(this.map), this.updatingHandles.destroy());
  }
  _startup() {
    this._set("ready", true);
  }
  _teardown() {
    this._set("ready", false);
  }
  whenReady() {
    return Promise.resolve(this);
  }
  toMap() {
    return n.getLogger(this).error("#toMap()", "Not implemented on this instance of View"), null;
  }
  get activeTool() {
    var _a;
    return (_a = this.toolViewManager) == null ? void 0 : _a.activeTool;
  }
  set activeTool(e29) {
    this.toolViewManager && (this.toolViewManager.activeTool = e29);
  }
  get animation() {
    return this._get("animation");
  }
  set animation(e29) {
    this._set("animation", e29);
  }
  get center() {
    return null;
  }
  get _defaultsFromMapSettings() {
    return {};
  }
  get defaultsFromMap() {
    return new d11({ required: { tileInfo: false, heightModelInfo: false, extent: false }, map: () => this.map, getSpatialReferenceSupport: (e29, t29) => this.getSpatialReferenceSupport(e29, t29), ...this._defaultsFromMapSettings });
  }
  get extent() {
    return this._get("extent");
  }
  set extent(e29) {
    this._set("extent", e29);
  }
  get heightModelInfo() {
    return this.getDefaultHeightModelInfo();
  }
  get interacting() {
    return this.navigating;
  }
  get navigating() {
    return false;
  }
  get preconditionsReady() {
    var _a;
    return !(this.fatalError || !this._isValid || this._readyCycleForced || !this.map || m3.isLoadable(this.map) && !this.map.loaded || 0 === this.width || 0 === this.height || !this.spatialReference || !this._validateSpatialReference(this.spatialReference) || !this._lockedSpatialReference && !((_a = this.defaultsFromMap) == null ? void 0 : _a.ready) || !this.typeSpecificPreconditionsReady);
  }
  get resolution() {
    return 0;
  }
  set map(e29) {
    e29 !== this._get("map") && ((e29 == null ? void 0 : e29.destroyed) && (n.getLogger(this).warn("#map", "The provided map is already destroyed", { map: e29 }), e29 = null), m3.isLoadable(e29) && e29.load().catch(() => {
    }), this.constructed && !this.destroyed && (this.forceReadyCycle(), this._lockedSpatialReference = null), this._set("map", e29));
  }
  get spatialReference() {
    var _a, _b;
    const e29 = this._userSpatialReference || this._lockedSpatialReference || this.getDefaultSpatialReference() || null;
    if (e29 && ((_b = (_a = this.defaultsFromMap) == null ? void 0 : _a.required) == null ? void 0 : _b.heightModelInfo)) {
      const t29 = e29.clone();
      return t29.vcsWkid = this.defaultsFromMap.vcsWkid, t29.latestVcsWkid = this.defaultsFromMap.latestVcsWkid, t29;
    }
    return e29;
  }
  set spatialReference(e29) {
    const t29 = !G(e29, this._get("spatialReference"));
    this._set("_userSpatialReference", e29), t29 && (this._set("spatialReference", e29), this._spatialReferenceChanged(e29));
  }
  _spatialReferenceChanged(e29) {
  }
  get stationary() {
    return !this.animation && !this.navigating && !this.resizing;
  }
  get timeZone() {
    return this._userTimeZone ?? this._lockedTimeZone ?? this.getDefaultTimeZone() ?? o6;
  }
  set timeZone(e29) {
    const t29 = /* @__PURE__ */ new Set(["etc/utc", "etc/gmt", "gmt"]), i22 = new Set(Intl.supportedValuesOf("timeZone").map((e30) => e30.toLowerCase()));
    this._userTimeZone = e29, e29 === o6 || e29 === r4 || t29.has(e29.toLowerCase()) || i22.has(e29.toLowerCase()) || n.getLogger(this).warn("#timeZone", `the parsed value '${e29}' may not be a valid IANA time zone`);
  }
  get tools() {
    var _a;
    return (_a = this.toolViewManager) == null ? void 0 : _a.tools;
  }
  get initialExtent() {
    var _a;
    return (_a = this.defaultsFromMap) == null ? void 0 : _a.extent;
  }
  get cursor() {
    var _a;
    return ((_a = this.toolViewManager) == null ? void 0 : _a.cursor) ?? this._cursor ?? "default";
  }
  set cursor(e29) {
    this._cursor = e29, this.notifyChange("cursor");
  }
  get size() {
    return [this.width, this.height];
  }
  get effectiveTheme() {
    return this.theme ?? new l7();
  }
  whenLayerView(e29) {
    var _a;
    return ((_a = this.layerViewManager) == null ? void 0 : _a.whenLayerView(e29)) ?? Promise.reject();
  }
  getDefaultSpatialReference() {
    var _a;
    return (_a = this.defaultsFromMap) == null ? void 0 : _a.spatialReference;
  }
  getDefaultHeightModelInfo() {
    var _a;
    return (this.map && "heightModelInfo" in this.map ? this.map.heightModelInfo : void 0) ?? ((_a = this.defaultsFromMap) == null ? void 0 : _a.heightModelInfo) ?? null;
  }
  getDefaultTimeZone() {
    return null;
  }
  importLayerView(e29) {
    throw new s("importLayerView() not implemented");
  }
  hasLayerViewModule(e29) {
    return false;
  }
  async validate() {
  }
  async loadAsyncDependencies() {
  }
  invalidate() {
    this._isValid = false;
  }
  getSpatialReferenceSupport() {
    return { constraints: null };
  }
  _validateSpatialReference(e29) {
    return null != this.getSpatialReferenceSupport(e29);
  }
  when(e29, t29) {
    return this.isResolved() && !this.ready && n.getLogger(this).warn("#when()", "Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."), super.when(e29, t29);
  }
  forceReadyCycle() {
    this.ready && (p(() => this.destroyed || false === this.preconditionsReady, () => this._readyCycleForced = false, { once: true }), this._readyCycleForced = true);
  }
  addAndActivateTool(e29) {
    this.toolViewManager.tools.add(e29), this.activeTool = e29;
  }
  tryFatalErrorRecovery() {
    this.fatalError = null;
  }
};
G2.views = new V(), e([y()], G2.prototype, "_userSpatialReference", void 0), e([y()], G2.prototype, "activeTool", null), e([y({ readOnly: true })], G2.prototype, "allLayerViews", void 0), e([y()], G2.prototype, "groundView", void 0), e([y()], G2.prototype, "animation", null), e([y()], G2.prototype, "basemapView", void 0), e([y()], G2.prototype, "center", null), e([y({ readOnly: true })], G2.prototype, "_defaultsFromMapSettings", null), e([y()], G2.prototype, "defaultsFromMap", null), e([y()], G2.prototype, "fatalError", void 0), e([y({ type: w2 })], G2.prototype, "extent", null), e([y(l5(c7, "graphics"))], G2.prototype, "graphics", void 0), e([y(l5(t11, "analyses"))], G2.prototype, "analyses", void 0), e([y({ readOnly: true, type: v3 })], G2.prototype, "heightModelInfo", null), e([y({ readOnly: true })], G2.prototype, "interacting", null), e([y({ readOnly: true })], G2.prototype, "navigating", null), e([y({ readOnly: true, dependsOn: ["fatalError", "_isValid", "_readyCycleForced", "map", "map.loaded?", "width", "height", "spatialReference", "_lockedSpatialReference", "defaultsFromMap.ready", "typeSpecificPreconditionsReady"] })], G2.prototype, "preconditionsReady", null), e([y({ readOnly: true })], G2.prototype, "typeSpecificPreconditionsReady", void 0), e([y({ type: V, readOnly: true })], G2.prototype, "layerViews", void 0), e([y()], G2.prototype, "resolution", null), e([y({ type: p4 })], G2.prototype, "magnifier", void 0), e([y({ value: null, type: L2 })], G2.prototype, "map", null), e([y()], G2.prototype, "padding", void 0), e([y({ readOnly: true })], G2.prototype, "ready", void 0), e([y({ type: f3 })], G2.prototype, "spatialReference", null), e([y()], G2.prototype, "spatialReferenceWarningDelay", void 0), e([y()], G2.prototype, "stationary", null), e([y({ readOnly: true })], G2.prototype, "supportsGround", void 0), e([y({ type: c4 })], G2.prototype, "timeExtent", void 0), e([y({ type: String, nonNullable: true })], G2.prototype, "timeZone", null), e([y()], G2.prototype, "tools", null), e([y()], G2.prototype, "toolViewManager", void 0), e([y({ readOnly: true })], G2.prototype, "type", void 0), e([y({ type: Number })], G2.prototype, "scale", void 0), e([y({ readOnly: true })], G2.prototype, "updating", void 0), e([y({ readOnly: true })], G2.prototype, "initialExtentRequired", void 0), e([y({ readOnly: true })], G2.prototype, "initialExtent", null), e([y()], G2.prototype, "cursor", null), e([y({ readOnly: true })], G2.prototype, "input", void 0), e([y({ type: p10, nonNullable: true })], G2.prototype, "navigation", void 0), e([y()], G2.prototype, "layerViewManager", void 0), e([y()], G2.prototype, "analysisViewManager", void 0), e([y()], G2.prototype, "selectionManager", void 0), e([y()], G2.prototype, "width", void 0), e([y()], G2.prototype, "height", void 0), e([y({ readOnly: true })], G2.prototype, "resizing", void 0), e([y({ value: null, readOnly: true })], G2.prototype, "size", null), e([y({ readOnly: true })], G2.prototype, "suspended", void 0), e([y({ readOnly: true })], G2.prototype, "viewEvents", void 0), e([y({ readOnly: true })], G2.prototype, "persistableViewModels", void 0), e([y()], G2.prototype, "_isValid", void 0), e([y()], G2.prototype, "_readyCycleForced", void 0), e([y()], G2.prototype, "_lockedSpatialReference", void 0), e([y()], G2.prototype, "_userTimeZone", void 0), e([y()], G2.prototype, "_lockedTimeZone", void 0), e([y({ type: l7 })], G2.prototype, "theme", void 0), e([y({ readOnly: true, type: l7 })], G2.prototype, "effectiveTheme", null), G2 = W2 = e([a2("esri.views.View")], G2);
var N = G2;
function B3(e29) {
  return e29.layerViews;
}

// ../node_modules/@arcgis/core/views/ViewAnimation.js
var p13 = class extends m2 {
  constructor(t29) {
    super(t29), this.state = "running", this.target = null, this._resolver = null;
  }
  initialize() {
    this._resolver = L(), this.addResolvingPromise(this._resolver.promise);
  }
  get done() {
    return "finished" === this.state || "stopped" === this.state;
  }
  stop() {
    var _a;
    "stopped" !== this.state && "finished" !== this.state && (this._set("state", "stopped"), (_a = this._resolver) == null ? void 0 : _a.reject(new s("ViewAnimation stopped")));
  }
  finish() {
    var _a;
    "stopped" !== this.state && "finished" !== this.state && (this._set("state", "finished"), (_a = this._resolver) == null ? void 0 : _a.resolve());
  }
  update(t29, s29) {
    s29 || (s29 = S(t29) ? "waiting-for-target" : "running"), this._set("target", t29), this._set("state", s29);
  }
};
e([y({ readOnly: true })], p13.prototype, "done", null), e([y({ readOnly: true, type: String })], p13.prototype, "state", void 0), e([y()], p13.prototype, "target", void 0), p13 = e([a2("esri.views.ViewAnimation")], p13), function(t29) {
  t29.State = { RUNNING: "running", STOPPED: "stopped", FINISHED: "finished", WAITING_FOR_TARGET: "waiting-for-target" };
}(p13 || (p13 = {}));
var a7 = p13;

// ../node_modules/@arcgis/core/core/libs/gl-matrix-2/types/vec2.js
function n20(n31) {
  return n31 instanceof Float32Array && n31.length >= 2;
}
function r14(n31) {
  return Array.isArray(n31) && n31.length >= 2;
}
function t14(t29) {
  return n20(t29) || r14(t29);
}

// ../node_modules/@arcgis/core/views/2d/ViewState.js
var C4;
var L4 = [0, 0];
var O2 = C4 = class extends f {
  constructor(t29) {
    super(t29), this._viewpoint2D = { center: n9(), rotation: 0, scale: 0, spatialReference: void 0 }, this.center = [0, 0], this.extent = new w2(), this.id = 0, this.inverseTransform = e12(), this.resolution = 0, this.rotation = 0, this.scale = 0, this.transform = e12(), this.transformNoRotation = e12(), this.displayMat3 = e13(), this.displayViewMat3 = e13(), this.viewMat3 = e13(), this.viewMat2d = n10(), this.worldScreenWidth = 0, this.size = [0, 0];
  }
  set pixelRatio(t29) {
    this._set("pixelRatio", t29), this._update();
  }
  set size(t29) {
    this._set("size", t29), this._update();
  }
  set viewpoint(t29) {
    if (t29) {
      const i22 = this._viewpoint2D, e29 = t29.targetGeometry;
      i22.center[0] = e29.x, i22.center[1] = e29.y, i22.rotation = t29.rotation, i22.scale = t29.scale, i22.spatialReference = e29.spatialReference;
    }
    this._update();
  }
  copy(t29) {
    const i22 = this.size, e29 = this.viewpoint;
    return e29 && i22 ? (this.viewpoint = Z(e29, t29.viewpoint), this._set("size", r7(i22, t29.size))) : (this.viewpoint = t29.viewpoint.clone(), this._set("size", [t29.size[0], t29.size[1]])), this._set("pixelRatio", t29.pixelRatio), this;
  }
  clone() {
    return new C4({ size: this.size, viewpoint: this.viewpoint.clone(), pixelRatio: this.pixelRatio });
  }
  toMap(t29, i22, e29) {
    return t14(i22) ? S3(t29, i22, this.inverseTransform) : (L4[0] = i22, L4[1] = e29, S3(t29, L4, this.inverseTransform));
  }
  toScreen(t29, i22, e29) {
    return t14(i22) ? S3(t29, i22, this.transform) : (L4[0] = i22, L4[1] = e29, S3(t29, L4, this.transform));
  }
  toScreenNoRotation(t29, i22, e29) {
    return t14(i22) ? S3(t29, i22, this.transformNoRotation) : (L4[0] = i22, L4[1] = e29, S3(t29, L4, this.transformNoRotation));
  }
  wrapMapCoordinate(t29, i22) {
    r7(t29, i22);
    const [e29] = i22, [s29] = this.center, { extent: o31, spatialReference: r26 } = this;
    let { xmin: a22, xmax: n31 } = o31;
    if (r26.isWrappable) {
      const t30 = mt(r26) / 2;
      a22 = Math.max(a22, s29 - t30), n31 = Math.min(n31, s29 + t30);
    }
    return (e29 < a22 || e29 > n31) && (t29[0] = P2(e29, s29, r26)), t29;
  }
  getScreenTransform(t29, i22) {
    const { center: e29 } = this._viewpoint2D, s29 = this._get("pixelRatio") || 1, o31 = this._get("size");
    return ut(t29, e29, o31, i22, 0, s29), t29;
  }
  _update() {
    const { center: t29, spatialReference: e29, scale: s29, rotation: o31 } = this._viewpoint2D, c28 = this._get("pixelRatio") || 1, h19 = this._get("size"), x2 = new m6({ targetGeometry: new _2(t29[0], t29[1], e29), scale: s29, rotation: o31 });
    if (this._set("viewpoint", x2), !h19 || !e29 || !s29) return;
    this.resolution = ot(x2), this.rotation = o31, this.scale = s29, this.spatialReference = e29, r7(this.center, t29);
    const j6 = 0 !== h19[0] ? 2 / h19[0] : 0, y11 = 0 !== h19[1] ? -2 / h19[1] : 0;
    r8(this.displayMat3, j6, 0, 0, 0, y11, 0, -1, 1, 1);
    const R = o9(this.viewMat3), _11 = t5(h19[0] / 2, h19[1] / 2), z5 = t5(-h19[0] / 2, -h19[1] / 2), b7 = u3(o31);
    M3(R, R, _11), h3(R, R, b7), M3(R, R, z5), i5(this.displayViewMat3, this.displayMat3, R);
    const M7 = f6(this.viewMat2d, _11);
    return s10(M7, M7, b7), i6(M7, M7, z5), _5(this.extent, x2, h19), lt(this.transform, x2, h19, c28), u5(this.inverseTransform, this.transform), ft(this.transformNoRotation, x2, h19, c28), this.worldScreenWidth = yt(this.spatialReference, this.resolution), this._set("id", this.id + 1), this;
  }
};
e([y({ readOnly: true })], O2.prototype, "id", void 0), e([y({ value: 1, json: { write: true } })], O2.prototype, "pixelRatio", null), e([y({ json: { write: true } })], O2.prototype, "size", null), e([y()], O2.prototype, "spatialReference", void 0), e([y({ type: m6, json: { write: true } })], O2.prototype, "viewpoint", null), O2 = C4 = e([a2("esri.views.2d.ViewState")], O2);
var U = O2;

// ../node_modules/@arcgis/core/views/2d/PaddedViewState.js
var h10;
var m14;
var g12 = h10 = class extends S2 {
  constructor() {
    super(...arguments), this.left = 0, this.top = 0, this.right = 0, this.bottom = 0;
  }
  clone() {
    return new h10({ left: this.left, top: this.top, right: this.right, bottom: this.bottom });
  }
};
e([y()], g12.prototype, "left", void 0), e([y()], g12.prototype, "top", void 0), e([y()], g12.prototype, "right", void 0), e([y()], g12.prototype, "bottom", void 0), g12 = h10 = e([a2("esri.views.2d.PaddedViewState.Padding")], g12);
var f13 = m14 = class extends U {
  constructor(...t29) {
    super(...t29), this.paddedViewState = new U(), this._updateContent = (() => {
      const t30 = n9();
      return () => {
        const e29 = this._get("size"), i22 = this._get("padding");
        if (!e29 || !i22) return;
        const o31 = this.paddedViewState;
        o8(t30, i22.left + i22.right, i22.top + i22.bottom), e9(t30, e29, t30), r7(o31.size, t30);
        const s29 = o31.viewpoint;
        s29 && (this.viewpoint = s29);
      };
    })(), this.addHandles(d3(() => [this.size, this.padding], () => this._updateContent(), C)), this.padding = new g12(), this.size = [0, 0];
  }
  set padding(t29) {
    this._set("padding", t29 || new g12());
  }
  set viewpoint(t29) {
    if (t29) {
      this.paddedViewState.viewpoint = t29;
      const e29 = this._viewpoint2D;
      if (this._get("padding")) {
        const i22 = t29.clone();
        gt(i22, t29, this._get("size"), this._get("padding"));
        const o31 = i22.targetGeometry;
        e29.center[0] = o31.x, e29.center[1] = o31.y, e29.rotation = i22.rotation, e29.scale = i22.scale, e29.spatialReference = o31.spatialReference;
      } else {
        const i22 = t29.targetGeometry;
        e29.center[0] = i22.x, e29.center[1] = i22.y, e29.rotation = t29.rotation, e29.scale = t29.scale, e29.spatialReference = i22.spatialReference;
      }
      this._update();
    }
  }
  clone() {
    return new m14({ padding: this.padding.clone(), size: this.size.slice(), viewpoint: this.paddedViewState.viewpoint.clone(), pixelRatio: this.pixelRatio });
  }
};
e([y()], f13.prototype, "paddedViewState", void 0), e([y({ type: g12 })], f13.prototype, "padding", null), e([y()], f13.prototype, "viewpoint", null), f13 = m14 = e([a2("esri.views.2d.PaddedViewState")], f13);
var w5 = f13;

// ../node_modules/@arcgis/core/views/2d/pointToPoint/Camera.js
var a8 = class {
  constructor(e29) {
    this._view = e29, this.viewpoint = new m6({ targetGeometry: new _2(), scale: 0, rotation: 0 });
  }
  get view() {
    return this._view;
  }
  get size() {
    const [t29, e29] = this._view.size;
    return Math.sqrt(t29 * t29 + e29 * e29);
  }
  get scale() {
    return this.viewpoint.scale;
  }
  get rotation() {
    return this.viewpoint.rotation;
  }
  get center() {
    return this.viewpoint.targetGeometry;
  }
  get scaleToResolutionFactor() {
    return at(this.center.spatialReference);
  }
  pixelsPerPanAtZoom(t29) {
    return 1 / (t29 * this.scaleToResolutionFactor);
  }
  zoomAtPixelsPerPan(t29) {
    return 1 / (t29 * this.scaleToResolutionFactor);
  }
  pixelsPerRotateAtZoom(t29) {
    return this.size / 2;
  }
  compareTo(t29, o31) {
    o31.pan = e6(this.center, t29.center);
    let r26 = Math.abs(t29.rotation - this.rotation);
    r26 = r26 >= 180 ? 360 - r26 : r26, o31.rotate = h2(r26), o31.sourceZoom = this.scale, o31.targetZoom = t29.scale;
  }
  interpolate(t29, e29, i22) {
    const { pan: r26, rotate: s29, zoom: n31, zoomOffset: a22 } = i22, { center: c28 } = this;
    c28.spatialReference = t29.center.spatialReference, c28.x = f5(t29.center.x, e29.center.x, r26), c28.y = f5(t29.center.y, e29.center.y, r26), this.viewpoint.scale = f5(t29.scale, e29.scale + a22, n31);
    let p24 = t29.rotation;
    const l18 = e29.rotation;
    Math.abs(l18 - p24) >= 180 && (p24 += 360 * (p24 < l18 ? 1 : -1)), this.viewpoint.rotation = f5(p24, l18, s29);
  }
  copyFrom(t29) {
    Z(this.viewpoint, t29.viewpoint), this._view = t29.view;
  }
};

// ../node_modules/@arcgis/core/views/animation/easing.js
var u11 = (t29) => t29 * t29;
var o17 = (t29) => 1 - u11(1 - t29);
var M6 = (t29) => 2 ** (10 * (t29 - 1));
var f14 = (t29) => 1 - M6(1 - t29);
function j3(t29) {
  const u17 = 2 * (t29 - Math.sqrt((t29 - 1) * t29)), o31 = u17 / 2 / t29;
  return (i22) => i22 < o31 ? t29 * i22 * i22 : u17 * i22 - u17 + 1;
}
function k2(t29, u17) {
  return (o31, i22) => o31 < u17 ? u17 * t29(o31 / u17, i22) : 1 - t29((1 - o31) / (1 - u17), i22) * (1 - u17);
}
var m15 = k2(j3(1), 1);
var v8 = k2(j3(1), 0);
var w6 = k2(j3(1), 0.5);
var y6 = k2(j3(2), 1);
var z2 = k2(j3(2), 0);
var A4 = k2(j3(2), 0.5);
var B4 = k2(j3(3), 1);
var C5 = k2(j3(3), 0);
var D2 = k2(j3(3), 0.5);
var E2 = k2(j3(4), 1);
var F = k2(j3(4), 0);
var G3 = k2(j3(4), 0.5);

// ../node_modules/@arcgis/core/views/animation/pointToPoint/Camera.js
var t15 = class {
  constructor() {
    this.pan = 0, this.rotate = 0, this.fov = 0, this.sourceZoom = 0, this.targetZoom = 0;
  }
};

// ../node_modules/@arcgis/core/views/animation/pointToPoint/Settings.js
var o18 = { desiredScreenFlow: 2, minDuration: n2(500), maxDuration: n2(8e3) };
var r15 = { ...o18, maxDuration: n2(4e3) };

// ../node_modules/@arcgis/core/views/animation/pointToPoint/Definition.js
var s16 = class _s {
  constructor(e29) {
    this._createCamera = e29, this.compared = new t15(), this.segmentStart = 0, this.segmentEnd = 1, this.settings = { desiredScreenFlow: o18.desiredScreenFlow }, this.source = e29(), this.target = e29();
  }
  clone() {
    const e29 = new _s(this._createCamera);
    return e29.copyFrom(this), e29;
  }
  copyFrom(e29) {
    this.update(e29.source, e29.target, e29.settings);
  }
  update(e29, t29, s29) {
    this.source !== e29 && this.source.copyFrom(e29), this.target !== t29 && this.target.copyFrom(t29), this.source.compareTo(this.target, this.compared), this.settings.desiredScreenFlow = null != s29.desiredScreenFlow ? s29.desiredScreenFlow : o18.desiredScreenFlow, this.desiredPixelFlow = this.settings.desiredScreenFlow * this.target.size, this.halfWindowSize = this.target.size / 2;
  }
  halfWindowPanAtZoom(e29) {
    const t29 = this.target.pixelsPerPanAtZoom(e29);
    return this.halfWindowSize / t29;
  }
  get hasZoom() {
    return Math.abs(this.compared.sourceZoom - this.compared.targetZoom) > 1e-5;
  }
  get hasPan() {
    return this.compared.pan > e7();
  }
  get hasFov() {
    return Math.abs(this.compared.fov) > e7();
  }
  get hasRotate() {
    return this.compared.rotate > e7();
  }
};

// ../node_modules/@arcgis/core/views/animation/pointToPoint/InterpolateComponents.js
var t16 = class {
  constructor() {
    this.pan = 0, this.rotate = 0, this.zoom = 0, this.fov = 0, this.zoomOffset = 0;
  }
};

// ../node_modules/@arcgis/core/views/animation/pointToPoint/Path.js
var e17 = class {
  constructor() {
    this.segments = new Array();
  }
  get time() {
    return this.segments.reduce((e29, o31) => t3(e29 + o31.time), t3(0));
  }
  interpolateComponentsAt(t29, e29) {
    t29 = Math.min(Math.max(t29, 0), 1), t29 *= this.time;
    let o31 = 0, s29 = 0;
    const n31 = this.definition, a22 = this.segments.reduce((t30, e30) => t30 || e30.definition.hasZoom, false);
    for (let i22 = 0; i22 < this.segments.length; i22++) {
      const m24 = this.segments[i22], r26 = m24.definition;
      if (t29 <= m24.time || i22 === this.segments.length - 1) {
        if (this.segmentInterpolateComponentsAt(m24, 0 === m24.time ? 0 : t29 / m24.time, e29), n31.hasPan && !isNaN(e29.pan) && isFinite(n31.compared.pan) ? e29.pan = (o31 + r26.compared.pan * e29.pan) / n31.compared.pan : e29.pan = 1, n31.hasRotate && !isNaN(e29.rotate) && isFinite(n31.compared.rotate) ? e29.rotate = (s29 + r26.compared.rotate * e29.rotate) / n31.compared.rotate : e29.rotate = 1, a22 && !isNaN(e29.zoom) && isFinite(r26.compared.targetZoom)) {
          const { sourceZoom: t30, targetZoom: o32 } = r26.compared, s30 = e29.zoom * (o32 - t30) + t30, n32 = this.segments[0].definition.compared.sourceZoom, a23 = this.segments[this.segments.length - 1].definition.compared.targetZoom, i23 = Math.abs(o32 - n32) > Math.abs(t30 - n32) ? o32 : t30;
          e29.zoomOffset = i23 - a23, e29.zoom = (s30 - n32) / (i23 - n32);
        } else e29.zoom = 1;
        return e29;
      }
      t29 -= m24.time, o31 += r26.compared.pan, s29 += r26.compared.rotate;
    }
  }
  segmentInterpolateComponentsAt(t29, e29, o31) {
    t29.interpolateComponentsAt(e29, o31);
  }
};

// ../node_modules/@arcgis/core/views/animation/pointToPoint/Segment.js
var o19 = class {
  get time() {
    return this._time;
  }
  constructor(t29) {
    t29 && this.update(t29);
  }
  update(t29) {
    t29 && (this.definition ? this.definition.copyFrom(t29) : this.definition = t29.clone()), this._updatePrecomputedVariables(), this._updatePixelFlow();
  }
  _updatePrecomputedVariables() {
    const t29 = this.definition, i22 = t29.compared, o31 = i22.sourceZoom, e29 = i22.targetZoom;
    this._zoomSign = o31 > e29 ? 1 : -1, this._panPixelsAtSource = i22.pan * t29.source.pixelsPerPanAtZoom(o31);
    const n31 = (t29.source.pixelsPerRotateAtZoom(o31) + t29.target.pixelsPerRotateAtZoom(e29)) / 2;
    this._rotatePixels = i22.rotate * n31;
  }
  _updatePixelFlow() {
    const t29 = this.definition.compared.sourceZoom, o31 = this.definition.compared.targetZoom, { hasZoom: e29, hasPan: n31, hasRotate: s29 } = this.definition;
    let h19 = 0, a22 = 0;
    e29 && (n31 && (h19 = (o31 / t29 - 1) / (-1 / (this._zoomSign * this.definition.halfWindowSize) * Math.LN2 * this._panPixelsAtSource)), s29 && (a22 = this._zoomSign * (Math.log(t29 / o31) / Math.LN2) * this.definition.halfWindowSize / this._rotatePixels)), this._zoomPixelFlow = 0, this._panPixelFlow = 0, this._rotatePixelFlow = 0;
    const r26 = this.definition.desiredPixelFlow;
    if (e29 && n31 && s29) {
      const t30 = h19 + a22 + h19 * a22;
      this._zoomPixelFlow = h19 * a22 / t30 * r26, this._panPixelFlow = a22 / t30 * r26, this._rotatePixelFlow = h19 / t30 * r26;
    } else if (e29 && n31) {
      const t30 = 1 + h19;
      this._zoomPixelFlow = h19 / t30 * r26, this._panPixelFlow = 1 / t30 * r26;
    } else if (e29 && s29) {
      const t30 = 1 + a22;
      this._zoomPixelFlow = a22 / t30 * r26, this._rotatePixelFlow = 1 / t30 * r26;
    } else if (n31 && s29) {
      const t30 = this._panPixelsAtSource / this._rotatePixels, i22 = 1 + t30;
      this._panPixelFlow = t30 / i22 * r26, this._rotatePixelFlow = 1 / i22 * r26;
    } else n31 ? this._panPixelFlow = r26 : e29 ? this._zoomPixelFlow = r26 : s29 && (this._rotatePixelFlow = r26);
    this._time = this.rotateTime ?? this.zoomTime ?? this.panTime ?? this.fovTime ?? t3(0);
  }
  get rotateTime() {
    return this.definition.hasRotate ? t3(this._rotatePixels / this._rotatePixelFlow) : null;
  }
  get zoomTime() {
    return this.definition.hasZoom ? t3(this._zoomSign * (Math.log(this.definition.compared.sourceZoom / this.definition.compared.targetZoom) / Math.LN2) * this.definition.halfWindowSize / this._zoomPixelFlow) : null;
  }
  get fovTime() {
    return this.definition.hasFov ? t3(Math.abs(this.definition.compared.fov) / e18) : null;
  }
  get panTime() {
    if (this.definition.hasPan) {
      if (this.definition.hasZoom) {
        const t29 = -1 / (this._zoomSign * this.definition.halfWindowSize) * Math.LN2, o31 = t29 * this._panPixelsAtSource;
        return t3(Math.log(o31 * (this._zoomPixelFlow / this._panPixelFlow) + 1) / (t29 * this._zoomPixelFlow));
      }
      return t3(this._panPixelsAtSource / this._panPixelFlow);
    }
  }
  _interpolateComponentsZoom(t29) {
    if (0 === t29 || 1 === t29) return t29;
    if (this.definition.hasZoom) {
      const i22 = this.definition.compared.sourceZoom, o31 = this.definition.compared.targetZoom;
      return (i22 * (i22 / o31) ** -t29 - i22) / (o31 - i22);
    }
    return t29;
  }
  _interpolateComponentsFov(t29) {
    if (0 === t29) return this.definition.segmentStart;
    if (1 === t29) return this.definition.segmentEnd;
    if (this.definition.hasFov) {
      const { segmentStart: i22, segmentEnd: o31 } = this.definition;
      return i22 + t29 * (o31 - i22);
    }
    return this.definition.segmentStart;
  }
  _interpolateComponentsPan(t29) {
    if (0 === t29 || 1 === t29) return t29;
    if (this.definition.hasPan && this.definition.hasZoom) {
      const i22 = -1 / (this._zoomSign * this.definition.halfWindowSize) * this._zoomPixelFlow;
      return 1 / this._panPixelsAtSource * (this._panPixelFlow * (2 ** (i22 * t29 * this._time) - 1)) / (i22 * Math.LN2);
    }
    return t29;
  }
  _interpolateComponentsRotate(t29) {
    return t29;
  }
  interpolateComponentsAt(t29, i22) {
    t29 = Math.min(Math.max(t29, 0), 1), i22.zoom = this._interpolateComponentsZoom(t29), i22.pan = this._interpolateComponentsPan(t29), i22.rotate = this._interpolateComponentsRotate(t29), i22.zoomOffset = 0, i22.fov = this._interpolateComponentsFov(t29);
  }
};
var e18 = h2(90);

// ../node_modules/@arcgis/core/views/animation/pointToPoint/apex/functions.js
function o20(o31, e29, a22) {
  const n31 = e29 - o31.compared.sourceZoom, t29 = o31.halfWindowPanAtZoom(n31);
  return -o31.halfWindowSize * (a22.ascensionFactor * Math.LN2 * o31.compared.pan + t29) * Math.log(o31.compared.sourceZoom / e29) / (o31.desiredPixelFlow * Math.LN2 * t29);
}
function e19(o31, e29, a22) {
  const n31 = 1 / e29, t29 = Math.log(o31.compared.sourceZoom * n31), i22 = 1 / o31.desiredPixelFlow, r26 = 1 / Math.LN2, d21 = e29 - o31.compared.sourceZoom, c28 = 1 / d21, l18 = (a22.ascensionFactor * Math.LN2 * o31.compared.pan + o31.halfWindowPanAtZoom(d21)) / o31.halfWindowPanAtZoom(1);
  return o31.halfWindowSize * n31 * i22 * r26 * c28 * l18 - o31.halfWindowSize * t29 * i22 * r26 * c28 + o31.halfWindowSize * t29 * i22 * r26 * l18 / (d21 * d21);
}
function a9(o31, e29, a22) {
  const n31 = e29 - o31.compared.sourceZoom, t29 = 1 / n31, i22 = 1 / e29, r26 = Math.log(o31.compared.sourceZoom * i22), d21 = (a22.ascensionFactor * Math.LN2 * o31.compared.pan + o31.halfWindowPanAtZoom(n31)) / o31.halfWindowPanAtZoom(1);
  return o31.halfWindowSize * t29 * (-2 * t29 * i22 * d21 + 2 * t29 * r26 + 2 * i22 - 2 * r26 * d21 / (n31 * n31) - d21 / (e29 * e29)) / (o31.desiredPixelFlow * Math.LN2);
}
function n21(o31, e29) {
  return -o31.halfWindowSize * Math.log(o31.compared.sourceZoom / e29) / (o31.desiredPixelFlow * Math.LN2);
}
function t17(o31, e29) {
  return o31.halfWindowSize / (e29 * o31.desiredPixelFlow * Math.LN2);
}
function i15(o31, e29) {
  return -o31.halfWindowSize / (e29 * e29 * o31.desiredPixelFlow * Math.LN2);
}
function r16(o31, e29, a22) {
  return -o31.compared.pan * o31.halfWindowSize * (a22.ascensionFactor + a22.descensionFactor - 1) / (o31.desiredPixelFlow * o31.halfWindowPanAtZoom(e29));
}
function d12(o31, e29, a22) {
  return o31.compared.pan * o31.halfWindowSize * (a22.ascensionFactor + a22.descensionFactor - 1) / (o31.desiredPixelFlow * o31.halfWindowPanAtZoom(e29 * e29));
}
function c13(o31, e29, a22) {
  return -2 * o31.compared.pan * o31.halfWindowSize * (a22.ascensionFactor + a22.descensionFactor - 1) / (o31.desiredPixelFlow * o31.halfWindowPanAtZoom(e29 * e29 * e29));
}
function l11(o31, e29, a22) {
  return o31.halfWindowSize * (-o31.halfWindowPanAtZoom(e29) - a22.descensionFactor * Math.LN2 * o31.compared.pan + o31.halfWindowPanAtZoom(o31.compared.targetZoom)) * Math.log(e29 / o31.compared.targetZoom) / (o31.desiredPixelFlow * Math.LN2 * o31.halfWindowPanAtZoom(-e29 + o31.compared.targetZoom));
}
function m16(o31, e29, a22) {
  const n31 = Math.log(e29 / o31.compared.targetZoom), t29 = 1 / o31.desiredPixelFlow, i22 = 1 / Math.LN2, r26 = -e29 + o31.compared.targetZoom, d21 = 1 / r26, c28 = (-o31.halfWindowPanAtZoom(e29) - a22.descensionFactor * Math.LN2 * o31.compared.pan + o31.halfWindowPanAtZoom(o31.compared.targetZoom)) / o31.halfWindowPanAtZoom(1);
  return -o31.halfWindowSize * n31 * t29 * i22 * d21 + o31.halfWindowSize * n31 * t29 * i22 * c28 / (r26 * r26) + o31.halfWindowSize * t29 * i22 * d21 * c28 / e29;
}
function h11(o31, e29, a22) {
  const n31 = e29 - o31.compared.targetZoom, t29 = 1 / n31, i22 = 1 / e29, r26 = Math.log(e29 / o31.compared.targetZoom), d21 = (o31.halfWindowPanAtZoom(e29) + a22.descensionFactor * Math.LN2 * o31.compared.pan - o31.halfWindowPanAtZoom(o31.compared.targetZoom)) / o31.halfWindowPanAtZoom(1);
  return o31.halfWindowSize * t29 * (-2 * t29 * i22 * d21 - 2 * t29 * r26 + 2 * i22 + 2 * r26 * d21 / (n31 * n31) - d21 / (e29 * e29)) / (o31.desiredPixelFlow * Math.LN2);
}
function s17(o31, e29) {
  return o31.halfWindowSize * Math.log(e29 / o31.compared.targetZoom) / (o31.desiredPixelFlow * Math.LN2);
}
function f15(o31, e29) {
  return o31.halfWindowSize / (e29 * o31.desiredPixelFlow * Math.LN2);
}
function w7(o31, e29) {
  return -o31.halfWindowSize / (e29 * e29 * o31.desiredPixelFlow * Math.LN2);
}
function p14(o31) {
  const e29 = o31.compared.sourceZoom - o31.compared.targetZoom;
  if (0 === e29) return o31.compared.pan * o31.halfWindowSize / (o31.desiredPixelFlow * o31.halfWindowPanAtZoom(o31.compared.sourceZoom));
  const a22 = Math.LN2 * o31.compared.pan, n31 = e29, t29 = o31.halfWindowPanAtZoom(n31), i22 = o31.halfWindowSize * Math.log(o31.compared.sourceZoom / o31.compared.targetZoom) / (o31.desiredPixelFlow * Math.LN2 * t29);
  return o31.compared.sourceZoom <= o31.compared.targetZoom ? i22 * (a22 - t29) : i22 * (a22 + t29);
}

// ../node_modules/@arcgis/core/views/animation/pointToPoint/apex/planning.js
function f16(f19, Z3) {
  let b7 = D3(f19, Z3);
  const h19 = { ascensionFactor: null != Z3.ascensionFactor ? Z3.ascensionFactor : 0.5, descensionFactor: null != Z3.descensionFactor ? Z3.descensionFactor : 0.5 }, M7 = 0 === h19.ascensionFactor, P6 = 0 === h19.descensionFactor, g16 = M7 ? n21 : o20, k4 = M7 ? t17 : e19, N2 = M7 ? i15 : a9, j6 = P6 ? s17 : l11, w9 = P6 ? f15 : m16, z5 = P6 ? w7 : h11, A7 = (o31) => g16(f19, o31, h19) + r16(f19, o31, h19) + j6(f19, o31, h19), I3 = (o31) => k4(f19, o31, h19) + d12(f19, o31, h19) + w9(f19, o31, h19), S6 = (o31) => N2(f19, o31, h19) + c13(f19, o31, h19) + z5(f19, o31, h19);
  let q = A7(b7);
  const v12 = p14(f19);
  let y11;
  const B6 = Z3.maximumIterations || 20, C7 = null != Z3.maximumDistance ? Z3.maximumDistance : 1 / 0;
  for (y11 = 0; y11 < B6; y11++) {
    const o31 = Z3.desiredSlope ?? 1e-6;
    let e29 = I3(b7);
    Math.abs(e29) > o31 && (e29 += o31);
    const n31 = e29 / S6(b7);
    if (isNaN(n31) || b7 >= C7 && n31 < 0) {
      if (!isFinite(C7)) return null;
      b7 = C7, q = A7(b7);
      break;
    }
    if (b7 -= n31, b7 < f19.compared.sourceZoom || b7 < f19.compared.targetZoom) return null;
    const a22 = A7(b7);
    if (Math.abs(a22 - q) / q <= 5e-3) break;
    q = a22;
  }
  return q > v12 * (1 - 0.3) || b7 < f19.compared.sourceZoom || b7 < f19.compared.targetZoom ? null : b7;
}
function D3(o31, e29) {
  const n31 = Math.max(o31.compared.sourceZoom, o31.compared.targetZoom), a22 = o31.source.zoomAtPixelsPerPan(o31.desiredPixelFlow / o31.compared.pan) / 2;
  return a22 < n31 ? null != e29.maximumDistance ? n31 + (e29.maximumDistance - n31) / 2 : 1.5 * n31 : e29.maximumDistance ? Math.min(e29.maximumDistance, a22) : a22;
}

// ../node_modules/@arcgis/core/views/animation/pointToPoint/apex/Path.js
var s18 = class extends e17 {
  constructor(i22, n31) {
    super(), this._preallocSegments = [new o19(), new o19(), new o19()], this._ascensionSegment = null, this._descensionSegment = null, this.update(i22, n31);
  }
  update(i22, n31) {
    if (!i22) return;
    this.definition ? this.definition.copyFrom(i22) : this.definition = i22.clone();
    const e29 = (n31 == null ? void 0 : n31.apex) ? f16(i22, n31.apex) : null;
    this.segments.length = 0, this._ascensionSegment = null, this._descensionSegment = null, e29 ? this._updateWithApex(e29, n31 == null ? void 0 : n31.apex) : this._updateWithoutApex();
  }
  segmentInterpolateComponentsAt(e29, t29, o31) {
    e29.interpolateComponentsAt(t29, o31), e29 === this._ascensionSegment ? o31.zoom = o17(o31.zoom) : e29 === this._descensionSegment && (o31.zoom = u11(o31.zoom));
  }
  _updateWithApex(i22, n31) {
    const [e29, t29, o31] = this._preallocSegments, s29 = (n31 == null ? void 0 : n31.ascensionFactor) ?? 0.5, d21 = Math.min(1 - s29, null != (n31 == null ? void 0 : n31.ascensionFactor) && null != n31.descensionFactor ? n31.descensionFactor : 0.5), a22 = 1 - s29 - d21;
    e29.definition ? e29.definition.copyFrom(this.definition) : e29.definition = this.definition.clone(), e29.definition.compared.targetZoom = i22, e29.definition.compared.pan = this.definition.compared.pan * s29, e29.definition.compared.rotate = this.definition.compared.rotate * s29, e29.definition.segmentEnd = s29, e29.update(), this._ascensionSegment = e29, this.segments.push(e29), a22 > 0 && (t29.definition ? t29.definition.copyFrom(this.definition) : t29.definition = this.definition.clone(), t29.definition.copyFrom(this.definition), t29.definition.compared.sourceZoom = i22, t29.definition.compared.targetZoom = i22, t29.definition.compared.pan = this.definition.compared.pan * a22, t29.definition.compared.rotate = this.definition.compared.rotate * a22, t29.definition.segmentStart = e29.definition.segmentEnd, t29.definition.segmentEnd = e29.definition.segmentEnd + a22, t29.update(), this.segments.push(t29)), o31.definition ? o31.definition.copyFrom(this.definition) : o31.definition = this.definition.clone(), o31.definition.compared.sourceZoom = i22, o31.definition.compared.pan = this.definition.compared.pan * d21, o31.definition.compared.rotate = this.definition.compared.rotate * d21, o31.definition.segmentStart = s29 + a22, o31.update(), this._descensionSegment = o31, this.segments.push(o31);
  }
  _updateWithoutApex() {
    const [i22] = this._preallocSegments;
    i22.update(this.definition), this.segments.push(i22);
  }
};

// ../node_modules/@arcgis/core/views/animation/pointToPoint/Animation.js
var h12 = new t16();
var p15 = class {
  get time() {
    return this._time;
  }
  get isLinear() {
    return 1 === this.path.segments.length;
  }
  constructor(i22) {
    this._time = n2(0), this._easing = w6, this.definition = new s16(i22), this.path = new s18();
  }
  update(t29, a22, o31) {
    this.definition.update(t29, a22, o31), this.path.update(this.definition, o31), this._time = this._applyTimeSettings(r2(isFinite(this.path.time) ? this.path.time : t3(0)), o31), this._easing = o31.easing ?? (this._time >= 1e3 ? w6 : f14);
  }
  cameraAt(t29, i22) {
    t29 = Math.min(Math.max(0, t29), 1), t29 = this._normalizedEasing(t29);
    const e29 = this.path.interpolateComponentsAt(t29, h12);
    i22.interpolate(this.definition.source, this.definition.target, e29);
  }
  _normalizedEasing(t29) {
    const i22 = this._easing(0, this._time), e29 = this._easing(1, this._time);
    return (this._easing(t29, this._time) - i22) / (e29 - i22);
  }
  _applyTimeSettings(i22, e29) {
    const n31 = null != e29.speedFactor ? e29.speedFactor : 1, s29 = e29.minDuration ?? o18.minDuration / n31, a22 = e29.maxDuration ?? o18.maxDuration / n31;
    return i22 = null != e29.duration ? e29.duration : n2(Math.min(Math.max(i22 / n31, s29), a22));
  }
};

// ../node_modules/@arcgis/core/views/2d/AnimationManager.js
var v9 = 2e3;
var j4 = 64;
var y7 = class {
  constructor(t29) {
    this._view = t29, this._animation = new p15(() => new a8(this._view)), this._current = new a8(this._view);
  }
  get _source() {
    return this._animation.definition.source;
  }
  get _target() {
    return this._animation.definition.target;
  }
  get duration() {
    return this._animation.time;
  }
  get animation() {
    return this._animation;
  }
  update(t29, i22, e29 = {}) {
    Z(this._current.viewpoint, t29), Z(this._source.viewpoint, t29), Z(this._target.viewpoint, i22), this._animation.update(this._source, this._target, e29);
  }
  applyRatio(t29, i22) {
    this._animation.cameraAt(i22, this._current), Z(t29, this._current.viewpoint);
  }
};
var T2 = class extends S2 {
  constructor(t29) {
    super(t29), this._animation = null, this._destinationViewState = new w5(), this.updateFunction = null, this.easing = t6.ease, this.viewpoint = new m6({ targetGeometry: new _2(), scale: 0, rotation: 0 }), this._updateTask = A2({ postRender: this._postRender.bind(this) }), this._updateTask.pause(), this._transition = new y7(t29.view);
  }
  destroy() {
    this._updateTask = l(this._updateTask);
  }
  get animation() {
    return this._animation;
  }
  set animation(t29) {
    this._animation = t29, this.view.animation = t29;
  }
  animate(t29, i22, e29) {
    this.stop();
    const n31 = this.viewpoint;
    Z(n31, i22);
    const o31 = ("string" == typeof (e29 == null ? void 0 : e29.easing) ? r9(e29.easing) : e29 == null ? void 0 : e29.easing) || this.easing, s29 = t29.target;
    this._transition.update(this.viewpoint, s29, { apex: { maximumDistance: Math.min(Math.min(i22.scale, s29.scale) * j4, this.view.constraints.effectiveMinScale), desiredSlope: 5e-8 }, duration: e29 == null ? void 0 : e29.duration, maxDuration: "auto" === (e29 == null ? void 0 : e29.animationMode) ? n2(1 / 0) : (e29 == null ? void 0 : e29.maxDuration) ?? r15.maxDuration, speedFactor: e29 == null ? void 0 : e29.speedFactor, easing: "function" == typeof o31 ? (t30) => o31(t30) : void 0 }), "auto" === (e29 == null ? void 0 : e29.animationMode) && (this._destinationViewState.copy(this.view.state), this._destinationViewState.viewpoint = s29, x(this._transition.animation, e29, this.view.state, this._destinationViewState) || this._transition.update(this.viewpoint, s29, { duration: n2(0) }));
    const r26 = () => {
      this.animation === t29 && this._updateTask && ("finished" === t29.state && (this._transition.applyRatio(this.viewpoint, 1), this.view.state && (this.view.state.viewpoint = this.viewpoint.clone())), this.animation = null, this.updateFunction = null);
    };
    return t29.when(r26, r26), this._startTime = performance.now(), this._updateTask.resume(), this.animation = t29, t29;
  }
  animateContinuous(t29, i22) {
    this.stop(), this.updateFunction = i22, this.viewpoint = t29;
    const e29 = new a7({ target: t29.clone() }), n31 = () => {
      this.animation === e29 && this._updateTask && (this.animation = null, this.updateFunction = null);
    };
    return e29.when(n31, n31), this._startTime = performance.now(), this._updateTask.resume(), this.animation = e29, e29;
  }
  stop() {
    this.animation && (this.animation.stop(), this.animation = null, this.updateFunction = null);
  }
  _postRender(t29) {
    var _a, _b;
    const i22 = this.animation;
    if (i22 && i22.state !== a7.State.STOPPED) {
      if (this.updateFunction) this.updateFunction(this.viewpoint, t29.deltaTime), (_a = this.animation) == null ? void 0 : _a.update(this.viewpoint);
      else {
        const t30 = performance.now() - this._startTime, i23 = this._transition.duration, e29 = i23 > 0 ? t30 / i23 : 1, n31 = e29 >= 1;
        this._transition.applyRatio(this.viewpoint, e29), n31 && ((_b = this.animation) == null ? void 0 : _b.finish());
      }
      this.view.state && (this.view.state.viewpoint = this.viewpoint.clone());
    } else this._updateTask.pause();
  }
};
function x(t29, i22, e29, n31) {
  if (null != (i22 == null ? void 0 : i22.duration)) return true;
  const { time: o31, isLinear: a22 } = t29, r26 = (i22 == null ? void 0 : i22.speedFactor) || 1, h19 = (i22 == null ? void 0 : i22.maxDuration) ?? r15.maxDuration / r26;
  if (has("esri-goto-debug") && (console.log("speed factor:", r26), console.log("adjusted duration:		", o31), console.log("adjusted max duration:	", h19), console.log("is linear:", a22)), o31 > h19) return has("esri-goto-debug") && console.warn(`failed "auto" heuristic: animations must be shorter than ${h19 / 1e3}s`), false;
  if (a22) {
    const t30 = 1.5, i23 = n9(), a23 = c6(...n31.toScreen(i23, ...e29.center)), p24 = c6(...e29.toScreen(i23, ...n31.center)), u17 = null != p24 && p24.x > -(t30 - 0.5) * e29.size[0] && p24.x < (t30 + 0.5) * e29.size[0] && p24.y > -(t30 - 0.5) * e29.size[1] && p24.y < (t30 + 0.5) * e29.size[1], c28 = null != a23 && a23.x > -(t30 - 0.5) * n31.size[0] && a23.x < (t30 + 0.5) * n31.size[0] && a23.y > -(t30 - 0.5) * n31.size[1] && a23.y < (t30 + 0.5) * n31.size[1];
    if (has("esri-goto-debug") && (console.log(`dest is within ${t30} screens at start view:`, u17), console.log(`start is within ${t30} screens at dest view:`, c28)), o31 > v9 / r26 && !u17 && !c28) return has("esri-goto-debug") && console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${v9 / 1e3 / r26}s, or
  - shorter than ${h19 / 1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${h19 / 1e3}s and the start point is close enough to the destination screen`), false;
  }
  return true;
}
e([y()], T2.prototype, "easing", void 0), e([y()], T2.prototype, "view", void 0), e([y()], T2.prototype, "viewpoint", void 0), T2 = e([a2("esri.views.2d.AnimationManager")], T2);
var S5 = T2;

// ../node_modules/@arcgis/core/views/2d/FrameTask.js
var s19 = class {
  constructor(t29) {
    this.view = t29, this._stationaryHandle = null, this._frameTaskHandle = null, this._updateParameters = null, this._updateRequested = false, this.stationary = true, this.animationInProgress = false, this.prepare = () => {
      this._updateParameters && (this._updateParameters.state = this.view.state, this._updateParameters.stationary = this.view.stationary, this._updateParameters.pixelRatio = window.devicePixelRatio, this._updateParameters.renderingOptions = this.view.renderingOptions, this._updateParameters.targetState.copy(this.view.state), this.view.animation && !("then" in this.view.animation.target) && (this._updateParameters.targetState.viewpoint = this.view.animation.target));
    }, this.update = () => {
      var _a, _b;
      if (this._updateRequested = false, (_a = this.view) == null ? void 0 : _a.destroyed) return;
      const { allLayerViews: t30, graphicsView: e29, labelManager: a22, state: { id: s29 } } = this.view;
      t30.forEach(this._updateLayerView, this), null != a22 && (a22.lastUpdateId !== s29 && (a22.viewChange(), a22.lastUpdateId = s29), a22.updateRequested && a22.processUpdate(this._updateParameters)), null != e29 && (e29.lastUpdateId !== s29 && (e29.viewChange(), e29.lastUpdateId = s29), e29.updateRequested && e29.processUpdate(this._updateParameters)), this.view.graphicsTileStore.setViewState(this._updateParameters.state), this.animationInProgress || this._updateRequested || ((_b = this._frameTaskHandle) == null ? void 0 : _b.pause());
    };
  }
  destroy() {
    this.stop();
  }
  start() {
    if (this._frameTaskHandle) return;
    const s29 = this.view;
    this.stationary = s29.stationary, this._updateParameters = { state: s29.state, targetState: new w5(), pixelRatio: window.devicePixelRatio, stationary: this.stationary, renderingOptions: s29.renderingOptions }, this._stationaryHandle = d3(() => s29.stationary, (t29) => {
      this.stationary = t29, this.requestFrame();
    }), this._frameTaskHandle = A2(this), this.requestUpdate();
  }
  stop() {
    var _a;
    this._frameTaskHandle && (this._updateRequested = false, (_a = this._stationaryHandle) == null ? void 0 : _a.remove(), this._frameTaskHandle.remove(), this._updateParameters = this._stationaryHandle = this._frameTaskHandle = null, this.stationary = true, this.animationInProgress = false);
  }
  requestUpdate() {
    this._updateRequested || (this._updateRequested = true, this.requestFrame());
  }
  requestFrame() {
    this._frameTaskHandle && this._frameTaskHandle.resume();
  }
  _updateLayerView(t29) {
    var _a;
    if (!t29.attached) return void this.requestUpdate();
    const e29 = this.view.state, a22 = t29.lastUpdateId;
    null != a22 && (this.stationary || t29.moving) || (t29.moving = true), a22 !== e29.id && t29.viewChange(), this.stationary && t29.moving && (t29.moving = false, t29.moveEnd()), t29.lastUpdateId = e29.id, t29.updateRequested && t29.processUpdate(this._updateParameters), "layerViews" in t29 && ((_a = t29.layerViews) == null ? void 0 : _a.forEach(this._updateLayerView, this));
  }
};

// ../node_modules/@arcgis/core/views/2d/GoToManager.js
var h13 = class extends S2 {
  constructor(t29) {
    super(t29), this._gotoTask = null;
  }
  destroy() {
    this._gotoTask = null;
  }
  async goTo(t29, e29) {
    if (!t29) return void n.getLogger(this).error("#goTo()", "target cannot be null or undefined");
    const i22 = new a7();
    this.view.animation = i22, await w(() => this.view.ready, e29);
    const s29 = { ...e29, animate: (e29 == null ? void 0 : e29.animate) ?? !o10(), animationMode: (e29 == null ? void 0 : e29.animationMode) ?? "auto" }, { extent: a22, spatialReference: c28, size: m24, viewpoint: h19, constraints: g16, padding: w9, allLayerViews: d21 } = this.view, u17 = Y(t29, { extent: a22, spatialReference: c28, size: m24, viewpoint: h19, constraints: g16, padding: w9, allLayerViews: d21, pickClosestTarget: (e29 == null ? void 0 : e29.pickClosestTarget) ?? true });
    return i22 == null ? void 0 : i22.update(u17), this._gotoTask = {}, s29.animate ? this._gotoAnimated(u17, s29) : this._gotoImmediate(u17, s29);
  }
  _gotoImmediate(t29, o31) {
    const e29 = this._gotoTask, r26 = this.view.animation, a22 = t29.then((t30) => {
      if (s2(o31), e29 !== this._gotoTask) throw new s("view:goto-interrupted", "Goto was interrupted");
      this.view.viewpoint = r26.target = t30, r26.finish();
    });
    return this._cancellableGoTo(e29, r26, a22, o31);
  }
  _gotoAnimated(t29, o31) {
    const e29 = this._gotoTask, r26 = this.view.animation;
    if (!r26) return Promise.resolve();
    const a22 = t29.then((t30) => {
      if (s2(o31), e29 !== this._gotoTask) throw new s("view:goto-interrupted", "Goto was interrupted");
      return r26.update(t30), this.view.animationManager.animate(r26, this.view.viewpoint, o31), r26.when().then(() => {
      }, () => {
      });
    });
    return this._cancellableGoTo(e29, r26, a22, o31);
  }
  _cancellableGoTo(t29, o31, e29, i22) {
    const r26 = () => t29 === this._gotoTask;
    return h(e29, i22).finally(() => {
      r26() && (o31.done || o31.stop());
    });
  }
};
e([y({ constructOnly: true })], h13.prototype, "view", void 0), h13 = e([a2("esri.views.2d.GoToManager")], h13);

// ../node_modules/@arcgis/core/views/2d/layerViewModuleImportUtils.js
function r17() {
  return Promise.all([import("./webglDeps-K7Q4JPL4.js"), import("./mapViewDeps-ITACC7CX.js")]);
}
var a10 = () => r17().then(() => import("./TileLayerView2D-7SLLYEZI.js"));
var t18 = () => r17().then(() => import("./FeatureLayerView2D-55JV7QOL.js"));
var i16 = { "base-dynamic": () => r17().then(() => import("./BaseDynamicLayerView2D-Y3UOPWRN.js")), "base-tile": a10, "bing-maps": a10, catalog: () => r17().then(() => import("./CatalogLayerView2D-HSMDFSJ5.js")), "catalog-dynamic-group": () => r17().then(() => import("./CatalogDynamicGroupLayerView2D-IXOD4QWO.js")), "catalog-footprint": () => r17().then(() => import("./CatalogFootprintLayerView2D-SNGD7G7P.js")), csv: t18, "geo-rss": () => r17().then(() => import("./GeoRSSLayerView2D-QHJITP3M.js")), feature: t18, geojson: t18, graphics: () => r17().then(() => import("./GraphicsLayerView2D-Q6RN7S4W.js")), group: () => r17().then(() => import("./GroupLayerView2D-KHWRN3P3.js")), imagery: () => r17().then(() => import("./ImageryLayerView2D-6CHBQAVW.js")), "imagery-tile": () => r17().then(() => import("./ImageryTileLayerView2D-IYBCQIWL.js")), kml: () => r17().then(() => import("./KMLLayerView2D-Y3IWDOFB.js")), "knowledge-graph": () => r17().then(() => import("./KnowledgeGraphLayerView2D-EQUJKYH6.js")), "link-chart": () => r17().then(() => import("./KnowledgeGraphLayerView2D-EQUJKYH6.js")), "knowledge-graph-sublayer": t18, "map-image": () => r17().then(() => import("./MapImageLayerView2D-MY4M54C2.js")), "map-notes": () => r17().then(() => import("./MapNotesLayerView2D-LDX3MZC5.js")), media: () => r17().then(() => import("./MediaLayerView2D-U4KDCYE7.js")), "ogc-feature": () => r17().then(() => import("./OGCFeatureLayerView2D-4STEQNOA.js")), "open-street-map": a10, "oriented-imagery": t18, route: () => r17().then(() => import("./RouteLayerView2D-LIJJLR4E.js")), stream: () => r17().then(() => import("./StreamLayerView2D-YWPN4D4X.js")), "subtype-group": () => r17().then(() => import("./SubtypeGroupLayerView2D-VNF66WM3.js")), tile: a10, "vector-tile": () => r17().then(() => import("./VectorTileLayerView2D-F32ZNLBP.js")), video: () => r17().then(() => import("./VideoLayerView2D-347RX7PL.js")), wcs: () => r17().then(() => import("./ImageryTileLayerView2D-IYBCQIWL.js")), "web-tile": a10, wfs: t18, wms: () => r17().then(() => import("./WMSLayerView2D-SZ5TR2WM.js")), wmts: () => r17().then(() => import("./WMTSLayerView2D-PRA2TSGG.js")), "line-of-sight": null, "base-elevation": null, "building-scene": null, dimension: null, elevation: null, "integrated-mesh": null, "integrated-mesh-3dtiles": null, "point-cloud": null, voxel: null, scene: null, unknown: null, unsupported: null };
function s20(r26) {
  const a22 = r26.declaredClass ? r26.declaredClass.slice(r26.declaredClass.lastIndexOf(".") + 1) : "Unknown", t29 = a22.replaceAll(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
  return new s(`${t29}:view-not-supported`, `${a22} is not supported in 2D`);
}
var l12 = { hasLayerViewModule: (e29) => null != i16[e29.type], importLayerView: (e29) => {
  const r26 = i16[e29.type];
  if (null == r26) throw s20(e29);
  return r26(e29);
} };

// ../node_modules/@arcgis/core/geometry/support/near.js
function n22(n31, m24) {
  const { spatialReference: r26 } = m24, i22 = [m24.x, m24.y];
  let s29 = Number.POSITIVE_INFINITY, x2 = 0, a22 = 0;
  const c28 = [0, 0], f19 = "extent" === n31.type ? [[[n31.xmin, n31.ymin], [n31.xmin, n31.ymax], [n31.xmax, n31.ymax], [n31.xmax, n31.ymin], [n31.xmin, n31.ymin]]] : n31.rings;
  for (const o31 of f19) for (let n32 = 0; n32 < o31.length - 1; n32++) {
    s6(c28, i22, o31, n32);
    const m25 = m4(i22, c28);
    m25 < s29 && (s29 = m25, x2 = c28[0], a22 = c28[1]);
  }
  return { coordinate: new _2({ x: x2, y: a22, spatialReference: r26 }), distance: s29 };
}

// ../node_modules/@arcgis/core/views/2d/constraints/GeometryConstraint.js
var l13;
var p16 = l13 = class extends i3(S2) {
  constructor(e29) {
    super(e29), this.geometry = null, this.spatialReference = null;
  }
  get normalizedGeometry() {
    if (null == this.geometry || !this.spatialReference) return null;
    if (!this.spatialReference.equals(this.geometry.spatialReference)) try {
      return K(this.geometry, this.spatialReference);
    } catch (e29) {
      return n.getLogger(this).error("#constraints.geometry", "could not project the geometry to the view's spatial reference", { geometry: this.geometry, spatialReference: this.spatialReference, error: e29 }), null;
    }
    return this.geometry;
  }
  constrain(e29, r26) {
    if (null == this.normalizedGeometry) return e29;
    const t29 = e29.targetGeometry;
    if ("extent" === this.normalizedGeometry.type ? t4(this.normalizedGeometry, t29) : f4(this.normalizedGeometry, t29)) return e29;
    const { coordinate: o31 } = n22(this.normalizedGeometry, t29);
    return o31 ? (e29.targetGeometry = o31, e29) : e29;
  }
  clone() {
    var _a, _b;
    return new l13({ geometry: (_a = this.geometry) == null ? void 0 : _a.clone(), spatialReference: (_b = this.spatialReference) == null ? void 0 : _b.clone() });
  }
};
e([y({ constructOnly: true })], p16.prototype, "geometry", void 0), e([y({ readOnly: true })], p16.prototype, "normalizedGeometry", null), e([y({ constructOnly: true })], p16.prototype, "spatialReference", void 0), p16 = l13 = e([a2("esri.views.2d.constraints.GeometryConstraint")], p16);

// ../node_modules/@arcgis/core/views/2d/constraints/RotationConstraint.js
var a11;
var n23 = a11 = class extends i3(S2) {
  constructor() {
    super(...arguments), this.enabled = true, this.rotationEnabled = true;
  }
  constrain(o31, t29) {
    return this.enabled && t29 ? (this.rotationEnabled || (o31.rotation = t29.rotation), o31) : o31;
  }
  clone() {
    return new a11({ enabled: this.enabled, rotationEnabled: this.rotationEnabled });
  }
};
e([y()], n23.prototype, "enabled", void 0), e([y()], n23.prototype, "rotationEnabled", void 0), n23 = a11 = e([a2("esri.views.2d.constraints.RotationConstraint")], n23);
var i17 = n23;

// ../node_modules/@arcgis/core/views/2d/constraints/ZoomConstraint.js
var a12;
var c14 = a12 = class extends i3(S2) {
  constructor(e29) {
    super(e29), this._lodByScale = {}, this._scales = [], this.effectiveLODs = null, this.effectiveMinZoom = -1, this.effectiveMaxZoom = -1, this.effectiveMinScale = 0, this.effectiveMaxScale = 0, this.lods = null, this.minZoom = -1, this.maxZoom = -1, this.minScale = 0, this.maxScale = 0, this.snapToZoom = true;
  }
  initialize() {
    let e29, { lods: t29, minScale: o31, maxScale: s29, minZoom: i22, maxZoom: a22 } = this, c28 = -1, l18 = -1, r26 = false, n31 = false;
    if (0 !== o31 && 0 !== s29 && o31 < s29 && ([o31, s29] = [s29, o31]), !(t29 == null ? void 0 : t29.length)) return this._set("effectiveMinScale", o31), void this._set("effectiveMaxScale", s29);
    t29 = t29.map((e30) => e30.clone()), t29.sort((e30, t30) => t30.scale - e30.scale), t29.forEach((e30, t30) => e30.level = t30);
    for (const f19 of t29) !r26 && o31 > 0 && o31 >= f19.scale && (c28 = f19.level, r26 = true), !n31 && s29 > 0 && s29 >= f19.scale && (l18 = e29 ? e29.level : -1, n31 = true), e29 = f19;
    -1 === i22 && (i22 = 0 === o31 ? 0 : c28), -1 === a22 && (a22 = 0 === s29 ? t29.length - 1 : l18), i22 = Math.max(i22, 0), i22 = Math.min(i22, t29.length - 1), a22 = Math.max(a22, 0), a22 = Math.min(a22, t29.length - 1), i22 > a22 && ([i22, a22] = [a22, i22]), o31 = t29[i22].scale, s29 = t29[a22].scale, t29.splice(0, i22), t29.splice(a22 - i22 + 1, t29.length), t29.forEach((e30, t30) => {
      this._lodByScale[e30.scale] = e30, this._scales[t30] = e30.scale;
    }), this._set("effectiveLODs", t29), this._set("effectiveMinZoom", i22), this._set("effectiveMaxZoom", a22), this._set("effectiveMinScale", o31), this._set("effectiveMaxScale", s29);
  }
  constrain(e29, t29) {
    if (t29 && e29.scale === t29.scale) return e29;
    const o31 = this.effectiveMinScale, s29 = this.effectiveMaxScale, i22 = e29.targetGeometry, a22 = t29 && t29.targetGeometry, c28 = 0 !== s29 && e29.scale < s29, l18 = 0 !== o31 && e29.scale > o31;
    if (c28 || l18) {
      const c29 = l18 ? o31 : s29;
      if (t29 && a22) {
        const o32 = (c29 - t29.scale) / (e29.scale - t29.scale);
        i22.x = a22.x + (i22.x - a22.x) * o32, i22.y = a22.y + (i22.y - a22.y) * o32;
      }
      e29.scale = c29;
    }
    return this.snapToZoom && this.effectiveLODs && (e29.scale = this._getClosestScale(e29.scale)), e29;
  }
  fit(e29) {
    if (!this.effectiveLODs || !this.snapToZoom) return this.constrain(e29, null);
    const t29 = this.scaleToZoom(e29.scale), o31 = Math.abs(t29 - Math.floor(t29));
    return e29.scale = this.zoomToScale(o31 > 0.99 ? Math.round(t29) : Math.floor(t29)), e29;
  }
  zoomToScale(e29) {
    if (!this.effectiveLODs) return 0;
    e29 -= this.effectiveMinZoom, e29 = Math.max(0, e29);
    const t29 = this._scales;
    if (e29 <= 0) return t29[0];
    if (e29 >= t29.length) return t29[t29.length - 1];
    const o31 = Math.floor(e29), s29 = Math.ceil(e29);
    return t29[o31] + (e29 - o31) * (t29[s29] - t29[o31]);
  }
  scaleToZoom(e29) {
    if (!this.effectiveLODs) return -1;
    const t29 = this._scales;
    let o31, s29;
    if (e29 >= t29[0]) return this.effectiveMinZoom;
    if (e29 <= t29[t29.length - 1]) return this.effectiveMaxZoom;
    for (let i22 = 0; i22 < t29.length - 1; i22++) {
      if (o31 = t29[i22], s29 = t29[i22 + 1], s29 === e29) {
        return i22 + this.effectiveMinZoom + 1;
      }
      if (o31 > e29 && s29 < e29) {
        return i22 + this.effectiveMinZoom + 1 - (e29 - s29) / (o31 - s29);
      }
    }
    return -1;
  }
  snapToClosestScale(e29) {
    if (!this.effectiveLODs) return e29;
    const t29 = this.scaleToZoom(e29);
    return this.zoomToScale(Math.round(t29));
  }
  snapToNextScale(e29, t29 = 0.5) {
    if (!this.effectiveLODs) return e29 * t29;
    const o31 = Math.round(this.scaleToZoom(e29));
    return this.zoomToScale(o31 + 1);
  }
  snapToPreviousScale(e29, t29 = 2) {
    if (!this.effectiveLODs) return e29 * t29;
    const o31 = Math.round(this.scaleToZoom(e29));
    return this.zoomToScale(o31 - 1);
  }
  clone() {
    return new a12({ lods: this.lods, minZoom: this.minZoom, maxZoom: this.maxZoom, minScale: this.minScale, maxScale: this.maxScale });
  }
  _getClosestScale(e29) {
    return this._lodByScale[e29] || (e29 = this._scales.reduce((t29, o31) => Math.abs(o31 - e29) <= Math.abs(t29 - e29) ? o31 : t29, this._scales[0])), this._lodByScale[e29].scale;
  }
};
e([y({ readOnly: true })], c14.prototype, "effectiveLODs", void 0), e([y({ readOnly: true })], c14.prototype, "effectiveMinZoom", void 0), e([y({ readOnly: true })], c14.prototype, "effectiveMaxZoom", void 0), e([y({ readOnly: true })], c14.prototype, "effectiveMinScale", void 0), e([y({ readOnly: true })], c14.prototype, "effectiveMaxScale", void 0), e([y()], c14.prototype, "lods", void 0), e([y()], c14.prototype, "minZoom", void 0), e([y()], c14.prototype, "maxZoom", void 0), e([y()], c14.prototype, "minScale", void 0), e([y()], c14.prototype, "maxScale", void 0), e([y()], c14.prototype, "snapToZoom", void 0), c14 = a12 = e([a2("esri.views.2d.constraints.ZoomConstraint")], c14);
var l14 = c14;

// ../node_modules/@arcgis/core/views/2d/MapViewConstraints.js
var p17 = { base: null, key: "type", typeMap: { extent: w2, polygon: j } };
var y8 = class extends S2 {
  constructor(o31) {
    super(o31), this.lods = null, this.minScale = 0, this.maxScale = 0, this.minZoom = -1, this.maxZoom = -1, this.rotationEnabled = true, this.snapToZoom = true, this.customConstraints = new V();
  }
  destroy() {
    this.view = null;
  }
  get effectiveLODs() {
    return this._zoom.effectiveLODs;
  }
  get effectiveMinScale() {
    return this._zoom.effectiveMinScale;
  }
  get effectiveMaxScale() {
    return this._zoom.effectiveMaxScale;
  }
  get effectiveMinZoom() {
    return this._zoom.effectiveMinZoom;
  }
  get effectiveMaxZoom() {
    return this._zoom.effectiveMaxZoom;
  }
  set geometry(o31) {
    o31 ? this._set("geometry", o31) : this._set("geometry", null);
  }
  get version() {
    var _a, _b, _c;
    return `${(_a = this._zoom) == null ? void 0 : _a.uid}/${(_b = this._rotation) == null ? void 0 : _b.uid}/${(_c = this._geometry) == null ? void 0 : _c.uid}`;
  }
  get _geometry() {
    var _a, _b;
    const o31 = this._get("_geometry");
    return o31 && this.geometry === o31.geometry && ((_a = this.view) == null ? void 0 : _a.constraintsInfo.spatialReference) === o31.spatialReference ? o31 : new p16({ geometry: this.geometry, spatialReference: (_b = this.view) == null ? void 0 : _b.constraintsInfo.spatialReference });
  }
  get _rotation() {
    return new i17({ rotationEnabled: this.rotationEnabled });
  }
  get _zoom() {
    var _a;
    const o31 = this._get("_zoom"), t29 = this.lods || ((_a = this.view) == null ? void 0 : _a.constraintsInfo.lods), e29 = this.minZoom, r26 = this.maxZoom, s29 = this.minScale, i22 = this.maxScale, n31 = this.snapToZoom;
    return o31 && o31.lods === t29 && o31.minZoom === e29 && o31.maxZoom === r26 && o31.minScale === s29 && o31.maxScale === i22 && o31.snapToZoom === n31 ? o31 : new l14({ lods: t29, minZoom: e29, maxZoom: r26, minScale: s29, maxScale: i22, snapToZoom: n31 });
  }
  canZoomInTo(o31) {
    const t29 = this.effectiveMaxScale;
    return 0 === t29 || o31 >= t29;
  }
  canZoomOutTo(o31) {
    const t29 = this.effectiveMinScale;
    return 0 === t29 || o31 <= t29;
  }
  constrain(o31, t29) {
    return this._zoom.constrain(o31, t29), this._rotation.constrain(o31, t29), this._geometry.constrain(o31, t29), this.customConstraints.forEach((e29) => e29.constrain(o31, t29)), o31;
  }
  constrainByGeometry(o31) {
    return this._geometry.constrain(o31), this.customConstraints.forEach((t29) => {
      var _a;
      return (_a = t29.applyPanConstraint) == null ? void 0 : _a.call(t29, o31);
    }), o31;
  }
  fit(o31) {
    return this._zoom.fit(o31);
  }
  zoomToScale(o31) {
    return this._zoom.zoomToScale(o31);
  }
  scaleToZoom(o31) {
    return this._zoom.scaleToZoom(o31);
  }
  snapScale(o31) {
    return this._zoom.snapToClosestScale(o31);
  }
  snapToNextScale(o31) {
    return this._zoom.snapToNextScale(o31);
  }
  snapToPreviousScale(o31) {
    return this._zoom.snapToPreviousScale(o31);
  }
};
e([y({ readOnly: true })], y8.prototype, "effectiveLODs", null), e([y({ readOnly: true })], y8.prototype, "effectiveMinScale", null), e([y({ readOnly: true })], y8.prototype, "effectiveMaxScale", null), e([y({ readOnly: true })], y8.prototype, "effectiveMinZoom", null), e([y({ readOnly: true })], y8.prototype, "effectiveMaxZoom", null), e([y({ types: p17, value: null })], y8.prototype, "geometry", null), e([y({ type: [p2] })], y8.prototype, "lods", void 0), e([y()], y8.prototype, "minScale", void 0), e([y()], y8.prototype, "maxScale", void 0), e([y()], y8.prototype, "minZoom", void 0), e([y()], y8.prototype, "maxZoom", void 0), e([y()], y8.prototype, "rotationEnabled", void 0), e([y()], y8.prototype, "snapToZoom", void 0), e([y({ type: V })], y8.prototype, "customConstraints", void 0), e([y()], y8.prototype, "view", void 0), e([y({ readOnly: true })], y8.prototype, "version", null), e([y({ type: p16, readOnly: true })], y8.prototype, "_geometry", null), e([y({ type: i17 })], y8.prototype, "_rotation", null), e([y({ readOnly: true, type: l14 })], y8.prototype, "_zoom", null), y8 = e([a2("esri.views.2d.MapViewConstraints")], y8);
var f17 = y8;

// ../node_modules/@arcgis/core/views/2d/ViewStateManager.js
var z3 = class extends S2 {
  constructor(t29) {
    super(t29), this.constraints = null, this.ready = false, this.resizeAlign = "center", this.addHandles([d3(() => {
      var _a;
      return (_a = this.constraints) == null ? void 0 : _a.version;
    }, (t30) => {
      this.constraints && t30 && this.ready && (this.state.viewpoint = this.constraints.fit(this.state.paddedViewState.viewpoint));
    }, C)]);
  }
  get center() {
    if (!this.ready) return this._get("center");
    const { center: t29, spatialReference: e29 } = this.state.paddedViewState;
    return this.state.commitProperty("id"), new _2({ x: t29[0], y: t29[1], spatialReference: e29 });
  }
  set center(t29) {
    if (null == t29) return;
    if (!this.ready) return void this._set("center", t29);
    let e29;
    try {
      e29 = this._project(t29, this.state.spatialReference);
    } catch (o31) {
      return void n.getLogger(this).error(new s("mapview:invalid-center", "could not project the value in the view's spatial reference", { input: t29, error: o31 }));
    }
    const i22 = this.viewpoint;
    xt(i22, i22, e29), this.viewpoint = i22;
  }
  get extent() {
    return this.ready ? (this.state.commitProperty("id"), this.state.paddedViewState.extent.clone()) : this._get("extent");
  }
  set extent(t29) {
    if (null == t29) return;
    if (!t29.width || !t29.height) return void n.getLogger(this).error(new s("mapview:invalid-extent", "invalid extent size"));
    if (!this.ready) return this._set("extent", t29), this._set("center", void 0), this._set("viewpoint", void 0), this._set("scale", void 0), void this._set("zoom", void 0);
    let e29;
    try {
      e29 = this._project(t29, this.state.spatialReference);
    } catch (o31) {
      return void n.getLogger(this).error(new s("mapview:invalid-extent", "could not project the value in the view's spatial reference", { error: o31 }));
    }
    const i22 = this.viewpoint;
    tt(i22, i22, e29, this.state.size, { constraints: this.constraints }), this.viewpoint = i22;
  }
  get padding() {
    return this.ready ? this.state.padding : this._get("padding");
  }
  set padding(t29) {
    this.ready ? (this.state.padding = t29, this._set("padding", this.state.padding)) : this._set("padding", t29);
  }
  get resolution() {
    return this.ready ? (this.state.commitProperty("id"), this.state.resolution) : 0;
  }
  get rotation() {
    return this.ready ? (this.state.commitProperty("id"), this.state.rotation) : this._get("rotation");
  }
  set rotation(t29) {
    if (isNaN(t29)) return;
    if (!this.ready) return void this._set("rotation", t29);
    const e29 = this.viewpoint;
    wt(e29, e29, t29), this.viewpoint = e29;
  }
  get scale() {
    return this.ready ? (this.state.commitProperty("id"), this.state.scale) : this._get("scale");
  }
  set scale(t29) {
    if (!t29 || isNaN(t29)) return;
    if (!this.ready) {
      this._set("scale", t29), this._set("zoom", void 0);
      const e30 = this._get("extent");
      return void (e30 && (this._set("extent", void 0), this._set("center", e30.center)));
    }
    const e29 = this.viewpoint;
    jt(e29, e29, t29), this.viewpoint = e29;
  }
  get viewpoint() {
    if (!this.ready) return this._get("viewpoint");
    return this.state.paddedViewState.viewpoint.clone();
  }
  set viewpoint(t29) {
    var _a;
    if (null == t29) return;
    if (!this.ready) return this._set("viewpoint", t29), this._set("extent", void 0), this._set("center", void 0), this._set("zoom", void 0), void this._set("scale", void 0);
    let i22, o31;
    try {
      i22 = this._project(t29, this.state.spatialReference), !t29.scale || isNaN(t29.scale) ? o31 = new s("mapview:invalid-viewpoint", `invalid scale value of ${t29.scale}`) : null == t29.targetGeometry && (o31 = new s("mapview:invalid-viewpoint", "geometry not defined"));
    } catch (a22) {
      o31 = new s("mapview:invalid-viewpoint", "could not project the value in the view's spatial reference", { error: a22 });
    }
    if (o31) return void n.getLogger(this).error(o31);
    this._scaleBeforeChangingSpatialReference = null;
    const n31 = new m6({ targetGeometry: new _2(), scale: 0, rotation: 0 });
    Z(n31, i22), (_a = this.constraints) == null ? void 0 : _a.constrain(n31, this.state.paddedViewState.viewpoint), this.state.viewpoint = n31, this._set("viewpoint", n31);
  }
  get zoom() {
    var _a;
    return this.ready ? ((_a = this.constraints) == null ? void 0 : _a.scaleToZoom(this.scale)) ?? -1 : this._get("zoom");
  }
  set zoom(t29) {
    var _a, _b;
    if (!(t29 >= 0)) return;
    if (!this.ready) {
      this._set("zoom", t29), this._set("scale", void 0);
      const e30 = this._get("extent");
      return void (e30 && (this._set("extent", void 0), this._set("center", e30.center)));
    }
    const e29 = ((_a = this.constraints) == null ? void 0 : _a.zoomToScale(t29)) ?? 0;
    if (!e29) return void this._set("zoom", -1);
    const i22 = this.viewpoint;
    jt(i22, i22, e29), this.viewpoint = i22, this._set("zoom", ((_b = this.constraints) == null ? void 0 : _b.scaleToZoom(this.scale)) ?? -1);
  }
  getUserStartupOptions(t29) {
    if (!t29[0] && !t29[1]) return { center: void 0, rotation: void 0, scale: void 0 };
    const { padding: e29, constraints: i22 } = this, s29 = this._get("center"), r26 = this._get("extent"), o31 = this._get("scale"), n31 = this._get("rotation"), a22 = this._get("viewpoint"), c28 = this._get("zoom"), p24 = null != c28 && null != i22 && i22.zoomToScale(c28) || void 0;
    let h19, l18, d21;
    const v12 = a22 == null ? void 0 : a22.rotation, m24 = a22 == null ? void 0 : a22.targetGeometry;
    "extent" === (m24 == null ? void 0 : m24.type) ? h19 = m24 : "point" === (m24 == null ? void 0 : m24.type) && (l18 = m24, d21 = a22 == null ? void 0 : a22.scale);
    const g16 = r26 ?? h19;
    return { center: s29 ?? l18 ?? (g16 == null ? void 0 : g16.center), rotation: n31 ?? v12, scale: (o31 ?? p24 ?? d21 ?? (g16 && H(g16, [t29[0] - e29.left - e29.right, t29[1] - e29.top - e29.bottom]))) || void 0 };
  }
  startup(t29, e29, i22, s29) {
    var _a;
    const o31 = t29.targetGeometry;
    try {
      this._project(t29, i22);
    } catch (n31) {
      n.getLogger(this).warn(new s3("mapview:startup-projection-error", "projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.", { center: o31.toJSON(), spatialReference: i22, error: n31 })), t29.targetGeometry = s29 || new _2({ x: 0, y: 0, spatialReference: i22 });
    }
    (_a = this.constraints) == null ? void 0 : _a.fit(t29), this._set("state", new w5({ padding: this.padding, size: e29, viewpoint: t29 })), this._set("ready", true);
  }
  teardown() {
    this._set("ready", false);
    const { center: [t29, e29], spatialReference: i22, rotation: s29, scale: r26 } = this.state.paddedViewState, o31 = new _2({ x: t29, y: e29, spatialReference: i22 });
    this._set("viewpoint", null), this._set("extent", null), this._set("center", o31), this._set("zoom", -1), this._set("rotation", s29), this._set("scale", r26), this._set("state", null);
  }
  changeSpatialReference(t29) {
    var _a;
    const i22 = this.state.paddedViewState.clone();
    if (null == this._scaleBeforeChangingSpatialReference) this._scaleBeforeChangingSpatialReference = i22.scale;
    else {
      const t30 = i22.viewpoint.clone();
      t30.scale = this._scaleBeforeChangingSpatialReference, i22.viewpoint = t30;
    }
    const s29 = i22.clone(), [o31, n31] = i22.center;
    let a22 = null;
    try {
      a22 = this._project(new _2({ x: o31, y: n31, spatialReference: i22.spatialReference }), t29);
    } catch (h19) {
      r6() || n.getLogger(this).warn(new s3("mapview:spatial-reference-change", "could not project the view's center to the new spatial reference", { center: a22 == null ? void 0 : a22.toJSON(), spatialReference: t29, error: h19 }));
    }
    a22 || (a22 = new _2({ x: 0, y: 0, spatialReference: t29 }));
    const p24 = xt(new m6({ targetGeometry: new _2(), scale: 0, rotation: 0 }), i22.viewpoint, a22);
    s29.viewpoint = p24;
    try {
      const e29 = 20, r26 = [i22.size[0] / 2, i22.size[1] / 2], o32 = [r26[0] + e29, r26[1]], n32 = i22.toMap([0, 0], o32), { x: a23, y: c28 } = this._project(new _2({ x: n32[0], y: n32[1], spatialReference: i22.spatialReference }), t29);
      n32[0] = a23, n32[1] = c28, s29.toScreen(n32, n32);
      const h19 = pt(r26, n32, o32), l18 = Math.hypot(n32[0] - r26[0], n32[1] - r26[1]) / e29;
      !Number.isFinite(l18) || Math.abs(l18) > 4 ? (p24.rotation = 0, p24.targetGeometry = new _2({ x: 0, y: 0, spatialReference: t29 })) : (p24.scale *= l18, p24.scale > has("mapview-srswitch-adjust-rotation-scale-threshold") ? p24.rotation = 0 : p24.rotation += Number.isFinite(h19) ? h19 : 0);
    } catch {
    }
    (_a = this._get("constraints")) == null ? void 0 : _a.constrain(p24, void 0), this._get("state").viewpoint = p24;
  }
  resize(t29, e29) {
    var _a;
    if (!this.ready) return;
    const i22 = this.state;
    let s29 = this.state.paddedViewState.viewpoint;
    const r26 = this.state.paddedViewState.size.concat();
    i22.size = [t29, e29], ht(s29, s29, r26, this.state.paddedViewState.size, this.resizeAlign), s29 = ((_a = this.constraints) == null ? void 0 : _a.constrain(s29, void 0)) ?? s29, this.state.viewpoint = s29;
  }
  toMap(t29) {
    if (!this.ready) return null;
    const e29 = [0, 0], [i22, s29] = this.state.toMap(e29, [t29.x, t29.y]), r26 = this.state.spatialReference;
    return new _2({ x: i22, y: s29, spatialReference: r26 });
  }
  toScreen(t29, e29) {
    if (!this.ready) return null;
    const i22 = this._project(t29, this.state.spatialReference), s29 = [i22.x, i22.y];
    return false === (e29 == null ? void 0 : e29.pickClosestTarget) || this.state.paddedViewState.wrapMapCoordinate(s29, s29), this.state.toScreen(s29, s29), c6(s29[0], s29[1]);
  }
  _project(t29, e29) {
    var _a;
    const i22 = (t29 == null ? void 0 : t29.targetGeometry) || t29;
    if (!e29) return t29;
    if (!i22) return null;
    if (e29.imageCoordinateSystem || ((_a = i22.spatialReference) == null ? void 0 : _a.imageCoordinateSystem)) return t29;
    if (G(e29, i22.spatialReference)) return t29;
    const r26 = K(i22, e29);
    if (!r26) throw new s("mapview:projection-not-possible", "projecting input geometry to target spatial reference returned a null value", { geometry: i22, spatialReference: e29 });
    return V3(t29) ? (t29.targetGeometry = r26, t29) : r26;
  }
};
function V3(t29) {
  return "esri.Viewpoint" === (t29 == null ? void 0 : t29.declaredClass);
}
e([y({ type: _2 })], z3.prototype, "center", null), e([y()], z3.prototype, "constraints", void 0), e([y({ type: w2 })], z3.prototype, "extent", null), e([y({ value: { top: 0, right: 0, bottom: 0, left: 0 }, cast: (t29) => ({ top: 0, right: 0, bottom: 0, left: 0, ...t29 }) })], z3.prototype, "padding", null), e([y()], z3.prototype, "ready", void 0), e([y()], z3.prototype, "resizeAlign", void 0), e([y({ readOnly: true })], z3.prototype, "resolution", null), e([y({ type: Number })], z3.prototype, "rotation", null), e([y({ type: Number })], z3.prototype, "scale", null), e([y({ readOnly: true })], z3.prototype, "state", void 0), e([y({ type: m6 })], z3.prototype, "viewpoint", null), e([y()], z3.prototype, "zoom", null), z3 = e([a2("esri.views.2d.ViewStateManager")], z3);

// ../node_modules/@arcgis/core/views/input/handlers/support.js
function t19(t29, r26) {
  switch (r26) {
    case "primary":
      return "touch" === t29.pointerType || 0 === t29.button;
    case "secondary":
      return "touch" !== t29.pointerType && 2 === t29.button;
    case "tertiary":
      return "touch" !== t29.pointerType && 1 === t29.button;
  }
}

// ../node_modules/@arcgis/core/views/2d/input/handlers/DoubleClickZoom.js
var a13 = class extends t8 {
  constructor(t29, i22) {
    super(true), this._view = t29, this.registerIncoming("double-click", i22, (t30) => this._handleDoubleClick(t30, i22));
  }
  _handleDoubleClick(t29, a22) {
    t19(t29.data, "primary") && (t29.stopPropagation(), a22 ? this._view.mapViewNavigation.zoomOut([t29.data.x, t29.data.y]) : this._view.mapViewNavigation.zoomIn([t29.data.x, t29.data.y]));
  }
};

// ../node_modules/@arcgis/core/views/2d/input/handlers/DoubleTapDragZoom.js
var e20 = class extends t8 {
  constructor(t29, e29, a22) {
    super(true), this.view = t29, this.pointerType = e29, this.registerIncoming("double-tap-drag", a22, (t30) => this._handleDoubleTapDrag(t30));
  }
  _handleDoubleTapDrag(t29) {
    const { data: e29 } = t29, { pointerType: a22 } = e29;
    if (a22 !== this.pointerType) return;
    t29.stopPropagation();
    const { action: s29, delta: i22 } = e29, { view: r26 } = this, { mapViewNavigation: n31 } = r26;
    switch (s29) {
      case "begin": {
        const { scale: t30 } = r26;
        this._startScale = t30, this._currentScale = t30, this._previousDelta = i22, n31.begin();
        break;
      }
      case "update": {
        if (this._previousDelta.y === i22.y) return;
        this._previousDelta = i22;
        const t30 = 1.015 ** i22.y, e30 = this._startScale * t30, a23 = e30 / this._currentScale;
        n31.setViewpointImmediate(a23), this._currentScale = e30;
        break;
      }
      case "end": {
        const { constraints: t30 } = r26, { effectiveLODs: e30, snapToZoom: a23 } = t30;
        if (!a23 || !e30) return void n31.end();
        const s30 = t30.snapScale(this._currentScale), o31 = (i22.y > 0 ? Math.max(s30, t30.snapToPreviousScale(this._startScale)) : Math.min(s30, t30.snapToNextScale(this._startScale))) / this._currentScale;
        n31.zoom(o31).then(() => {
          n31.end();
        });
        break;
      }
    }
  }
};

// ../node_modules/@arcgis/core/views/input/DragEventSeparator.js
var t20 = class {
  constructor(t29) {
    this._callbacks = t29, this._currentCount = 0, this._callbacks.condition || (this._callbacks.condition = () => true);
  }
  handle(t29) {
    const s29 = t29.data, i22 = s29.pointers.size;
    switch (s29.action) {
      case "start":
        this._currentCount = i22, this._emitStart(t29);
        break;
      case "added":
        this._emitEnd(this._previousEvent), this._currentCount = i22, this._emitStart(t29);
        break;
      case "update":
        this._emitUpdate(t29);
        break;
      case "removed":
        this._startEvent && this._emitEnd(this._previousEvent), this._currentCount = i22, this._emitStart(t29);
        break;
      case "end":
        this._emitEnd(t29), this._currentCount = 0;
    }
    this._previousEvent = t29;
  }
  _emitStart(t29) {
    var _a, _b;
    this._startEvent = t29, ((_b = (_a = this._callbacks).condition) == null ? void 0 : _b.call(_a, this._currentCount, t29)) && this._callbacks.start(this._currentCount, t29, this._startEvent);
  }
  _emitUpdate(t29) {
    var _a, _b;
    ((_b = (_a = this._callbacks).condition) == null ? void 0 : _b.call(_a, this._currentCount, t29)) && this._callbacks.update(this._currentCount, t29, this._startEvent);
  }
  _emitEnd(t29) {
    var _a, _b;
    ((_b = (_a = this._callbacks).condition) == null ? void 0 : _b.call(_a, this._currentCount, t29)) && this._callbacks.end(this._currentCount, t29, this._startEvent), this._startEvent = null;
  }
};

// ../node_modules/@arcgis/core/views/2d/input/handlers/DragPan.js
var n24 = class extends t8 {
  constructor(t29, i22, a22) {
    super(true), this.view = t29, this.pointerAction = i22, this.registerIncoming("drag", a22, (t30) => this._handleDrag(t30)), this.registerIncoming("pointer-down", () => this.stopMomentumNavigation());
  }
  onInstall(i22) {
    super.onInstall(i22), this._dragEventSeparator = new t20({ start: (t29, i23) => {
      this.view.mapViewNavigation.pan.begin(this.view, i23.data), i23.stopPropagation();
    }, update: (t29, i23) => {
      this.view.mapViewNavigation.pan.update(this.view, i23.data), i23.stopPropagation();
    }, end: (t29, i23) => {
      this.view.mapViewNavigation.pan.end(this.view, i23.data), i23.stopPropagation();
    }, condition: (t29, i23) => 1 === t29 && t19(i23.data, this.pointerAction) });
  }
  _handleDrag(t29) {
    const i22 = this.view.mapViewNavigation;
    i22.pinch.zoomMomentum || i22.pinch.rotateMomentum ? this.stopMomentumNavigation() : this._dragEventSeparator.handle(t29);
  }
  stopMomentumNavigation() {
    this.view.mapViewNavigation.pan.stopMomentumNavigation();
  }
};

// ../node_modules/@arcgis/core/views/2d/input/handlers/DragRotate.js
var o21 = class extends t8 {
  constructor(a22, o31, r26) {
    super(true), this._view = a22, this.pointerAction = o31;
    const e29 = this._view.mapViewNavigation;
    this._dragEventSeparator = new t20({ start: (t29, a23) => {
      e29.rotate.begin(this._view, a23.data), a23.stopPropagation();
    }, update: (t29, a23) => {
      e29.rotate.update(this._view, a23.data), a23.stopPropagation();
    }, end: (t29, a23) => {
      e29.rotate.end(), a23.stopPropagation();
    }, condition: (t29, a23) => 1 === t29 && t19(a23.data, this.pointerAction) }), this.registerIncoming("drag", r26, (t29) => this._dragEventSeparator.handle(t29));
  }
};

// ../node_modules/@arcgis/core/views/navigation/gamepadAndKeyboardUtils.js
function n25(t29) {
  let n31 = t29 * t29;
  return t29 < 0 && (n31 *= -1), n31;
}
function a14(t29) {
  return t29.translation[0] = 0, t29.translation[1] = 0, t29.translation[2] = 0, t29.heading = 0, t29.tilt = 0, t29;
}
function i18(a22, i22, o31) {
  const s29 = o31, e29 = a22.state, r26 = a22.device, l18 = "forward-down" === i22.tiltDirection ? 1 : -1, c28 = 1;
  return "standard" === r26.deviceType ? (s29.translation[0] = n25(e29.axes[0]), s29.translation[1] = n25(e29.axes[1]), s29.translation[2] = n25(e29.buttons[7]) - n25(e29.buttons[6]), s29.heading = n25(e29.axes[2]), s29.tilt = n25(e29.axes[3])) : "spacemouse" === r26.deviceType && (s29.translation[0] = 1.2 * n25(e29.axes[0]), s29.translation[1] = 1.2 * n25(e29.axes[1]), s29.translation[2] = 2 * -n25(e29.axes[2]), s29.heading = 1.2 * n25(e29.axes[5]), s29.tilt = 1.2 * n25(e29.axes[3])), s29.tilt *= l18, g6(s29.translation, s29.translation, c28), s29;
}
function s21(t29) {
  return 0 === t29.translation[0] && 0 === t29.translation[1] && 0 === t29.translation[2] && 0 === t29.heading && 0 === t29.tilt && 0 === t29.zoom;
}

// ../node_modules/@arcgis/core/views/2d/input/handlers/GamepadNavigation.js
var d13 = class extends t8 {
  constructor(i22) {
    super(true), this._view = i22, this._frameTask = null, this._watchHandles = new r(), this._currentDevice = null, this._transformation = { translation: [0, 0, 0], heading: 0, tilt: 0, zoom: 0 }, this._handle = this.registerIncoming("gamepad", (t29) => this._handleGamePadEvent(t29)), this._handle.pause();
  }
  onInstall(t29) {
    super.onInstall(t29), this._watchHandles.add([d3(() => {
      var _a;
      return (_a = this._view.navigation.gamepad) == null ? void 0 : _a.enabled;
    }, (t30) => {
      t30 ? (this._handle.resume(), this._frameTask || (this._frameTask = A2({ update: (t31) => this._frameUpdate(t31.deltaTime) }))) : (this._handle.pause(), this._frameTask && (this._frameTask.remove(), this._frameTask = null));
    }, P)]);
  }
  onUninstall() {
    this._watchHandles.removeAll(), this._frameTask && (this._frameTask.remove(), this._frameTask = null), super.onUninstall();
  }
  _handleGamePadEvent(t29) {
    const i22 = this._view.navigation.gamepad.device;
    i22 && t29.data.device !== i22 || this._currentDevice && this._currentDevice !== t29.data.device || ("end" === t29.data.action ? (this._currentDevice = null, a14(this._transformation)) : (this._currentDevice = t29.data.device, i18(t29.data, this._view.navigation.gamepad, this._transformation)));
  }
  _frameUpdate(t29) {
    const i22 = this._transformation;
    if (s21(i22)) return;
    const e29 = this._view.viewpoint.clone(), a22 = this._view.navigation.gamepad.velocityFactor, r26 = _9 * a22 * t29;
    kt(e29, e29, [i22.translation[0] * r26, -i22.translation[1] * r26]);
    const o31 = 1 + i22.translation[2] * c15 * t29, h19 = this._view.constraints.rotationEnabled ? -i22.heading * m17 * t29 : 0, d21 = this._view.size, v12 = [d21[0] / 2, d21[1]];
    Gt(e29, e29, o31, h19, v12, d21);
    const p24 = this._view.constraints.constrain(e29, this._view.viewpoint);
    this._view.viewpoint = p24;
  }
};
var m17 = 0.06;
var _9 = 0.7;
var c15 = 6e-4;

// ../node_modules/@arcgis/core/views/input/VisibilityChange.js
function i19(i22) {
  const t29 = () => i22("visible" === document.visibilityState);
  return document.addEventListener("visibilitychange", t29), e3(() => document.removeEventListener("visibilitychange", t29));
}

// ../node_modules/@arcgis/core/views/2d/input/handlers/KeyPan.js
var e21 = class extends t8 {
  constructor(i22, e29, s29) {
    super(true), this.view = i22, this.keys = e29, this._isSticky = false, this._pressedKeys = /* @__PURE__ */ new Set(), this._timeout = void 0, this._currentDirection = void 0, this._stickyKeyDuration = 200, this._handleKey = (i23) => {
      const t29 = this._keyMap[i23.data.key];
      if (i23.modifiers.has("Meta") || i23.modifiers.has("Control")) return void this._stopMovement();
      if (null == t29) return;
      i23.stopPropagation(), i23.preventDefault();
      const e30 = "key-down" === i23.type;
      if (this._pressedKeys[e30 ? "add" : "delete"](t29), e30) {
        if (this._direction === t29) return;
        this._direction = t29, this._isSticky = false, this._setTimeout(() => {
          this._isSticky && this._handlePopKey();
        });
      } else {
        const i24 = void 0 === this._timeout, t30 = this._pressedKeys.size > 0;
        i24 || t30 ? this._handlePopKey() : this._isSticky = true;
      }
    }, this._handlePopKey = () => {
      this._direction = Array.from(this._pressedKeys).pop(), null == this._direction && this._stopMovement();
    }, this._stopMovement = () => {
      this._isSticky = false, this._direction = void 0, this._pressedKeys.clear(), this._setTimeout(void 0);
    }, this._keyMap = { [e29.left]: "left", [e29.right]: "right", [e29.up]: "up", [e29.down]: "down" }, this.registerIncoming("key-down", s29, this._handleKey), this.registerIncoming("key-up", s29, this._handleKey), this.registerIncoming("blur", s29, this._stopMovement), this._visibilityHandle = i19((i23) => i23 ? null : this._stopMovement());
  }
  onUninstall() {
    var _a;
    this._stopMovement(), (_a = this._visibilityHandle) == null ? void 0 : _a.remove();
  }
  get _direction() {
    return this._currentDirection;
  }
  set _direction(i22) {
    const t29 = null != this._currentDirection;
    if (null != i22) {
      if (t29 || this.view.mapViewNavigation.begin(), this._currentDirection !== i22) switch (i22) {
        case "left":
          this.view.mapViewNavigation.continuousPanLeft();
          break;
        case "right":
          this.view.mapViewNavigation.continuousPanRight();
          break;
        case "up":
          this.view.mapViewNavigation.continuousPanUp();
          break;
        case "down":
          this.view.mapViewNavigation.continuousPanDown();
      }
    } else t29 && this.view.mapViewNavigation.stop();
    this._currentDirection = i22;
  }
  _setTimeout(i22) {
    clearTimeout(this._timeout), this._timeout = void 0 === i22 ? void 0 : setTimeout(() => {
      this._timeout = void 0, i22();
    }, this._stickyKeyDuration);
  }
};

// ../node_modules/@arcgis/core/views/2d/input/handlers/KeyRotate.js
var t21 = class extends t8 {
  constructor(e29, t29, s29) {
    super(true), this.view = e29, this.keys = t29, this._pressed = false, this._keyToDirection = { [t29.clockwiseOption1]: "clockwise", [t29.clockwiseOption2]: "clockwise", [t29.counterClockwiseOption1]: "counterClockwise", [t29.counterClockwiseOption2]: "counterClockwise", [t29.resetOption1]: "reset", [t29.resetOption2]: "reset" }, this.registerIncoming("key-down", s29, (e30) => this._handleKeyDown(e30)), this.registerIncoming("key-up", s29, (e30) => this._handleKeyUp(e30)), this.registerIncoming("blur", s29, () => this._handleStop()), this._visibilityHandle = i19((e30) => e30 ? null : this._handleStop());
  }
  onUninstall() {
    var _a;
    (_a = this._visibilityHandle) == null ? void 0 : _a.remove(), this._handleStop();
  }
  _handleKeyDown(e29) {
    e29.data.repeat || this._handleKey(e29, true);
  }
  _handleKeyUp(e29) {
    this._handleKey(e29, false);
  }
  _handleStop() {
    this._pressed && (this._pressed = false, this.view.mapViewNavigation.stop());
  }
  _handleKey(e29, i22) {
    const t29 = e29.modifiers;
    if (t29.size > 0 && !t29.has("Shift") || !this.view.constraints.rotationEnabled) return;
    const s29 = this._keyToDirection[e29.data.key];
    if (this._pressed = null != s29, this._pressed) {
      if (e29.preventDefault(), i22) switch (this.view.mapViewNavigation.begin(), s29) {
        case "clockwise":
          this.view.mapViewNavigation.continuousRotateClockwise();
          break;
        case "counterClockwise":
          this.view.mapViewNavigation.continuousRotateCounterclockwise();
          break;
        case "reset":
          this.view.mapViewNavigation.resetRotation();
      }
      else this._pressed = false, this.view.mapViewNavigation.stop();
      e29.stopPropagation();
    }
  }
};

// ../node_modules/@arcgis/core/views/2d/input/handlers/KeyZoom.js
var t22;
!function(o31) {
  o31[o31.IN = 0] = "IN", o31[o31.OUT = 1] = "OUT";
}(t22 || (t22 = {}));
var e22 = class extends t8 {
  constructor(o31, e29, i22) {
    super(true), this.view = o31, this.keys = e29, this._keysToZoomAction = {}, this.registerIncoming("key-down", i22, (o32) => this._handleKeyDown(o32)), e29.zoomIn.forEach((o32) => this._keysToZoomAction[o32] = t22.IN), e29.zoomOut.forEach((o32) => this._keysToZoomAction[o32] = t22.OUT);
  }
  _handleKeyDown(o31) {
    this._handleKey(o31);
  }
  _handleKey(o31) {
    const e29 = o31.modifiers;
    if (e29.size > 0 && !e29.has("Shift")) return;
    const { key: i22 } = o31.data;
    if (!(i22 in this._keysToZoomAction)) return;
    const n31 = this._keysToZoomAction[i22], { mapViewNavigation: s29 } = this.view;
    let r26 = null;
    switch (n31) {
      case t22.IN:
        r26 = s29.zoomIn();
        break;
      case t22.OUT:
        r26 = s29.zoomOut();
        break;
      default:
        return;
    }
    s29.begin(), r26.then(() => s29.end()), o31.stopPropagation();
  }
};

// ../node_modules/@arcgis/core/views/2d/input/handlers/MouseWheelZoom.js
var t23 = 0.6;
var o22 = class extends t8 {
  constructor(e29, t29) {
    super(true), this._view = e29, this._canZoom = true, this.registerIncoming("mouse-wheel", t29, (e30) => this._handleMouseWheel(e30));
  }
  _handleMouseWheel(e29) {
    if (!this._view.navigation.mouseWheelZoomEnabled) return;
    if (e29.preventDefault(), e29.stopPropagation(), !this._canZoom) return;
    const o31 = this._view.mapViewNavigation, { x: n31, y: i22, deltaY: s29 } = e29.data, a22 = 1 / t23 ** (1 / 60 * s29), h19 = o31.zoom(a22, [n31, i22]);
    h19 && (this._canZoom = false, h19.catch(() => {
    }).then(() => {
      this._canZoom = true, o31.end();
    }));
  }
};

// ../node_modules/@arcgis/core/views/2d/input/handlers/PinchAction.js
var a15 = class extends t8 {
  constructor(i22) {
    super(true), this.view = i22, this.registerIncoming("drag", (t29) => this._handleDrag(t29)), this.registerIncoming("pointer-down", () => this._stopMomentumNavigation());
    const a22 = this.view.mapViewNavigation;
    this._dragEventSeparator = new t20({ start: (t29, i23) => {
      a22.pinch.begin(this.view, i23.data), i23.stopPropagation();
    }, update: (t29, i23) => {
      a22.pinch.update(this.view, i23.data), i23.stopPropagation();
    }, end: (t29, i23) => {
      a22.pinch.end(this.view), i23.stopPropagation();
    }, condition: (t29) => t29 >= 2 });
  }
  _handleDrag(t29) {
    this._dragEventSeparator.handle(t29);
  }
  _stopMomentumNavigation() {
    this.view.mapViewNavigation.pinch.stopMomentumNavigation();
  }
};

// ../node_modules/@arcgis/core/views/input/gamepad/GamepadState.js
function t24(t29) {
  const n31 = t29.native;
  return n31 ? { buttons: n31.buttons.map((t30) => t30.pressed ? t30.value || 1 : 0), axes: n31.axes.map((n32) => s22(n32, t29.axisThreshold)) } : { buttons: [], axes: [] };
}
function n26(t29, n31) {
  if (t29.axes.length !== n31.axes.length) return false;
  if (t29.buttons.length !== n31.buttons.length) return false;
  for (let e29 = 0; e29 < t29.axes.length; e29++) if (t29.axes[e29] !== n31.axes[e29]) return false;
  for (let e29 = 0; e29 < t29.buttons.length; e29++) if (t29.buttons[e29] !== n31.buttons[e29]) return false;
  return true;
}
function e23(t29) {
  for (let n31 = 0; n31 < t29.axes.length; n31++) if (0 !== t29.axes[n31]) return false;
  for (let n31 = 0; n31 < t29.buttons.length; n31++) if (0 !== t29.buttons[n31]) return false;
  return true;
}
function s22(t29, n31) {
  const e29 = Math.abs(t29);
  return e29 < n31 ? 0 : Math.sign(t29) * (e29 - n31) / (1 - n31);
}

// ../node_modules/@arcgis/core/views/input/gamepad/GamepadSource.js
var a16 = class {
  constructor(e29, t29) {
    this._element = e29, this._input = t29, this._hasEventListeners = false, this._onConnectGamepad = (e30) => {
      this._connectGamepad(e30.gamepad);
    }, this._onDisconnectGamepad = (e30) => {
      const t30 = e30.gamepad, s30 = t30.index, i23 = this._inputDevices[s30];
      i23 && (this._emitGamepadEvent(t30, t24(i23), false), this._inputDevices.splice(s30, 1), this._latestUpdate.splice(s30, 1), this._input.gamepad.devices.remove(i23), this.ensurePollingState());
    }, this._frameTask = null, this._latestUpdate = new Array(), this._inputDevices = new Array(), this._callback = null;
    const s29 = "getGamepads" in window.navigator, i22 = window.isSecureContext;
    this.supported = s29 && i22, this.supported && (d14((e30) => this._connectGamepad(e30)), window.addEventListener("gamepadconnected", this._onConnectGamepad), window.addEventListener("gamepaddisconnected", this._onDisconnectGamepad), this.ensurePollingState());
  }
  destroy() {
    this.hasEventListeners = false, this.supported && (window.removeEventListener("gamepadconnected", this._onConnectGamepad), window.removeEventListener("gamepaddisconnected", this._onDisconnectGamepad));
  }
  set hasEventListeners(e29) {
    this._hasEventListeners !== e29 && (this._hasEventListeners = e29, this.ensurePollingState());
  }
  get _eventsEnabled() {
    return this.supported && this._inputDevices.length > 0 && this._hasEventListeners;
  }
  set onEvent(e29) {
    this._callback = e29;
  }
  _connectGamepad(e29) {
    const n31 = new o16(e29);
    "unknown" !== n31.deviceType && (this._inputDevices[e29.index] = n31, this._input.gamepad.devices.add(n31)), this.ensurePollingState();
  }
  ensurePollingState() {
    this._eventsEnabled ? this._startPolling() : this._stopPolling();
  }
  _startPolling() {
    null == this._frameTask && (this._frameTask = A2({ update: () => this._readGamepadState() }));
  }
  _stopPolling() {
    null != this._frameTask && (this._frameTask.remove(), this._frameTask = null, this._latestUpdate = new Array());
  }
  _readGamepadState() {
    const e29 = document.hasFocus(), t29 = this._element.contains(document.activeElement), a22 = "document" === this._input.gamepad.enabledFocusMode && !e29 || "view" === this._input.gamepad.enabledFocusMode && !t29;
    d14((e30) => {
      const t30 = this._inputDevices[e30.index];
      if (!t30) return;
      const o31 = this._latestUpdate[e30.index], d21 = t24(t30), c28 = a22 || e23(d21);
      if (o31) {
        if (o31.timestamp === e30.timestamp) return;
        if (!o31.active && c28) return;
        if (n26(o31.state, d21)) return;
      }
      this._emitGamepadEvent(e30, d21, !c28);
    });
  }
  _emitGamepadEvent(e29, t29, n31) {
    const s29 = this._latestUpdate[e29.index], i22 = s29 && s29.active;
    if (!i22 && !n31) return;
    const a22 = !i22 && n31 ? "start" : i22 && n31 ? "update" : "end";
    this._latestUpdate[e29.index] = { timestamp: e29.timestamp, state: t29, active: n31 }, this._callback && this._callback({ device: this._inputDevices[e29.index], state: t29, action: a22 });
  }
};
function o23(e29) {
  if (!e29) return false;
  if (!e29.connected) return false;
  for (let t29 = 0; t29 < e29.axes.length; t29++) if (isNaN(e29.axes[t29])) return false;
  return true;
}
function d14(e29) {
  const t29 = window.navigator.getGamepads();
  for (let n31 = 0; n31 < t29.length; n31++) {
    const s29 = t29[n31];
    o23(s29) && e29(s29);
  }
}

// ../node_modules/@arcgis/core/views/input/BrowserEventSource.js
var i20 = has("edge");
var o24 = has("chrome");
var a17 = has("ff");
var s23 = has("safari");
var r18 = "esri-view-surface";
var h14 = { touchNone: `${r18}--touch-none`, touchPan: `${r18}--touch-pan` };
var l15 = class _l {
  constructor(e29, n31) {
    this._input = n31, this._active = {}, this._callback = () => {
    }, this._activePointerCaptures = /* @__PURE__ */ new Set(), this._keyDownState = /* @__PURE__ */ new Set(), this._eventId = 1, this._browserTouchPanningEnabled = false, this._element = e29, e29.getAttribute("tabindex") || e29.setAttribute("tabindex", "0"), this._eventHandlers = { "key-down": this._handleKey, "key-up": this._handleKey, "pointer-down": this._handlePointer, "pointer-move": this._handlePointerPreventDefault, "pointer-up": this._handlePointerPreventDefault, "pointer-enter": this._handlePointer, "pointer-leave": this._handlePointer, "pointer-cancel": this._handlePointer, "mouse-wheel": this._handleMouseWheel, "pointer-capture-lost": this._handlePointerCaptureLost }, this._updateTouchAction(), this._element.addEventListener("keydown", this._preventAltKeyDefault), this._gamepadSource = new a16(e29, this._input), this._gamepadSource.onEvent = (e30) => this._callback("gamepad", e30);
  }
  destroy() {
    this._callback = () => {
    }, this.activeEvents = null, this._activePointerCaptures.forEach((e29) => {
      this._releasePointerCaptureSafe(e29);
    }), this._gamepadSource = u(this._gamepadSource), this._activePointerCaptures = null, this._removeTouchAction(), this._element.removeEventListener("keydown", this._preventAltKeyDefault);
  }
  get browserTouchPanningEnabled() {
    return this._browserTouchPanningEnabled;
  }
  set browserTouchPanningEnabled(e29) {
    this._browserTouchPanningEnabled = e29, this._updateTouchAction(), this._updateTouchEventHandling();
  }
  set onEventReceived(e29) {
    this._callback = e29;
  }
  set activeEvents(e29) {
    for (const t29 in this._active) if (!e29 || !e29.has(t29)) {
      const e30 = this._active[t29];
      this._element.removeEventListener(c16[t29], e30), delete this._active[t29];
    }
    e29 && e29.forEach((e30) => {
      if (!this._active[e30] && c16[e30]) {
        const t29 = (this._eventHandlers[e30] || this._handleDefault).bind(this, e30);
        this._element.addEventListener(c16[e30], t29), this._active[e30] = t29;
      }
    }), this._gamepadSource.hasEventListeners = (e29 == null ? void 0 : e29.has("gamepad")) ?? false;
  }
  setPointerCapture(e29, t29) {
    t29 ? this._setPointerCatpureSafe(e29.pointerId) : (this._releasePointerCaptureSafe(e29.pointerId), this._activePointerCaptures.delete(e29.pointerId));
  }
  _updateTouchAction() {
    this._element.classList.remove(this._browserTouchPanningEnabled ? h14.touchNone : h14.touchPan), this._element.classList.add(this._browserTouchPanningEnabled ? h14.touchPan : h14.touchNone);
  }
  _updateTouchEventHandling() {
    this._browserTouchPanningEnabled ? this._element.addEventListener("touchmove", this._preventMultiTouchPanning) : this._element.removeEventListener("touchmove", this._preventMultiTouchPanning);
  }
  _removeTouchAction() {
    this._element.classList.remove(h14.touchNone), this._element.classList.remove(h14.touchPan), this._element.removeEventListener("touchmove", this._preventMultiTouchPanning);
  }
  _setPointerCatpureSafe(e29) {
    try {
      this._element.setPointerCapture(e29), this._activePointerCaptures.add(e29);
    } catch {
    }
  }
  _releasePointerCaptureSafe(e29) {
    try {
      if (this._element.hasPointerCapture && !this._element.hasPointerCapture(e29)) return;
      this._element.releasePointerCapture(e29);
    } catch (t29) {
    }
  }
  _updateNormalizedPointerLikeEvent(e29, t29) {
    const i22 = i11(this._element, e29);
    return _l.test.disableSubpixelCoordinates && (i22.x = Math.round(i22.x), i22.y = Math.round(i22.y)), t29.x = i22.x, t29.y = i22.y, t29;
  }
  _handleKey(e29, t29) {
    const { key: n31 } = t29;
    n31 && "key-up" === e29 && this._keyDownState.delete(n31);
    const i22 = { native: t29, key: n31, repeat: !!n31 && this._keyDownState.has(n31) };
    n31 && "key-down" === e29 && this._keyDownState.add(i22.key), this._callback(e29, i22);
  }
  _handlePointer(e29, t29) {
    const n31 = this._updateNormalizedPointerLikeEvent(t29, { native: t29, x: 0, y: 0, pointerType: t29.pointerType, button: t29.button, buttons: t29.buttons, eventId: this._eventId++ });
    this._callback(e29, n31);
  }
  _handlePointerPreventDefault(e29, t29) {
    const n31 = this._updateNormalizedPointerLikeEvent(t29, { native: t29, x: 0, y: 0, pointerType: t29.pointerType, button: t29.button, buttons: t29.buttons, eventId: this._eventId++ });
    t29.preventDefault(), this._callback(e29, n31);
  }
  _handleMouseWheel(e29, t29) {
    let n31 = t29.deltaY;
    switch (t29.deltaMode) {
      case 0:
        i20 && (n31 = n31 / document.documentElement.clientHeight * 600);
        break;
      case 1:
        n31 *= 30;
        break;
      case 2:
        n31 *= 900;
    }
    i20 ? n31 *= 0.7 : o24 || s23 ? n31 *= 0.6 : a17 && (n31 *= 1.375);
    const r26 = 100, h19 = Math.abs(n31);
    if (h19 > r26) {
      const e30 = 0.02;
      n31 = n31 / h19 * 200 / (1 + Math.exp(-e30 * (h19 - r26)));
    }
    const l18 = this._updateNormalizedPointerLikeEvent(t29, { native: t29, x: 0, y: 0, deltaY: n31 });
    this._callback(e29, l18);
  }
  _handlePointerCaptureLost(e29, t29) {
    this._activePointerCaptures.delete(t29.pointerId), this._handleDefault(e29, t29);
  }
  _handleDefault(e29, t29) {
    const n31 = { native: t29 };
    t29.preventDefault(), this._callback(e29, n31);
  }
  _preventAltKeyDefault(e29) {
    "Alt" === e29.key && e29.preventDefault();
  }
  _preventMultiTouchPanning(e29) {
    e29.touches.length > 1 && e29.preventDefault();
  }
};
l15.test = { disableSubpixelCoordinates: false };
var c16 = { "key-down": "keydown", "key-up": "keyup", "pointer-down": "pointerdown", "pointer-up": "pointerup", "pointer-move": "pointermove", "mouse-wheel": "wheel", "pointer-capture-got": "gotpointercapture", "pointer-capture-lost": "lostpointercapture", "context-menu": "contextmenu", "pointer-enter": "pointerenter", "pointer-leave": "pointerleave", "pointer-cancel": "pointercancel", focus: "focus", blur: "blur" };

// ../node_modules/@arcgis/core/views/input/handlers/PreventContextMenu.js
var e24 = class extends t8 {
  constructor() {
    super(true), this.registerIncoming("context-menu", (t29) => {
      t29.data.native.preventDefault();
    });
  }
};

// ../node_modules/@arcgis/core/views/input/recognizers/support.js
var t25 = { maximumClickDelay: 300, movementUntilMouseDrag: 1.5, movementUntilPenDrag: 6, movementUntilTouchDrag: 6, holdDelay: 500, maximumDoubleClickDelay: 250, maximumDoubleClickDistance: 10, maximumDoubleTouchDelay: 350, maximumDoubleTouchDistance: 35 };
function n27(e29, t29) {
  return Math.abs(t29.x - e29.x) + Math.abs(t29.y - e29.y);
}
function r19(e29, t29) {
  const n31 = t29.x - e29.x, r26 = t29.y - e29.y;
  return Math.sqrt(n31 * n31 + r26 * r26);
}
function o25(t29, n31) {
  if (n31 ? (n31.radius = 0, n31.center.x = 0, n31.center.y = 0) : n31 = { radius: 0, center: c6() }, 0 === t29.length) return n31;
  if (1 === t29.length) return n31.center.x = t29[0].x, n31.center.y = t29[0].y, n31;
  if (2 === t29.length) {
    const [e29, r27] = t29, [o32, u18] = [r27.x - e29.x, r27.y - e29.y];
    return n31.radius = Math.sqrt(o32 * o32 + u18 * u18) / 2, n31.center.x = (e29.x + r27.x) / 2, n31.center.y = (e29.y + r27.y) / 2, n31;
  }
  let r26 = 0, o31 = 0;
  for (let e29 = 0; e29 < t29.length; e29++) r26 += t29[e29].x, o31 += t29[e29].y;
  r26 /= t29.length, o31 /= t29.length;
  const u17 = t29.map((e29) => e29.x - r26), c28 = t29.map((e29) => e29.y - o31);
  let i22 = 0, a22 = 0, l18 = 0, m24 = 0, s29 = 0, x2 = 0, y11 = 0;
  for (let e29 = 0; e29 < u17.length; e29++) {
    const t30 = u17[e29], n32 = c28[e29], r27 = t30 * t30, o32 = n32 * n32;
    i22 += r27, a22 += o32, l18 += t30 * n32, m24 += r27 * t30, s29 += o32 * n32, x2 += t30 * o32, y11 += n32 * r27;
  }
  const h19 = 0.5 * (m24 + x2), D4 = 0.5 * (s29 + y11), g16 = i22 * a22 - l18 * l18, f19 = (h19 * a22 - D4 * l18) / g16, b7 = (i22 * D4 - l18 * h19) / g16, p24 = c6(f19 + r26, b7 + o31);
  return { radius: Math.sqrt(f19 * f19 + b7 * b7 + (i22 + a22) / t29.length), center: p24 };
}
function u12(e29) {
  const { native: t29 } = e29, { pointerId: n31, button: r26, pointerType: o31 } = t29;
  return "mouse" === o31 ? `${n31}:${r26}` : `${o31}`;
}

// ../node_modules/@arcgis/core/views/input/recognizers/DoubleTapDrag.js
var p18 = class extends t8 {
  constructor(e29 = t25.maximumDoubleClickDelay, i22 = t25.maximumDoubleClickDistance, r26 = t25.maximumDoubleTouchDelay, s29 = t25.maximumDoubleTouchDistance, u17 = o3) {
    super(false), this._maximumDoubleClickDelay = e29, this._maximumDoubleClickDistance = i22, this._maximumDoubleTouchDelay = r26, this._maximumDoubleTouchDistance = s29, this._clock = u17, this._doubleTapDragReady = false, this._doubleTapDragActive = false, this._dragStartCenter = c6(0, 0), this._pointerState = /* @__PURE__ */ new Map(), this._doubleTapDrag = this.registerOutgoing("double-tap-drag"), this._dragEventSeparator = new t20({ start: (t29, e30) => this._dragStart(t29, e30), update: (t29, e30) => this._dragUpdate(e30), end: (t29, e30) => this._dragEnd(e30) }), this.registerIncoming("drag", (t29) => this._dragEventSeparator.handle(t29)), this.registerIncoming("pointer-down", (t29) => this._handlePointerDown(t29)), this.registerIncoming("pointer-up", () => this._handlePointerUp());
  }
  onUninstall() {
    this._pointerState.forEach((t29) => {
      t29.doubleTapTimeout = l(t29.doubleTapTimeout);
    });
  }
  get hasPendingInputs() {
    return n3(this._pointerState, (t29) => null != t29.doubleTapTimeout);
  }
  _clearPointerDown(t29) {
    const e29 = this._pointerState.get(t29);
    e29 && (e29.doubleTapTimeout = l(e29.doubleTapTimeout), this._pointerState.delete(t29), this.refreshHasPendingInputs());
  }
  _dragStart(t29, e29) {
    if (!this._doubleTapDragReady || 1 !== t29) return;
    this._doubleTapDragReady = false, this._doubleTapDragActive = true;
    const { data: i22, modifiers: a22 } = e29, { center: r26 } = i22;
    this._dragStartCenter = r26;
    const n31 = d15("begin", c6(0, 0), i22);
    this._doubleTapDrag.emit(n31, void 0, a22), e29.stopPropagation();
  }
  _dragUpdate(t29) {
    if (!this._doubleTapDragActive) return;
    const { data: e29, modifiers: i22 } = t29, { center: a22 } = e29, r26 = d15("update", c6(a22.x - this._dragStartCenter.x, a22.y - this._dragStartCenter.y), e29);
    this._doubleTapDrag.emit(r26, void 0, i22), t29.stopPropagation();
  }
  _dragEnd(t29) {
    if (!this._doubleTapDragActive) return;
    const { data: e29, modifiers: i22 } = t29, { center: a22 } = e29, r26 = d15("end", c6(a22.x - this._dragStartCenter.x, a22.y - this._dragStartCenter.y), e29);
    this._doubleTapDrag.emit(r26, void 0, i22), this._doubleTapDragActive = false, t29.stopPropagation();
  }
  _handlePointerDown(t29) {
    const { data: e29 } = t29, i22 = u12(e29), o31 = this._pointerState.get(i22), { pointerType: a22 } = e29.native;
    if (o31) {
      const r26 = "touch" === a22 ? this._maximumDoubleTouchDistance : this._maximumDoubleClickDistance;
      this._clearPointerDown(i22), n27(o31.event.data, e29) > r26 ? this._storePointerDown(t29) : this._doubleTapDragReady = true;
    } else this._storePointerDown(t29);
  }
  _handlePointerUp() {
    this._doubleTapDragReady = false;
  }
  _storePointerDown(t29) {
    const { data: e29 } = t29, { pointerType: i22 } = e29.native, o31 = u12(e29), a22 = "touch" === i22 ? this._maximumDoubleTouchDelay : this._maximumDoubleClickDelay, r26 = this._clock.setTimeout(() => this._clearPointerDown(o31), a22);
    this._pointerState.set(o31, { event: t29, doubleTapTimeout: r26 }), this.refreshHasPendingInputs();
  }
};
function d15(t29, e29, i22) {
  const { button: o31, buttons: a22, pointer: r26, pointers: n31, pointerType: s29, timestamp: u17 } = i22;
  return { action: t29, delta: e29, button: o31, buttons: a22, pointer: r26, pointers: n31, pointerType: s29, timestamp: u17 };
}

// ../node_modules/@arcgis/core/views/input/recognizers/Drag.js
var s24 = class extends t8 {
  constructor(t29) {
    super(false), this._navigationTouch = t29, this._startStateModifiers = /* @__PURE__ */ new Set(), this._activePointerMap = /* @__PURE__ */ new Map(), this._isDragging = false, this._isCurrentDragSuppressed = false, this._drag = this.registerOutgoing("drag"), this.registerIncoming("pointer-drag", this._handlePointerDrag.bind(this)), this.registerIncoming("pointer-up", this._handlePointerUpAndPointerLost.bind(this)), this.registerIncoming("pointer-capture-lost", this._handlePointerUpAndPointerLost.bind(this)), this.registerIncoming("pointer-cancel", this._handlePointerUpAndPointerLost.bind(this));
  }
  _createPayload(t29, e29, i22, n31) {
    return { action: t29, pointerType: this._pointerType, button: this._mouseButton, buttons: e29.buttons, timestamp: n31, pointers: o26(this._activePointerMap), pointer: e29, angle: i22.angle, radius: i22.radius, center: i22.center };
  }
  _addPointer(t29) {
    const e29 = t29.native.pointerId, i22 = a18(this._activePointerMap).angle, n31 = { event: t29, initialAngle: 0, lastAngle: 0 };
    this._activePointerMap.set(e29, n31);
    const s29 = h15(n31, r20(this._activePointerMap));
    n31.initialAngle = s29, n31.lastAngle = s29, this._updatePointerAngles(i22);
  }
  _updatePointer(t29) {
    if (t29 && null == t29.x && null == t29.y) return;
    const e29 = t29.native.pointerId, i22 = this._activePointerMap.get(e29);
    i22 ? i22.event = t29 : this._addPointer(t29);
  }
  _removePointer(t29) {
    const e29 = a18(this._activePointerMap).angle;
    this._activePointerMap.delete(t29), this._updatePointerAngles(e29);
  }
  _updatePointerAngles(t29) {
    const e29 = a18(this._activePointerMap);
    this._activePointerMap.forEach((i22) => {
      i22.initialAngle = h15(i22, e29) - t29, i22.lastAngle = h15(i22, e29) - t29;
    });
  }
  _emitEvent(t29, e29, i22) {
    const n31 = a18(this._activePointerMap);
    this._drag.emit(this._createPayload(t29, e29, n31, i22), void 0, this._startStateModifiers);
  }
  _handlePointerUpAndPointerLost(t29) {
    const i22 = t29.data.native.pointerId, n31 = n2(t29.timestamp);
    this._activePointerMap.get(i22) && (1 === this._activePointerMap.size ? (this._updatePointer(t29.data), !this._isCurrentDragSuppressed && this._emitEvent("end", t29.data, n31), this._isDragging = false, this._isCurrentDragSuppressed = false, this._removePointer(i22)) : (this._removePointer(i22), this._emitEvent("removed", t29.data, n2(t29.timestamp))));
  }
  _handlePointerDrag(t29) {
    const i22 = t29.data, n31 = i22.currentEvent, s29 = n2(t29.timestamp);
    switch (i22.action) {
      case "start":
      case "update":
        this._isDragging ? this._activePointerMap.has(n31.native.pointerId) ? (this._updatePointer(n31), !this._isCurrentDragSuppressed && this._emitEvent("update", n31, s29)) : (this._addPointer(n31), this._emitEvent("added", n31, s29), this._isCurrentDragSuppressed = this._isSuppressed) : (this._updatePointer(n31), this._pointerType = t29.data.startEvent.pointerType, this._mouseButton = t29.data.startEvent.button, this._startStateModifiers = t29.modifiers, this._isDragging = true, this._isCurrentDragSuppressed = this._isSuppressed, !this._isCurrentDragSuppressed && this._emitEvent("start", n31, s29));
    }
  }
  get _isSuppressed() {
    return !!this._navigationTouch && !this._navigationTouch.browserTouchPanEnabled && "touch" === this._pointerType && 1 === this._activePointerMap.size;
  }
};
function r20(e29) {
  const i22 = [];
  return e29.forEach((e30) => {
    i22.push(c6(e30.event.x, e30.event.y));
  }), o25(i22);
}
function a18(t29) {
  const e29 = r20(t29);
  let i22 = 0;
  return t29.forEach((t30) => {
    let n31 = h15(t30, e29), s29 = n31 - t30.lastAngle;
    for (; s29 > Math.PI; ) s29 -= 2 * Math.PI;
    for (; s29 < -Math.PI; ) s29 += 2 * Math.PI;
    n31 = t30.lastAngle + s29, t30.lastAngle = n31;
    const r26 = n31 - t30.initialAngle;
    i22 += r26;
  }), i22 /= t29.size || 1, { angle: i22, radius: e29.radius, center: e29.center };
}
function o26(t29) {
  const e29 = /* @__PURE__ */ new Map();
  return t29.forEach((t30, i22) => e29.set(i22, t30.event)), e29;
}
function h15(t29, e29) {
  const i22 = t29.event, n31 = i22.x - e29.center.x, s29 = i22.y - e29.center.y;
  return Math.atan2(s29, n31);
}
var p19;
!function(t29) {
  t29[t29.Left = 0] = "Left", t29[t29.Middle = 1] = "Middle", t29[t29.Right = 2] = "Right", t29[t29.Back = 3] = "Back", t29[t29.Forward = 4] = "Forward", t29[t29.Undefined = -1] = "Undefined";
}(p19 || (p19 = {}));

// ../node_modules/@arcgis/core/views/input/recognizers/ImmediateDoubleClick.js
var m18 = class extends t8 {
  constructor(e29 = t25.maximumDoubleClickDelay, o31 = t25.maximumDoubleClickDistance, a22 = t25.maximumDoubleTouchDelay, m24 = t25.maximumDoubleTouchDistance, n31 = o3) {
    super(false), this._maximumDoubleClickDelay = e29, this._maximumDoubleClickDistance = o31, this._maximumDoubleTouchDelay = a22, this._maximumDoubleTouchDistance = m24, this._clock = n31, this._pointerState = /* @__PURE__ */ new Map(), this._immediateDoubleClick = this.registerOutgoing("immediate-double-click"), this.registerIncoming("pointer-down", this._handlePointerDown.bind(this)), this.registerIncoming("pointer-up", this._handlePointerUp.bind(this));
  }
  onUninstall() {
    this._pointerState.forEach((t29) => {
      t29.immediateDoubleClick && t29.immediateDoubleClick.timeoutHandle.remove();
    }), super.onUninstall();
  }
  _handlePointerDown(t29) {
    const e29 = t29.data, i22 = u12(e29);
    if (!this._pointerState.has(i22)) {
      const t30 = { downButton: e29.native.button, x: e29.x, y: e29.y, immediateDoubleClick: null };
      this._pointerState.set(i22, t30), this.startCapturingPointer(e29.native);
    }
  }
  _handlePointerUp(t29) {
    const e29 = t29.data, i22 = u12(e29), m24 = this._pointerState.get(i22);
    if (m24 && m24.downButton === e29.native.button) {
      const i23 = m24.immediateDoubleClick, o31 = "touch" === t29.data.native.pointerType ? this._maximumDoubleTouchDistance : this._maximumDoubleClickDistance;
      i23 ? (i23.timeoutHandle.remove(), n27(i23, t29.data) > o31 ? this._startImmediateDoubleClick(t29, m24) : (this._immediateDoubleClick.emit(t29.data, void 0, i23.modifiers), this._removeState(e29))) : n27(m24, t29.data) > o31 ? this._removeState(e29) : this._startImmediateDoubleClick(t29, m24);
    }
  }
  _startImmediateDoubleClick(t29, e29) {
    const i22 = "touch" === t29.data.native.pointerType ? this._maximumDoubleTouchDelay : this._maximumDoubleClickDelay;
    e29.immediateDoubleClick = { x: t29.data.x, y: t29.data.y, modifiers: t29.modifiers, timeoutHandle: this._clock.setTimeout(() => this._removeState(t29.data), i22) };
  }
  _removeState(t29) {
    const e29 = u12(t29);
    this._pointerState.delete(e29), this.stopCapturingPointer(t29.native), this.refreshHasPendingInputs();
  }
};

// ../node_modules/@arcgis/core/views/input/recognizers/PointerClickHoldAndDrag.js
var r21 = class extends t8 {
  constructor(e29 = t25.maximumClickDelay, i22 = t25.movementUntilMouseDrag, o31 = t25.movementUntilPenDrag, r26 = t25.movementUntilTouchDrag, s29 = t25.holdDelay, a22 = o3) {
    super(false), this._maximumClickDelay = e29, this._movementUntilMouseDrag = i22, this._movementUntilPenDrag = o31, this._movementUntilTouchDrag = r26, this._holdDelay = s29, this._clock = a22, this._pointerState = /* @__PURE__ */ new Map(), this._pointerDrag = this.registerOutgoing("pointer-drag"), this._immediateClick = this.registerOutgoing("immediate-click"), this._pointerHold = this.registerOutgoing("hold"), this.registerIncoming("pointer-down", this._handlePointerDown.bind(this)), this.registerIncoming("pointer-up", (t29) => {
      this._handlePointerLoss(t29, "pointer-up");
    }), this.registerIncoming("pointer-capture-lost", (t29) => {
      this._handlePointerLoss(t29, "pointer-capture-lost");
    }), this.registerIncoming("pointer-cancel", (t29) => {
      this._handlePointerLoss(t29, "pointer-cancel");
    }), this._moveHandle = this.registerIncoming("pointer-move", this._handlePointerMove.bind(this)), this._moveHandle.pause();
  }
  onUninstall() {
    this._pointerState.forEach((t29) => {
      t29.holdTimeout = l(t29.holdTimeout);
    }), super.onUninstall();
  }
  _handlePointerDown(t29) {
    const e29 = t29.data, i22 = e29.native.pointerId;
    let n31 = null;
    0 === this._pointerState.size && (n31 = this._clock.setTimeout(() => {
      const e30 = this._pointerState.get(i22);
      if (e30) {
        if (!e30.isDragging) {
          const i23 = e30.previousEvent;
          this._pointerHold.emit(i23, void 0, t29.modifiers), e30.holdEmitted = true;
        }
        e30.holdTimeout = null;
      }
    }, this._holdDelay));
    const o31 = { startEvent: e29, previousEvent: e29, startTimestamp: t29.timestamp, isDragging: false, downButton: e29.native.button, holdTimeout: n31, modifiers: /* @__PURE__ */ new Set() };
    this._pointerState.set(i22, o31), this.startCapturingPointer(e29.native), this._moveHandle.resume(), this._pointerState.size > 1 && this._startDragging(t29);
  }
  _handlePointerMove(t29) {
    const e29 = t29.data, i22 = e29.native.pointerId, n31 = this._pointerState.get(i22);
    if (n31) {
      if (n31.isDragging) this._pointerDrag.emit(s25("update", n31, e29), void 0, n31.modifiers);
      else {
        r19(e29, n31.startEvent) > this._getDragThreshold(e29.native.pointerType) && this._startDragging(t29);
      }
      n31.previousEvent = e29;
    }
  }
  _getDragThreshold(t29) {
    switch (t29) {
      case "touch":
        return this._movementUntilTouchDrag;
      case "pen":
        return this._movementUntilPenDrag;
      default:
        return this._movementUntilMouseDrag;
    }
  }
  _startDragging(t29) {
    const e29 = t29.data, i22 = e29.native.pointerId;
    this._pointerState.forEach((n31) => {
      null != n31.holdTimeout && (n31.holdTimeout.remove(), n31.holdTimeout = null), n31.isDragging || (n31.modifiers = t29.modifiers, n31.isDragging = true, i22 === n31.startEvent.native.pointerId ? this._pointerDrag.emit(s25("start", n31, e29)) : this._pointerDrag.emit(s25("start", n31, n31.previousEvent), t29.timestamp));
    });
  }
  _handlePointerLoss(t29, e29) {
    const i22 = t29.data, n31 = i22.native.pointerId, o31 = this._pointerState.get(n31);
    if (o31) {
      if (null != o31.holdTimeout && (o31.holdTimeout.remove(), o31.holdTimeout = null), o31.isDragging) this._pointerDrag.emit(s25("end", o31, "pointer-up" === e29 ? i22 : o31.previousEvent), void 0, o31.modifiers);
      else if ("pointer-up" === e29 && o31.downButton === i22.native.button) {
        t29.timestamp - o31.startTimestamp <= this._maximumClickDelay && !o31.holdEmitted && this._immediateClick.emit(i22);
      }
      this._pointerState.delete(n31), this.stopCapturingPointer(i22.native), 0 === this._pointerState.size && this._moveHandle.pause();
    }
  }
};
function s25(t29, e29, i22) {
  return { action: t29, startEvent: e29.startEvent, previousEvent: e29.previousEvent, currentEvent: i22 };
}

// ../node_modules/@arcgis/core/views/input/recognizers/SingleAndDoubleClick.js
var r22 = class extends t8 {
  constructor(t29 = t25.maximumDoubleClickDelay, i22 = t25.maximumDoubleClickDistance, o31 = t25.maximumDoubleTouchDelay, s29 = t25.maximumDoubleTouchDistance, l18 = o3) {
    super(false), this._maximumDoubleClickDelay = t29, this._maximumDoubleClickDistance = i22, this._maximumDoubleTouchDelay = o31, this._maximumDoubleTouchDistance = s29, this._clock = l18, this._pointerState = /* @__PURE__ */ new Map(), this._click = this.registerOutgoing("click"), this._doubleClick = this.registerOutgoing("double-click"), this.registerIncoming("immediate-click", this._handleImmediateClick.bind(this)), this.registerIncoming("pointer-down", this._handlePointerDown.bind(this));
  }
  onUninstall() {
    this._pointerState.forEach((e29) => e29.doubleClickTimer = l(e29.doubleClickTimer));
  }
  get hasPendingInputs() {
    return n3(this._pointerState, (e29) => null != e29.doubleClickTimer);
  }
  _clearDoubleClickTimer(e29, t29) {
    const o31 = this._pointerState.get(e29);
    o31 && (o31.doubleClickTimer = l(o31.doubleClickTimer), t29 && this._click.emit(o31.event.data, void 0, o31.event.modifiers), this._pointerState.delete(e29), this.refreshHasPendingInputs());
  }
  _doubleClickTimeoutExceeded(e29) {
    const t29 = this._pointerState.get(e29);
    1 === t29.pointerDownCount && this._click.emit(t29.event.data, void 0, t29.event.modifiers), t29.doubleClickTimer = null, this._pointerState.delete(e29), this.refreshHasPendingInputs();
  }
  _handleImmediateClick(e29) {
    const t29 = e29.data, { pointerType: i22 } = t29.native, o31 = c17(t29);
    if (!this._pointerState.has(o31)) return void this._startClick(e29);
    const n31 = this._pointerState.get(o31), { data: l18, modifiers: r26 } = n31.event, a22 = "touch" === i22 ? this._maximumDoubleTouchDistance : this._maximumDoubleClickDistance;
    n27(l18, t29) > a22 ? (this._clearDoubleClickTimer(o31, true), this._startClick(e29)) : (this._clearDoubleClickTimer(o31, false), 2 === n31.pointerDownCount && this._doubleClick.emit(l18, void 0, r26));
  }
  _handlePointerDown(e29) {
    const t29 = u12(e29.data), i22 = this._pointerState.get(t29);
    i22 && (i22.pointerDownCount += 1);
  }
  _startClick(e29) {
    const { data: t29 } = e29, { native: { pointerType: i22 } } = t29, o31 = u12(t29), n31 = "touch" === i22 ? this._maximumDoubleTouchDelay : this._maximumDoubleClickDelay, s29 = this._clock.setTimeout(() => this._doubleClickTimeoutExceeded(o31), n31), r26 = 1;
    this._pointerState.set(o31, { event: e29, doubleClickTimer: s29, pointerDownCount: r26 }), this.refreshHasPendingInputs();
  }
};
function c17(e29) {
  const { pointerId: t29, pointerType: i22, button: o31 } = e29.native;
  return "mouse" === i22 ? `${t29}:${o31}` : `${i22}`;
}

// ../node_modules/@arcgis/core/views/2d/input/MapViewInputManager.js
var T3 = { counter: "Control", pan: { left: "ArrowLeft", right: "ArrowRight", up: "ArrowUp", down: "ArrowDown" }, zoom: { zoomIn: ["=", "+"], zoomOut: ["-", "_"] }, rotate: { clockwiseOption1: "a", clockwiseOption2: "A", counterClockwiseOption1: "d", counterClockwiseOption2: "D", resetOption1: "n", resetOption2: "N" } };
var z4 = class extends S2 {
  initialize() {
    const e29 = () => {
      var _a;
      return (_a = this.view) == null ? void 0 : _a.ready;
    };
    this.addHandles([p(() => !e29(), () => this._disconnect()), p(e29, () => this._connect())]);
  }
  destroy() {
    this._disconnect();
  }
  get latestPointerType() {
    var _a;
    return (_a = this._inputManager) == null ? void 0 : _a.latestPointerType;
  }
  get latestPointerLocation() {
    var _a;
    return (_a = this._inputManager) == null ? void 0 : _a.latestPointerLocation;
  }
  get multiTouchActive() {
    var _a;
    return ((_a = this._inputManager) == null ? void 0 : _a.multiTouchActive) ?? false;
  }
  isModifierKeyDown(e29) {
    var _a;
    return ((_a = this._inputManager) == null ? void 0 : _a.isModifierKeyDown(e29)) ?? false;
  }
  _disconnect() {
    this.view.viewEvents.disconnect(), this._inputManager = u(this._inputManager);
  }
  _connect() {
    const e29 = this.view.surface, t29 = new l15(e29, this.view.input), o31 = [new m18(), new r21(), new r22(), new s24(this.view.navigation), new p18()], i22 = new d7({ eventSource: t29, recognizers: o31 });
    i22.installHandlers("prevent-context-menu", [new e24()], _4.INTERNAL), i22.installHandlers("navigation", [new a15(this.view), new d13(this.view), new o22(this.view), new a13(this.view), new a13(this.view, [T3.counter]), new n24(this.view, "primary"), new e21(this.view, T3.pan), new e22(this.view, T3.zoom), new t21(this.view, T3.rotate), new o21(this.view, "secondary"), new e20(this.view, "touch")], _4.INTERNAL), this.view.viewEvents.connect(i22), this._source = t29, this._inputManager = i22, d3(() => {
      var _a, _b;
      return (_b = (_a = this.view) == null ? void 0 : _a.navigation) == null ? void 0 : _b.browserTouchPanEnabled;
    }, (e30) => {
      this._source && (this._source.browserTouchPanningEnabled = !e30);
    }, P);
  }
  get test() {
  }
};
e([y()], z4.prototype, "view", void 0), e([y()], z4.prototype, "latestPointerType", null), e([y()], z4.prototype, "latestPointerLocation", null), e([y()], z4.prototype, "multiTouchActive", null), z4 = e([a2("esri.views.2d.input.MapViewInputManager")], z4);
var k3 = z4;

// ../node_modules/@arcgis/core/views/2d/layers/features/support/TileStore.js
var d16 = { added: [], removed: [] };
var a19 = /* @__PURE__ */ new Set();
var c18 = new e10(0, 0, 0, 0);
function m19(e29, t29) {
  const s29 = s5(t29);
  if (!s29) return null;
  const [i22, r26] = s29.valid;
  return e29[2] > r26 ? [u4([e29[0], e29[1], r26, e29[3]]), u4([i22, e29[1], i22 + e29[2] - r26, e29[3]])] : e29[0] < i22 ? [u4([i22, e29[1], e29[2], e29[3]]), u4([r26 - (i22 - e29[0]), e29[1], r26, e29[3]])] : null;
}
var u13 = class extends o5 {
  constructor(e29) {
    super(), this._tiles = /* @__PURE__ */ new Map(), this._index = i7(9, has("esri-csp-restrictions") ? (e30) => ({ minX: e30.bounds[0], minY: e30.bounds[1], maxX: e30.bounds[2], maxY: e30.bounds[3] }) : [".bounds[0]", ".bounds[1]", ".bounds[2]", ".bounds[3]"]), this.tiles = [], this.tileScheme = e29;
  }
  destroy() {
    this.clear();
  }
  clear() {
    this.tiles.length = 0, this._tiles.clear(), this._index.clear();
  }
  has(e29) {
    return this._tiles.has(e29);
  }
  get(e29) {
    return this._tiles.get(e29);
  }
  getIntersectingTiles(e29) {
    if (!e29 || 0 === M2(e29) || 0 === s7(e29)) return [];
    const t29 = m19(e29, this.tileScheme.spatialReference);
    return null != t29 ? [.../* @__PURE__ */ new Set([...this.boundsIntersections(t29[0]), ...this.boundsIntersections(t29[1])])] : this.boundsIntersections(e29);
  }
  boundsIntersections(e29) {
    return this._index.search({ minX: e29[0], minY: e29[1], maxX: e29[2], maxY: e29[3] });
  }
  updateTiles(e29) {
    const t29 = { added: [], removed: [] };
    for (const s29 of e29.added) if (!this.has(s29)) {
      const e30 = new n11(this.tileScheme, s29);
      this._tiles.set(s29, e30), this._index.insert(e30), t29.added.push(e30);
    }
    for (const s29 of e29.removed) if (this.has(s29)) {
      const e30 = this.get(s29);
      this._tiles.delete(s29), this._index.remove(e30), t29.removed.push(e30);
    }
    this.tiles.length = 0, this._tiles.forEach((e30) => this.tiles.push(e30)), (t29.added.length || t29.removed.length) && this.emit("update", t29);
  }
  setViewState(e29) {
    const t29 = this.tileScheme.getTileCoverage(e29, 0);
    if (!t29) return;
    const { spans: s29, lodInfo: i22 } = t29, { level: o31 } = i22;
    if (s29.length > 0) for (const { row: n31, colFrom: l18, colTo: h19 } of s29) for (let e30 = l18; e30 <= h19; e30++) {
      const t30 = c18.set(o31, n31, i22.normalizeCol(e30), i22.getWorldForColumn(e30)).id;
      if (a19.add(t30), !this.has(t30)) {
        const e31 = new n11(this.tileScheme, t30);
        this._tiles.set(t30, e31), this._index.insert(e31), this.tiles.push(e31), d16.added.push(e31);
      }
    }
    for (let n31 = this.tiles.length - 1; n31 >= 0; n31--) {
      const e30 = this.tiles[n31];
      a19.has(e30.id) || (this._tiles.delete(e30.id), this.tiles.splice(n31, 1), this._index.remove(e30), d16.removed.push(e30));
    }
    (d16.added.length || d16.removed.length) && this.emit("update", d16), s8.pool.release(t29), a19.clear(), d16.added.length = 0, d16.removed.length = 0;
  }
};

// ../node_modules/@arcgis/core/views/2d/support/hitTestUtils.js
async function s26(e29, i22, s29) {
  const f19 = o15(i22) ? r12(e29, i22) : i22;
  if (!e29.ready || isNaN(f19.x) || isNaN(f19.y)) return { screenPoint: f19, results: [] };
  let d21 = /* @__PURE__ */ new Set();
  const y11 = /* @__PURE__ */ new Set();
  let u17 = false, h19 = null, g16 = null;
  (s29 == null ? void 0 : s29.include) ? o27(s29.include, n28(e29, (e30) => {
    d21.add(e30), p20(e30, (e31) => y11.add(e31));
  }, (e30, r26) => {
    y11.add(e30), d21.add(r26);
  }, (e30) => {
    h19 || (h19 = /* @__PURE__ */ new Set()), h19.add(e30);
  }, (e30) => d21.add(e30), () => u17 = true)) : (u17 = true, d21 = new Set(e29.allLayerViews), d21.forEach((e30) => {
    p20(e30, (e31) => y11.add(e31));
  })), (s29 == null ? void 0 : s29.exclude) && o27(s29.exclude, n28(e29, (e30) => {
    d21.delete(e30), p20(e30, (e31) => y11.delete(e31));
  }, (e30) => y11.delete(e30), (e30) => {
    g16 || (g16 = /* @__PURE__ */ new Set()), g16.add(e30);
  }));
  const m24 = e29.toMap(f19), w9 = e29.allLayerViews.filter((r26) => !r26.suspended && d21.has(r26) && r26.clips.every((r27) => m8(e29, r27, f19, m24))).reverse();
  let V4 = [...u17 ? e29.graphicsView.hitTest(m24).map((e30) => ({ type: "graphic", graphic: e30, layer: null, mapPoint: m24 })) : [], ...await Promise.all(w9.map((e30) => e30.hitTest(m24, f19)).toArray())].filter(O).flat().filter(O);
  return V4 = V4.filter((e30) => {
    var _a;
    return "graphic" !== e30.type || "subtype-group" !== ((_a = e30.layer) == null ? void 0 : _a.type) || y11.has(e30.graphic.layer);
  }), h19 && (V4 = V4.filter((e30) => !("graphic" in e30) || !e30.graphic || (h19 == null ? void 0 : h19.has(c19(e30.graphic))))), g16 && (V4 = V4.filter((e30) => !("graphic" in e30) || !e30.graphic || !(g16 == null ? void 0 : g16.has(c19(e30.graphic))))), { screenPoint: f19, results: V4 };
}
function n28(r26, i22, t29, a22, l18, s29) {
  return (n31) => {
    if (n31 instanceof d6) {
      if (n31.layer === r26) s29 == null ? void 0 : s29();
      else {
        const e29 = r26.allLayerViews.find((e30) => e30.layer === n31.layer);
        e29 && (l18 == null ? void 0 : l18(e29));
      }
      a22(c19(n31));
    } else if ("layer" in n31 && "element" in n31) ;
    else if ("subtype-sublayer" === n31.type) {
      const e29 = r26.allLayerViews.find((e30) => e30.layer === n31.parent);
      e29 && t29(n31, e29);
    } else {
      const e29 = r26.allLayerViews.find((e30) => e30.layer === n31);
      e29 && i22(e29);
    }
  };
}
function o27(e29, r26) {
  if (e29) if (t(e29)) for (const t29 of e29) if (t(t29)) for (const e30 of t29) r26(e30);
  else r26(t29);
  else r26(e29);
}
function c19(e29) {
  var _a, _b;
  const r26 = e29.getObjectId();
  return r26 ? `${((_a = e29.layer) == null ? void 0 : _a.uid) ?? ((_b = e29.sourceLayer) == null ? void 0 : _b.uid) ?? "MapView"}/${r26}` : `"MapView/${e29.uid}`;
}
function p20({ layer: e29 }, r26) {
  "subtype-group" === (e29 == null ? void 0 : e29.type) && e29.sublayers.forEach((e30) => {
    r26(e30);
  });
}

// ../node_modules/@arcgis/core/views/2d/support/screenshotUtils.js
var e25 = { flipY: true, premultipliedAlpha: true };
async function o28(h19, n31) {
  const o31 = await a20(h19, n31), { format: r26, quality: l18 } = c8(n31 == null ? void 0 : n31.format, n31 == null ? void 0 : n31.quality);
  return a3(o31, { format: r26, quality: l18, rotation: 0, disableDecorations: false }, e25);
}
async function r23(t29, i22) {
  const n31 = await a20(t29, i22);
  return r10(n31, e25);
}
function a20(t29, i22) {
  const h19 = d17(i22 || {}, u14(t29.stage, t29.size), t29.size, t29.padding), n31 = l16(i22, t29.allLayerViews);
  return t29.stage.takeScreenshot(h19, n31, t29.backgroundColor, i22 == null ? void 0 : i22.rotation);
}
function l16(t29 = {}, i22) {
  if (!t29.layers) return;
  const h19 = [];
  return t29.layers.forEach((t30) => {
    const n31 = i22.find((i23) => i23.layer.id === t30.id);
    (n31 == null ? void 0 : n31.container) && h19.push(n31.container);
  }), h19;
}
function u14(t29, i22) {
  return Math.min(4, s11(i22, Math.min(4096, t29.context.parameters.maxTextureSize)));
}
function d17(t29, i22, h19, n31) {
  t29.ignorePadding && (n31 = { left: 0, right: 0, top: 0, bottom: 0 });
  let e29 = null;
  null != t29.width && null != t29.height ? e29 = [t29.width, t29.height] : null == t29.width && null != t29.height ? e29 = [t29.height, t29.height] : null != t29.width && null == t29.height ? e29 = [t29.width, t29.width] : null == t29.width && null == t29.height && (e29 = null);
  const o31 = h19[0] - (n31.left + n31.right), r26 = h19[1] - (n31.top + n31.bottom);
  let a22, l18, u17 = t29.area || { x: 0, y: 0, width: o31, height: r26 };
  if (e29) {
    const t30 = o31 / r26, i23 = e29[0] / e29[1];
    if (i23 > t30) {
      const t31 = u17.width / i23;
      u17 = { x: u17.x, y: Math.round(u17.y + (u17.height - t31) / 2), width: u17.width, height: Math.round(t31) };
    } else {
      const t31 = u17.height * i23;
      u17 = { x: Math.round(u17.x + (u17.width - t31) / 2), y: u17.y, width: Math.round(t31), height: u17.height };
    }
  } else e29 = [u17.width, u17.height];
  return e29[0] > u17.width ? (a22 = Math.min(e29[0] / u17.width, i22), l18 = e29[0] / u17.width / a22) : (a22 = 1, l18 = e29[0] / u17.width), { cropArea: { x: Math.round((u17.x + n31.left) * a22), y: Math.round((u17.y + n31.top) * a22), width: Math.round(u17.width * a22), height: Math.round(u17.height * a22) }, outputScale: l18, resolutionScale: a22 };
}

// ../node_modules/@arcgis/core/views/2d/support/StationaryManager.js
var e26 = 160;
var i21 = class extends S2 {
  constructor() {
    super(...arguments), this._timer = void 0;
  }
  get stationary() {
    return !this._timer;
  }
  flip() {
    this._timestamp = performance.now(), null == this._timer && (this._timer = setInterval(() => {
      performance.now() - this._timestamp >= e26 && this.clear();
    }, e26));
  }
  clear() {
    this._timer && (clearInterval(this._timer), this._timer = void 0);
  }
};
e([y()], i21.prototype, "_timer", void 0), e([y()], i21.prototype, "stationary", null), i21 = e([a2("esri.views.2d.support.StationaryManager")], i21);

// ../node_modules/@arcgis/core/views/support/WebGLRequirements.js
function t26(t29) {
  const o31 = t7();
  return o31.available ? "3d" === t29 && o31.majorPerformanceCaveat ? new s("webgl:major-performance-caveat-detected", "Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.") : o31.supportsHighPrecisionFragment ? o31.supportsVertexShaderSamplers ? null : new s("webgl:vertex-shader-samplers-required", "WebGL support for vertex shader samplers is required but not supported.") : new s("webgl:high-precision-fragment-required", "WebGL support for high precision fragment shaders is required but not supported.") : new s("webgl:required", "WebGL2 is required but not supported.", new Error().stack);
}

// ../node_modules/@arcgis/core/views/ui/Component.js
function n29(t29) {
  return t29 && "nodeType" in t29;
}
function d18(t29) {
  return t29 && "function" == typeof t29.render;
}
var c20 = { component: "esri-component" };
var p21 = class extends S2 {
  constructor() {
    super(...arguments), this.widget = null;
  }
  destroy() {
    var _a;
    this.node = null, (_a = this.widget) == null ? void 0 : _a.destroy();
  }
  get id() {
    var _a, _b;
    return this._get("id") ?? ((_a = this.widget) == null ? void 0 : _a.id) ?? ((_b = this.node) == null ? void 0 : _b.id);
  }
  set id(t29) {
    this._set("id", t29);
  }
  set node(t29) {
    const o31 = this._get("node");
    t29 !== o31 && (t29 && t29.classList.add(c20.component), o31 && o31.classList.remove(c20.component), this._set("node", t29));
  }
  castNode(t29) {
    var _a;
    return (_a = this.widget) == null ? void 0 : _a.destroy(), t29 ? "string" == typeof t29 || n29(t29) ? (this._set("widget", null), e4(t29)) : (d18(t29) && !t29.domNode && (t29.domNode = document.createElement("div")), this._set("widget", t29), t29.domNode) : (this._set("widget", null), null);
  }
};
e([y()], p21.prototype, "id", null), e([y()], p21.prototype, "node", null), e([s4("node")], p21.prototype, "castNode", null), e([y({ readOnly: true })], p21.prototype, "widget", void 0), p21 = e([a2("esri.views.ui.Component")], p21);
var m20 = p21;

// ../node_modules/@arcgis/core/views/ui/UI.js
var g13 = { left: 0, top: 0, bottom: 0, right: 0 };
var y9 = { bottom: 30, top: 15, right: 15, left: 15 };
var C6 = "esri-ui";
var v10 = { ui: C6, corner: `${C6}-corner`, innerContainer: `${C6}-inner-container`, manualContainer: `${C6}-manual-container`, cornerContainer: `${C6}-corner-container`, topLeft: `${C6}-top-left`, topRight: `${C6}-top-right`, bottomLeft: `${C6}-bottom-left`, bottomRight: `${C6}-bottom-right` };
function b5(t29) {
  return t29 && !t29._started && "function" == typeof t29.postMixInProperties && "function" == typeof t29.buildRendering && "function" == typeof t29.postCreate && "function" == typeof t29.startup;
}
function w8(t29) {
  return 0 === t29 ? "0" : `${t29}px`;
}
function P5(t29) {
  const o31 = "object" == typeof t29 && null !== t29 && Object.getPrototypeOf(t29);
  return (null === o31 || o31 === Object.prototype) && ("component" in t29 || "index" in t29 || "position" in t29) ? t29 : null;
}
function L5(t29, { top: o31, bottom: e29, left: n31, right: i22 }) {
  t29.style.top = o31, t29.style.bottom = e29, t29.style.left = n31, t29.style.right = i22;
}
var j5 = class extends o5.EventedAccessor {
  constructor(t29) {
    super(t29), this._cornerNameToContainerLookup = {}, this._positionNameToContainerLookup = {}, this._components = new Array(), this._componentMap = /* @__PURE__ */ new Map(), this._removeWidgetHandleKey = Symbol("componentOnRemoveSymbol"), this._locale = c3(), this.view = null, this._applyViewPadding = () => {
      const t30 = this.container;
      t30 && L5(t30, this._toPixelPosition(this._getViewPadding()));
    }, this._applyUIPadding = () => {
      const t30 = this._innerContainer;
      t30 && L5(t30, this._toPixelPosition(this.padding));
    }, this._initContainers();
  }
  initialize() {
    this.addHandles([d3(() => {
      var _a;
      return [(_a = this.view) == null ? void 0 : _a.padding, this.container];
    }, this._applyViewPadding, P), d3(() => this.padding, this._applyUIPadding, P), d3(() => [this.container, this._locale], ([t29, o31]) => {
      t29 && t29.setAttribute("lang", o31);
    }, P), f2((t29) => {
      this._locale = t29;
    })]);
  }
  destroy() {
    this.container = null;
    for (const t29 of this._components) t29.destroy();
    this._components.length = 0, this._componentMap.clear();
  }
  set container(t29) {
    const o31 = this._get("container");
    t29 !== o31 && (t29 && (t29.classList.add(v10.ui), n7(t29), this._attachContainers(t29)), o31 && (o31.classList.remove(v10.ui), L5(o31, { top: "", bottom: "", left: "", right: "" }), n4(o31)), this._set("container", t29));
  }
  get height() {
    var _a;
    const t29 = ((_a = this.view) == null ? void 0 : _a.height) ?? 0;
    if (0 === t29) return t29;
    const o31 = this._getViewPadding(), { top: e29, bottom: n31 } = o31;
    return Math.max(t29 - e29 - n31, 0);
  }
  get padding() {
    return this._get("padding");
  }
  set padding(t29) {
    this._overrideIfSome("padding", t29);
  }
  castPadding(t29) {
    return "number" == typeof t29 ? { bottom: t29, top: t29, right: t29, left: t29 } : { ...y9, ...t29 };
  }
  get width() {
    var _a;
    const t29 = ((_a = this.view) == null ? void 0 : _a.width) ?? 0;
    if (0 === t29) return t29;
    const o31 = this._getViewPadding(), { left: e29, right: n31 } = o31;
    return Math.max(t29 - e29 - n31, 0);
  }
  add(t29, o31) {
    let e29, n31, i22;
    if (Array.isArray(t29)) return void t29.forEach((t30) => this.add(t30, o31));
    const r26 = P5(t29);
    r26 && ({ index: e29, position: o31, component: t29, key: n31 } = r26), o31 && "object" == typeof o31 && ({ index: e29, key: n31, position: o31, internal: i22 } = o31), !t29 || o31 && !this._isValidPosition(o31) || this._add(t29, o31, e29, n31, i22);
  }
  remove(t29, o31) {
    var _a, _b;
    if (!t29) return;
    if (Array.isArray(t29)) return t29.map((t30) => this.remove(t30, o31));
    const e29 = this._find(t29);
    if (e29) {
      if (this._componentMap.has(e29) && ((_a = this._componentMap.get(e29)) == null ? void 0 : _a.key) !== o31) return;
      const t30 = this._components.indexOf(e29), n31 = e29.node.parentNode;
      return n31 == null ? void 0 : n31.removeChild(e29.node), this._componentMap.delete(e29), (_b = e29.widget) == null ? void 0 : _b.removeHandlesReference(this._removeWidgetHandleKey), this._components.splice(t30, 1)[0];
    }
  }
  empty(t29, o31 = { removeInternal: false }) {
    if (Array.isArray(t29)) {
      for (const e30 of t29) this.empty(e30, o31);
      return;
    }
    const e29 = this._positionNameToContainerLookup[t29 ?? "manual"], n31 = Array.prototype.slice.call(e29.children).map((t30) => this._findByNode(t30)).filter((t30) => {
      var _a;
      if (null == t30) return false;
      return !(((_a = this._componentMap.get(t30)) == null ? void 0 : _a.internal) ?? false) || o31.removeInternal;
    });
    for (const i22 of n31) this.remove(i22);
  }
  move(t29, o31) {
    if (Array.isArray(t29) && t29.forEach((t30) => this.move(t30, o31)), !t29) return;
    let e29;
    const n31 = P5(t29) || P5(o31);
    if (n31 && (e29 = n31.index, o31 = n31.position, t29 = n31.component || t29), o31 && !this._isValidPosition(o31)) return;
    const i22 = this.remove(t29);
    i22 && this.add(i22, { position: o31, index: e29 });
  }
  find(t29) {
    if (!t29) return null;
    const o31 = this._findById(t29);
    return o31 && (o31.widget || o31.node);
  }
  getComponents(t29, o31 = { includeInternal: false }) {
    return t29 ? Array.isArray(t29) ? t29.flatMap((t30) => this._getComponentsAtPosition(t30, o31)) : this._getComponentsAtPosition(t29, o31) : this._components.filter((t30) => {
      var _a;
      return o31.includeInternal || !((_a = this._componentMap.get(t30)) == null ? void 0 : _a.internal);
    }).map(({ widget: t30, node: o32 }) => t30 ?? o32);
  }
  getPosition(t29) {
    for (const o31 in this._positionNameToContainerLookup) {
      if (this._positionNameToContainerLookup[o31].contains(t29)) return o31;
    }
    return null;
  }
  _add(t29, e29, n31, i22, r26) {
    t29 instanceof m20 || (t29 = new m20({ node: t29 }));
    const { widget: a22 } = t29;
    null != a22 && a22 instanceof S2 && a22.addHandles(e3(() => {
      queueMicrotask(() => this.remove(t29));
    }), this._removeWidgetHandleKey), this._place({ component: t29, position: e29, index: n31 }), this._components.push(t29), this._componentMap.set(t29, { key: i22, internal: r26 });
  }
  _find(t29) {
    return t29 ? t29 instanceof m20 ? this._findByComponent(t29) : "string" == typeof t29 ? this._findById(t29) : this._findByNode(t29.domNode || t29) : null;
  }
  _getViewPadding() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.padding) ?? g13;
  }
  _attachContainers(t29) {
    t29.appendChild(this._innerContainer), t29.appendChild(this._manualContainer);
  }
  _initContainers() {
    const t29 = document.createElement("div");
    t29.classList.add(v10.innerContainer, v10.cornerContainer);
    const o31 = document.createElement("div");
    o31.classList.add(v10.innerContainer, v10.manualContainer);
    const e29 = document.createElement("div");
    e29.classList.add(v10.topLeft, v10.corner), t29.appendChild(e29);
    const n31 = document.createElement("div");
    n31.classList.add(v10.topRight, v10.corner), t29.appendChild(n31);
    const i22 = document.createElement("div");
    i22.classList.add(v10.bottomLeft, v10.corner), t29.appendChild(i22);
    const r26 = document.createElement("div");
    r26.classList.add(v10.bottomRight, v10.corner), t29.appendChild(r26), this._innerContainer = t29, this._manualContainer = o31;
    const s29 = g4();
    this._cornerNameToContainerLookup = { "top-left": e29, "top-right": n31, "bottom-left": i22, "bottom-right": r26, "top-leading": s29 ? n31 : e29, "top-trailing": s29 ? e29 : n31, "bottom-leading": s29 ? r26 : i22, "bottom-trailing": s29 ? i22 : r26 }, this._positionNameToContainerLookup = { manual: o31, ...this._cornerNameToContainerLookup };
  }
  _isValidPosition(t29) {
    return !!this._positionNameToContainerLookup[t29];
  }
  _place(t29) {
    const o31 = t29.position ?? "manual", { component: e29, index: n31 } = t29, r26 = this._positionNameToContainerLookup[o31], s29 = null != n31 && n31 > -1;
    if (b5(e29.widget) && e29.widget.startup(), !s29) return void r26.appendChild(e29.node);
    const a22 = Array.from(r26.children);
    if (0 === n31) return void (r26.firstChild ? o7(e29.node, r26.firstChild) : r26.appendChild(e29.node));
    n31 >= a22.length ? r26.appendChild(e29.node) : o7(e29.node, a22[n31]);
  }
  _toPixelPosition(t29) {
    return { top: w8(t29.top), left: w8(t29.left), right: w8(t29.right), bottom: w8(t29.bottom) };
  }
  _findByComponent(t29) {
    return this._components.find((o31) => o31 === t29) ?? null;
  }
  _findById(t29) {
    return this._components.find(({ id: o31 }) => o31 === t29) ?? null;
  }
  _findByNode(t29) {
    return this._components.find(({ node: o31 }) => o31 === t29) ?? null;
  }
  _getComponentsAtPosition(t29, o31) {
    const n31 = this._positionNameToContainerLookup[t29];
    return Array.prototype.slice.call(n31.children).map((t30) => this._findByNode(t30)).filter(O).filter((t30) => {
      var _a;
      return o31.includeInternal || !((_a = this._componentMap.get(t30)) == null ? void 0 : _a.internal);
    }).map(({ widget: t30, node: o32 }) => t30 ?? o32);
  }
};
e([y()], j5.prototype, "_locale", void 0), e([y()], j5.prototype, "container", null), e([y()], j5.prototype, "height", null), e([y({ value: y9 })], j5.prototype, "padding", null), e([s4("padding")], j5.prototype, "castPadding", null), e([y()], j5.prototype, "view", void 0), e([y()], j5.prototype, "width", null), j5 = e([a2("esri.views.ui.UI")], j5);
var A5 = j5;

// ../node_modules/@arcgis/core/views/3d/layers/Lyr3DWasm.js
var t27 = /* @__PURE__ */ new Map();
function l17(e29) {
  return t27.get(e29);
}

// ../node_modules/@arcgis/core/widgets/Attribution/AttributionViewModel.js
function f18(t29, e29) {
  return t29 && "copyright" in t29 && (!e29 || "function" == typeof t29.originOf && "user" === t29.originOf("copyright"));
}
function y10(t29, e29) {
  return t29.length !== e29.length || t29.some((t30, i22) => t30.text !== e29[i22].text);
}
function b6(t29, e29, i22) {
  if (!i22 || !e29) return;
  t29.find((t30) => t30.layerView === e29 && t30.text === i22) || t29.push({ text: i22, layerView: e29 });
}
function g14(t29) {
  return "bing-maps" === t29.type;
}
var A6 = [];
var _10 = class extends S2 {
  constructor(t29) {
    super(t29), this._clear = () => {
      this._fetchedAttributionData.clear(), this._pendingAttributions.clear(), this.removeHandles("suspension"), this.notifyChange("state");
    }, this._pendingAttributions = /* @__PURE__ */ new Set(), this._fetchedAttributionData = /* @__PURE__ */ new Map(), this.items = new V(), this.view = null, this._allLayerViewsChange = (t30) => {
      var _a;
      this.removeHandles("suspension"), this.removeHandles("visible-geometry-changed");
      const e29 = (_a = this.view) == null ? void 0 : _a.allLayerViews;
      e29 && (this.addHandles(e29.map((t31) => d3(() => {
        var _a2;
        return [t31.suspended, (_a2 = t31.layer) == null ? void 0 : _a2.attributionVisible];
      }, () => this._updateAttributionItems())).toArray(), "suspension"), e29.forEach((t31) => {
        "esri.views.3d.layers.Tiles3DLayerView3D" === t31.declaredClass && this.addHandles(t31.on("visible-geometry-changed", () => this._updateAttributionItems()), "visible-geometry-changed");
      })), (t30 == null ? void 0 : t30.removed) && t30.removed.forEach((t31) => {
        this._pendingAttributions.delete(t31), this._fetchedAttributionData.delete(t31);
      }), this._updateAttributionItems();
    }, this.addHandles([v2(() => {
      var _a;
      return (_a = this.view) == null ? void 0 : _a.allLayerViews;
    }, "change", (t30) => this._allLayerViewsChange(t30), { onListenerAdd: () => this._allLayerViewsChange(), onListenerRemove: this._clear }), p(() => {
      var _a;
      return true === ((_a = this.view) == null ? void 0 : _a.stationary);
    }, () => this._updateAttributionItems())]);
  }
  destroy() {
    this.view = null, this._fetchedAttributionData.clear(), this._pendingAttributions.clear(), this.items.removeAll();
  }
  get state() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.ready) ? this._pendingAttributions.size > 0 ? "loading" : "ready" : "disabled";
  }
  _updateAttributionItems() {
    const t29 = this.view, e29 = t29 == null ? void 0 : t29.allLayerViews;
    if (A6.length = 0, !t29 || !e29) return void this._clear();
    e29.forEach((e30) => {
      var _a, _b;
      if (e30.suspended || !((_a = e30.layer) == null ? void 0 : _a.attributionVisible)) return;
      const i23 = e30.layer;
      if (f18(i23, "user")) return void b6(A6, e30, i23.copyright);
      if (i23.hasAttributionData) {
        if (this._fetchedAttributionData.has(e30)) {
          const r27 = this._fetchedAttributionData.get(e30);
          return void (r27 ? b6(A6, e30, this._getDynamicAttribution(r27, t29, i23)) : f18(i23) && b6(A6, e30, i23.copyright));
        }
        return void this._fetchAttributionData(e30);
      }
      const r26 = "portalItem" in i23 ? (_b = i23.portalItem) == null ? void 0 : _b.accessInformation : void 0;
      b6(A6, e30, r26 || i23.copyright);
    });
    const i22 = e29.find((t30) => {
      var _a;
      return "integrated-mesh-3dtiles" === ((_a = t30.layer) == null ? void 0 : _a.type);
    });
    if (this.view && i22) {
      const t30 = l17(this.view);
      if (t30) {
        const e30 = t30.getAttributionText();
        for (let t31 = 0; t31 < e30.length; ++t31) b6(A6, i22, e30[t31]);
      }
    }
    y10(this.items, A6) && (this.items.removeAll(), this.items.addMany(A6)), A6.length = 0, this.notifyChange("state");
  }
  async _fetchAttributionData(t29) {
    if (this._pendingAttributions.has(t29)) return;
    this._pendingAttributions.add(t29);
    const e29 = await _(t29.layer.fetchAttributionData());
    if (this._pendingAttributions.has(t29)) {
      const i22 = e29.ok ? this._createContributionIndex(e29.value, g14(t29.layer)) : null;
      this._pendingAttributions.delete(t29), this._fetchedAttributionData.set(t29, i22);
    }
    this._updateAttributionItems();
  }
  _createContributionIndex(t29, e29) {
    const i22 = t29.contributors, r26 = {};
    if (!i22) return r26;
    for (let s29 = 0; s29 < i22.length; s29++) {
      const t30 = i22[s29], o31 = t30.coverageAreas;
      if (!o31) return;
      for (const i23 of o31) {
        const o32 = i23.bbox, n31 = i23.zoomMin - (e29 && i23.zoomMin ? 1 : 0), a22 = i23.zoomMax - (e29 && i23.zoomMax ? 1 : 0), c28 = new w2({ xmin: o32[1], ymin: o32[0], xmax: o32[3], ymax: o32[2], spatialReference: f3.WGS84 }), u17 = { extent: d4(c28), attribution: t30.attribution || "", score: null != i23.score ? i23.score : 100, id: s29 };
        for (let t31 = n31; t31 <= a22; t31++) r26[t31] ?? (r26[t31] = []), r26[t31].push(u17);
      }
    }
    return r26.maxKey = Math.max.apply(null, Object.keys(r26)), r26;
  }
  _getDynamicAttribution(t29, e29, i22) {
    var _a;
    const { extent: r26, scale: s29 } = e29;
    let o31 = ((_a = i22.tileInfo) == null ? void 0 : _a.scaleToZoom(s29)) ?? 0;
    if (o31 = Math.min(t29.maxKey ?? 0, Math.round(o31)), !r26 || null == o31 || o31 <= -1) return "";
    const n31 = t29[o31], a22 = g5(r26.center.clone().normalize(), e29.spatialReference), c28 = /* @__PURE__ */ new Set();
    return n31 ? n31.filter((t30) => {
      const e30 = t30.id, i23 = !c28.has(e30) && a22 && t30.extent && t4(t30.extent, a22);
      return i23 && c28.add(e30), i23;
    }).sort((t30, e30) => e30.score - t30.score || t30.objectId - e30.objectId).map((t30) => t30.attribution).join(", ") : "";
  }
};
e([y({ readOnly: true, type: V })], _10.prototype, "items", void 0), e([y({ readOnly: true })], _10.prototype, "state", null), e([y()], _10.prototype, "view", void 0), _10 = e([a2("esri.widgets.Attribution.AttributionViewModel")], _10);
var v11 = _10;

// ../node_modules/@arcgis/core/widgets/Attribution.js
var c21 = "esri-attribution";
var a21 = { base: c21, poweredBy: `${c21}__powered-by`, sources: `${c21}__sources`, open: `${c21}--open`, sourcesOpen: `${c21}__sources--open`, link: `${c21}__link` };
var h16 = class extends B {
  constructor(e29, t29) {
    super(e29, t29), this._isOpen = false, this._attributionTextOverflowed = false, this._prevSourceNodeHeight = 0, this._resizeObserver = new ResizeObserver((e30) => e30.forEach(({ target: e31 }) => this._checkSourceTextOverflow(e31))), this.itemDelimiter = " | ", this.messages = null, this.viewModel = new v11();
  }
  initialize() {
    this.addHandles(v2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.items;
    }, "change", () => this.scheduleRender()));
  }
  destroy() {
    var _a;
    (_a = this._resizeObserver) == null ? void 0 : _a.disconnect();
  }
  get _isInteractive() {
    return this._isOpen || this._attributionTextOverflowed;
  }
  get attributionText() {
    return this.viewModel.items.reduce((e29, t29) => (e29.includes(t29.text) || e29.push(t29.text), e29), []).join(this.itemDelimiter);
  }
  get icon() {
    return "description";
  }
  set icon(e29) {
    this._overrideIfSome("icon", e29);
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e29) {
    this._overrideIfSome("label", e29);
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e29) {
    this.viewModel.view = e29;
  }
  render() {
    const e29 = { [a21.open]: this._isOpen };
    return n6("div", { bind: this, class: this.classes(a21.base, e11.widget, e29), dir: "ltr", onclick: this._toggleState, onkeydown: this._toggleState }, this._renderSourcesNode(), this._renderPoweredBy());
  }
  _renderPoweredBy() {
    return n6("div", { class: a21.poweredBy }, "Powered by", " ", n6("a", { class: a21.link, href: "https://www.esri.com/", rel: "noreferrer", target: "_blank" }, "Esri"));
  }
  _renderSourcesNode() {
    const e29 = this._isOpen, t29 = this._isInteractive, i22 = t29 ? 0 : void 0, { attributionText: r26 } = this, s29 = { [a21.sourcesOpen]: e29, [e11.interactive]: t29 };
    return n6("div", { afterCreate: this._afterSourcesNodeCreate, bind: this, class: this.classes(a21.sources, s29), innerHTML: r26, tabIndex: i22 });
  }
  _afterSourcesNodeCreate(e29) {
    this._prevSourceNodeHeight = e29.clientWidth, this._resizeObserver.observe(e29);
  }
  _checkSourceTextOverflow(e29) {
    let t29 = false;
    const { clientHeight: i22, clientWidth: r26, scrollWidth: s29 } = e29, o31 = s29 > r26, n31 = this._attributionTextOverflowed !== o31;
    if (this._attributionTextOverflowed = o31, n31 && (t29 = true), this._isOpen) {
      const e30 = i22 < this._prevSourceNodeHeight;
      this._prevSourceNodeHeight = i22, e30 && (this._isOpen = false, t29 = true);
    }
    t29 && this.scheduleRender();
  }
  _toggleState() {
    this._isInteractive && (this._isOpen = !this._isOpen);
  }
};
e([y()], h16.prototype, "_isOpen", void 0), e([y()], h16.prototype, "_isInteractive", null), e([y()], h16.prototype, "_attributionTextOverflowed", void 0), e([y()], h16.prototype, "_prevSourceNodeHeight", void 0), e([y({ readOnly: true, dependsOn: ["viewModel.items.length", "itemDelimiter"] })], h16.prototype, "attributionText", null), e([y()], h16.prototype, "icon", null), e([y()], h16.prototype, "itemDelimiter", void 0), e([y()], h16.prototype, "label", null), e([y(), e5("esri/widgets/Attribution/t9n/Attribution")], h16.prototype, "messages", void 0), e([y()], h16.prototype, "view", null), e([y({ type: v11 })], h16.prototype, "viewModel", void 0), e([t9()], h16.prototype, "_toggleState", null), h16 = e([a2("esri.widgets.Attribution")], h16);
var u15 = h16;

// ../node_modules/@arcgis/core/widgets/Compass/utils.js
function e27(e29) {
  var _a, _b;
  return ((_a = e29 == null ? void 0 : e29.spatialReference) == null ? void 0 : _a.isWebMercator) || ((_b = e29 == null ? void 0 : e29.spatialReference) == null ? void 0 : _b.isGeographic) || false;
}

// ../node_modules/@arcgis/core/widgets/Compass/CompassViewModel.js
var d19 = class extends t10(S2) {
  constructor(t29) {
    super(t29), this.orientation = { x: 0, y: 0, z: 0 }, this.view = null, this._updateForCamera = this._updateForCamera.bind(this), this._updateForRotation = this._updateForRotation.bind(this), this._updateRotationWatcher = this._updateRotationWatcher.bind(this);
  }
  initialize() {
    this.addHandles(d3(() => this.view, this._updateRotationWatcher, P));
  }
  destroy() {
    this.view = null;
  }
  get canShowNorth() {
    return e27(this.view);
  }
  get state() {
    var _a;
    return !((_a = this.view) == null ? void 0 : _a.ready) || "2d" === this.view.type && !this.view.constraints.rotationEnabled ? "disabled" : this.canShowNorth ? "compass" : "rotation";
  }
  reset() {
    var _a, _b;
    ((_a = this.view) == null ? void 0 : _a.ready) && ("2d" === ((_b = this.view) == null ? void 0 : _b.type) ? this.callGoTo({ target: { rotation: 0 }, options: { animationMode: "always", duration: n2(has("mapview-essential-goto-duration")) } }) : this.callGoTo({ target: { heading: 0 } }));
  }
  _updateForRotation(t29) {
    null != t29 && this._set("orientation", { z: t29 });
  }
  _updateForCamera(t29) {
    if (!t29) return;
    const o31 = -t29.heading;
    this._set("orientation", { x: 0, y: 0, z: o31 });
  }
  _updateRotationWatcher(t29) {
    this.removeAllHandles(), t29 && this.addHandles("2d" === t29.type ? d3(() => t29 == null ? void 0 : t29.rotation, this._updateForRotation, P) : d3(() => t29 == null ? void 0 : t29.camera, this._updateForCamera, P));
  }
};
e([y({ readOnly: true })], d19.prototype, "canShowNorth", null), e([y({ readOnly: true })], d19.prototype, "orientation", void 0), e([y({ readOnly: true })], d19.prototype, "state", null), e([y()], d19.prototype, "view", void 0), d19 = e([a2("esri.widgets.Compass.CompassViewModel")], d19);
var h17 = d19;

// ../node_modules/@arcgis/core/widgets/Compass/css.js
var n30 = "esri-compass";
var o29 = { base: n30, iconContainer: `${n30}__icon-container` };

// ../node_modules/@arcgis/core/widgets/Compass.js
var c22 = class extends B {
  constructor(e29, t29) {
    super(e29, t29), this.messages = null, this.viewModel = new h17(), this._reset = () => {
      this.viewModel.reset();
    }, this._toRotationTransform = (e30) => ({ transform: `rotateZ(${e30.z}deg)` });
  }
  loadDependencies() {
    return r5({ button: () => import("./calcite-button-LNL7G6KX.js"), icon: () => import("./calcite-icon-Z7YQY6YC.js") });
  }
  get goToOverride() {
    return this.viewModel.goToOverride;
  }
  set goToOverride(e29) {
    this.viewModel.goToOverride = e29;
  }
  get icon() {
    return "rotation" === this.viewModel.state ? "arrow-up" : "compass-needle";
  }
  set icon(e29) {
    this._overrideIfSome("icon", e29);
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e29) {
    this._overrideIfSome("label", e29);
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e29) {
    this.viewModel.view = e29;
  }
  reset() {
    return this.viewModel.reset();
  }
  render() {
    const { orientation: e29, state: t29 } = this.viewModel, { messages: s29 } = this;
    return n6("div", { class: this.classes(o29.base, e11.widget) }, n6("calcite-button", { class: e11.widgetButton, disabled: "disabled" === t29, kind: "neutral", label: s29.reset, onclick: this._reset, round: true, scale: "s", title: s29.reset }, n6("div", { "aria-hidden": "true", class: o29.iconContainer, title: s29.reset }, n6("calcite-icon", { icon: this.icon, styles: this._toRotationTransform(e29) }))));
  }
};
e([y()], c22.prototype, "goToOverride", null), e([y()], c22.prototype, "icon", null), e([y()], c22.prototype, "label", null), e([y(), e5("esri/widgets/Compass/t9n/Compass")], c22.prototype, "messages", void 0), e([y()], c22.prototype, "view", null), e([y({ type: h17 })], c22.prototype, "viewModel", void 0), c22 = e([a2("esri.widgets.Compass")], c22);
var d20 = c22;

// ../node_modules/@arcgis/core/widgets/NavigationToggle/css.js
var o30 = "esri-navigation-toggle";
var t28 = { base: o30, isLayoutHorizontal: `${o30}--horizontal` };

// ../node_modules/@arcgis/core/widgets/NavigationToggle/NavigationToggleViewModel.js
var s27 = class extends S2 {
  constructor(t29) {
    super(t29), this._navigationMode = "pan", this.view = null;
  }
  initialize() {
    this.addHandles(p(() => {
      var _a;
      return (_a = this.view) == null ? void 0 : _a.inputManager;
    }, () => this._setNavigationMode()));
  }
  destroy() {
    this.view = null;
  }
  get state() {
    var _a, _b;
    return ((_a = this.view) == null ? void 0 : _a.ready) && "3d" === ((_b = this.view) == null ? void 0 : _b.type) ? "ready" : "disabled";
  }
  get navigationMode() {
    return this._navigationMode;
  }
  set navigationMode(t29) {
    this._navigationMode = t29, this._setNavigationMode();
  }
  toggle() {
    "disabled" !== this.state && (this.navigationMode = "pan" !== this.navigationMode ? "pan" : "rotate");
  }
  _setNavigationMode() {
    var _a;
    const t29 = (_a = this.view) == null ? void 0 : _a.inputManager;
    t29 && (t29.primaryDragAction = "pan" === this._navigationMode ? "pan" : "rotate");
  }
};
e([y({ readOnly: true })], s27.prototype, "state", null), e([y()], s27.prototype, "_navigationMode", void 0), e([y()], s27.prototype, "view", void 0), s27 = e([a2("esri.widgets.NavigationToggle.NavigationToggleViewModel")], s27);
var r24 = s27;

// ../node_modules/@arcgis/core/widgets/NavigationToggle.js
var c23 = class extends B {
  constructor(t29, e29) {
    super(t29, e29), this.messages = null, this.viewModel = new r24(), this.toggle = () => this.viewModel.toggle(), this._panButton = null, this._rotateButton = null, this._toggle = () => {
      var _a;
      const t30 = "pan" === ((_a = this.viewModel) == null ? void 0 : _a.navigationMode) ? this._rotateButton : this._panButton;
      t30 == null ? void 0 : t30.setFocus(), this.toggle();
    };
  }
  loadDependencies() {
    return r5({ button: () => import("./calcite-button-LNL7G6KX.js") });
  }
  get icon() {
    return "move";
  }
  set icon(t29) {
    this._overrideIfSome("icon", t29);
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(t29) {
    this._overrideIfSome("label", t29);
  }
  set layout(t29) {
    "horizontal" !== t29 && (t29 = "vertical"), this._set("layout", t29);
  }
  get view() {
    return this.viewModel.view;
  }
  set view(t29) {
    this.viewModel.view = t29;
  }
  render() {
    var _a, _b;
    const t29 = "disabled" === ((_a = this.viewModel) == null ? void 0 : _a.state), e29 = "pan" === ((_b = this.viewModel) == null ? void 0 : _b.navigationMode), o31 = this.messages.toggle;
    return n6("div", { class: this.classes(t28.base, e11.widget, { [t28.isLayoutHorizontal]: "horizontal" === this.layout }) }, n6("calcite-button", { afterCreate: (t30) => {
      this._panButton = t30;
    }, appearance: e29 ? "outline-fill" : "solid", class: e11.widgetButton, disabled: t29, iconStart: "move", kind: "neutral", label: o31, onclick: this._toggle, tabIndex: e29 ? void 0 : -1, title: o31 }), n6("calcite-button", { afterCreate: (t30) => {
      this._rotateButton = t30;
    }, appearance: e29 ? "solid" : "outline-fill", class: e11.widgetButton, disabled: t29, iconStart: "rotate", kind: "neutral", label: o31, onclick: this._toggle, tabIndex: e29 ? -1 : void 0, title: o31 }));
  }
};
e([y()], c23.prototype, "icon", null), e([y()], c23.prototype, "label", null), e([y({ value: "vertical" })], c23.prototype, "layout", null), e([y(), e5("esri/widgets/NavigationToggle/t9n/NavigationToggle")], c23.prototype, "messages", void 0), e([y()], c23.prototype, "view", null), e([y({ type: r24 })], c23.prototype, "viewModel", void 0), c23 = e([a2("esri.widgets.NavigationToggle")], c23);
var g15 = c23;

// ../node_modules/@arcgis/core/widgets/Zoom/ZoomConditions2D.js
var r25 = class extends S2 {
  get canZoomIn() {
    var _a, _b, _c;
    const o31 = (_a = this.view) == null ? void 0 : _a.ready;
    if (!o31) return false;
    const t29 = (_c = (_b = this.view) == null ? void 0 : _b.constraints) == null ? void 0 : _c.effectiveMaxScale;
    return 0 === t29 || this._scale > t29;
  }
  get canZoomOut() {
    var _a;
    const { view: o31 } = this, t29 = o31 == null ? void 0 : o31.ready;
    if (!t29) return false;
    const e29 = (_a = o31.constraints) == null ? void 0 : _a.effectiveMinScale;
    return 0 === e29 || this._scale < e29;
  }
  get _scale() {
    var _a, _b, _c;
    const o31 = (_b = (_a = this.view) == null ? void 0 : _a.animation) == null ? void 0 : _b.target;
    return (o31 && "then" in o31 ? void 0 : o31 == null ? void 0 : o31.scale) ?? ((_c = this.view) == null ? void 0 : _c.scale) ?? 0;
  }
};
e([y({ readOnly: true })], r25.prototype, "canZoomIn", null), e([y({ readOnly: true })], r25.prototype, "canZoomOut", null), e([y()], r25.prototype, "view", void 0), e([y()], r25.prototype, "_scale", null), r25 = e([a2("esri.widgets.Zoom.ZoomConditions2D")], r25);
var c24 = r25;

// ../node_modules/@arcgis/core/widgets/Zoom/ZoomConditions3D.js
var s28 = class extends S2 {
  get canZoomIn() {
    return !!this.view.ready;
  }
  get canZoomOut() {
    return !!this.view.ready;
  }
};
e([y({ readOnly: true })], s28.prototype, "canZoomIn", null), e([y({ readOnly: true })], s28.prototype, "canZoomOut", null), e([y()], s28.prototype, "view", void 0), s28 = e([a2("esri.widgets.Zoom.ZoomConditions3D")], s28);
var c25 = s28;

// ../node_modules/@arcgis/core/widgets/Zoom/ZoomViewModel.js
var m21 = class extends S2 {
  constructor(o31) {
    super(o31);
  }
  destroy() {
    this.view = null;
  }
  get canZoomIn() {
    return null != this._zoomConditions && this._zoomConditions.canZoomIn;
  }
  get canZoomOut() {
    var _a;
    return null != this._zoomConditions && ((_a = this._zoomConditions) == null ? void 0 : _a.canZoomOut);
  }
  get state() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.ready) ? "ready" : "disabled";
  }
  set view(o31) {
    o31 ? "2d" === o31.type ? this._zoomConditions = new c24({ view: o31 }) : "3d" === o31.type && (this._zoomConditions = new c25({ view: o31 })) : this._zoomConditions = null, this._set("view", o31);
  }
  zoomIn() {
    if (!this.canZoomIn) return;
    const o31 = this.view;
    "2d" === o31.type ? o31.mapViewNavigation.zoomIn() : d(o31.goTo({ zoomFactor: 2 }));
  }
  zoomOut() {
    if (!this.canZoomOut) return;
    const o31 = this.view;
    "2d" === o31.type ? o31.mapViewNavigation.zoomOut() : d(o31.goTo({ zoomFactor: 0.5 }));
  }
};
e([y()], m21.prototype, "_zoomConditions", void 0), e([y()], m21.prototype, "canZoomIn", null), e([y()], m21.prototype, "canZoomOut", null), e([y({ readOnly: true })], m21.prototype, "state", null), e([y()], m21.prototype, "view", null), m21 = e([a2("esri.widgets.Zoom.ZoomViewModel")], m21);
var p22 = m21;

// ../node_modules/@arcgis/core/widgets/Zoom.js
var m22 = { base: "esri-zoom", horizontalLayout: "esri-zoom--horizontal" };
var c26 = class extends B {
  constructor(o31, t29) {
    super(o31, t29), this.messages = null, this.viewModel = new p22(), this.zoomIn = () => this.viewModel.zoomIn(), this.zoomOut = () => this.viewModel.zoomOut();
  }
  loadDependencies() {
    return r5({ button: () => import("./calcite-button-LNL7G6KX.js") });
  }
  get icon() {
    return "magnifying-glass-plus";
  }
  set icon(o31) {
    this._overrideIfSome("icon", o31);
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(o31) {
    this._overrideIfSome("label", o31);
  }
  set layout(o31) {
    "horizontal" !== o31 && (o31 = "vertical"), this._set("layout", o31);
  }
  set view(o31) {
    this.viewModel.view = o31;
  }
  get view() {
    return this.viewModel.view;
  }
  render() {
    const o31 = { [m22.horizontalLayout]: "horizontal" === this.layout }, { canZoomIn: t29, canZoomOut: e29 } = this.viewModel, { zoomIn: s29, zoomOut: i22 } = this.messages;
    return n6("div", { class: this.classes(m22.base, e11.widget, o31) }, n6("calcite-button", { class: e11.widgetButton, disabled: !t29, iconStart: "plus", kind: "neutral", label: s29, onclick: this.zoomIn, title: s29 }), n6("calcite-button", { class: e11.widgetButton, disabled: !e29, iconStart: "minus", kind: "neutral", label: i22, onclick: this.zoomOut, title: i22 }));
  }
};
e([y()], c26.prototype, "icon", null), e([y()], c26.prototype, "label", null), e([y({ value: "vertical" })], c26.prototype, "layout", null), e([y(), e5("esri/widgets/Zoom/t9n/Zoom")], c26.prototype, "messages", void 0), e([y()], c26.prototype, "view", null), e([y({ type: p22 })], c26.prototype, "viewModel", void 0), c26 = e([a2("esri.widgets.Zoom")], c26);
var p23 = c26;

// ../node_modules/@arcgis/core/views/ui/DefaultUI.js
function m23(t29) {
  return void 0 !== (t29 == null ? void 0 : t29.view);
}
var h18 = class extends A5 {
  constructor(t29) {
    super(t29), this._defaultPositionLookup = { attribution: "manual", compass: "top-left", "navigation-toggle": "top-left", zoom: "top-left" }, this.components = [], this._updateViewAwareWidgets = (t30) => {
      this.components.forEach((o31) => {
        const e29 = this._find(o31), i22 = e29 == null ? void 0 : e29.widget;
        m23(i22) && (i22.view = t30);
      });
    }, this._componentsWatcher = (t30, o31) => {
      this._removeComponents(o31), this._addComponents(t30), this._adjustPadding(t30);
    };
  }
  initialize() {
    this.addHandles([d3(() => this.components, this._componentsWatcher, P), d3(() => this.view, this._updateViewAwareWidgets, P)]);
  }
  _add(t29, o31, e29, i22, s29) {
    let r26 = t29;
    if ("string" == typeof t29 && this._defaultPositionLookup[t29]) {
      if (this._find(t29)) return;
      r26 = this._createComponent(t29);
    }
    super._add(r26, o31, e29, i22, s29);
  }
  _removeComponents(t29) {
    t29.forEach((t30) => {
      const o31 = this._find(t30);
      o31 && (this.remove(o31), o31.destroy());
    });
  }
  _adjustPadding(t29) {
    if (!t29.includes("attribution") && !this._isOverridden("padding")) {
      const { top: t30 } = this.padding;
      this.padding = t30;
    }
  }
  _addComponents(t29) {
    this.constructed && t29.forEach((t30) => this.add(this._createComponent(t30), this._defaultPositionLookup[t30]));
  }
  _createComponent(t29) {
    const o31 = this._createWidget(t29);
    return new m20({ id: t29, node: o31 });
  }
  _createWidget(t29) {
    const o31 = this.view;
    switch (t29) {
      case "attribution":
        return new u15({ view: o31 });
      case "compass":
        return new d20({ view: o31 });
      case "navigation-toggle":
        return new g15({ view: o31 });
      case "zoom":
        return new p23({ view: o31 });
    }
  }
};
e([y()], h18.prototype, "components", void 0), h18 = e([a2("esri.views.ui.DefaultUI")], h18);
var u16 = h18;

// ../node_modules/@arcgis/core/views/ui/2d/DefaultUI2D.js
var e28 = class extends u16 {
  constructor(o31) {
    super(o31), this.components = ["attribution", "zoom"];
  }
};
e([y()], e28.prototype, "components", void 0), e28 = e([a2("esri.views.ui.2d.DefaultUI2D")], e28);
var c27 = e28;

// ../node_modules/@arcgis/core/views/MapView.js
var $;
var W3;
var H3;
var B5;
var Z2;
var J2;
async function K2() {
  const [, { GraphicsView2D: e29, GraphicContainer: t29, LabelManager: i22, MapViewNavigation: r26, MagnifierView2D: s29, Stage: a22 }] = await Promise.all([import("./webglDeps-K7Q4JPL4.js"), import("./mapViewDeps-ITACC7CX.js")]);
  W3 = e29, H3 = t29, B5 = i22, Z2 = r26, J2 = s29, $ = a22;
}
var Q = class extends o11(y3(H2(N))) {
  constructor(e29) {
    super(e29), this._magnifierView = null, this.stage = null, this._resolveWhenReady = [], this.rootLayerViews = new l4({ getCollections: () => {
      var _a, _b;
      return [(_a = this.basemapView) == null ? void 0 : _a.baseLayerViews, this.layerViews, (_b = this.basemapView) == null ? void 0 : _b.referenceLayerViews];
    }, getChildrenFunction: () => null }), this.featuresTilingScheme = null, this.fullOpacity = 1, this.goToManager = new h13({ view: this }), this.graphicsView = null, this.stateManager = new z3({ constraints: new f17({ view: this }) }), this.stationaryManager = new i21(), this.labelManager = null, this.mapViewNavigation = null, this.renderingOptions = { samplingMode: "dynamic", edgeLabelsVisible: true, labelsAnimationTime: 125, labelCollisionsEnabled: true }, this.supersampleScreenshotsEnabled = true, this.supportsGround = false, this.frameTask = new s19(this), this.floors = new V(), this.highlightOptions = new p3(), this.inputManager = new k3({ view: this }), this.map = null, this.spatialReferenceLocked = false, this.timeline = new e14(), this.type = "2d", this.ui = new c27(), this.test = { takeScreenshot: async (e30) => r23(this._getScreenshotView(e30), e30) }, this.padding = { top: 0, right: 0, bottom: 0, left: 0 }, this.addHandles([d3(() => this.viewpoint, () => this.stationaryManager.flip(), C), this.on("resize", (e30) => this.stateManager.resize(e30.width, e30.height))]), m5();
  }
  destroy() {
    this.layerViewManager.clear(), this._set("preconditionsReady", false), this.frameTask = u(this.frameTask), this.goToManager.destroy(), this.rootLayerViews.destroy(), this.inputManager.destroy(), this._set("inputManager", null);
  }
  get graphicsTileStore() {
    return new u13(this.featuresTilingScheme);
  }
  get constraintsInfo() {
    var _a, _b;
    const e29 = (_a = this.defaultsFromMap) == null ? void 0 : _a.tileInfo, t29 = this.spatialReference;
    return { lods: ((_b = e29 == null ? void 0 : e29.spatialReference) == null ? void 0 : _b.equals(t29)) ? e29.lods : null, spatialReference: t29 };
  }
  get state() {
    return this.stateManager.state;
  }
  get initialExtentRequired() {
    var _a;
    if (!this.stateManager) return false;
    const { scale: e29, constraints: t29, center: i22, viewpoint: r26, extent: s29 } = this;
    let a22 = this.zoom;
    return !(this.map && "initialViewProperties" in this.map && ((_a = this.map.initialViewProperties) == null ? void 0 : _a.viewpoint)) && (!s29 && ((t29 == null ? void 0 : t29.effectiveLODs) || (a22 = -1), (!i22 || 0 === e29 && -1 === a22) && (null == (r26 == null ? void 0 : r26.targetGeometry) || "extent" !== r26.targetGeometry.type && !r26.scale)));
  }
  get _defaultsFromMapSettings() {
    return { required: { tileInfo: true, heightModelInfo: false, extent: false }, requiresExtentInSpatialReference: this.spatialReferenceLocked };
  }
  get typeSpecificPreconditionsReady() {
    const e29 = this._getDefaultViewpoint();
    if (!e29) return false;
    const t29 = e29.targetGeometry, i22 = this.spatialReference;
    return B2(t29.spatialReference, i22);
  }
  set animation(e29) {
    const t29 = this._get("animation");
    if (e29 === t29) return;
    if (t29 && t29.stop(), e29 !== this.animationManager.animation && this.animationManager.stop(), !e29 || e29.isFulfilled()) return this._set("animation", null), void (this.frameTask.animationInProgress = false);
    this._set("animation", e29), this.frameTask.animationInProgress = true;
    const i22 = () => {
      var _a;
      this.destroyed || (e29 === this._get("animation") && (this._set("animation", null), (_a = this.frameTask) == null ? void 0 : _a.requestFrame()), this.frameTask.animationInProgress = false);
    };
    e29.when(i22, i22);
  }
  get background() {
    return e15(this.map) ? this.map.initialViewProperties.background : null;
  }
  set background(e29) {
    this._override("background", e29);
  }
  get center() {
    var _a;
    return ((_a = this.stateManager) == null ? void 0 : _a.center) ?? null;
  }
  set center(e29) {
    this.stateManager.center = e29;
  }
  get constraints() {
    var _a;
    return (_a = this.stateManager) == null ? void 0 : _a.constraints;
  }
  set constraints(e29) {
    e29.view = this;
    const t29 = this.stateManager.constraints;
    this.stateManager.constraints = e29, t29 == null ? void 0 : t29.destroy();
  }
  get extent() {
    var _a;
    return ((_a = this.stateManager) == null ? void 0 : _a.extent) ?? null;
  }
  set extent(e29) {
    this.stateManager.extent = e29;
  }
  get padding() {
    var _a;
    return (_a = this.stateManager) == null ? void 0 : _a.padding;
  }
  set padding(e29) {
    this.stateManager && (this.stateManager.padding = e29);
  }
  get rendering() {
    var _a;
    return ((_a = this.stage) == null ? void 0 : _a.renderRequested) ?? false;
  }
  get resizeAlign() {
    return this.stateManager.resizeAlign;
  }
  set resizeAlign(e29) {
    this.stateManager.resizeAlign = e29;
  }
  get resolution() {
    return this.stateManager.resolution ?? 0;
  }
  get rotation() {
    return this.stateManager.rotation ?? 0;
  }
  set rotation(e29) {
    const { rotationEnabled: t29 } = this.constraints;
    this.constraints.rotationEnabled = true, this.stateManager.rotation = e29, this.constraints.rotationEnabled = t29;
  }
  get scale() {
    var _a;
    return ((_a = this.stateManager) == null ? void 0 : _a.scale) ?? 0;
  }
  set scale(e29) {
    this.stateManager && (this.stateManager.scale = e29);
  }
  get stationary() {
    return !this.animation && !this.navigating && !this.resizing && this.stationaryManager.stationary;
  }
  get tileInfo() {
    var _a;
    return (_a = this.featuresTilingScheme) == null ? void 0 : _a.tileInfo;
  }
  get updating() {
    var _a, _b, _c, _d;
    const e29 = !(!this.magnifier.visible || null === this.magnifier.position || !((_a = this._magnifierView) == null ? void 0 : _a.updatingHandles.updating)), t29 = !this.destroyed && (!this.layerViewManager || !this.labelManager || !this.graphicsView || true === this.layerViewManager.updating || true === this.labelManager.updating || true === this.graphicsView.updating || this.allLayerViews.some((e30) => !e30.destroyed && !("layerViews" in e30) && true === e30.updating) || e29);
    if (has("esri-2d-log-updating")) {
      const i22 = this.allLayerViews.reduce((e30, t30) => ({ ...e30, [`${t30.layer.id}(${t30.layer.type})`]: !t30.destroyed && !("layerViews" in t30) && t30.updating }), {});
      console.log(`Updating MapView: ${t29}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(_b = this.layerViewManager) == null ? void 0 : _b.updating}
-> labelManager.updating: ${(_c = this.labelManager) == null ? void 0 : _c.updating}
-> graphicsView.updating: ${(_d = this.graphicsView) == null ? void 0 : _d.updating}
-> allLayerViews: ${JSON.stringify(i22)}
-> updatingMagnifier: ${e29}
`);
    }
    return t29;
  }
  get viewpoint() {
    return this.stateManager.viewpoint ?? null;
  }
  set viewpoint(e29) {
    this.stateManager.viewpoint = e29, this.frameTask.requestFrame();
  }
  get zoom() {
    return this.stateManager.zoom ?? -1;
  }
  set zoom(e29) {
    this.stateManager.zoom = e29;
  }
  get navigating() {
    var _a;
    return ((_a = this.mapViewNavigation) == null ? void 0 : _a.interacting) ?? false;
  }
  goTo(e29, t29) {
    return this.goToManager.goTo(e29, t29);
  }
  async hitTest(e29, t29) {
    return s26(this, e29, t29);
  }
  async takeScreenshot(e29) {
    return o28(this._getScreenshotView(e29), e29);
  }
  toMap(e29) {
    if (!this.ready) return null;
    const t29 = o15(e29) ? r12(this, e29) : e29;
    return this.stateManager.toMap(t29);
  }
  toScreen(e29, t29) {
    return this.stateManager.toScreen(e29, t29);
  }
  on(e29, t29, i22, r26) {
    const s29 = this.inputManager && this.viewEvents.on(e29, t29, i22, r26);
    return s29 || super.on(e29, t29);
  }
  hasEventListener(e29) {
    return super.hasEventListener(e29) || this.viewEvents.hasHandler(e29);
  }
  whenLayerView(e29) {
    return super.whenLayerView(e29);
  }
  graphicChanged(e29) {
    if (this.graphicsView) {
      this.graphicsView.graphicUpdateHandler(e29);
    }
  }
  whenReady() {
    return new Promise((e29) => {
      this.ready ? e29(this) : this._resolveWhenReady.push(e29);
    });
  }
  forceDOMReadyCycle() {
    this.forceReadyCycle();
  }
  getDefaultSpatialReference() {
    var _a, _b, _c;
    return this.map && "initialViewProperties" in this.map && ((_b = (_a = this.map) == null ? void 0 : _a.initialViewProperties) == null ? void 0 : _b.spatialReference) || ((_c = this.defaultsFromMap) == null ? void 0 : _c.spatialReference) || null;
  }
  getDefaultTimeZone() {
    return e15(this.map) ? this.map.initialViewProperties.timeZone : null;
  }
  hasLayerViewModule(e29) {
    return l12.hasLayerViewModule(e29);
  }
  importLayerView(e29) {
    return l12.importLayerView(e29);
  }
  pixelSizeAt() {
    return this.ready ? this.resolution : (n.getLogger(this).error("#pixelSizeAt()", "Map view cannot be used before it is ready"), null);
  }
  async popupHitTest(e29) {
    var _a;
    const t29 = this.toMap(e29), i22 = await this.hitTest(e29), r26 = this.allLayerViews.toArray().reverse(), s29 = new globalThis.Map(r26.map((e30) => [e30.layer.uid, e30])), a22 = [];
    let n31 = 0, o31 = 0;
    for (; n31 < i22.results.length || o31 < r26.length; ) {
      const e30 = i22.results.at(n31);
      if (e30 && "graphic" !== e30.type) {
        ++n31;
        continue;
      }
      const p24 = s29.get((_a = (e30 == null ? void 0 : e30.layer) ?? (e30 == null ? void 0 : e30.graphic.layer)) == null ? void 0 : _a.uid);
      if ((!e30 || p24) && o31 < r26.length && r26.at(o31) !== p24) {
        const e31 = r26.at(o31);
        "fetchPopupFeaturesAtLocation" in e31 && a22.push({ mapPoint: t29, layerView: e31 }), ++o31;
      } else e30 && (a22.push({ graphic: e30.graphic, layerView: p24 }), ++n31);
    }
    return { hits: a22, location: t29 };
  }
  requestUpdate() {
    this.ready && this.frameTask.requestUpdate();
  }
  async validate() {
    let e29 = t26(this.type);
    if (has("safari") && has("safari") < 9 && (e29 = new s("mapview:browser-not-supported", "This browser is not supported by MapView (Safari < 9)", { type: "safari", requiredVersion: 9, detectedVersion: has("safari") })), null != e29) throw n.getLogger(this).warn("#validate()", e29.message), e29;
  }
  loadAsyncDependencies() {
    return K2();
  }
  _getDefaultViewpoint() {
    var _a;
    const { constraints: e29, initialExtent: i22, map: r26, padding: s29, size: a22 } = this;
    if (!e29) return null;
    const n31 = r26 && "initialViewProperties" in r26 ? r26.initialViewProperties : void 0, o31 = this.stateManager.getUserStartupOptions(this.size), p24 = n31 == null ? void 0 : n31.viewpoint, l18 = ((_a = p24 == null ? void 0 : p24.targetGeometry) == null ? void 0 : _a.extent) ?? i22, h19 = l18 == null ? void 0 : l18.center, g16 = (p24 == null ? void 0 : p24.rotation) ?? 0, d21 = (p24 == null ? void 0 : p24.scale) || l18 && H(l18, [a22[0] - s29.left - s29.right, a22[1] - s29.top - s29.bottom]), u17 = o31.center ?? h19, c28 = o31.rotation ?? g16, m24 = o31.scale ?? d21;
    return u17 && m24 ? new m6({ targetGeometry: u17, scale: m24, rotation: c28 }) : null;
  }
  _startup() {
    var _a;
    this.timeline.begin("MapView Startup");
    const e29 = this._getDefaultViewpoint();
    this.stateManager.startup(e29, this.size, this.spatialReference, (_a = this.defaultsFromMap.extent) == null ? void 0 : _a.center), this.graphics.owner = this;
    const t29 = new $(this.surface, { canvas: this.renderCanvas, contextOptions: { disabledExtensions: this.deactivatedWebGLExtensions, debugWebGLExtensions: this.debugWebGLExtensions }, renderingOptions: this.renderingOptions, timeline: this.timeline });
    this.stage = t29, this._magnifierView = new J2(), this._magnifierView.magnifier = this.magnifier;
    const i22 = new B5({ view: this });
    this._set("labelManager", i22);
    const r26 = new S5({ view: this });
    this._set("animationManager", r26);
    const s29 = new Z2({ view: this, animationManager: r26 });
    this._set("mapViewNavigation", s29), this._setupSpatialReferenceDependentProperties(), this.addHandles([this.rootLayerViews.on("change", () => this._updateStageChildren()), t29.on("webgl-error", (e30) => this.fatalError = e30.error), d3(() => this.stationary, (e30) => t29.stationary = e30, A3), d3(() => this.background, (e30) => {
      t29.backgroundColor = e30 == null ? void 0 : e30.color, this._magnifierView.backgroundColor = e30 == null ? void 0 : e30.color;
    }, A3), d3(() => this.magnifier, (e30) => this._magnifierView.magnifier = e30, A3), d3(() => this.renderingOptions, (e30) => t29.renderingOptions = e30, A3), d3(() => this.highlightOptions, (e30) => t29.highlightOptions = e30, A3), d3(() => this.state.id, () => t29.state = this.state, A3)], "map-view"), this._updateStageChildren();
    const a22 = this._resolveWhenReady;
    this._resolveWhenReady = [], a22.forEach((e30) => e30(this)), this.timeline.end("MapView Startup"), this.frameTask.start(), this._set("ready", true);
  }
  _teardown() {
    this._destroySpatialReferenceDependentProperties(), this.removeHandles("map-view"), this.mapViewNavigation.destroy(), this._set("mapViewNavigation", null), this.animation = null, this.animationManager.destroy(), this._set("animationManager", null), this.layerViewManager.clear(), this.labelManager.destroy(), this._magnifierView.destroy(), this.stage.destroy(), this.stage = null, this._set("graphicsView", null), this._magnifierView = null, this._set("labelManager", null), this._set("mapViewNavigation", null), this.graphics.owner = null, this.frameTask.stop(), this.stationaryManager.clear(), this._set("ready", false), this.stateManager.teardown();
  }
  _updateStageChildren() {
    this.stage.removeAllChildren(), this.rootLayerViews.forEach((e30) => {
      this.stage.addChild(e30.container);
    });
    const e29 = this.graphicsView;
    this.stage.addChild(e29.container), this.stage.addChild(this._magnifierView);
  }
  _setupSpatialReferenceDependentProperties() {
    const e29 = new h5(z.create({ spatialReference: this.spatialReference, size: 512, numLODs: 36 }));
    this._set("featuresTilingScheme", e29);
    const t29 = new W3({ view: this, graphics: this.graphics, requestUpdateCallback: () => this.requestUpdate(), container: new H3(e29) });
    this._set("graphicsView", t29);
  }
  _destroySpatialReferenceDependentProperties() {
    const e29 = this.graphicsView;
    this._set("graphicsView", null), e29.destroy(), this._set("featuresTilingScheme", null);
  }
  _getScreenshotView(e29) {
    var _a;
    const { allLayerViews: t29, padding: i22, size: r26, stage: s29 } = this;
    return { allLayerViews: t29, backgroundColor: (e29 == null ? void 0 : e29.ignoreBackground) ? null : (_a = this.background) == null ? void 0 : _a.color, padding: i22, size: r26, stage: s29 };
  }
  _spatialReferenceChanged(e29) {
    if (this.ready) {
      this.frameTask.stop();
      for (const e30 of this.allLayerViews) e30.processDetach();
      this._destroySpatialReferenceDependentProperties(), this.stateManager.changeSpatialReference(e29), this.stage.state = this.state, this._setupSpatialReferenceDependentProperties();
      for (const e30 of this.allLayerViews) e30.processAttach();
      this.frameTask.requestFrame(), this.frameTask.start(), this._updateStageChildren();
    }
  }
};
Q.type = "2d", e([y({ readOnly: true })], Q.prototype, "animationManager", void 0), e([y({ constructOnly: true })], Q.prototype, "deactivatedWebGLExtensions", void 0), e([y({ constructOnly: true })], Q.prototype, "debugWebGLExtensions", void 0), e([y({ readOnly: true })], Q.prototype, "featuresTilingScheme", void 0), e([y({ readOnly: true })], Q.prototype, "fullOpacity", void 0), e([y()], Q.prototype, "goToManager", void 0), e([y({ readOnly: true })], Q.prototype, "graphicsTileStore", null), e([y()], Q.prototype, "graphicsView", void 0), e([y()], Q.prototype, "stateManager", void 0), e([y()], Q.prototype, "constraintsInfo", null), e([y({ readOnly: true })], Q.prototype, "state", null), e([y()], Q.prototype, "initialExtentRequired", null), e([y()], Q.prototype, "labelManager", void 0), e([y({ readOnly: true })], Q.prototype, "mapViewNavigation", void 0), e([y({ constructOnly: true })], Q.prototype, "renderCanvas", void 0), e([y()], Q.prototype, "renderingOptions", void 0), e([y({ constructOnly: true })], Q.prototype, "supersampleScreenshotsEnabled", void 0), e([y({ readOnly: true })], Q.prototype, "supportsGround", void 0), e([y()], Q.prototype, "_defaultsFromMapSettings", null), e([y({ readOnly: true })], Q.prototype, "typeSpecificPreconditionsReady", null), e([y()], Q.prototype, "animation", null), e([y({ type: m7 })], Q.prototype, "background", null), e([y()], Q.prototype, "center", null), e([y({ type: f17 })], Q.prototype, "constraints", null), e([y()], Q.prototype, "extent", null), e([y()], Q.prototype, "floors", void 0), e([y({ type: p3 })], Q.prototype, "highlightOptions", void 0), e([y({ readOnly: true })], Q.prototype, "inputManager", void 0), e([y()], Q.prototype, "map", void 0), e([y()], Q.prototype, "padding", null), e([y({ readOnly: true })], Q.prototype, "rendering", null), e([y()], Q.prototype, "resizeAlign", null), e([y({ readOnly: true })], Q.prototype, "resolution", null), e([y()], Q.prototype, "rotation", null), e([y()], Q.prototype, "scale", null), e([y({ constructOnly: true })], Q.prototype, "spatialReferenceLocked", void 0), e([y()], Q.prototype, "stationary", null), e([y({ readOnly: true })], Q.prototype, "tileInfo", null), e([y({ type: e14, readOnly: true })], Q.prototype, "timeline", void 0), e([y({ readOnly: true })], Q.prototype, "type", void 0), e([y({ readOnly: true })], Q.prototype, "updating", null), e([y()], Q.prototype, "viewpoint", null), e([y()], Q.prototype, "zoom", null), e([y({ readOnly: true })], Q.prototype, "navigating", null), e([y(), s4((e29) => e29 instanceof u16 ? e29 : g3(c27, e29))], Q.prototype, "ui", void 0), Q = e([a2("esri.views.MapView")], Q);
var X = Q;
export {
  X as default
};
//# sourceMappingURL=@arcgis_core_views_MapView.js.map
