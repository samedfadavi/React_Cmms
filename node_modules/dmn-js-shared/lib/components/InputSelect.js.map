{"version":3,"file":"InputSelect.js","names":["Component","createPortal","inject","assign","domify","remove","domRemove","InputSelect","constructor","props","context","value","state","optionsVisible","_portalEl","componentDidMount","document","addEventListener","onGlobalClick","onFocusChanged","keyboard","addListener","onKeyboard","componentWillUnmount","removeEventListener","removeListener","removePortalEl","componentWillReceiveProps","setState","componentWillUpdate","nextProps","nextState","addPortalEl","componentDidUpdate","inputNode","optionsBounds","getOptionsBounds","style","container","renderer","getContainer","top","containerTop","left","containerLeft","bottom","containerBottom","getBoundingClientRect","inputTop","inputLeft","width","height","inputBottom","scrollTop","scrollLeft","bounds","appendChild","stopPropagation","onChange","onInputClick","event","preventDefault","setOptionsVisible","focusInput","onInput","target","onOptionClick","node","focus","selectionStart","checkClose","focusTarget","contains","parentNode","evt","select","direction","options","option","filter","o","idx","indexOf","nextIdx","length","nextOption","onKeyDown","code","which","keycode","renderOptions","activeOption","createVNode","map","join","label","e","render","className","inputLabel","id","noInput","title","null","$inject"],"sources":["../../src/components/InputSelect.js"],"sourcesContent":["import { Component, createPortal } from 'inferno';\r\n\r\nimport {\r\n  inject\r\n} from 'table-js/lib/components';\r\n\r\nimport { assign } from 'min-dash';\r\n\r\nimport {\r\n  domify,\r\n  remove as domRemove\r\n} from 'min-dom';\r\n\r\n\r\nexport default class InputSelect extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    inject(this);\r\n\r\n    const { value } = props;\r\n\r\n    this.state = {\r\n      value,\r\n      optionsVisible: false\r\n    };\r\n\r\n    this._portalEl = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('mousedown', this.onGlobalClick);\r\n    document.addEventListener('focusin', this.onFocusChanged);\r\n\r\n    this.keyboard.addListener(this.onKeyboard);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('focusin', this.onFocusChanged);\r\n    document.removeEventListener('mousedown', this.onGlobalClick);\r\n\r\n    this.keyboard.removeListener(this.onKeyboard);\r\n\r\n    this.removePortalEl();\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    const { value } = props;\r\n\r\n    this.setState({\r\n      value\r\n    });\r\n  }\r\n\r\n  componentWillUpdate(nextProps, nextState) {\r\n    const { optionsVisible } = nextState;\r\n\r\n    if (optionsVisible) {\r\n      if (!this._portalEl) {\r\n        this.addPortalEl();\r\n      }\r\n    } else {\r\n      if (this._portalEl) {\r\n        this.removePortalEl();\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { optionsVisible } = this.state;\r\n\r\n    if (!optionsVisible || !this.inputNode) {\r\n      return;\r\n    }\r\n\r\n    const optionsBounds = this.getOptionsBounds();\r\n\r\n    assign(this._portalEl.style, optionsBounds);\r\n  }\r\n\r\n  getOptionsBounds() {\r\n    const container = this.renderer.getContainer();\r\n    const {\r\n      top: containerTop, left: containerLeft, bottom: containerBottom\r\n    } = container.getBoundingClientRect();\r\n\r\n    const {\r\n      top: inputTop, left: inputLeft, width, height, bottom: inputBottom\r\n    } = this.inputNode.getBoundingClientRect();\r\n\r\n    const top = inputTop + height - containerTop + container.scrollTop;\r\n    const left = inputLeft - containerLeft + container.scrollLeft;\r\n\r\n    const bounds = {\r\n      top: `${top}px`,\r\n      left: `${left}px`,\r\n      width: `${width}px`,\r\n      'max-height': `calc(100% - ${top}px)`\r\n    };\r\n\r\n    // open the options upwards when not even one option (=input height) fits\r\n    if (containerBottom - inputBottom < height) {\r\n      const bottom = containerBottom - inputTop;\r\n      bounds.bottom = `${bottom}px`;\r\n      bounds['max-height'] = `calc(100% - ${bottom})`;\r\n\r\n      delete bounds.top;\r\n    }\r\n\r\n    return bounds;\r\n  }\r\n\r\n  addPortalEl() {\r\n    this._portalEl = domify('<div class=\"dms-select-options\"></div>');\r\n\r\n    const container = this.renderer.getContainer();\r\n\r\n    container.appendChild(this._portalEl);\r\n\r\n    // suppress mousedown event propagation to handle click events inside the component\r\n    this._portalEl.addEventListener('mousedown', stopPropagation);\r\n  }\r\n\r\n  removePortalEl() {\r\n    if (this._portalEl) {\r\n      this._portalEl.removeEventListener('mousedown', stopPropagation);\r\n\r\n      domRemove(this._portalEl);\r\n\r\n      this._portalEl = null;\r\n    }\r\n  }\r\n\r\n  onChange = (value) => {\r\n    this.setState({\r\n      value\r\n    });\r\n\r\n    const { onChange } = this.props;\r\n\r\n    if (typeof onChange !== 'function') {\r\n      return;\r\n    }\r\n\r\n    onChange(value);\r\n  };\r\n\r\n  onInputClick = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    this.setOptionsVisible(!this.state.optionsVisible);\r\n\r\n    this.focusInput();\r\n  };\r\n\r\n  onInput = (event) => {\r\n    const { value } = event.target;\r\n\r\n    this.onChange(value);\r\n  };\r\n\r\n  onOptionClick = (value, event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    this.setOptionsVisible(false);\r\n\r\n    this.onChange(value);\r\n\r\n    this.focusInput();\r\n  };\r\n\r\n  /**\r\n   * Focus input node\r\n   */\r\n  focusInput() {\r\n    const node = this.inputNode;\r\n\r\n    node.focus();\r\n\r\n    // move cursor to end of input\r\n    if ('selectionStart' in node) {\r\n      node.selectionStart = 100000;\r\n    }\r\n  }\r\n\r\n  checkClose(focusTarget) {\r\n\r\n    if (this._portalEl\r\n      && !this._portalEl.contains(focusTarget)\r\n      && !this.parentNode.contains(focusTarget)) {\r\n      this.setOptionsVisible(false);\r\n    }\r\n  }\r\n\r\n  onFocusChanged = (evt) => {\r\n    this.checkClose(evt.target);\r\n  };\r\n\r\n  onGlobalClick = (evt) => {\r\n    this.checkClose(evt.target);\r\n  };\r\n\r\n  select(direction) {\r\n\r\n    const {\r\n      options\r\n    } = this.props;\r\n\r\n    const {\r\n      value\r\n    } = this.state;\r\n\r\n    if (!options) {\r\n      return;\r\n    }\r\n\r\n    const option = options.filter(o => o.value === value)[0];\r\n\r\n    const idx = option\r\n      ? options.indexOf(option)\r\n      : -1;\r\n\r\n    const nextIdx = (\r\n      idx === -1\r\n        ? (\r\n          direction === 1\r\n            ? 0\r\n            : options.length - 1)\r\n        : ((idx + direction) % options.length)\r\n    );\r\n\r\n    const nextOption = options[nextIdx < 0 ? options.length + nextIdx : nextIdx];\r\n\r\n    this.onChange(nextOption.value);\r\n  }\r\n\r\n  setOptionsVisible(optionsVisible) {\r\n    this.setState({\r\n      optionsVisible\r\n    });\r\n  }\r\n\r\n  onKeyDown = (evt) => {\r\n\r\n    const {\r\n      optionsVisible\r\n    } = this.state;\r\n\r\n    var code = evt.which;\r\n\r\n    // DOWN or UP\r\n    if (code === 40 || code === 38) {\r\n\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n\r\n      if (!optionsVisible) {\r\n        this.setOptionsVisible(true);\r\n      } else {\r\n        this.select(code === 40 ? 1 : -1);\r\n      }\r\n    }\r\n\r\n    if (optionsVisible) {\r\n\r\n      // ENTER\r\n      // ESC\r\n      if (code === 13 || code === 27) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n\r\n        this.setOptionsVisible(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  onKeyboard = (keycode) => {\r\n    const { optionsVisible } = this.state;\r\n\r\n    if (!optionsVisible) {\r\n      return;\r\n    }\r\n\r\n    // close on ESC\r\n    if (keycode === 27) {\r\n      this.setOptionsVisible(false);\r\n\r\n      return true;\r\n    }\r\n  };\r\n\r\n  renderOptions(options, activeOption) {\r\n    return (\r\n      <div className=\"options\">\r\n        {\r\n          options.map(option => {\r\n            return (\r\n              <div\r\n                className={\r\n                  [ 'option', activeOption === option ? 'active' : '' ].join(' ')\r\n                }\r\n                data-value={ option.value }\r\n                onClick={ e => this.onOptionClick(option.value, e) }>\r\n                { option.label }\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      className,\r\n      label: inputLabel,\r\n      id,\r\n      options,\r\n      noInput,\r\n      title\r\n    } = this.props;\r\n\r\n    const {\r\n      optionsVisible,\r\n      value\r\n    } = this.state;\r\n\r\n    const option = options ? options.filter(o => o.value === value)[0] : false;\r\n\r\n    const label = option ? option.label : value;\r\n\r\n    return (\r\n      <div\r\n        title={ title }\r\n        ref={ node => this.parentNode = node }\r\n        className={ [ className || '', 'dms-input-select' ].join(' ') }\r\n        onClick={ this.onInputClick }>\r\n        {\r\n          noInput\r\n            ? (\r\n              <div\r\n                aria-label={ inputLabel }\r\n                className=\"dms-input\"\r\n                tabindex=\"0\"\r\n                onKeyDown={ this.onKeyDown }\r\n                ref={ node => this.inputNode = node }\r\n              >{ label }</div>\r\n            ) : (\r\n              <input\r\n                aria-label={ inputLabel }\r\n                className=\"dms-input\"\r\n                onInput={ this.onInput }\r\n                onKeyDown={ this.onKeyDown }\r\n                spellcheck=\"false\"\r\n                ref={ node => this.inputNode = node }\r\n                type=\"text\"\r\n                value={ value }\r\n                id={ id }\r\n              />\r\n            )\r\n        }\r\n        <span\r\n          className={ [\r\n            'dms-input-select-icon',\r\n            optionsVisible ? 'dmn-icon-up' : 'dmn-icon-down'\r\n          ].join(' ') }>\r\n        </span>\r\n        {\r\n          optionsVisible\r\n            && createPortal(this.renderOptions(options, option), this._portalEl)\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInputSelect.$inject = [ 'keyboard', 'renderer' ];\r\n\r\n\r\n// helper ////\r\nfunction stopPropagation(event) {\r\n  event.stopPropagation();\r\n}\r\n"],"mappings":"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","ignoreList":[]}