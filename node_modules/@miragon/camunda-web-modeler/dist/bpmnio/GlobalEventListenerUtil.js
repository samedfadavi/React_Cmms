/**
 * A module that hooks into the event bus fire method to dispatch all events to the callbacks
 * registered via the on() method.
 */
var GlobalEventListenerUtil = /** @class */ (function () {
    function GlobalEventListenerUtil(eventBus) {
        var _this = this;
        this.listeners = [];
        /**
         * Registers a new callback that will receive all events fired by bpmn.io.
         *
         * @param callback The callback to register
         */
        this.on = function (callback) {
            if (!_this.listeners.includes(callback)) {
                _this.listeners.push(callback);
            }
        };
        /**
         * Unregisters a previously registered callback.
         *
         * @param callback The callback to unregister
         */
        this.off = function (callback) {
            _this.listeners = _this.listeners.filter(function (l) { return l !== callback; });
        };
        var fire = eventBus.fire.bind(eventBus);
        eventBus.fire = function (event, data) {
            _this.listeners.forEach(function (l) { return l(event, data); });
            return fire(event, data);
        };
    }
    return GlobalEventListenerUtil;
}());
// eslint-disable-next-line @typescript-eslint/ban-ts-comment
// @ts-ignore
GlobalEventListenerUtil.$inject = ["eventBus"];
export default GlobalEventListenerUtil;
