{"version":3,"file":"core.js","sources":["../src/cloud-element-templates/util/FeelUtil.js","../src/cloud-element-templates/Helper.js","../src/element-templates/Helper.js","../src/element-templates/ElementTemplates.js","../src/cloud-element-templates/ElementTemplates.js","../src/element-templates/Validator.js","../src/cloud-element-templates/Validator.js","../src/element-templates/ElementTemplatesLoader.js","../src/cloud-element-templates/ElementTemplatesLoader.js","../src/utils/ElementUtil.js","../src/cloud-element-templates/CreateHelper.js","../src/cloud-element-templates/util/bindingTypes.js","../src/cloud-element-templates/util/taskDefinition.js","../src/cloud-element-templates/util/rootElementUtil.js","../src/cloud-element-templates/cmd/ChangeElementTemplateHandler.js","../src/cloud-element-templates/cmd/RemoveElementTemplateHandler.js","../src/element-templates/cmd/MultiCommandHandler.js","../src/cloud-element-templates/cmd/ElementTemplateCommands.js","../src/cloud-element-templates/cmd/index.js","../src/cloud-element-templates/create/PropertyBindingProvider.js","../src/cloud-element-templates/create/TaskDefinitionBindingProvider.js","../src/cloud-element-templates/create/InputBindingProvider.js","../src/cloud-element-templates/create/OutputBindingProvider.js","../src/cloud-element-templates/create/TaskHeaderBindingProvider.js","../src/cloud-element-templates/create/ZeebePropertiesProvider.js","../src/cloud-element-templates/create/MessagePropertyBindingProvider.js","../src/cloud-element-templates/create/MessageZeebeSubscriptionBindingProvider.js","../src/cloud-element-templates/create/CalledElementBindingProvider.js","../src/cloud-element-templates/create/LinkedResourceProvider.js","../src/cloud-element-templates/util/propertyUtil.js","../src/cloud-element-templates/Condition.js","../src/cloud-element-templates/create/TemplateElementFactory.js","../src/cloud-element-templates/create/index.js","../src/cloud-element-templates/behavior/ConditionalBehavior.js","../src/cloud-element-templates/behavior/ReplaceBehavior.js","../src/cloud-element-templates/behavior/UpdatePropertiesOrderBehavior.js","../src/cloud-element-templates/behavior/ReferencedElementBehavior.js","../src/cloud-element-templates/behavior/GeneratedValueBehavior.js","../src/cloud-element-templates/behavior/CalledElementBehavior.js","../src/cloud-element-templates/behavior/index.js","../src/cloud-element-templates/core/index.js","../src/element-templates/util/handleLegacyScopes.js","../src/element-templates/CreateHelper.js","../src/utils/EventDefinitionUtil.js","../src/element-templates/cmd/ChangeElementTemplateHandler.js","../src/element-templates/cmd/RemoveElementTemplateHandler.js","../src/element-templates/cmd/ElementTemplateCommands.js","../src/element-templates/cmd/index.js","../src/element-templates/behavior/ReplaceBehavior.js","../src/element-templates/behavior/index.js","../src/element-templates/core/index.js"],"sourcesContent":["/**\n * Check if the property is cast to FEEL expression:\n * - Boolean and Number properties with feel set to 'optional' or 'static'\n * - Boolean and Number input/output parameters have default feel=static\n *\n * @returns {boolean}\n */\nexport const shouldCastToFeel = (property) => {\n  const feel = getFeelValue(property);\n\n  return [ 'optional', 'static' ].includes(feel) && [ 'Boolean', 'Number' ].includes(property.type);\n};\n\nconst ALWAYS_CAST_TO_FEEL = [\n  'zeebe:input',\n  'zeebe:output'\n];\n\nfunction getFeelValue(property) {\n  if (ALWAYS_CAST_TO_FEEL.includes(property.binding.type)) {\n    return property.feel || 'static';\n  }\n\n  return property.feel;\n}\n\nexport const toFeelExpression = (value, type) => {\n  if (typeof value === 'string' && value.startsWith('=')) {\n    return value;\n  }\n\n  if (type === 'Boolean') {\n    value = value === 'false' ? false : value;\n    return '=' + !!value;\n  }\n\n  if (typeof value === 'undefined') {\n    return value;\n  }\n\n  return '=' + value.toString();\n};","import { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\n\nimport { is, isAny } from 'bpmn-js/lib/util/ModelUtil';\n\nimport { v4 as uuid } from 'uuid';\nimport { shouldCastToFeel, toFeelExpression } from './util/FeelUtil';\n\n/**\n * The BPMN 2.0 extension attribute name under\n * which the element template ID is stored.\n *\n * @type {String}\n */\nexport const TEMPLATE_ID_ATTR = 'zeebe:modelerTemplate';\n\n/**\n * The BPMN 2.0 extension attribute name under\n * which the element template version is stored.\n *\n * @type {String}\n */\nexport const TEMPLATE_VERSION_ATTR = 'zeebe:modelerTemplateVersion';\n\n/**\n * The BPMN 2.0 extension attribute name under\n * which the element template icon is stored.\n *\n * @type {String}\n */\nexport const TEMPLATE_ICON_ATTR = 'zeebe:modelerTemplateIcon';\n\n\n/**\n * Get template id for a given diagram element.\n *\n * @param {djs.model.Base} element\n *\n * @return {String}\n */\nexport function getTemplateId(element) {\n  const businessObject = getBusinessObject(element);\n\n  if (businessObject) {\n    return businessObject.get(TEMPLATE_ID_ATTR);\n  }\n}\n\n/**\n * Get template version for a given diagram element.\n *\n * @param {djs.model.Base} element\n *\n * @return {String}\n */\nexport function getTemplateVersion(element) {\n  const businessObject = getBusinessObject(element);\n\n  if (businessObject) {\n    return businessObject.get(TEMPLATE_VERSION_ATTR);\n  }\n}\n\n/**\n * Get template icon for a given diagram element.\n *\n * @param {djs.model.Base} element\n *\n * @return {String}\n */\nexport function getTemplateIcon(element) {\n  const businessObject = getBusinessObject(element);\n\n  if (businessObject) {\n    return businessObject.get(TEMPLATE_ICON_ATTR);\n  }\n}\n\n/**\n * Find extension with given type in\n * BPMN element, diagram element or ExtensionElement.\n *\n * @param {ModdleElement|djs.model.Base} element\n * @param {String} type\n *\n * @return {ModdleElement} the extension\n */\nexport function findExtension(element, type) {\n  const businessObject = getBusinessObject(element);\n\n  let extensionElements;\n\n  if (is(businessObject, 'bpmn:ExtensionElements')) {\n    extensionElements = businessObject;\n  } else {\n    extensionElements = businessObject.get('extensionElements');\n  }\n\n  if (!extensionElements) {\n    return;\n  }\n\n  return extensionElements.get('values').find((value) => {\n    return is(value, type);\n  });\n}\n\nexport function findExtensions(element, types) {\n  const businessObject = getBusinessObject(element);\n\n  let extensionElements;\n\n  if (is(businessObject, 'bpmn:ExtensionElements')) {\n    extensionElements = businessObject;\n  } else {\n    extensionElements = businessObject.get('extensionElements');\n  }\n\n  if (!extensionElements) {\n    return null;\n  }\n\n  return extensionElements.get('values').filter((value) => {\n    return isAny(value, types);\n  });\n}\n\nexport function findZeebeProperty(zeebeProperties, binding) {\n  return zeebeProperties.get('properties').find((value) => {\n    return value.name === binding.name;\n  });\n}\n\nexport function findInputParameter(ioMapping, binding) {\n  const parameters = ioMapping.get('inputParameters');\n\n  return parameters.find((parameter) => {\n    return parameter.target === binding.name;\n  });\n}\n\nexport function findOutputParameter(ioMapping, binding) {\n  const parameters = ioMapping.get('outputParameters');\n\n  return parameters.find((parameter) => {\n    return parameter.source === binding.source;\n  });\n}\n\nexport function findTaskHeader(taskHeaders, binding) {\n  const headers = taskHeaders.get('values');\n\n  return headers.find((header) => {\n    return header.key === binding.key;\n  });\n}\n\nexport function findMessage(businessObject) {\n  if (is(businessObject, 'bpmn:Event')) {\n    const eventDefinitions = businessObject.get('eventDefinitions');\n\n    if (!eventDefinitions || !eventDefinitions.length) {\n      return;\n    }\n\n    businessObject = eventDefinitions[0];\n  }\n\n  if (!businessObject) {\n    return;\n  }\n\n  return businessObject.get('messageRef');\n}\n\nexport function findZeebeSubscription(message) {\n  return findExtension(message, 'zeebe:Subscription');\n}\n\nexport function getDefaultValue(property) {\n\n  if (\n    shouldCastToFeel(property)\n  ) {\n    return toFeelExpression(property.value, property.type);\n  }\n\n  if (property.value !== undefined) {\n    return property.value;\n  }\n\n  if (property.generatedValue) {\n    const { type } = property.generatedValue;\n\n    if (type === 'uuid') {\n      return uuid();\n    }\n  }\n}\n","import { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\n\nimport { is, isAny } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * The BPMN 2.0 extension attribute name under\n * which the element template ID is stored.\n *\n * @type {String}\n */\nexport const TEMPLATE_ID_ATTR = 'camunda:modelerTemplate';\n\n/**\n * The BPMN 2.0 extension attribute name under\n * which the element template version is stored.\n *\n * @type {String}\n */\nexport const TEMPLATE_VERSION_ATTR = 'camunda:modelerTemplateVersion';\n\n\n/**\n * Get template id for a given diagram element.\n *\n * @param {djs.model.Base} element\n *\n * @return {String}\n */\nexport function getTemplateId(element) {\n  const businessObject = getBusinessObject(element);\n\n  if (businessObject) {\n    return businessObject.get(TEMPLATE_ID_ATTR);\n  }\n}\n\n/**\n * Get template version for a given diagram element.\n *\n * @param {djs.model.Base} element\n *\n * @return {String}\n */\nexport function getTemplateVersion(element) {\n  const businessObject = getBusinessObject(element);\n\n  if (businessObject) {\n    return businessObject.get(TEMPLATE_VERSION_ATTR);\n  }\n}\n\n/**\n * Find extension with given type in\n * BPMN element, diagram element or ExtensionElement.\n *\n * @param {ModdleElement|djs.model.Base} element\n * @param {String} type\n *\n * @return {ModdleElement} the extension\n */\nexport function findExtension(element, type) {\n  const businessObject = getBusinessObject(element);\n\n  let extensionElements;\n\n  if (is(businessObject, 'bpmn:ExtensionElements')) {\n    extensionElements = businessObject;\n  } else {\n    extensionElements = businessObject.get('extensionElements');\n  }\n\n  if (!extensionElements) {\n    return null;\n  }\n\n  return extensionElements.get('values').find((value) => {\n    return is(value, type);\n  });\n}\n\nexport function findExtensions(element, types) {\n  const extensionElements = getExtensionElements(element);\n\n  if (!extensionElements) {\n    return [];\n  }\n\n  return extensionElements.get('values').filter((value) => {\n    return isAny(value, types);\n  });\n}\n\nexport function findCamundaInOut(element, binding) {\n  const extensionElements = getExtensionElements(element);\n\n  if (!extensionElements) {\n    return;\n  }\n\n  const { type } = binding;\n\n  let matcher;\n\n  if (type === 'camunda:in') {\n    matcher = (element) => {\n      return is(element, 'camunda:In') && isInOut(element, binding);\n    };\n  } else if (type === 'camunda:out') {\n    matcher = (element) => {\n      return is(element, 'camunda:Out') && isInOut(element, binding);\n    };\n  } else if (type === 'camunda:in:businessKey') {\n    matcher = (element) => {\n      return is(element, 'camunda:In') && 'businessKey' in element;\n    };\n  }\n\n  return extensionElements.get('values').find(matcher);\n}\n\nexport function findCamundaProperty(camundaProperties, binding) {\n  return camundaProperties.get('values').find((value) => {\n    return value.name === binding.name;\n  });\n}\n\nexport function findInputParameter(inputOutput, binding) {\n  const parameters = inputOutput.get('inputParameters');\n\n  return parameters.find((parameter) => {\n    return parameter.name === binding.name;\n  });\n}\n\nexport function findOutputParameter(inputOutput, binding) {\n  const parameters = inputOutput.get('outputParameters');\n\n  return parameters.find(function(parameter) {\n    const { value } = parameter;\n\n    if (!binding.scriptFormat) {\n      return value === binding.source;\n    }\n\n    const definition = parameter.get('camunda:definition');\n\n    if (!definition || binding.scriptFormat !== definition.get('camunda:scriptFormat')) {\n      return false;\n    }\n\n    return definition.get('camunda:value') === binding.source;\n  });\n}\n\nexport function findCamundaErrorEventDefinition(element, errorRef) {\n  const errorEventDefinitions = findExtensions(element, [ 'camunda:ErrorEventDefinition' ]);\n\n  let error;\n\n  // error ID has to start with <Error_${ errorRef }_>\n  return errorEventDefinitions.find((definition) => {\n    error = definition.get('bpmn:errorRef');\n\n    if (error) {\n      return error.get('bpmn:id').startsWith(`Error_${ errorRef }`);\n    }\n  });\n}\n\nexport function findError(element, errorRef) {\n  const root = getRoot(getBusinessObject(element)),\n        rootElements = root.get('rootElements');\n\n  return rootElements.find((rootElement) => {\n    return is(rootElement, 'bpmn:Error')\n      && rootElement.get('id').startsWith(`Error_${ errorRef }`);\n  });\n}\n\n\n// helpers //////////\n\nfunction getExtensionElements(element) {\n  const businessObject = getBusinessObject(element);\n\n  if (is(businessObject, 'bpmn:ExtensionElements')) {\n    return businessObject;\n  } else {\n    return businessObject.get('extensionElements');\n  }\n}\n\n\nfunction isInOut(element, binding) {\n\n  if (binding.type === 'camunda:in') {\n\n    // find based on target attribute\n    if (binding.target) {\n      return element.target === binding.target;\n    }\n  }\n\n  if (binding.type === 'camunda:out') {\n\n    // find based on source / sourceExpression\n    if (binding.source) {\n      return element.source === binding.source;\n    }\n\n    if (binding.sourceExpression) {\n      return element.sourceExpression === binding.sourceExpression;\n    }\n  }\n\n  // find based variables / local combination\n  if (binding.variables) {\n    return element.variables === 'all' && (\n      binding.variables !== 'local' || element.local\n    );\n  }\n}\n\nfunction getRoot(businessObject) {\n  let parent = businessObject;\n\n  while (parent.$parent) {\n    parent = parent.$parent;\n  }\n\n  return parent;\n}","import {\n  filter,\n  find,\n  flatten,\n  has,\n  isNil,\n  isObject,\n  isString,\n  isUndefined,\n  reduce,\n  values\n} from 'min-dash';\n\nimport {\n  getTemplateId,\n  getTemplateVersion\n} from './Helper';\n\nimport { isAny } from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  valid as isSemverValid,\n  satisfies as isSemverCompatible,\n  coerce\n} from 'semver';\n\n// eslint-disable-next-line no-undef\nconst packageVersion = process.env.PKG_VERSION;\n\n\n/**\n * Registry for element templates.\n */\nexport default class ElementTemplates {\n  constructor(commandStack, eventBus, modeling, injector, config) {\n    this._commandStack = commandStack;\n    this._eventBus = eventBus;\n    this._injector = injector;\n    this._modeling = modeling;\n\n    this._templatesById = {};\n    this._templates = [];\n\n    config = config || {};\n\n    this._engines = this._coerceEngines(config.engines || {});\n\n    eventBus.on('elementTemplates.engines.changed', event => {\n      this.set(this._templates);\n    });\n  }\n\n  /**\n   * Get template with given ID and optional version or for element.\n   *\n   * @param {String|djs.model.Base} id\n   * @param {number} [version]\n   *\n   * @return {ElementTemplate}\n   */\n  get(id, version) {\n    const templates = this._templatesById;\n\n    let element;\n\n    if (isUndefined(id)) {\n      return null;\n    } else if (isString(id)) {\n\n      if (isUndefined(version)) {\n        version = '_';\n      }\n\n      if (templates[ id ] && templates[ id ][ version ]) {\n        return templates[ id ][ version ];\n      } else {\n        return null;\n      }\n    } else {\n      element = id;\n\n      return this.get(this._getTemplateId(element), this._getTemplateVersion(element));\n    }\n  }\n\n  /**\n   * Get default template for given element.\n   *\n   * @param {djs.model.Base} element\n   *\n   * @return {ElementTemplate}\n   */\n  getDefault(element) {\n    return find(this.getAll(element), function(template) {\n      return template.isDefault;\n    }) || null;\n  }\n\n  /**\n   * Get all templates (with given ID or applicable to element).\n   *\n   * @param {string|djs.model.Base} [id]\n   * @return {Array<ElementTemplate>}\n   */\n  getAll(id) {\n    return this._getTemplateVerions(id, { includeDeprecated: true });\n  }\n\n\n  /**\n   * Get all templates (with given ID or applicable to element) with the latest\n   * version.\n   *\n   * @param {String|djs.model.Base} [id]\n   * @param {{ deprecated?: boolean }} [options]\n   *\n   * @return {Array<ElementTemplate>}\n   */\n  getLatest(id, options = {}) {\n    return this._getTemplateVerions(id, {\n      ...options,\n      latest: true\n    });\n  }\n\n  /**\n   * Set templates.\n   *\n   * @param {Array<ElementTemplate>} templates\n   */\n  set(templates) {\n    this._templatesById = {};\n    this._templates = templates;\n\n    templates.forEach((template) => {\n      const id = template.id;\n      const version = isUndefined(template.version) ? '_' : template.version;\n\n      if (!this._templatesById[ id ]) {\n        this._templatesById[ id ] = { };\n      }\n\n      this._templatesById[ id ][ version ] = template;\n\n      const latest = this._templatesById[ id ].latest;\n\n      if (this.isCompatible(template)) {\n        if (!latest || isUndefined(latest.version) || latest.version < version) {\n          this._templatesById[ id ].latest = template;\n        }\n      }\n    });\n\n    this._fire('changed');\n  }\n\n  getEngines() {\n    return this._engines;\n  }\n\n  setEngines(engines) {\n\n    this._engines = this._coerceEngines(engines);\n\n    this._fire('engines.changed');\n  }\n\n  /**\n   * Ensures that only valid engines are kept around\n   *\n   * @param { Record<string, string> } engines\n   *\n   * @return { Record<string, string> } filtered, valid engines\n   */\n  _coerceEngines(engines) {\n\n    // we provide <elementTemplates> engine with the current\n    // package version; templates may use that engine to declare\n    // compatibility with this library\n    engines = {\n      elementTemplates: packageVersion,\n      ...engines\n    };\n\n    return reduce(engines, (validEngines, version, engine) => {\n\n      const coercedVersion = coerce(version);\n\n      if (!isSemverValid(coercedVersion)) {\n        console.error(\n          new Error(`Engine <${ engine }> specifies unparseable version <${version}>`)\n        );\n\n        return validEngines;\n      }\n\n      return {\n        ...validEngines,\n        [ engine ]: coercedVersion.raw\n      };\n    }, {});\n  }\n\n  /**\n   * Check if template is compatible with currently set engine version.\n   *\n   * @param {ElementTemplate} template\n   *\n   * @return {boolean} - true if compatible or no engine is set for elementTemplates or template.\n   */\n  isCompatible(template) {\n    return !Object.keys(this.getIncompatibleEngines(template)).length;\n  }\n\n  /**\n   * Get engines that are incompatible with the template.\n   *\n   * @param {any} template\n   *\n   * @return { Record<string, { required: string, found: string } } - incompatible engines along with their template and local versions\n   */\n  getIncompatibleEngines(template) {\n    const localEngines = this._engines;\n    const templateEngines = template.engines;\n\n    return reduce(templateEngines, (result, _, engine) => {\n\n      if (!has(localEngines, engine)) {\n        return result;\n      }\n\n      if (!isSemverCompatible(localEngines[engine], templateEngines[engine])) {\n        result[engine] = {\n          actual: localEngines[engine],\n          required: templateEngines[engine]\n        };\n      }\n\n      return result;\n    }, {});\n  }\n\n  /**\n   * @param {object|string|null} id\n   * @param { { latest?: boolean, deprecated?: boolean } [options]\n   *\n   * @return {Array<ElementTemplate>}\n   */\n  _getTemplateVerions(id, options = {}) {\n\n    const {\n      latest: includeLatestOnly,\n      deprecated: includeDeprecated\n    } = options;\n\n    const templatesById = this._templatesById;\n    const getVersions = (template) => {\n      const { latest, ...versions } = template;\n      return includeLatestOnly ? (\n        !includeDeprecated && (latest && latest.deprecated) ? [] : (latest ? [ latest ] : [])\n      ) : values(versions) ;\n    };\n\n    if (isNil(id)) {\n      return flatten(values(templatesById).map(getVersions));\n    }\n\n    if (isObject(id)) {\n      const element = id;\n\n      return filter(this._getTemplateVerions(null, options), function(template) {\n        return isAny(element, template.appliesTo);\n      }) || [];\n    }\n\n    if (isString(id)) {\n      return templatesById[ id ] && getVersions(templatesById[ id ]);\n    }\n\n    throw new Error('argument must be of type {string|djs.model.Base|undefined}');\n  }\n\n  _getTemplateId(element) {\n    return getTemplateId(element);\n  }\n\n  _getTemplateVersion(element) {\n    return getTemplateVersion(element);\n  }\n\n  /**\n   * Apply element template to a given element.\n   *\n   * @param {djs.model.Base} element\n   * @param {ElementTemplate} newTemplate\n   *\n   * @return {djs.model.Base} the updated element\n   */\n  applyTemplate(element, newTemplate) {\n\n    let action = 'apply';\n    let payload = { element, newTemplate };\n    const oldTemplate = this.get(element);\n\n    if (oldTemplate && !newTemplate) {\n      action = 'unlink';\n      payload = { element };\n    }\n\n    if (newTemplate && oldTemplate && (newTemplate.id === oldTemplate.id)) {\n      action = 'update';\n    }\n\n    const context = {\n      element,\n      newTemplate,\n      oldTemplate\n    };\n\n    this._commandStack.execute('propertiesPanel.camunda.changeTemplate', context);\n\n    this._fire(action, payload);\n\n    return context.element;\n  }\n\n  _fire(action, payload) {\n    return this._eventBus.fire(`elementTemplates.${action}`, payload);\n  }\n\n  /**\n   * Remove template from a given element.\n   *\n   * @param {djs.model.Base} element\n   *\n   * @return {djs.model.Base} the updated element\n   */\n  removeTemplate(element) {\n    this._fire('remove', { element });\n\n    const context = {\n      element\n    };\n\n    this._commandStack.execute('propertiesPanel.removeTemplate', context);\n\n    return context.newElement;\n\n  }\n\n  /**\n   * Unlink template from a given element.\n   *\n   * @param {djs.model.Base} element\n   *\n   * @return {djs.model.Base} the updated element\n   */\n  unlinkTemplate(element) {\n    return this.applyTemplate(element, null);\n  }\n\n}\n\nElementTemplates.$inject = [\n  'commandStack',\n  'eventBus',\n  'modeling',\n  'injector',\n  'config.elementTemplates'\n];","import {\n  getTemplateId,\n  getTemplateVersion\n} from './Helper';\n\nimport { default as DefaultElementTemplates } from '../element-templates/ElementTemplates';\n\n/**\n * Registry for element templates.\n */\nexport default class ElementTemplates extends DefaultElementTemplates {\n  constructor(templateElementFactory, commandStack, eventBus, modeling, injector, config) {\n    super(commandStack, eventBus, modeling, injector, config);\n\n    this._templateElementFactory = templateElementFactory;\n  }\n\n  _getTemplateId(element) {\n    return getTemplateId(element);\n  }\n\n  _getTemplateVersion(element) {\n    return getTemplateVersion(element);\n  }\n\n  /**\n   * Create an element based on an element template.\n   *\n   * @param {ElementTemplate} template\n   * @returns {djs.model.Base}\n   */\n  createElement(template) {\n    if (!template) {\n      throw new Error('template is missing');\n    }\n\n    const element = this._templateElementFactory.create(template);\n\n    return element;\n  }\n\n  /**\n   * Apply element template to a given element.\n   *\n   * @param {djs.model.Base} element\n   * @param {ElementTemplate} newTemplate\n   *\n   * @return {djs.model.Base} the updated element\n   */\n  applyTemplate(element, newTemplate) {\n\n    let action = 'apply';\n    let payload = { element, newTemplate };\n\n    const oldTemplate = this.get(element);\n\n    if (oldTemplate && !newTemplate) {\n      action = 'unlink';\n      payload = { element };\n    }\n\n    if (newTemplate && oldTemplate && (newTemplate.id === oldTemplate.id)) {\n      action = 'update';\n    }\n\n    const context = {\n      element,\n      newTemplate,\n      oldTemplate\n    };\n\n    this._commandStack.execute('propertiesPanel.zeebe.changeTemplate', context);\n\n    this._eventBus.fire(`elementTemplates.${action}`, payload);\n\n    return context.element;\n  }\n\n}\n\nElementTemplates.$inject = [\n  'templateElementFactory',\n  'commandStack',\n  'eventBus',\n  'modeling',\n  'injector',\n  'config.elementTemplates',\n];\n","import {\n  filter,\n  forEach,\n  isArray,\n  isString\n} from 'min-dash';\n\nimport semverCompare from 'semver-compare';\n\nimport {\n  validRange as isSemverRangeValid\n} from 'semver';\n\nimport {\n  validate as validateAgainstSchema,\n  getSchemaVersion as getTemplateSchemaVersion\n} from '@bpmn-io/element-templates-validator';\n\nconst SUPPORTED_SCHEMA_VERSION = getTemplateSchemaVersion();\nconst MORPHABLE_TYPES = [ 'bpmn:Activity', 'bpmn:Event', 'bpmn:Gateway' ];\n\n\n/**\n * A element template validator.\n */\nexport class Validator {\n  constructor(moddle) {\n    this._templatesById = {};\n\n    this._validTemplates = [];\n    this._errors = [];\n    this._moddle = moddle;\n  }\n\n  /**\n   * Adds the templates.\n   *\n   * @param {Array<TemplateDescriptor>} templates\n   *\n   * @return {Validator}\n   */\n  addAll(templates) {\n    if (!isArray(templates)) {\n      this._logError('templates must be []');\n    } else {\n      templates.forEach(this.add, this);\n    }\n\n    return this;\n  }\n\n  /**\n   * Add the given element template, if it is valid.\n   *\n   * @param {TemplateDescriptor} template\n   *\n   * @return {Validator}\n   */\n  add(template) {\n    const err = this._validateTemplate(template);\n\n    let id, version;\n\n    if (!err) {\n      id = template.id;\n      version = template.version || '_';\n\n      if (!this._templatesById[ id ]) {\n        this._templatesById[ id ] = {};\n      }\n\n      this._templatesById[ id ][ version ] = template;\n\n      this._validTemplates.push(template);\n    }\n\n    return this;\n  }\n\n  /**\n   * Validate given template and return error (if any).\n   *\n   * @param {TemplateDescriptor} template\n   *\n   * @return {Error} validation error, if any\n   */\n  _validateTemplate(template) {\n    const id = template.id,\n          version = template.version || '_',\n          schemaVersion = template.$schema && getSchemaVersion(template.$schema);\n\n    // (1) compatibility\n    if (schemaVersion && (semverCompare(SUPPORTED_SCHEMA_VERSION, schemaVersion) < 0)) {\n      return this._logError(\n        `unsupported element template schema version <${ schemaVersion }>. Your installation only supports up to version <${ SUPPORTED_SCHEMA_VERSION }>. Please update your installation`,\n        template\n      );\n    }\n\n    // (2) versioning\n    if (this._templatesById[ id ] && this._templatesById[ id ][ version ]) {\n      if (version === '_') {\n        return this._logError(`template id <${ id }> already used`, template);\n      } else {\n        return this._logError(`template id <${ id }> and version <${ version }> already used`, template);\n      }\n    }\n\n    // (3) elementType validation\n    const elementTypeError = this._validateElementType(template);\n\n    if (elementTypeError) {\n      return elementTypeError;\n    }\n\n    // (4) JSON schema compliance\n    const schemaValidationResult = validateAgainstSchema(template);\n\n    const {\n      errors: schemaErrors,\n      valid\n    } = schemaValidationResult;\n\n    if (!valid) {\n      filteredSchemaErrors(schemaErrors).forEach((error) => {\n        this._logError(error.message, template);\n      });\n\n      return new Error('invalid template');\n    }\n\n    // (5) engines validation\n    const enginesError = this._validateEngines(template);\n\n    if (enginesError) {\n      return enginesError;\n    }\n\n    return null;\n  }\n\n  _validateEngines(template) {\n\n    let err;\n\n    forEach(template.engines, (rangeStr, engine) => {\n\n      if (!isSemverRangeValid(rangeStr)) {\n        err = this._logError(new Error(\n          `Engine <${engine}> specifies invalid semver range <${rangeStr}>`\n        ), template);\n      }\n    });\n\n    return err;\n  }\n\n  /**\n   * Validate elementType for given template and return error (if any).\n   *\n   * @param {TemplateDescriptor} template\n   *\n   * @return {Error} validation error, if any\n   */\n  _validateElementType(template) {\n    if (template.elementType && template.appliesTo) {\n\n      const elementType = template.elementType.value,\n            appliesTo = template.appliesTo;\n\n      // (3.1) template can be applied to elementType\n      // prevents cases where the elementType is not part of appliesTo\n      if (!appliesTo.find(type => this._isType(elementType, type))) {\n        return this._logError(`template does not apply to requested element type <${ elementType }>`, template);\n      }\n\n      // (3.2) template only applies to same type of element\n      // prevent elementTemplates to morph into incompatible types, e.g. Task -> SequenceFlow\n      for (const sourceType of appliesTo) {\n        if (!this._canMorph(sourceType, elementType)) {\n          return this._logError(`can not morph <${sourceType}> into <${elementType}>`, template);\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Check if given type is a subtype of given base type.\n   *\n   * @param {String} type\n   * @param {String} baseType\n   * @returns {Boolean}\n   */\n  _isType(type, baseType) {\n    const moddleType = this._moddle.getType(type);\n\n    return moddleType && (baseType in this._moddle.getElementDescriptor(moddleType).allTypesByName);\n  }\n\n\n  /**\n   * Checks if a given type can be morphed into another type.\n   *\n   * @param {String} sourceType\n   * @param {String} targetType\n   * @returns {Boolean}\n   */\n  _canMorph(sourceType, targetType) {\n\n    if (sourceType === targetType) {\n      return true;\n    }\n\n    const baseType = MORPHABLE_TYPES.find(type => this._isType(sourceType, type));\n\n    if (!baseType) {\n      return false;\n    }\n\n    return this._isType(targetType, baseType);\n  }\n\n  /**\n   * Log an error for the given template\n   *\n   * @param {(String|Error)} err\n   * @param {TemplateDescriptor} template\n   *\n   * @return {Error} logged validation errors\n   */\n  _logError(err, template) {\n    if (isString(err)) {\n\n      if (template) {\n        const {\n          id,\n          name\n        } = template;\n\n        err = `template(id: <${ id }>, name: <${ name }>): ${ err }`;\n      }\n\n      err = new Error(err);\n    }\n\n    this._errors.push(err);\n\n    return err;\n  }\n\n  getErrors() {\n    return this._errors;\n  }\n\n  getValidTemplates() {\n    return this._validTemplates;\n  }\n}\n\n\n// helpers //////////\n\n/**\n * Extract schema version from schema URI\n *\n * @param {String} schemaUri - for example https://unpkg.com/@camunda/element-templates-json-schema@99.99.99/resources/schema.json\n *\n * @return {String} for example '99.99.99'\n */\nexport function getSchemaVersion(schemaUri) {\n  const re = /\\d+\\.\\d+\\.\\d+/g;\n\n  const match = schemaUri.match(re);\n\n  return match === null ? undefined : match[ 0 ];\n}\n\n/**\n * Extract only relevant errors of the validation result.\n *\n * The JSON Schema we use under the hood produces more errors than we need for a\n * detected schema violation (for example, unmatched sub-schemas, if-then-rules,\n * `oneOf`-definitions ...).\n *\n * We call these errors \"relevant\" that have a custom error message defined by us OR\n * are basic data type errors.\n *\n * @param {Array} schemaErrors\n *\n * @return {Array}\n */\nexport function filteredSchemaErrors(schemaErrors) {\n  return filter(schemaErrors, (err) => {\n    const {\n      instancePath,\n      keyword\n    } = err;\n\n    // (1) regular errors are customized from the schema\n    if (keyword === 'errorMessage') {\n      return true;\n    }\n\n    // (2) data type errors\n    // ignore type errors nested in scopes\n    if (keyword === 'type' && instancePath && !instancePath.startsWith('/scopes/')) {\n      return true;\n    }\n\n    return false;\n  });\n}","import {\n  Validator as BaseValidator,\n  filteredSchemaErrors,\n  getSchemaVersion\n} from '../element-templates/Validator';\n\nimport semverCompare from 'semver-compare';\n\nimport {\n  validRange as isSemverRangeValid\n} from 'semver';\n\nimport {\n  validateZeebe as validateAgainstSchema,\n  getZeebeSchemaPackage as getTemplateSchemaPackage,\n  getZeebeSchemaVersion as getTemplateSchemaVersion\n} from '@bpmn-io/element-templates-validator';\nimport { forEach } from 'min-dash';\n\nconst SUPPORTED_SCHEMA_VERSION = getTemplateSchemaVersion();\nconst SUPPORTED_SCHEMA_PACKAGE = getTemplateSchemaPackage();\n\n/**\n * A Camunda Cloud element template validator.\n */\nexport class Validator extends BaseValidator {\n  constructor(moddle) {\n    super(moddle);\n  }\n\n  /**\n   * Validate given template and return error (if any).\n   *\n   * @param {TemplateDescriptor} template\n   *\n   * @return {Error} validation error, if any\n   */\n  _validateTemplate(template) {\n    const id = template.id,\n          version = template.version || '_',\n          schema = template.$schema,\n          schemaVersion = schema && getSchemaVersion(schema);\n\n    // (1) $schema attribute defined\n    if (!schema) {\n      return this._logError(\n        'missing $schema attribute.',\n        template\n      );\n    }\n\n    if (!this.isSchemaValid(schema)) {\n      return this._logError(\n        `unsupported $schema attribute <${ schema }>.`,\n        template\n      );\n    }\n\n    // (2) compatibility\n    if (schemaVersion && (semverCompare(SUPPORTED_SCHEMA_VERSION, schemaVersion) < 0)) {\n      return this._logError(\n        `unsupported element template schema version <${ schemaVersion }>. Your installation only supports up to version <${ SUPPORTED_SCHEMA_VERSION }>. Please update your installation`,\n        template\n      );\n    }\n\n    // (3) versioning\n    if (this._templatesById[ id ] && this._templatesById[ id ][ version ]) {\n      if (version === '_') {\n        return this._logError(`template id <${ id }> already used`, template);\n      } else {\n        return this._logError(`template id <${ id }> and version <${ version }> already used`, template);\n      }\n    }\n\n    // (4) elementType validation\n    const elementTypeError = this._validateElementType(template);\n\n    if (elementTypeError) {\n      return elementTypeError;\n    }\n\n    // (5) JSON schema compliance\n    const schemaValidationResult = validateAgainstSchema(template);\n\n    const {\n      errors: schemaErrors,\n      valid\n    } = schemaValidationResult;\n\n    if (!valid) {\n      filteredSchemaErrors(schemaErrors).forEach((error) => {\n        this._logError(error.message, template);\n      });\n\n      return new Error('invalid template');\n    }\n\n    // (6) engines validation\n    const enginesError = this._validateEngines(template);\n\n    if (enginesError) {\n      return enginesError;\n    }\n\n    return null;\n  }\n\n  isSchemaValid(schema) {\n    return schema && schema.includes(SUPPORTED_SCHEMA_PACKAGE);\n  }\n\n  _validateEngines(template) {\n\n    let err;\n\n    forEach(template.engines, (rangeStr, engine) => {\n\n      if (!isSemverRangeValid(rangeStr)) {\n        err = this._logError(new Error(\n          `Engine <${engine}> specifies invalid semver range <${rangeStr}>`\n        ), template);\n      }\n    });\n\n    return err;\n  }\n}\n","import {\n  isFunction,\n  isUndefined,\n  isArray,\n} from 'min-dash';\n\nimport { Validator } from './Validator';\n\n/**\n * The guy responsible for template loading.\n *\n * Provide the actual templates via the `config.elementTemplates`.\n *\n * That configuration can either be an array of template\n * descriptors or a node style callback to retrieve\n * the templates asynchronously.\n *\n * @param {Array<TemplateDescriptor>|Function} config\n * @param {EventBus} eventBus\n * @param {ElementTemplates} elementTemplates\n * @param {Moddle} moddle\n */\nexport default class ElementTemplatesLoader {\n  constructor(config, eventBus, elementTemplates, moddle) {\n    this._loadTemplates;\n    this._eventBus = eventBus;\n    this._elementTemplates = elementTemplates;\n    this._moddle = moddle;\n\n    if (isArray(config) || isFunction(config)) {\n      this._loadTemplates = config;\n    }\n\n    if (config && config.loadTemplates) {\n      this._loadTemplates = config.loadTemplates;\n    }\n\n    eventBus.on('diagram.init', () => {\n      this.reload();\n    });\n  }\n\n  reload() {\n    const loadTemplates = this._loadTemplates;\n\n    // no templates specified\n    if (isUndefined(loadTemplates)) {\n      return;\n    }\n\n    // template loader function specified\n    if (isFunction(loadTemplates)) {\n\n      return loadTemplates((err, templates) => {\n\n        if (err) {\n          return this._templateErrors([ err ]);\n        }\n\n        this.setTemplates(templates);\n      });\n    }\n\n    // templates array specified\n    if (loadTemplates.length) {\n      return this.setTemplates(loadTemplates);\n    }\n  }\n\n  setTemplates(templates) {\n    const elementTemplates = this._elementTemplates,\n          moddle = this._moddle;\n\n    const validator = new Validator(moddle).addAll(templates);\n\n    const errors = validator.getErrors(),\n          validTemplates = validator.getValidTemplates();\n\n    elementTemplates.set(validTemplates);\n\n    if (errors.length) {\n      this._templateErrors(errors);\n    }\n  }\n\n  _templateErrors(errors) {\n    this._elementTemplates._fire('errors', {\n      errors: errors\n    });\n  }\n}\n\nElementTemplatesLoader.$inject = [\n  'config.elementTemplates',\n  'eventBus',\n  'elementTemplates',\n  'moddle'\n];","import { Validator } from './Validator';\n\nimport { default as TemplatesLoader } from '../element-templates/ElementTemplatesLoader';\n\n/**\n * @param {Object|Array<TemplateDescriptor>|Function} config\n * @param {EventBus} eventBus\n * @param {ElementTemplates} elementTemplates\n * @param {Moddle} moddle\n */\nexport default class ElementTemplatesLoader extends TemplatesLoader {\n  constructor(config, eventBus, elementTemplates, moddle) {\n\n    super(config, eventBus, elementTemplates, moddle);\n\n    this._elementTemplates = elementTemplates;\n  }\n\n  setTemplates(templates) {\n    const elementTemplates = this._elementTemplates,\n          moddle = this._moddle;\n\n    const validator = new Validator(moddle).addAll(templates);\n\n    const errors = validator.getErrors(),\n          validTemplates = validator.getValidTemplates();\n\n    elementTemplates.set(validTemplates);\n\n    if (errors.length) {\n      this._templateErrors(errors);\n    }\n  }\n}\n\nElementTemplatesLoader.$inject = [\n  'config.elementTemplates',\n  'eventBus',\n  'elementTemplates',\n  'moddle'\n];","import Ids from 'ids';\n\nimport {\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * Create a new element and set its parent.\n *\n * @param {String} elementType of the new element\n * @param {Object} properties of the new element in key-value pairs\n * @param {moddle.object} parent of the new element\n * @param {BpmnFactory} factory which creates the new element\n *\n * @returns {djs.model.Base} element which is created\n */\nexport function createElement(elementType, properties, parent, factory) {\n  const element = factory.create(elementType, properties);\n\n  if (parent) {\n    element.$parent = parent;\n  }\n\n  return element;\n}\n\n/**\n * generate a semantic id with given prefix\n */\nexport function nextId(prefix) {\n  const ids = new Ids([ 32,32,1 ]);\n\n  return ids.nextPrefixed(prefix);\n}\n\nexport function getRoot(businessObject) {\n  let parent = businessObject;\n\n  while (parent.$parent) {\n    parent = parent.$parent;\n  }\n\n  return parent;\n}\n\nexport function filterElementsByType(objectList, type) {\n  const list = objectList || [];\n\n  return list.filter(element => is(element, type));\n}\n\nexport function findRootElementsByType(businessObject, referencedType) {\n  const root = getRoot(businessObject);\n\n  return filterElementsByType(root.get('rootElements'), referencedType);\n}\n\nexport function findRootElementById(businessObject, type, id) {\n  const elements = findRootElementsByType(businessObject, type);\n\n  return elements.find(element => element.id === id);\n}\n","import { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\n\nimport { findExtension } from './Helper';\nimport { createElement } from '../utils/ElementUtil';\n\n\n/**\n * Create an input parameter representing the given\n * binding and value.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createInputParameter(binding, value, bpmnFactory) {\n  const {\n    name\n  } = binding;\n\n  return bpmnFactory.create('zeebe:Input', {\n    source: value,\n    target: name\n  });\n}\n\n/**\n * Create an output parameter representing the given\n * binding and value.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createOutputParameter(binding, value, bpmnFactory) {\n  const {\n    source\n  } = binding;\n\n  return bpmnFactory.create('zeebe:Output', {\n    source,\n    target: value\n  });\n}\n\n/**\n * Create a task header representing the given\n * binding and value.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createTaskHeader(binding, value, bpmnFactory) {\n  const {\n    key\n  } = binding;\n\n  return bpmnFactory.create('zeebe:Header', {\n    key,\n    value\n  });\n}\n\n/**\n * Create a task definition representing the given value.\n *\n * @param {object} attrs\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createTaskDefinition(attrs = {}, bpmnFactory) {\n  return bpmnFactory.create('zeebe:TaskDefinition', attrs);\n}\n\n/**\n * Create zeebe:Property from the given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createZeebeProperty(binding, value = '', bpmnFactory) {\n  const { name } = binding;\n\n  return bpmnFactory.create('zeebe:Property', {\n    name,\n    value\n  });\n}\n\n/**\n * Create a called element representing the given value.\n *\n * @param {object} attrs\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCalledElement(attrs = {}, bpmnFactory) {\n  return bpmnFactory.create('zeebe:CalledElement', attrs);\n}\n\n/**\n * Retrieves whether an element should be updated for a given property.\n *\n * That matches once\n * a) the property value is not empty, or\n * b) the property is not optional\n *\n * @param {String} value\n * @param {Object} property\n * @returns {Boolean}\n */\nexport function shouldUpdate(value, property) {\n  const { optional } = property;\n\n  return value || !optional;\n}\n\n/**\n * Gets or, in case not existent, creates extension element for given element.\n *\n * @param {djs.model.Base} element\n * @param {String} type\n * @param {BpmnFactory} bpmnFactory\n * @returns {ModdleElement}\n */\nexport function ensureExtension(element, type, bpmnFactory) {\n  const businessObject = getBusinessObject(element);\n  let extensionElements = businessObject.get('extensionElements');\n\n  if (!extensionElements) {\n    extensionElements = createElement('bpmn:ExtensionElements', {}, businessObject, bpmnFactory);\n    businessObject.set('extensionElements', extensionElements);\n  }\n\n  let extension = findExtension(extensionElements, type);\n\n  if (!extension) {\n    extension = bpmnFactory.create(type);\n    extension.$parent = extensionElements;\n    extensionElements.get('values').push(extension);\n  }\n\n  return extension;\n}","export const PROPERTY_TYPE = 'property';\n\nexport const ZEBBE_PROPERTY_TYPE = 'zeebe:property';\nexport const ZEBBE_INPUT_TYPE = 'zeebe:input';\nexport const ZEEBE_OUTPUT_TYPE = 'zeebe:output';\nexport const ZEEBE_PROPERTY_TYPE = 'zeebe:property';\nexport const ZEEBE_TASK_DEFINITION_TYPE_TYPE = 'zeebe:taskDefinition:type';\nexport const ZEEBE_TASK_DEFINITION = 'zeebe:taskDefinition';\nexport const ZEEBE_TASK_HEADER_TYPE = 'zeebe:taskHeader';\nexport const MESSAGE_PROPERTY_TYPE = 'bpmn:Message#property';\nexport const MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE = 'bpmn:Message#zeebe:subscription#property';\nexport const ZEEBE_CALLED_ELEMENT = 'zeebe:calledElement';\nexport const ZEEBE_LINKED_RESOURCE_PROPERTY = 'zeebe:linkedResource';\n\nexport const EXTENSION_BINDING_TYPES = [\n  MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE,\n  ZEBBE_INPUT_TYPE,\n  ZEEBE_OUTPUT_TYPE,\n  ZEEBE_PROPERTY_TYPE,\n  ZEEBE_TASK_DEFINITION_TYPE_TYPE,\n  ZEEBE_TASK_DEFINITION,\n  ZEEBE_TASK_HEADER_TYPE,\n  ZEEBE_CALLED_ELEMENT,\n  ZEEBE_LINKED_RESOURCE_PROPERTY\n];\n\nexport const TASK_DEFINITION_TYPES = [\n  ZEEBE_TASK_DEFINITION_TYPE_TYPE,\n  ZEEBE_TASK_DEFINITION\n];\n\nexport const IO_BINDING_TYPES = [\n  ZEBBE_INPUT_TYPE,\n  ZEEBE_OUTPUT_TYPE\n];\n\nexport const MESSAGE_BINDING_TYPES = [\n  MESSAGE_PROPERTY_TYPE,\n  MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE\n];\n\nexport const PROPERTY_BINDING_TYPES = [\n  PROPERTY_TYPE,\n  MESSAGE_PROPERTY_TYPE\n];\n","import {\n  ZEEBE_TASK_DEFINITION_TYPE_TYPE\n} from './bindingTypes';\n\nexport function getTaskDefinitionPropertyName(binding) {\n  return binding.type === ZEEBE_TASK_DEFINITION_TYPE_TYPE ? 'type' : binding.property;\n}\n","import {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\nimport { findMessage } from '../Helper';\n\nexport function removeRootElement(rootElement, injector) {\n  const modeling = injector.get('modeling'),\n        canvas = injector.get('canvas'),\n        bpmnjs = injector.get('bpmnjs');\n\n  const element = canvas.getRootElement(),\n        definitions = bpmnjs.getDefinitions(),\n        rootElements = definitions.get('rootElements');\n\n  const newRootElements = rootElements.filter(e => e !== rootElement);\n\n  // short-circuit to prevent unnecessary updates\n  if (newRootElements.length === rootElements.length) {\n    return;\n  }\n\n  modeling.updateModdleProperties(element, definitions, {\n    rootElements: newRootElements\n  });\n}\n\n/**\n * Remove message from element and the diagram.\n *\n * @param {import('bpmn-js/lib/model/Types').Element} element\n * @param {import('didi').Injector} injector\n */\nexport function removeMessage(element, injector) {\n  const modeling = injector.get('modeling');\n\n  const bo = getReferringElement(element);\n\n  // Event does not have an event definition\n  if (!bo) {\n    return;\n  }\n\n  const message = findMessage(bo);\n\n  if (!message) {\n    return;\n  }\n\n  modeling.updateModdleProperties(element, bo, {\n    messageRef: undefined\n  });\n  removeRootElement(message, injector);\n}\n\n\nexport function getReferringElement(element) {\n  const bo = getBusinessObject(element);\n\n  if (is(bo, 'bpmn:Event')) {\n    return bo.get('eventDefinitions')[0];\n  }\n\n  return bo;\n}\n","import {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  findExtension,\n  findMessage,\n  getDefaultValue,\n  getTemplateVersion,\n  getTemplateId,\n  getTemplateIcon\n} from '../Helper';\n\nimport {\n  createCalledElement,\n  createInputParameter,\n  createOutputParameter,\n  createTaskDefinition,\n  createTaskHeader,\n  createZeebeProperty,\n  shouldUpdate\n} from '../CreateHelper';\n\nimport {\n  find,\n  without\n} from 'min-dash';\n\nimport {\n  MESSAGE_BINDING_TYPES,\n  MESSAGE_PROPERTY_TYPE,\n  MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE,\n  TASK_DEFINITION_TYPES,\n  ZEEBE_CALLED_ELEMENT,\n  ZEEBE_LINKED_RESOURCE_PROPERTY\n} from '../util/bindingTypes';\n\nimport {\n  getTaskDefinitionPropertyName\n} from '../util/taskDefinition';\n\nimport {\n  createElement,\n  getRoot\n} from '../../utils/ElementUtil';\nimport { removeMessage } from '../util/rootElementUtil';\n\n/**\n * Applies an element template to an element. Sets `zeebe:modelerTemplate` and\n * `zeebe:modelerTemplateVersion`.\n */\nexport default class ChangeElementTemplateHandler {\n  constructor(bpmnFactory, bpmnReplace, commandStack, modeling, injector) {\n    this._bpmnFactory = bpmnFactory;\n    this._bpmnReplace = bpmnReplace;\n\n    this._modeling = modeling;\n    this._commandStack = commandStack;\n\n    this._injector = injector;\n  }\n\n  /**\n   * Change an element's template and update its properties as specified in `newTemplate`. Specify\n   * `oldTemplate` to update from one template to another. If `newTemplate` isn't specified the\n   * `zeebe:modelerTemplate` and `zeebe:modelerTemplateVersion` properties will be removed from\n   * the element.\n   *\n   * @param {Object} context\n   * @param {Object} context.element\n   * @param {Object} [context.oldTemplate]\n   * @param {Object} [context.newTemplate]\n   */\n  preExecute(context) {\n    let newTemplate = context.newTemplate,\n        oldTemplate = context.oldTemplate;\n\n    let element = context.element;\n\n    // update zeebe:modelerTemplate attribute\n    this._updateZeebeModelerTemplate(element, newTemplate);\n\n    // update zeebe:modelerTemplateIcon\n    this._updateZeebeModelerTemplateIcon(element, newTemplate);\n\n    if (newTemplate) {\n\n      // update element type\n      element = context.element = this._updateElementType(element, oldTemplate, newTemplate);\n\n      // update properties\n      this._updateProperties(element, oldTemplate, newTemplate);\n\n      // update zeebe:TaskDefinition\n      this._updateZeebeTaskDefinition(element, oldTemplate, newTemplate);\n\n      // update zeebe:Input and zeebe:Output properties\n      this._updateZeebeInputOutputParameterProperties(element, oldTemplate, newTemplate);\n\n      // update zeebe:Header properties\n      this._updateZeebeTaskHeaderProperties(element, oldTemplate, newTemplate);\n\n      // update zeebe:Property properties\n      this._updateZeebePropertyProperties(element, oldTemplate, newTemplate);\n\n      this._updateMessage(element, oldTemplate, newTemplate);\n\n      this._updateCalledElement(element, oldTemplate, newTemplate);\n\n      this._updateLinkedResources(element, oldTemplate, newTemplate);\n    }\n  }\n\n  _getOrCreateExtensionElements(element, businessObject = getBusinessObject(element)) {\n    const bpmnFactory = this._bpmnFactory,\n          modeling = this._modeling;\n\n    let extensionElements = businessObject.get('extensionElements');\n\n    if (!extensionElements) {\n      extensionElements = bpmnFactory.create('bpmn:ExtensionElements', {\n        values: []\n      });\n\n      extensionElements.$parent = businessObject;\n\n      modeling.updateModdleProperties(element, businessObject, {\n        extensionElements: extensionElements\n      });\n    }\n\n    return extensionElements;\n  }\n\n  _updateZeebeModelerTemplate(element, newTemplate) {\n    const modeling = this._modeling;\n\n    const newId = newTemplate && newTemplate.id;\n    const newVersion = newTemplate && newTemplate.version;\n\n    if (getTemplateId(element) !== newId || getTemplateVersion(element) !== newVersion) {\n      modeling.updateProperties(element, {\n        'zeebe:modelerTemplate': newId,\n        'zeebe:modelerTemplateVersion': newVersion\n      });\n    }\n  }\n\n  _updateZeebeModelerTemplateIcon(element, newTemplate) {\n    const modeling = this._modeling;\n\n    const newIcon = newTemplate && newTemplate.icon;\n    const newIconContents = newIcon && newIcon.contents;\n\n    if (getTemplateIcon(element) !== newIconContents) {\n      modeling.updateProperties(element, {\n        'zeebe:modelerTemplateIcon': newIconContents\n      });\n    }\n  }\n\n  _updateProperties(element, oldTemplate, newTemplate) {\n    const commandStack = this._commandStack;\n    const businessObject = getBusinessObject(element);\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'property';\n    });\n\n    // Remove old Properties if no new Properties specified\n    const propertiesToRemove = oldTemplate && oldTemplate.properties.filter((oldProperty) => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'property' && !newProperties.find((newProperty) => newProperty.binding.name === oldProperty.binding.name);\n    }) || [];\n\n    if (propertiesToRemove.length) {\n      const payload = propertiesToRemove.reduce((properties, property) => {\n        properties[property.binding.name] = undefined;\n        return properties;\n      }, {});\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: payload\n      });\n    }\n\n    if (!newProperties.length) {\n      return;\n    }\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            newBinding = newProperty.binding,\n            newBindingName = newBinding.name,\n            newPropertyValue = getDefaultValue(newProperty),\n            changedElement = businessObject;\n\n      let properties = {};\n\n      if (shouldKeepValue(changedElement, oldProperty, newProperty)) {\n        return;\n      }\n\n      properties[ newBindingName ] = newPropertyValue;\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties\n      });\n    });\n  }\n\n  /**\n   * Update `zeebe:TaskDefinition` properties of specified business object. This\n   * can only exist in `bpmn:ExtensionElements`.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateZeebeTaskDefinition(element, oldTemplate, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return TASK_DEFINITION_TYPES.includes(newBindingType);\n    });\n\n    const businessObject = this._getOrCreateExtensionElements(element);\n    let taskDefinition = findExtension(businessObject, 'zeebe:TaskDefinition');\n\n    // (1) remove old task definition if no new properties specified\n\n    if (!newProperties.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          values: without(businessObject.get('values'), taskDefinition)\n        }\n      });\n\n      return;\n    }\n\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            newPropertyValue = getDefaultValue(newProperty),\n            newBinding = newProperty.binding,\n            propertyName = getTaskDefinitionPropertyName(newBinding);\n\n      // (2) update old task definition\n      if (taskDefinition) {\n\n        if (!shouldKeepValue(taskDefinition, oldProperty, newProperty)) {\n          const properties = {\n            [propertyName]: newPropertyValue\n          };\n\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: taskDefinition,\n            properties\n          });\n        }\n      }\n\n      // (3) add new task definition\n      else {\n        const properties = {\n          [propertyName]: newPropertyValue\n        };\n\n        taskDefinition = createTaskDefinition(properties, bpmnFactory);\n\n        taskDefinition.$parent = businessObject;\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: businessObject,\n          properties: {\n            values: [ ...businessObject.get('values'), taskDefinition ]\n          }\n        });\n      }\n    });\n\n    // (4) remove properties no longer templated\n    const oldProperties = oldTemplate && oldTemplate.properties.filter((oldProperty) => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      return TASK_DEFINITION_TYPES.includes(oldBindingType) && !newProperties.find((newProperty) => newProperty.binding.property === oldProperty.binding.property);\n    }) || [];\n\n    oldProperties.forEach((oldProperty) => {\n      const properties = {\n        [oldProperty.binding.property]: undefined\n      };\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: taskDefinition,\n        properties\n      });\n    });\n  }\n\n  /**\n   * Update `zeebe:Input` and `zeebe:Output` properties of specified business\n   * object. Both can only exist in `zeebe:ioMapping` which can exist in `bpmn:ExtensionElements`.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateZeebeInputOutputParameterProperties(element, oldTemplate, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'zeebe:input' || newBindingType === 'zeebe:output';\n    });\n\n    const businessObject = this._getOrCreateExtensionElements(element);\n\n    let ioMapping = findExtension(businessObject, 'zeebe:IoMapping');\n\n    // (1) remove old mappings if no new specified\n    if (!newProperties.length) {\n      if (!ioMapping) {\n        return;\n      }\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          values: without(businessObject.get('values'), ioMapping)\n        }\n      });\n    }\n\n    if (!ioMapping) {\n      ioMapping = bpmnFactory.create('zeebe:IoMapping');\n\n      ioMapping.$parent = businessObject;\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          values: [ ...businessObject.get('values'), ioMapping ]\n        }\n      });\n    }\n\n    const oldInputs = ioMapping.get('zeebe:inputParameters')\n      ? ioMapping.get('zeebe:inputParameters').slice()\n      : [];\n\n    const oldOutputs = ioMapping.get('zeebe:outputParameters')\n      ? ioMapping.get('zeebe:outputParameters').slice()\n      : [];\n\n    let propertyName;\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            inputOrOutput = findBusinessObject(businessObject, newProperty),\n            newPropertyValue = getDefaultValue(newProperty),\n            newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      let newInputOrOutput,\n          properties;\n\n      // (2) update old inputs and outputs\n      if (inputOrOutput) {\n\n        // (2a) exclude old inputs and outputs from cleanup, unless\n        // a) optional and has empty value, and\n        // b) not changed\n        if (\n          shouldUpdate(newPropertyValue, newProperty) ||\n          shouldKeepValue(inputOrOutput, oldProperty, newProperty)\n        ) {\n          if (is(inputOrOutput, 'zeebe:Input')) {\n            remove(oldInputs, inputOrOutput);\n          } else {\n            remove(oldOutputs, inputOrOutput);\n          }\n        }\n\n        // (2a) do updates (unless changed)\n        if (!shouldKeepValue(inputOrOutput, oldProperty, newProperty)) {\n\n          if (is(inputOrOutput, 'zeebe:Input')) {\n            properties = {\n              source: newPropertyValue\n            };\n          } else {\n            properties = {\n              target: newPropertyValue\n            };\n          }\n\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: inputOrOutput,\n            properties\n          });\n        }\n      }\n\n      // (3) add new inputs and outputs (unless optional)\n      else if (shouldUpdate(newPropertyValue, newProperty)) {\n\n        if (newBindingType === 'zeebe:input') {\n          propertyName = 'inputParameters';\n\n          newInputOrOutput = createInputParameter(newBinding, newPropertyValue, bpmnFactory);\n        } else {\n          propertyName = 'outputParameters';\n\n          newInputOrOutput = createOutputParameter(newBinding, newPropertyValue, bpmnFactory);\n        }\n\n        newInputOrOutput.$parent = ioMapping;\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: ioMapping,\n          properties: {\n            [ propertyName ]: [ ...ioMapping.get(propertyName), newInputOrOutput ]\n          }\n        });\n      }\n    });\n\n    // (4) remove old inputs and outputs\n    if (oldInputs.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: ioMapping,\n        properties: {\n          inputParameters: without(ioMapping.get('inputParameters'), inputParameter => oldInputs.includes(inputParameter))\n        }\n      });\n    }\n\n    if (oldOutputs.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: ioMapping,\n        properties: {\n          outputParameters: without(ioMapping.get('outputParameters'), outputParameter => oldOutputs.includes(outputParameter))\n        }\n      });\n    }\n  }\n\n  /**\n   * Update `zeebe:Header` properties of specified business\n   * object. Those can only exist in `zeebe:taskHeaders` which can exist in `bpmn:ExtensionElements`.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateZeebeTaskHeaderProperties(element, oldTemplate, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'zeebe:taskHeader';\n    });\n\n    const businessObject = this._getOrCreateExtensionElements(element);\n\n    let taskHeaders = findExtension(businessObject, 'zeebe:TaskHeaders');\n\n    // (1) remove old headers if no new specified\n    if (!newProperties.length) {\n      if (!taskHeaders) {\n        return;\n      }\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          values: without(businessObject.get('values'), taskHeaders)\n        }\n      });\n    }\n\n    if (!taskHeaders) {\n      taskHeaders = bpmnFactory.create('zeebe:TaskHeaders');\n\n      taskHeaders.$parent = businessObject;\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          values: [ ...businessObject.get('values'), taskHeaders ]\n        }\n      });\n    }\n\n    const oldHeaders = taskHeaders.get('zeebe:values')\n      ? taskHeaders.get('zeebe:values').slice()\n      : [];\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            oldHeader = findBusinessObject(businessObject, newProperty),\n            newPropertyValue = getDefaultValue(newProperty),\n            newBinding = newProperty.binding;\n\n      // (2) update old headers\n      if (oldHeader) {\n\n        if (!shouldKeepValue(oldHeader, oldProperty, newProperty)) {\n          const properties = {\n            value: newPropertyValue\n          };\n\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: oldHeader,\n            properties\n          });\n        }\n\n        remove(oldHeaders, oldHeader);\n      }\n\n      // (3) add new (non-empty) headers\n      else if (newPropertyValue) {\n        const newHeader = createTaskHeader(newBinding, newPropertyValue, bpmnFactory);\n\n        newHeader.$parent = taskHeaders;\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: taskHeaders,\n          properties: {\n            values: [ ...taskHeaders.get('values'), newHeader ]\n          }\n        });\n      }\n    });\n\n    // (4) remove old headers\n    if (oldHeaders.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: taskHeaders,\n        properties: {\n          values: without(taskHeaders.get('values'), header => oldHeaders.includes(header))\n        }\n      });\n    }\n  }\n\n  /**\n   * Update zeebe:Property properties of zeebe:Properties extension element.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateZeebePropertyProperties(element, oldTemplate, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'zeebe:property';\n    });\n\n    const businessObject = this._getOrCreateExtensionElements(element);\n\n    let zeebeProperties = findExtension(businessObject, 'zeebe:Properties');\n\n    // (1) remove old zeebe:Properties if no new zeebe:Property properties\n    if (!newProperties.length) {\n      if (!zeebeProperties) {\n        return;\n      }\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          values: without(businessObject.get('values'), zeebeProperties)\n        }\n      });\n    }\n\n    if (!zeebeProperties) {\n      zeebeProperties = bpmnFactory.create('zeebe:Properties');\n\n      zeebeProperties.$parent = businessObject;\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          values: [ ...businessObject.get('values'), zeebeProperties ]\n        }\n      });\n    }\n\n    const oldZeebeProperties = zeebeProperties.get('properties')\n      ? zeebeProperties.get('properties').slice()\n      : [];\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            oldZeebeProperty = findBusinessObject(businessObject, newProperty),\n            newPropertyValue = getDefaultValue(newProperty),\n            newBinding = newProperty.binding;\n\n      // (2) update old zeebe:Property\n      if (oldZeebeProperty) {\n        if (shouldUpdate(newPropertyValue, newProperty)\n          || shouldKeepValue(oldZeebeProperty, oldProperty, newProperty)) {\n          remove(oldZeebeProperties, oldZeebeProperty);\n        }\n\n        if (!shouldKeepValue(oldZeebeProperty, oldProperty, newProperty)) {\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: oldZeebeProperty,\n            properties: {\n              value: newPropertyValue\n            }\n          });\n        }\n      }\n\n      // (3) add new zeebe:Property\n      else if (shouldUpdate(newPropertyValue, newProperty)) {\n        const newProperty = createZeebeProperty(newBinding, newPropertyValue, bpmnFactory);\n\n        newProperty.$parent = zeebeProperties;\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: zeebeProperties,\n          properties: {\n            properties: [ ...zeebeProperties.get('properties'), newProperty ]\n          }\n        });\n      }\n    });\n\n    // (4) remove old zeebe:Property\n    if (oldZeebeProperties.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: zeebeProperties,\n        properties: {\n          properties: without(zeebeProperties.get('properties'), zeebeProperty => oldZeebeProperties.includes(zeebeProperty))\n        }\n      });\n    }\n  }\n\n  _updateMessage(element, oldTemplate, newTemplate) {\n\n    // update bpmn:Message properties\n    this._updateMessageProperties(element, oldTemplate, newTemplate);\n\n    // update bpmn:Message zeebe:subscription properties\n    this._updateMessageZeebeSubscriptionProperties(element, oldTemplate, newTemplate);\n\n    this._updateZeebeModelerTemplateOnReferencedElement(element, oldTemplate, newTemplate);\n\n    if (!hasMessageProperties(newTemplate)) {\n      removeMessage(element, this._injector);\n    }\n  }\n\n  /**\n   * Update bpmn:Message properties.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateMessageProperties(element, oldTemplate, newTemplate) {\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === MESSAGE_PROPERTY_TYPE;\n    });\n\n    const removedProperties = oldTemplate && oldTemplate.properties.filter((oldProperty) => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === MESSAGE_PROPERTY_TYPE && !newProperties.find((newProperty) => newProperty.binding.name === oldProperty.binding.name);\n    }) || [];\n\n    let message = this._getMessage(element);\n    message && removedProperties.forEach((removedProperty) => {\n\n      this._modeling.updateModdleProperties(element, message, {\n        [removedProperty.binding.name]: undefined\n      });\n    });\n\n    if (!newProperties.length) {\n      return;\n    }\n\n    message = this._getOrCreateMessage(element, newTemplate);\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            newBinding = newProperty.binding,\n            newBindingName = newBinding.name,\n            newPropertyValue = getDefaultValue(newProperty),\n            changedElement = message;\n\n      let properties = {};\n\n      if (shouldKeepValue(changedElement, oldProperty, newProperty)) {\n        return;\n      }\n\n      properties[ newBindingName ] = newPropertyValue;\n\n      this._modeling.updateModdleProperties(element, changedElement, properties);\n    });\n  }\n\n  /**\n   * Update bpmn:Message#zeebe:subscription properties.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateMessageZeebeSubscriptionProperties(element, oldTemplate, newTemplate) {\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE;\n    });\n\n    const removedProperties = oldTemplate && oldTemplate.properties.filter((oldProperty) => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE && !newProperties.find((newProperty) => newProperty.binding.name === oldProperty.binding.name);\n    }) || [];\n\n    if (!newProperties.length && !removedProperties.length) {\n      return;\n    }\n\n    let message = this._getMessage(element);\n\n    // no new properties and no message -> nothing to do\n    if (!newProperties.length && !message) {\n      return;\n    }\n\n    message = this._getOrCreateMessage(element, newTemplate);\n    const messageExtensionElements = this._getOrCreateExtensionElements(element, message);\n    const zeebeSubscription = this._getSubscription(element, message);\n\n    const propertiesToSet = newProperties.reduce((properties, newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            newBinding = newProperty.binding,\n            newBindingName = newBinding.name,\n            newPropertyValue = getDefaultValue(newProperty),\n            changedElement = zeebeSubscription;\n\n      if (shouldKeepValue(changedElement, oldProperty, newProperty)) {\n        return properties;\n      }\n\n      properties[ newBindingName ] = newPropertyValue;\n      return properties;\n    }, {});\n\n    // Update zeebe Subscription\n    if (zeebeSubscription) {\n      this._modeling.updateModdleProperties(element, zeebeSubscription,\n        propertiesToSet\n      );\n    } else {\n\n      // create new Subscription\n      const newSubscription = createElement('zeebe:Subscription', propertiesToSet, message, this._bpmnFactory);\n      this._modeling.updateModdleProperties(element, messageExtensionElements, {\n        values: [ ...messageExtensionElements.get('values'), newSubscription ]\n      });\n    }\n\n    // Remove old properties\n    if (!oldTemplate || !zeebeSubscription) {\n      return;\n    }\n\n    const propertiesToRemove = removedProperties.reduce((properties, removedProperty) => {\n      properties[ removedProperty.binding.name ] = undefined;\n      return properties;\n    }, {});\n\n    this._modeling.updateModdleProperties(element, zeebeSubscription,\n      propertiesToRemove\n    );\n  }\n\n  _updateZeebeModelerTemplateOnReferencedElement(element, oldTemplate, newTemplate) {\n    const businessObject = getBusinessObject(element);\n\n    const message = findMessage(businessObject);\n\n    if (!message) {\n      return;\n    }\n\n    if (getTemplateId(message) === newTemplate.id) {\n      return;\n    }\n\n    this._modeling.updateModdleProperties(element, message, {\n      'zeebe:modelerTemplate': newTemplate.id\n    });\n  }\n\n  _getSubscription(element, bo) {\n    const extensionElements = this._getOrCreateExtensionElements(element, bo);\n\n    const extension = findExtension(extensionElements, 'zeebe:Subscription');\n\n    if (extension) {\n      return extension;\n    }\n  }\n\n  _getOrCreateMessage(element, template) {\n    return this._getMessage(element) || this._createMessage(element, template);\n  }\n\n  _createMessage(element, template) {\n    let bo = getBusinessObject(element);\n\n    if (is(bo, 'bpmn:Event')) {\n      bo = bo.get('eventDefinitions')[0];\n    }\n\n    const message = this._bpmnFactory.create('bpmn:Message', { 'zeebe:modelerTemplate': template.id });\n\n    message.$parent = getRoot(bo);\n\n    this._modeling.updateModdleProperties(element, bo, { messageRef: message });\n\n    return message;\n  }\n\n  _getMessage(element) {\n    let bo = getBusinessObject(element);\n\n    if (is(bo, 'bpmn:Event')) {\n      bo = bo.get('eventDefinitions')[0];\n    }\n\n    return bo && bo.get('messageRef');\n  }\n\n\n\n  /**\n   * Update `zeebe:CalledElement` properties of specified business object. This\n   * can only exist in `bpmn:ExtensionElements`.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateCalledElement(element, oldTemplate, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === ZEEBE_CALLED_ELEMENT;\n    });\n\n    const businessObject = this._getOrCreateExtensionElements(element);\n    let calledElement = findExtension(businessObject, 'zeebe:CalledElement');\n\n    // (1) remove old called element if no new properties specified\n    if (!newProperties.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          values: without(businessObject.get('values'), calledElement)\n        }\n      });\n\n      return;\n    }\n\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            newPropertyValue = getDefaultValue(newProperty),\n            propertyName = newProperty.binding.property;\n\n      // (2) update old called element\n      if (calledElement) {\n\n        if (!shouldKeepValue(calledElement, oldProperty, newProperty)) {\n          const properties = {\n            [propertyName]: newPropertyValue\n          };\n\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: calledElement,\n            properties\n          });\n        }\n      }\n\n      // (3) add new called element\n      else {\n        const properties = {\n          [propertyName]: newPropertyValue\n        };\n\n        calledElement = createCalledElement(properties, bpmnFactory);\n\n        calledElement.$parent = businessObject;\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: businessObject,\n          properties: {\n            values: [ ...businessObject.get('values'), calledElement ]\n          }\n        });\n      }\n    });\n\n    // (4) remove properties no longer templated\n    const oldProperties = oldTemplate && oldTemplate.properties.filter((oldProperty) => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === ZEEBE_CALLED_ELEMENT && !newProperties.find(\n        (newProperty) => newProperty.binding.property === oldProperty.binding.property\n      );\n    }) || [];\n\n    oldProperties.forEach((oldProperty) => {\n      const properties = {\n        [oldProperty.binding.property]: undefined\n      };\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: calledElement,\n        properties\n      });\n    });\n  }\n\n  /**\n   * Replaces the element with the specified elementType.\n   * Takes into account the eventDefinition for events.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} newTemplate\n   */\n  _updateElementType(element, oldTemplate, newTemplate) {\n\n    // determine new task type\n    const newType = newTemplate.elementType;\n\n    if (!newType) {\n      return element;\n    }\n\n\n    // Do not replace if the element type did not change\n    if (!shouldUpdateElementType(element, oldTemplate, newType)) {\n      return element;\n    }\n\n    const replacement = { type: newType.value };\n\n    if (newType.eventDefinition) {\n      replacement.eventDefinitionType = newType.eventDefinition;\n    }\n\n    const replacedElement = this._bpmnReplace.replaceElement(element, replacement);\n\n    return replacedElement;\n  }\n\n\n  _updateLinkedResources(element, oldTemplate, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newLinkedResources = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'zeebe:linkedResource';\n    });\n\n    const extensionElements = this._getOrCreateExtensionElements(element);\n\n    let linkedResources = findExtension(extensionElements, 'zeebe:LinkedResources');\n\n    // (1) remove linkedResourcess if no new specified\n    if (!newLinkedResources.length) {\n      if (!linkedResources) {\n        return;\n      }\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: extensionElements,\n        properties: {\n          values: without(extensionElements.get('values'), linkedResources)\n        }\n      });\n      return;\n    }\n\n    if (!linkedResources) {\n      linkedResources = bpmnFactory.create('zeebe:LinkedResources');\n\n      linkedResources.$parent = extensionElements;\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: extensionElements,\n        properties: {\n          values: [ ...extensionElements.get('values'), linkedResources ]\n        }\n      });\n    }\n\n    const unusedLinkedResources = linkedResources.get('values').slice();\n    const unusedResourceProperties = (oldTemplate?.properties.slice() || [])\n      .filter((property) => property.binding.type === ZEEBE_LINKED_RESOURCE_PROPERTY);\n\n    newLinkedResources.forEach((newLinkedResource) => {\n      const oldProperty = findOldProperty(oldTemplate, newLinkedResource),\n            oldLinkedResource = findBusinessObject(extensionElements, newLinkedResource),\n            newPropertyValue = getDefaultValue(newLinkedResource),\n            newBinding = newLinkedResource.binding;\n\n      if (oldProperty) {\n        remove(unusedResourceProperties, oldProperty);\n      }\n\n      // (2) update old LinkesResources\n      if (oldLinkedResource) {\n        if (\n          shouldUpdate(newPropertyValue, newLinkedResource)\n          || shouldKeepValue(oldLinkedResource, oldProperty, newLinkedResource)\n        ) {\n          remove(unusedLinkedResources, oldLinkedResource);\n        }\n\n        if (!shouldKeepValue(oldLinkedResource, oldProperty, newLinkedResource)) {\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: oldLinkedResource,\n            properties: {\n              [newBinding.property]: newPropertyValue\n            }\n          });\n        }\n      }\n\n      // (3) add new linkedResources\n      else if (shouldUpdate(newPropertyValue, newLinkedResource)) {\n        const newProperties = {\n          linkName: newBinding.linkName,\n          [newBinding.property]: newPropertyValue\n        };\n\n        const newLinkedResource = createElement('zeebe:LinkedResource', newProperties, extensionElements, bpmnFactory);\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: linkedResources,\n          properties: {\n            values: [ ...linkedResources.get('values'), newLinkedResource ]\n          }\n        });\n      }\n    });\n\n\n    // (4) remove unused linkedResources\n    if (unusedLinkedResources.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: linkedResources,\n        properties: {\n          values: without(linkedResources.get('values'), linkedResource => unusedLinkedResources.includes(linkedResource))\n        }\n      });\n    }\n\n    // (5) remove unused resource properties\n    unusedResourceProperties.forEach((unusedResourceProperty) => {\n      const oldLinkedResource = findBusinessObject(extensionElements, unusedResourceProperty);\n\n      const oldBinding = unusedResourceProperty.binding;\n\n      // No property was reused and element was removed in previous step\n      if (!oldLinkedResource) {\n        return;\n      }\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: oldLinkedResource,\n        properties: {\n          [oldBinding.property]: undefined\n        }\n      });\n    });\n  }\n\n}\n\nChangeElementTemplateHandler.$inject = [\n  'bpmnFactory',\n  'bpmnReplace',\n  'commandStack',\n  'modeling',\n  'injector'\n];\n\n\n// helpers //////////\n\n/**\n * Find business object matching specified property.\n *\n * @param {djs.model.Base|ModdleElement} element\n * @param {Object} property\n *\n * @returns {ModdleElement}\n */\nfunction findBusinessObject(element, property) {\n  const businessObject = getBusinessObject(element);\n\n  const binding = property.binding,\n        bindingType = binding.type;\n\n  if (TASK_DEFINITION_TYPES.includes(bindingType)) {\n    return findExtension(businessObject, 'zeebe:TaskDefinition');\n  }\n\n  if (bindingType === 'zeebe:input' || bindingType === 'zeebe:output') {\n\n    const extensionElements = findExtension(businessObject, 'zeebe:IoMapping');\n\n    if (!extensionElements) {\n      return;\n    }\n\n    if (bindingType === 'zeebe:input') {\n      return find(extensionElements.get('zeebe:inputParameters'), function(input) {\n        return input.get('zeebe:target') === binding.name;\n      });\n    } else {\n      return find(extensionElements.get('zeebe:outputParameters'), function(output) {\n        return output.get('zeebe:source') === binding.source;\n      });\n    }\n\n  }\n\n  if (bindingType === 'zeebe:taskHeader') {\n    const extensionElements = findExtension(businessObject, 'zeebe:TaskHeaders');\n\n    if (!extensionElements) {\n      return;\n    }\n\n    return find(extensionElements.get('zeebe:values'), function(value) {\n      return value.get('zeebe:key') === binding.key;\n    });\n  }\n\n  if (bindingType === 'zeebe:property') {\n    const zeebeProperties = findExtension(businessObject, 'zeebe:Properties');\n\n    if (!zeebeProperties) {\n      return;\n    }\n\n    return zeebeProperties.get('properties').find((value) => {\n      return value.get('name') === binding.name;\n    });\n  }\n\n  if (bindingType === ZEEBE_LINKED_RESOURCE_PROPERTY) {\n    const linkedResources = findExtension(businessObject, 'zeebe:LinkedResources');\n\n    if (!linkedResources) {\n      return;\n    }\n\n    return linkedResources.get('values').find((value) => {\n      return value.get('linkName') === binding.linkName;\n    });\n  }\n}\n\n/**\n * Find old property matching specified new property.\n *\n * @param {Object} oldTemplate\n * @param {Object} newProperty\n *\n * @returns {Object}\n */\nexport function findOldProperty(oldTemplate, newProperty) {\n  if (!oldTemplate) {\n    return;\n  }\n\n  const oldProperties = oldTemplate.properties,\n        newBinding = newProperty.binding,\n        newBindingName = newBinding.name,\n        newBindingType = newBinding.type;\n\n  if (newBindingType === 'property') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingName = oldBinding.name,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'property' && oldBindingName === newBindingName;\n    });\n  }\n\n  if (TASK_DEFINITION_TYPES.includes(newBindingType)) {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldPropertyName = getTaskDefinitionPropertyName(oldBinding),\n            newPropertyName = getTaskDefinitionPropertyName(newBinding);\n\n      return oldPropertyName === newPropertyName;\n    });\n  }\n\n  if (newBindingType === 'zeebe:input') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingName = oldBinding.name,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'zeebe:input') {\n        return;\n      }\n\n      return oldBindingName === newBindingName;\n    });\n  }\n\n  if (newBindingType === 'zeebe:output') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'zeebe:output') {\n        return;\n      }\n\n      return oldBinding.source === newBinding.source;\n    });\n  }\n\n  if (newBindingType === 'zeebe:taskHeader') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'zeebe:taskHeader') {\n        return;\n      }\n\n      return oldBinding.key === newBinding.key;\n    });\n  }\n\n  if (newBindingType === 'zeebe:property') {\n    return oldProperties.find((oldProperty) => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'zeebe:property') {\n        return;\n      }\n\n      return oldBinding.name === newBinding.name;\n    });\n  }\n\n  if (newBindingType === MESSAGE_PROPERTY_TYPE) {\n    return oldProperties.find(oldProperty => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== MESSAGE_PROPERTY_TYPE) {\n        return;\n      }\n\n      return oldBinding.name === newBinding.name;\n    });\n  }\n\n  if (newBindingType === MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE) {\n    return oldProperties.find(oldProperty => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE) {\n        return;\n      }\n\n      return oldBinding.name === newBinding.name;\n    });\n  }\n\n  if (newBindingType === ZEEBE_LINKED_RESOURCE_PROPERTY) {\n    return oldProperties.find(oldProperty => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== ZEEBE_LINKED_RESOURCE_PROPERTY) {\n        return;\n      }\n\n      return oldBinding.linkName === newBinding.linkName && oldBinding.property === newBinding.property;\n    });\n  }\n}\n\n/**\n * Check whether the existing property should be kept. This is the case if\n *  - an old template was set and the value differs from the default\n *  - no template was set but the property was set manually\n *\n * @param {djs.model.Base|ModdleElement} element\n * @param {Object} oldProperty\n * @param {Object} newProperty\n *\n * @returns {boolean}\n */\nfunction shouldKeepValue(element, oldProperty, newProperty) {\n\n  // \"Hidden\" values are treated as a constant\n  if (newProperty.type === 'Hidden') {\n    return false;\n  }\n\n  // Dropdowns should keep existing configuration\n  // cf. https://github.com/bpmn-io/bpmn-js-properties-panel/issues/767\n  if (newProperty.type === 'Dropdown') {\n\n    const currentValue = getPropertyValue(element, newProperty);\n\n    // only keep value if old value is a valid option\n    return newProperty.choices && newProperty.choices.some(\n      (choice) => choice.value === currentValue\n    );\n  }\n\n  // keep existing old property if\n  // user changed it from the original\n  if (oldProperty) {\n    return propertyChanged(element, oldProperty);\n  }\n\n  // keep existing property value\n  return !!(getPropertyValue(element, newProperty));\n}\n\n/**\n * Check whether property was changed after being set by template.\n *\n * @param {djs.model.Base|ModdleElement} element\n * @param {Object} oldProperty\n *\n * @returns {boolean}\n */\nfunction propertyChanged(element, oldProperty) {\n  const oldPropertyValue = oldProperty.value;\n\n  return getPropertyValue(element, oldProperty) !== oldPropertyValue;\n}\n\nfunction getPropertyValue(element, property) {\n  const businessObject = getBusinessObject(element);\n\n  if (!businessObject) {\n    return;\n  }\n\n  const binding = property.binding,\n        bindingName = binding.name,\n        bindingType = binding.type,\n        bindingProperty = binding.property;\n\n\n  if (bindingType === 'property') {\n    return businessObject.get(bindingName);\n  }\n\n  if (TASK_DEFINITION_TYPES.includes(bindingType)) {\n    return businessObject.get(getTaskDefinitionPropertyName(binding));\n  }\n\n  if (bindingType === 'zeebe:input') {\n    return businessObject.get('zeebe:source');\n  }\n\n  if (bindingType === 'zeebe:output') {\n    return businessObject.get('zeebe:target');\n  }\n\n  if (bindingType === 'zeebe:taskHeader') {\n    return businessObject.get('zeebe:value');\n  }\n\n  if (bindingType === 'zeebe:property') {\n    return businessObject.get('zeebe:value');\n  }\n\n  if (bindingType === MESSAGE_PROPERTY_TYPE) {\n    return businessObject.get(bindingName);\n  }\n\n  if (bindingType === MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE) {\n    return businessObject.get(bindingName);\n  }\n\n  if (bindingType === ZEEBE_LINKED_RESOURCE_PROPERTY) {\n    return businessObject.get(bindingProperty);\n  }\n}\n\nfunction remove(array, item) {\n  const index = array.indexOf(item);\n\n  if (index < 0) {\n    return array;\n  }\n\n  array.splice(index, 1);\n\n  return array;\n}\n\n\nfunction hasMessageProperties(template) {\n  return template.properties.some(p => MESSAGE_BINDING_TYPES.includes(p.binding.type));\n}\n\nfunction shouldUpdateElementType(element, oldTemplate, newType) {\n\n  // Never reuse existing eventDefinition when applying a new template\n  if (!oldTemplate && newType.eventDefinition) {\n    return true;\n  }\n\n  const oldType = oldTemplate && oldTemplate.elementType || {\n    value: element.type,\n    eventDefinition: getEventDefinitionType(element)\n  };\n\n  // Do not update if the element type did not change\n  if (oldType && oldType.value === newType.value && oldType.eventDefinition === newType.eventDefinition) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction getEventDefinitionType(element) {\n  const businessObject = getBusinessObject(element);\n  if (!businessObject.eventDefinitions) {\n    return;\n  }\n\n  const eventDefinition = businessObject.eventDefinitions[ 0 ];\n\n  if (!eventDefinition) {\n    return;\n  }\n\n  return eventDefinition.$type;\n}","import { getLabel, setLabel } from 'bpmn-js/lib/features/label-editing/LabelUtil';\nimport { getShapeIdFromPlane, isPlane } from 'bpmn-js/lib/util/DrilldownUtil';\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\nexport default class RemoveElementTemplateHandler {\n  constructor(\n      modeling,\n      elementFactory,\n      elementRegistry,\n      canvas,\n      bpmnFactory,\n      replace,\n      commandStack,\n      moddleCopy\n  ) {\n    this._modeling = modeling;\n    this._elementFactory = elementFactory;\n    this._elementRegistry = elementRegistry;\n    this._canvas = canvas;\n    this._bpmnFactory = bpmnFactory;\n    this._replace = replace;\n    this._commandStack = commandStack;\n    this._moddleCopy = moddleCopy;\n  }\n\n  preExecute(context) {\n    const {\n      element\n    } = context;\n\n    if (element.parent) {\n      context.newElement = this._removeTemplate(element);\n    } else {\n      context.newElement = this._removeRootTemplate(element);\n    }\n  }\n\n  _removeTemplate(element) {\n    const replace = this._replace;\n\n    const businessObject = getBusinessObject(element);\n\n    const type = businessObject.$type,\n          eventDefinitionType = this._getEventDefinitionType(businessObject);\n\n    const newBusinessObject = this._createNewBusinessObject(element);\n\n    return replace.replaceElement(element,\n      {\n        type: type,\n        businessObject: newBusinessObject,\n        eventDefinitionType: eventDefinitionType,\n      },\n      {\n        createElementsBehavior: false\n      }\n    );\n  }\n\n  /**\n   * Remove template from a given element.\n   *\n   * @param {djs.model.Base} element\n   *\n   * @return {djs.model.Base} the updated element\n   */\n  _removeRootTemplate(element) {\n    var modeling = this._modeling,\n        elementFactory = this._elementFactory,\n        elementRegistry = this._elementRegistry,\n        canvas = this._canvas;\n\n    // We are inside a collapsed subprocess, move up to the parent before replacing the collapsed object\n    if (isPlane(element)) {\n      const shapeId = getShapeIdFromPlane(element);\n      const shape = elementRegistry.get(shapeId);\n\n      if (shape && shape !== element) {\n        canvas.setRootElement(canvas.findRoot(shape));\n        return this._removeTemplate(shape);\n      }\n    }\n\n    const businessObject = getBusinessObject(element);\n\n    const type = businessObject.$type;\n\n    const newBusinessObject = this._createNewBusinessObject(element);\n\n    const newRoot = elementFactory.create('root', {\n      type: type,\n      businessObject: newBusinessObject\n    });\n\n    this._commandStack.execute('canvas.updateRoot', {\n      newRoot: newRoot,\n      oldRoot: element\n    });\n\n    modeling.moveElements(element.children, { x: 0, y: 0 }, newRoot);\n\n    return newRoot;\n  }\n\n  _getEventDefinitionType(businessObject) {\n    if (!businessObject.eventDefinitions) {\n      return null;\n    }\n\n    const eventDefinition = businessObject.eventDefinitions[ 0 ];\n\n    if (!eventDefinition) {\n      return null;\n    }\n\n    return eventDefinition.$type;\n  }\n\n  _createNewBusinessObject(element) {\n    const bpmnFactory = this._bpmnFactory;\n\n    const bo = getBusinessObject(element),\n          newBo = bpmnFactory.create(bo.$type),\n          label = getLabel(element);\n\n    // Make we we keep general properties unrelated to the template.\n    this._copyProperties(bo, newBo, [ 'documentation' ]);\n    this._copyExtensionElements(bo, newBo, [ 'zeebe:ExecutionListeners' ]);\n\n    if (!label) {\n      return newBo;\n    }\n\n    if (is(element, 'bpmn:Group')) {\n      newBo.categoryValueRef = bpmnFactory.create('bpmn:CategoryValue');\n    }\n\n    setLabel({ businessObject: newBo }, label);\n\n    return newBo;\n  }\n\n  /**\n   * Copy specified properties to the target business object.\n   *\n   * @param {ModdleElement} source\n   * @param {ModdleElement} target\n   * @param {Array<string>} properties\n   */\n  _copyProperties(source, target, properties) {\n    const copy = this._moddleCopy;\n\n    properties.forEach(propertyName => {\n\n      const property = source.get(propertyName);\n\n      if (property) {\n        const propertyCopy = copy.copyProperty(property, target, propertyName);\n        target.set(propertyName, propertyCopy);\n      }\n    });\n  }\n\n  /**\n   * Copy extension elements of specified types to the target business object.\n   *\n   * @param {ModdleElement} source\n   * @param {ModdleElement} target\n   * @param {Array<string>} extensionElements\n   */\n  _copyExtensionElements(source, target, extensionElements) {\n    const bpmnFactory = this._bpmnFactory;\n\n    // No extension elements in the source business object.\n    if (!source.extensionElements || !source.extensionElements.values) return;\n\n    const newExtensionElements = source.extensionElements.values.filter(value =>\n      extensionElements.some(extensionElement => is(value, extensionElement))\n    );\n\n    // Nothing to copy.\n    if (!newExtensionElements.length) return;\n\n    target.extensionElements = bpmnFactory.create('bpmn:ExtensionElements', { values: newExtensionElements });\n  }\n}\n\n\nRemoveElementTemplateHandler.$inject = [\n  'modeling',\n  'elementFactory',\n  'elementRegistry',\n  'canvas',\n  'bpmnFactory',\n  'replace',\n  'commandStack',\n  'moddleCopy'\n];\n","import {\n  forEach\n} from 'min-dash';\n\n/**\n * A handler that combines and executes multiple commands.\n *\n * All updates are bundled on the command stack and executed in one step.\n * This also makes it possible to revert the changes in one step.\n *\n * Example use case: remove the camunda:formKey attribute and in addition\n * add all form fields needed for the camunda:formData property.\n */\nexport default class MultiCommandHandler {\n  constructor(commandStack) {\n    this._commandStack = commandStack;\n  }\n\n  preExecute(context) {\n    const commandStack = this._commandStack;\n\n    forEach(context, function(command) {\n      commandStack.execute(command.cmd, command.context);\n    });\n  }\n}\n\nMultiCommandHandler.$inject = [ 'commandStack' ];","import ChangeElementTemplateHandler from './ChangeElementTemplateHandler';\nimport RemoveElementTemplateHandler from './RemoveElementTemplateHandler';\nimport MultiCommandHandler from '../../element-templates/cmd/MultiCommandHandler';\n\nexport default class ElementTemplatesCommands {\n  constructor(commandStack, elementTemplates, eventBus) {\n    commandStack.registerHandler(\n      'element-templates.multi-command-executor',\n      MultiCommandHandler\n    );\n\n    commandStack.registerHandler(\n      'propertiesPanel.zeebe.changeTemplate',\n      ChangeElementTemplateHandler\n    );\n\n    commandStack.registerHandler(\n      'propertiesPanel.removeTemplate',\n      RemoveElementTemplateHandler\n    );\n\n    // apply default element templates on shape creation\n    eventBus.on([ 'commandStack.shape.create.postExecuted' ], function(event) {\n      const {\n        context: {\n          hints = {},\n          shape\n        }\n      } = event;\n\n      if (hints.createElementsBehavior !== false) {\n        applyDefaultTemplate(shape, elementTemplates, commandStack);\n      }\n    });\n\n    // apply default element templates on connection creation\n    eventBus.on([ 'commandStack.connection.create.postExecuted' ], function(event) {\n      const {\n        context: {\n          hints = {},\n          connection\n        }\n      } = event;\n\n      if (hints.createElementsBehavior !== false) {\n        applyDefaultTemplate(connection, elementTemplates, commandStack);\n      }\n    });\n  }\n}\n\nElementTemplatesCommands.$inject = [ 'commandStack', 'elementTemplates', 'eventBus' ];\n\nfunction applyDefaultTemplate(element, elementTemplates, commandStack) {\n\n  if (!elementTemplates.get(element) && elementTemplates.getDefault(element)) {\n\n    const command = 'propertiesPanel.zeebe.changeTemplate';\n    const commandContext = {\n      element: element,\n      newTemplate: elementTemplates.getDefault(element)\n    };\n\n    commandStack.execute(command, commandContext);\n  }\n}","import ElementTemplateCommands from './ElementTemplateCommands';\n\nexport default {\n  __init__: [ 'elementTemplateCommands' ],\n  elementTemplateCommands: [ 'type', ElementTemplateCommands ]\n};","import { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\nimport { getDefaultValue } from '../Helper';\n\n\nexport default class PropertyBindingProvider {\n  static create(element, options) {\n    const {\n      property\n    } = options;\n\n    const {\n      binding\n    } = property;\n\n    const {\n      name\n    } = binding;\n\n    const value = getDefaultValue(property);\n\n    const businessObject = getBusinessObject(element);\n\n    businessObject[name] = value;\n  }\n}","import {\n  ensureExtension\n} from '../CreateHelper';\nimport { getDefaultValue } from '../Helper';\n\nimport {\n  getTaskDefinitionPropertyName\n} from '../util/taskDefinition';\n\n\nexport default class TaskDefinitionTypeBindingProvider {\n  static create(element, options) {\n    const {\n      property,\n      bpmnFactory\n    } = options;\n\n    const value = getDefaultValue(property);\n    const propertyName = getTaskDefinitionPropertyName(property.binding);\n\n    const taskDefinition = ensureExtension(element, 'zeebe:TaskDefinition', bpmnFactory);\n    taskDefinition.set(propertyName, value);\n  }\n}\n","import {\n  createInputParameter,\n  ensureExtension,\n  shouldUpdate\n} from '../CreateHelper';\n\nimport { getDefaultValue } from '../Helper';\n\n\nexport default class InputBindingProvider {\n  static create(element, options) {\n    const {\n      property,\n      bpmnFactory\n    } = options;\n\n    const {\n      binding\n    } = property;\n\n    const value = getDefaultValue(property);\n\n    const ioMapping = ensureExtension(element, 'zeebe:IoMapping', bpmnFactory);\n\n    if (!shouldUpdate(value, property)) {\n      return;\n    }\n\n    const input = createInputParameter(binding, value, bpmnFactory);\n    input.$parent = ioMapping;\n    ioMapping.get('inputParameters').push(input);\n  }\n}","import {\n  createOutputParameter,\n  ensureExtension,\n  shouldUpdate\n} from '../CreateHelper';\nimport { getDefaultValue } from '../Helper';\n\n\nexport default class OutputBindingProvider {\n  static create(element, options) {\n    const {\n      property,\n      bpmnFactory\n    } = options;\n\n    const {\n      binding\n    } = property;\n\n    const value = getDefaultValue(property);\n\n    const ioMapping = ensureExtension(element, 'zeebe:IoMapping', bpmnFactory);\n\n    if (!shouldUpdate(value, property)) {\n      return;\n    }\n\n    const output = createOutputParameter(binding, value, bpmnFactory);\n    output.$parent = ioMapping;\n    ioMapping.get('outputParameters').push(output);\n  }\n}","import {\n  createTaskHeader,\n  ensureExtension\n} from '../CreateHelper';\nimport { getDefaultValue } from '../Helper';\n\n\nexport default class TaskHeaderBindingProvider {\n  static create(element, options) {\n    const {\n      property,\n      bpmnFactory\n    } = options;\n\n    const {\n      binding\n    } = property;\n\n    const value = getDefaultValue(property);\n\n    const taskHeaders = ensureExtension(element, 'zeebe:TaskHeaders', bpmnFactory);\n\n    const header = createTaskHeader(binding, value, bpmnFactory);\n    header.$parent = taskHeaders;\n    taskHeaders.get('values').push(header);\n  }\n}","import {\n  createZeebeProperty,\n  ensureExtension,\n  shouldUpdate\n} from '../CreateHelper';\nimport { getDefaultValue } from '../Helper';\n\n\nexport default class ZeebePropertiesProvider {\n  static create(element, options) {\n    const {\n      property,\n      bpmnFactory\n    } = options;\n\n    const {\n      binding,\n    } = property;\n\n    const value = getDefaultValue(property);\n\n    const zeebeProperties = ensureExtension(element, 'zeebe:Properties', bpmnFactory);\n\n    if (!shouldUpdate(value, property)) {\n      return;\n    }\n\n    const zeebeProperty = createZeebeProperty(binding, value, bpmnFactory);\n    zeebeProperty.$parent = zeebeProperties;\n    zeebeProperties.get('properties').push(zeebeProperty);\n  }\n}","import { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\nimport { getDefaultValue, getTemplateId } from '../Helper';\n\nexport class MessagePropertyBindingProvider {\n  static create(element, options) {\n    const {\n      bpmnFactory,\n      property\n    } = options;\n\n    const {\n      binding\n    } = property;\n\n    const {\n      name\n    } = binding;\n\n    const value = getDefaultValue(property);\n\n    let businessObject = getBusinessObject(element);\n\n    if (is(businessObject, 'bpmn:Event')) {\n      businessObject = businessObject.get('eventDefinitions')[0];\n    }\n\n    let message = businessObject.get('messageRef');\n\n    if (!message) {\n      message = bpmnFactory.create('bpmn:Message', { 'zeebe:modelerTemplate': getTemplateId(element) });\n      businessObject.set('messageRef', message);\n    }\n\n    message.set(name, value);\n  }\n}\n","import { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  ensureExtension,\n  shouldUpdate\n} from '../CreateHelper';\nimport { getDefaultValue, getTemplateId } from '../Helper';\n\nexport class MessageZeebeSubscriptionBindingProvider {\n  static create(element, options) {\n    const {\n      bpmnFactory,\n      property\n    } = options;\n\n    const {\n      binding\n    } = property;\n\n    const {\n      name\n    } = binding;\n\n    const value = getDefaultValue(property);\n\n    let businessObject = getBusinessObject(element);\n    if (is(businessObject, 'bpmn:Event')) {\n      businessObject = businessObject.get('eventDefinitions')[0];\n    }\n\n    let message = businessObject.get('messageRef');\n    if (!message) {\n      message = bpmnFactory.create('bpmn:Message', { 'zeebe:modelerTemplate': getTemplateId(element) });\n      businessObject.set('messageRef', message);\n    }\n\n    const subscription = ensureExtension(message, 'zeebe:Subscription', bpmnFactory);\n\n    if (!shouldUpdate(value, property)) {\n      return;\n    }\n\n    subscription.set(name, value);\n  }\n}\n","import {\n  ensureExtension\n} from '../CreateHelper';\nimport { getDefaultValue } from '../Helper';\n\n\nexport class CalledElementBindingProvider {\n  static create(element, options) {\n    const {\n      property,\n      bpmnFactory\n    } = options;\n\n    const {\n      binding\n    } = property;\n\n    const {\n      property: propertyName\n    } = binding;\n\n    const value = getDefaultValue(property);\n\n    const calledElement = ensureExtension(element, 'zeebe:CalledElement', bpmnFactory);\n\n    // TODO(@barmac): remove if we decide to support propagation in templates\n    ensureNoPropagation(calledElement);\n\n    calledElement.set(propertyName, value);\n  }\n}\n\nfunction ensureNoPropagation(calledElement) {\n  calledElement.set('propagateAllChildVariables', false);\n  calledElement.set('propagateAllParentVariables', false);\n}\n","import { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\nimport { createElement } from '../../utils/ElementUtil';\n\nimport {\n  ensureExtension\n} from '../CreateHelper';\nimport { getDefaultValue } from '../Helper';\n\n\nexport default class LinkedResourcePropertyBindingProvider {\n  static create(element, options) {\n    const {\n      property,\n      bpmnFactory\n    } = options;\n\n    const {\n      binding: {\n        property: bindingProperty,\n        linkName\n      }\n    } = property;\n\n    const value = getDefaultValue(property);\n\n    const bo = getBusinessObject(element);\n    const linkedResources = ensureExtension(element, 'zeebe:LinkedResources', bpmnFactory);\n\n    let linkedResource = linkedResources.get('values').find(linkedResource => linkedResource.get('linkName') === linkName);\n\n    if (!linkedResource) {\n      linkedResource = createElement('zeebe:LinkedResource', { linkName }, bo, bpmnFactory);\n      linkedResources.get('values').push(linkedResource);\n    }\n\n    linkedResource.set(bindingProperty, value);\n  }\n}\n","import {\n  getBusinessObject,\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  isString,\n  isUndefined, without\n} from 'min-dash';\n\nimport {\n  EXTENSION_BINDING_TYPES,\n  IO_BINDING_TYPES,\n  MESSAGE_BINDING_TYPES,\n  MESSAGE_PROPERTY_TYPE,\n  MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE,\n  PROPERTY_BINDING_TYPES,\n  TASK_DEFINITION_TYPES,\n  ZEEBE_TASK_DEFINITION_TYPE_TYPE,\n  ZEEBE_TASK_DEFINITION,\n  ZEBBE_INPUT_TYPE,\n  ZEEBE_OUTPUT_TYPE,\n  ZEEBE_PROPERTY_TYPE,\n  ZEEBE_TASK_HEADER_TYPE,\n  ZEEBE_CALLED_ELEMENT,\n  ZEEBE_LINKED_RESOURCE_PROPERTY\n} from './bindingTypes';\n\nimport {\n  getTaskDefinitionPropertyName\n} from './taskDefinition';\n\nimport {\n  findExtension,\n  findTaskHeader,\n  findInputParameter,\n  findMessage,\n  findOutputParameter,\n  findZeebeProperty,\n  findZeebeSubscription,\n  getTemplateId\n} from '../Helper';\n\nimport {\n  createInputParameter,\n  createOutputParameter,\n  createTaskDefinition,\n  createTaskHeader,\n  createZeebeProperty,\n  shouldUpdate\n} from '../CreateHelper';\n\nimport { createElement } from '../../utils/ElementUtil';\n\nconst PRIMITIVE_MODDLE_TYPES = [\n  'Boolean',\n  'Integer',\n  'String'\n];\n\nexport function getPropertyValue(element, property, scope) {\n  const rawValue = getRawPropertyValue(element, property, scope);\n\n  const { type } = property;\n\n  if (type === 'Boolean') {\n    return getBooleanPropertyValue(rawValue);\n  }\n\n  return rawValue;\n}\n\nfunction getRawPropertyValue(element, property, scope) {\n  let businessObject = getBusinessObject(element);\n\n  const defaultValue = '';\n\n  const {\n    binding\n  } = property;\n\n  const {\n    name,\n    property: bindingProperty,\n    type,\n    linkName\n  } = binding;\n\n  // property\n  if (type === 'property') {\n    const value = businessObject.get(name);\n\n    if (!isUndefined(value)) {\n      return value;\n    }\n\n    return defaultValue;\n  }\n\n  // zeebe:taskDefinition\n  if (TASK_DEFINITION_TYPES.includes(type)) {\n\n    const taskDefinition = findExtension(businessObject, 'zeebe:TaskDefinition');\n\n    if (taskDefinition) {\n      if (type === ZEEBE_TASK_DEFINITION_TYPE_TYPE) {\n        return taskDefinition.get('type');\n      } else if (type === ZEEBE_TASK_DEFINITION) {\n        return taskDefinition.get(bindingProperty);\n      }\n    }\n\n    return defaultValue;\n  }\n\n  if (IO_BINDING_TYPES.includes(type)) {\n    const ioMapping = findExtension(businessObject, 'zeebe:IoMapping');\n\n    if (!ioMapping) {\n      return defaultValue;\n    }\n\n    // zeebe:Input\n    if (type === ZEBBE_INPUT_TYPE) {\n      const inputParameter = findInputParameter(ioMapping, binding);\n\n      if (inputParameter) {\n        return inputParameter.get('source');\n      }\n\n      return defaultValue;\n    }\n\n    // zeebe:Output\n    if (type === ZEEBE_OUTPUT_TYPE) {\n      const outputParameter = findOutputParameter(ioMapping, binding);\n\n      if (outputParameter) {\n        return outputParameter.get('target');\n      }\n\n      return defaultValue;\n    }\n  }\n\n  // zeebe:taskHeaders\n  if (type === ZEEBE_TASK_HEADER_TYPE) {\n    const taskHeaders = findExtension(businessObject, 'zeebe:TaskHeaders');\n\n    if (!taskHeaders) {\n      return defaultValue;\n    }\n\n    const header = findTaskHeader(taskHeaders, binding);\n\n    if (header) {\n      return header.get('value');\n    }\n\n    return defaultValue;\n  }\n\n  // zeebe:Property\n  if (type === ZEEBE_PROPERTY_TYPE) {\n    const zeebeProperties = findExtension(businessObject, 'zeebe:Properties');\n\n    if (zeebeProperties) {\n      const zeebeProperty = findZeebeProperty(zeebeProperties, binding);\n\n      if (zeebeProperty) {\n        return zeebeProperty.get('value');\n      }\n    }\n\n    return defaultValue;\n  }\n\n  // bpmn:Message#property\n  if (type === MESSAGE_PROPERTY_TYPE) {\n    const message = findMessage(businessObject);\n\n    const value = message ? message.get(name) : undefined;\n\n    if (!isUndefined(value)) {\n      return value;\n    }\n\n    return defaultValue;\n  }\n\n  // bpmn:Message#zeebe:subscription#property\n  if (type === MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE) {\n    const message = findMessage(businessObject);\n\n    if (message) {\n      const subscription = findExtension(message, 'zeebe:Subscription');\n\n      const value = subscription ? subscription.get(name) : undefined;\n\n      if (!isUndefined(value)) {\n        return subscription.get(name);\n      }\n    }\n\n    return defaultValue;\n  }\n\n  // zeebe:calledElement\n  if (type === ZEEBE_CALLED_ELEMENT) {\n    const calledElement = findExtension(businessObject, 'zeebe:CalledElement');\n\n    return calledElement ? calledElement.get(bindingProperty) : defaultValue;\n  }\n\n  if (type === ZEEBE_LINKED_RESOURCE_PROPERTY) {\n    const linkedResources = findExtension(businessObject, 'zeebe:LinkedResources');\n\n    if (!linkedResources) {\n      return defaultValue;\n    }\n\n    const linkedResource = linkedResources.get('values').find((value) => value.get('linkName') === linkName);\n\n    return linkedResource ? linkedResource.get(bindingProperty) : defaultValue;\n  }\n\n  // should never throw as templates are validated beforehand\n  throw unknownBindingError(element, property);\n}\n\n/**\n * Cast a string value to a boolean if possible. Otherwise return the value.\n * Cannot always cast due to FEEL expressions.\n *\n * @param {string|boolean} value\n */\nfunction getBooleanPropertyValue(value) {\n  switch (value) {\n  case 'true':\n    return true;\n  case 'false':\n    return false;\n  }\n\n  return value;\n}\n\nconst NO_OP = null;\n\nexport function setPropertyValue(bpmnFactory, commandStack, element, property, value) {\n  let businessObject = getBusinessObject(element);\n\n  const {\n    binding,\n  } = property;\n\n  const {\n    name,\n    type,\n    property: bindingProperty,\n    linkName\n  } = binding;\n\n  let extensionElements;\n\n  let propertyValue;\n\n  const commands = [];\n\n  const context = {\n    element,\n    property\n  };\n\n  // ensure message exists\n  if (MESSAGE_BINDING_TYPES.includes(type)) {\n    if (is(businessObject, 'bpmn:Event')) {\n      businessObject = businessObject.get('eventDefinitions')[0];\n    }\n\n    let message = findMessage(businessObject);\n\n    if (!message) {\n      message = bpmnFactory.create('bpmn:Message', { 'zeebe:modelerTemplate': getTemplateId(element) });\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: businessObject,\n          properties: { messageRef: message }\n        }\n      });\n    }\n\n    businessObject = message;\n  }\n\n  // ensure extension elements\n  if (EXTENSION_BINDING_TYPES.includes(type)) {\n    extensionElements = businessObject.get('extensionElements');\n\n    if (!extensionElements) {\n      extensionElements = createElement('bpmn:ExtensionElements', null, businessObject, bpmnFactory);\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: businessObject,\n          properties: { extensionElements }\n        }\n      });\n    } else {\n      commands.push(NO_OP);\n    }\n  }\n\n  // property\n  if (PROPERTY_BINDING_TYPES.includes(type)) {\n\n    const propertyDescriptor = businessObject.$descriptor.propertiesByName[ name ];\n\n    // if property not created yet\n    if (!propertyDescriptor) {\n\n      // make sure we create the property\n      propertyValue = value || '';\n    }\n\n    else {\n      const { type: propertyType } = propertyDescriptor;\n\n      // do not override non-primitive types\n      if (!PRIMITIVE_MODDLE_TYPES.includes(propertyType)) {\n        throw new Error(`cannot set property of type <${ propertyType }>`);\n      }\n\n      if (propertyType === 'Boolean') {\n        propertyValue = !!value;\n      } else if (propertyType === 'Integer') {\n        propertyValue = parseInt(value, 10);\n\n        if (isNaN(propertyValue)) {\n\n          // do not set NaN value\n          propertyValue = undefined;\n        }\n      } else {\n\n        // make sure we don't remove the property\n        propertyValue = value || '';\n      }\n    }\n\n    if (!isUndefined(propertyValue)) {\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: businessObject,\n          properties: { [ name ]: propertyValue }\n        }\n      });\n    } else {\n      commands.push(NO_OP);\n    }\n\n  }\n\n  // zeebe:taskDefinition\n  if (TASK_DEFINITION_TYPES.includes(type)) {\n    const oldTaskDefinition = findExtension(extensionElements, 'zeebe:TaskDefinition'),\n          propertyName = getTaskDefinitionPropertyName(binding),\n          properties = {\n            [ propertyName ]: value || ''\n          };\n\n    if (oldTaskDefinition) {\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          properties,\n          moddleElement: oldTaskDefinition\n        }\n      });\n    } else {\n      const newTaskDefinition = createTaskDefinition(properties, bpmnFactory);\n      newTaskDefinition.$parent = businessObject;\n\n      const values = extensionElements.get('values');\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: extensionElements,\n          properties: { values: [ ...values, newTaskDefinition ] }\n        }\n      });\n    }\n  }\n\n  if (IO_BINDING_TYPES.includes(type)) {\n    let ioMapping = findExtension(extensionElements, 'zeebe:IoMapping');\n\n    if (!ioMapping) {\n      ioMapping = createElement('zeebe:IoMapping', null, businessObject, bpmnFactory);\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: extensionElements,\n          properties: { values: [ ...extensionElements.get('values'), ioMapping ] }\n        }\n      });\n    }\n\n    // zeebe:Input\n    if (type === ZEBBE_INPUT_TYPE) {\n      const oldZeebeInputParameter = findInputParameter(ioMapping, binding);\n      const values = ioMapping.get('inputParameters').filter((value) => value !== oldZeebeInputParameter);\n\n      // do not persist empty parameters when configured as <optional>\n      if (shouldUpdate(value, property)) {\n        const newZeebeInputParameter = createInputParameter(binding, value, bpmnFactory);\n        values.push(newZeebeInputParameter);\n      }\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: ioMapping,\n          properties: { inputParameters: [ ...values ] }\n        }\n      });\n    }\n\n    // zeebe:Output\n    if (type === ZEEBE_OUTPUT_TYPE) {\n      const oldZeebeOutputParameter = findOutputParameter(ioMapping, binding);\n      const values = ioMapping.get('outputParameters').filter((value) => value !== oldZeebeOutputParameter);\n\n      // do not persist empty parameters when configured as <optional>\n      if (shouldUpdate(value, property)) {\n        const newZeebeOutputParameter = createOutputParameter(binding, value, bpmnFactory);\n        values.push(newZeebeOutputParameter);\n      }\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: ioMapping,\n          properties: { 'outputParameters': [ ...values ] }\n        }\n      });\n    }\n  }\n\n  // zeebe:taskHeaders\n  if (type === ZEEBE_TASK_HEADER_TYPE) {\n    let taskHeaders = findExtension(extensionElements, 'zeebe:TaskHeaders');\n\n    if (!taskHeaders) {\n      taskHeaders = createElement('zeebe:TaskHeaders', null, businessObject, bpmnFactory);\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: extensionElements,\n          properties: { values: [ ...extensionElements.get('values'), taskHeaders ] }\n        }\n      });\n    }\n\n    const oldTaskHeader = findTaskHeader(taskHeaders, binding);\n\n    const values = taskHeaders.get('values').filter((value) => value !== oldTaskHeader);\n\n    // do not persist task headers with empty value\n    if (!value) {\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: taskHeaders,\n          properties: { values }\n        }\n      });\n    } else {\n      const newTaskHeader = createTaskHeader(binding, value, bpmnFactory);\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: taskHeaders,\n          properties: { values: [ ...values, newTaskHeader ] }\n        }\n      });\n    }\n  }\n\n  // zeebe:Property\n  if (type === ZEEBE_PROPERTY_TYPE) {\n    let zeebeProperties = findExtension(extensionElements, 'zeebe:Properties');\n\n    if (!zeebeProperties) {\n      zeebeProperties = createElement('zeebe:Properties', null, businessObject, bpmnFactory);\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          element,\n          moddleElement: extensionElements,\n          properties: {\n            values: [ ...extensionElements.get('values'), zeebeProperties ]\n          }\n        }\n      });\n    }\n\n    const oldZeebeProperty = findZeebeProperty(zeebeProperties, binding);\n\n    const properties = zeebeProperties.get('properties').filter((property) => property !== oldZeebeProperty);\n\n    if (shouldUpdate(value, property)) {\n      const newZeebeProperty = createZeebeProperty(binding, value, bpmnFactory);\n\n      properties.push(newZeebeProperty);\n    }\n\n    commands.push({\n      cmd: 'element.updateModdleProperties',\n      context: {\n        element,\n        moddleElement: zeebeProperties,\n        properties: {\n          properties\n        }\n      }\n    });\n  }\n\n  // bpmn:Message#zeebe:subscription#property\n  if (type === MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE) {\n    let subscription = findExtension(extensionElements, 'zeebe:Subscription');\n    const properties = {\n      [ name ]: value || ''\n    };\n\n    if (subscription) {\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          element,\n          properties,\n          moddleElement: subscription\n        }\n      });\n    } else {\n      subscription = createElement('zeebe:Subscription', properties, extensionElements, bpmnFactory);\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: extensionElements,\n          properties: { values: [ ...extensionElements.get('values'), subscription ] }\n        }\n      });\n    }\n  }\n\n  // zeebe:calledElement\n  if (type === ZEEBE_CALLED_ELEMENT) {\n    let calledElement = findExtension(element, 'zeebe:CalledElement');\n    const propertyName = binding.property;\n\n    const properties = {\n      [ propertyName ]: value || ''\n    };\n\n    if (calledElement) {\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          element,\n          properties,\n          moddleElement: calledElement\n        }\n      });\n    } else {\n      calledElement = createElement('zeebe:CalledElement', properties, extensionElements, bpmnFactory);\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: extensionElements,\n          properties: { values: [ ...extensionElements.get('values'), calledElement ] }\n        }\n      });\n    }\n  }\n\n  if (type === ZEEBE_LINKED_RESOURCE_PROPERTY) {\n    let linkedResources = findExtension(businessObject, 'zeebe:LinkedResources');\n\n    if (!linkedResources) {\n      linkedResources = createElement('zeebe:LinkedResources', null, businessObject, bpmnFactory);\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: extensionElements,\n          properties: { values: [ ...extensionElements.get('values'), linkedResources ] }\n        }\n      });\n    }\n\n    let linkedResource = linkedResources.get('values').find((value) => value.get('linkName') === linkName);\n\n    if (!linkedResource) {\n      linkedResource = createElement('zeebe:LinkedResource', { linkName }, businessObject, bpmnFactory);\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: linkedResources,\n          properties: { values: [ ...linkedResources.get('values'), linkedResource ] }\n        }\n      });\n    }\n\n    commands.push({\n      cmd: 'element.updateModdleProperties',\n      context: {\n        ...context,\n        moddleElement: linkedResource,\n        properties: { [ bindingProperty ]: value }\n      }\n    });\n  }\n\n  if (commands.length) {\n    const commandsToExecute = commands.filter((command) => command !== NO_OP);\n\n    commandsToExecute.length && commandStack.execute(\n      'element-templates.multi-command-executor',\n      commandsToExecute\n    );\n\n    return;\n  }\n\n  // should never throw as templates are validated beforehand\n  throw unknownBindingError(element, property);\n}\n\n\nexport function unsetProperty(commandStack, element, property) {\n  let businessObject = getBusinessObject(element);\n\n  const {\n    binding\n  } = property;\n\n  const {\n    type\n  } = binding;\n\n  let extensionElements;\n\n  const commands = [];\n\n  const context = {\n    element,\n    property\n  };\n\n  if (MESSAGE_BINDING_TYPES.includes(type)) {\n    businessObject = findMessage(businessObject);\n\n    if (!businessObject) {\n      return;\n    }\n  }\n\n  // property\n  if (PROPERTY_BINDING_TYPES.includes(type)) {\n    const { name } = binding;\n\n    commands.push({\n      cmd: 'element.updateModdleProperties',\n      context: {\n        ...context,\n        moddleElement: businessObject,\n        properties: { [ name ]: undefined }\n      }\n    });\n  }\n\n\n  if (EXTENSION_BINDING_TYPES.includes(type)) {\n    extensionElements = businessObject.get('extensionElements');\n    if (!extensionElements)\n      return;\n  }\n\n  // zeebe:taskDefinition\n  if (TASK_DEFINITION_TYPES.includes(type)) {\n    const oldTaskDefinition = findExtension(extensionElements, 'zeebe:TaskDefinition');\n\n    const propertyName = getTaskDefinitionPropertyName(binding);\n\n    if (oldTaskDefinition) {\n\n      if (isOnlyProperty(oldTaskDefinition, propertyName)) {\n\n        // remove task definition\n        commands.push({\n          cmd: 'element.updateModdleProperties',\n          context: {\n            ...context,\n            moddleElement: extensionElements,\n            properties: {\n              values: without(extensionElements.get('values'), oldTaskDefinition)\n            }\n          }\n        });\n      } else {\n\n        // remove property\n        commands.push({\n          cmd: 'element.updateModdleProperties',\n          context: {\n            ...context,\n            moddleElement: oldTaskDefinition,\n            properties: {\n              [ propertyName ]: undefined\n            }\n          }\n        });\n      }\n    }\n  }\n\n\n  // zeebe:IoMapping\n  if (IO_BINDING_TYPES.includes(type)) {\n    let ioMapping = findExtension(extensionElements, 'zeebe:IoMapping');\n\n    if (!ioMapping)\n      return;\n\n    // zeebe:Input\n    if (type === ZEBBE_INPUT_TYPE) {\n      const oldZeebeInputParameter = findInputParameter(ioMapping, binding);\n      const values = ioMapping.get('inputParameters').filter((value) => value !== oldZeebeInputParameter);\n\n      if (ioMapping.get('outputParameters').length == 0 && values.length == 0) {\n\n        commands.push({\n          cmd: 'element.updateModdleProperties',\n          context: {\n            ...context,\n            moddleElement: extensionElements,\n            properties: {\n              values:  without(extensionElements.get('values'), ioMapping)\n            }\n          }\n        });\n      }\n\n      else {\n        commands.push({\n          cmd: 'element.updateModdleProperties',\n          context: {\n            ...context,\n            moddleElement: ioMapping,\n            properties: { inputParameters: [ ...values ] }\n          }\n        });\n      }\n    }\n\n    // zeebe:Output\n    if (type === ZEEBE_OUTPUT_TYPE) {\n      const oldZeebeOutputParameter = findOutputParameter(ioMapping, binding);\n      const values = ioMapping.get('outputParameters').filter((value) => value !== oldZeebeOutputParameter);\n\n      if (ioMapping.get('inputParameters').length == 0 && values.length == 0) {\n\n        commands.push({\n          cmd: 'element.updateModdleProperties',\n          context: {\n            ...context,\n            moddleElement: extensionElements,\n            properties: {\n              values: without(extensionElements.get('values'), ioMapping)\n            }\n          }\n        });\n      }\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: ioMapping,\n          properties: { 'outputParameters': [ ...values ] }\n        }\n      });\n    }\n  }\n\n  // zeebe:taskHeaders\n  if (type === ZEEBE_TASK_HEADER_TYPE) {\n    let taskHeaders = findExtension(extensionElements, 'zeebe:TaskHeaders');\n\n    if (!taskHeaders)\n      return;\n\n    const oldTaskHeader = findTaskHeader(taskHeaders, binding);\n\n    const values = taskHeaders.get('values').filter((value) => value !== oldTaskHeader);\n\n    if (values.length === 0) {\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: extensionElements,\n          properties: {\n            values: without(extensionElements.get('values'), taskHeaders)\n          }\n        }\n      });\n    }\n    else {\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: taskHeaders,\n          properties: { values: [ ...values ] }\n        }\n      });\n    }\n  }\n\n  // zeebe:Property\n  if (type === ZEEBE_PROPERTY_TYPE) {\n    let zeebeProperties = findExtension(extensionElements, 'zeebe:Properties');\n\n    if (!zeebeProperties)\n      return;\n\n    const oldZeebeProperty = findZeebeProperty(zeebeProperties, binding);\n\n    const properties = zeebeProperties.get('properties').filter((property) => property !== oldZeebeProperty);\n\n    if (!properties.length) {\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: extensionElements,\n          properties: {\n            values: without(extensionElements.get('values'), zeebeProperties)\n          }\n        }\n      });\n    } else {\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: zeebeProperties,\n          properties: {\n            properties: [ ...properties ]\n          }\n        }\n      });\n    }\n  }\n\n  // bpmn:Message#property\n  if (type === MESSAGE_PROPERTY_TYPE) {\n    commands.push({\n      cmd: 'element.updateModdleProperties',\n      context: {\n        ...context,\n        moddleElement: businessObject,\n        properties: {\n          [ binding.name ]: undefined\n        }\n      }\n    });\n  }\n\n  // bpmn:Message#zeebe:subscription#property\n  if (type === MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE) {\n    const subscription = findZeebeSubscription(businessObject);\n\n    if (!subscription) {\n      return;\n    }\n\n    commands.push({\n      cmd: 'element.updateModdleProperties',\n      context: {\n        ...context,\n        moddleElement: subscription,\n        properties: {\n          [ binding.name ]: undefined\n        }\n      }\n    });\n  }\n\n\n  if (commands.length) {\n    commandStack.execute(\n      'element-templates.multi-command-executor',\n      commands\n    );\n\n    return;\n  }\n}\n\n// TODO(@barmac): fix translate usage (https://github.com/bpmn-io/bpmn-js-element-templates/pull/53#issuecomment-1906203270)\nexport function validateProperty(value, property, translate = defaultTranslate) {\n  const {\n    constraints = {},\n    label\n  } = property;\n\n  const {\n    maxLength,\n    minLength,\n    notEmpty\n  } = constraints;\n\n  if (notEmpty && isEmpty(value)) {\n    return `${label} ${translate('must not be empty.')}`;\n  }\n\n  if (property.feel && isFeel(value)) {\n    return;\n  }\n\n  if (maxLength && (value || '').length > maxLength) {\n    return `${label} ${translate('must have max length {maxLength}.', { maxLength })}`;\n  }\n\n  if (minLength && (value || '').length < minLength) {\n    return `${label} ${translate('must have min length {minLength}.', { minLength })}`;\n  }\n\n  let { pattern } = constraints;\n\n  if (pattern) {\n    let message;\n\n    if (!isString(pattern)) {\n      message = pattern.message;\n      pattern = pattern.value;\n    }\n\n    if (!matchesPattern(value, pattern)) {\n      if (message) {\n        return `${label} ${translate(message)}`;\n      }\n\n      return `${label} ${translate('must match pattern {pattern}.', { pattern })}`;\n    }\n  }\n}\n\n// helpers\nfunction unknownBindingError(element, property) {\n  const businessObject = getBusinessObject(element);\n\n  const id = businessObject.get('id');\n\n  const { binding } = property;\n\n  const { type } = binding;\n\n  return new Error(`unknown binding <${ type }> for element <${ id }>, this should never happen`);\n}\n\nfunction isEmpty(value) {\n  if (typeof value === 'string') {\n    return !value.trim().length;\n  }\n\n  return value === undefined;\n}\n\nfunction matchesPattern(string, pattern) {\n  return new RegExp(pattern).test(string);\n}\n\nfunction isOnlyProperty(moddleElement, propertyName) {\n  const descriptor = moddleElement.$descriptor;\n\n  return descriptor.properties.every(({ name }) => {\n    return propertyName === name || moddleElement.get(name) === undefined;\n  });\n}\n\nfunction defaultTranslate(template, replacements) {\n\n  replacements = replacements || {};\n\n  return template.replace(/{([^}]+)}/g, function(_, key) {\n    return replacements[key] || '{' + key + '}';\n  });\n}\n\nfunction isFeel(value) {\n  return isString(value) && value.trim().startsWith('=');\n}","import { isEventSubProcess } from 'bpmn-js/lib/util/DiUtil';\nimport { getPropertyValue } from './util/propertyUtil';\nimport { is } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * Based on conditions, remove properties from the template.\n */\nexport function applyConditions(element, elementTemplate) {\n  const { properties } = elementTemplate;\n\n  const filteredProperties = properties.filter(property => {\n    return isPropertyAllowed(element, property) && isConditionMet(element, properties, property);\n  });\n\n  return {\n    ...elementTemplate,\n    properties: filteredProperties\n  };\n}\n\nexport function isConditionMet(element, properties, property) {\n  const { condition } = property;\n\n  // If no condition is defined, return true.\n  if (!condition) {\n    return true;\n  }\n\n  // multiple (\"and\") conditions\n  if (condition.allMatch) {\n    const conditions = condition.allMatch;\n\n    return conditions.every(\n      condition => isSimpleConditionMet(element, properties, condition)\n    );\n  }\n\n  // single condition\n  return isSimpleConditionMet(element, properties, condition);\n}\n\nfunction isSimpleConditionMet(element, properties, condition) {\n  const { property, equals, oneOf, isActive } = condition;\n\n  if (typeof isActive !== 'undefined') {\n    const relatedCondition = properties.find(p => p.id === property);\n\n    if (!relatedCondition) {\n      return !isActive;\n    }\n\n    return isActive ? isConditionMet(element, properties, relatedCondition) : !isConditionMet(element, properties, relatedCondition);\n  }\n\n  const propertyValue = getValue(element, properties, property);\n\n  if (hasProperty(condition, 'equals')) {\n    return propertyValue === equals;\n  }\n\n  if (oneOf) {\n    return oneOf.includes(propertyValue);\n  }\n\n  return false;\n}\n\nexport function getValue(element, properties, propertyId) {\n  const property = properties.find(p => p.id === propertyId);\n\n  if (!property) {\n    return;\n  }\n\n  return getPropertyValue(element, property);\n}\n\nfunction isPropertyAllowed(element, property) {\n  const { binding } = property;\n  const { type } = binding;\n\n  if (\n    type === 'bpmn:Message#zeebe:subscription#property' &&\n    binding.name === 'correlationKey' &&\n    is(element, 'bpmn:StartEvent') &&\n    !isEventSubProcess(element.parent)\n  ) {\n    return false;\n  }\n\n  return true;\n}\n\n\n// helpers //////////////////////\n\nfunction hasProperty(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}","import {\n  getBusinessObject\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport { find } from 'min-dash';\n\nimport PropertyBindingProvider from './PropertyBindingProvider';\nimport TaskDefinitionBindingProvider from './TaskDefinitionBindingProvider';\nimport InputBindingProvider from './InputBindingProvider';\nimport OutputBindingProvider from './OutputBindingProvider';\nimport TaskHeaderBindingProvider from './TaskHeaderBindingProvider';\nimport ZeebePropertiesProvider from './ZeebePropertiesProvider';\nimport { MessagePropertyBindingProvider } from './MessagePropertyBindingProvider';\nimport { MessageZeebeSubscriptionBindingProvider } from './MessageZeebeSubscriptionBindingProvider';\nimport { CalledElementBindingProvider } from './CalledElementBindingProvider';\nimport LinkedResourcePropertyBindingProvider from './LinkedResourceProvider';\n\nimport {\n  MESSAGE_PROPERTY_TYPE,\n  MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE,\n  PROPERTY_TYPE,\n  ZEEBE_TASK_DEFINITION_TYPE_TYPE,\n  ZEEBE_TASK_DEFINITION,\n  ZEBBE_INPUT_TYPE,\n  ZEEBE_OUTPUT_TYPE,\n  ZEEBE_TASK_HEADER_TYPE,\n  ZEBBE_PROPERTY_TYPE,\n  ZEEBE_CALLED_ELEMENT,\n  ZEEBE_LINKED_RESOURCE_PROPERTY\n} from '../util/bindingTypes';\n\nimport {\n  isConditionMet\n} from '../Condition';\n\nexport default class TemplateElementFactory {\n\n  constructor(bpmnFactory, elementFactory) {\n    this._bpmnFactory = bpmnFactory;\n    this._elementFactory = elementFactory;\n\n    this._providers = {\n      [PROPERTY_TYPE]: PropertyBindingProvider,\n      [ZEEBE_TASK_DEFINITION_TYPE_TYPE]: TaskDefinitionBindingProvider,\n      [ZEEBE_TASK_DEFINITION]: TaskDefinitionBindingProvider,\n      [ZEBBE_PROPERTY_TYPE]: ZeebePropertiesProvider,\n      [ZEBBE_INPUT_TYPE]: InputBindingProvider,\n      [ZEEBE_OUTPUT_TYPE]: OutputBindingProvider,\n      [ZEEBE_TASK_HEADER_TYPE]: TaskHeaderBindingProvider,\n      [MESSAGE_PROPERTY_TYPE]: MessagePropertyBindingProvider,\n      [MESSAGE_ZEEBE_SUBSCRIPTION_PROPERTY_TYPE]: MessageZeebeSubscriptionBindingProvider,\n      [ZEEBE_CALLED_ELEMENT]: CalledElementBindingProvider,\n      [ZEEBE_LINKED_RESOURCE_PROPERTY]: LinkedResourcePropertyBindingProvider\n    };\n  }\n\n  /**\n   * Create an element based on an element template.\n   *\n   * @param {ElementTemplate} template\n   * @returns {djs.model.Base}\n   */\n  create(template) {\n\n    const {\n      properties\n    } = template;\n\n    // (1) base shape\n    const element = this._createShape(template);\n\n    // (2) apply template\n    this._setModelerTemplate(element, template);\n\n    // (3) apply icon\n    if (hasIcon(template)) {\n      this._setModelerTemplateIcon(element, template);\n    }\n\n    // (4) apply properties\n    this._applyProperties(element, properties);\n\n    return element;\n  }\n\n  _createShape(template) {\n    const {\n      appliesTo,\n      elementType = {}\n    } = template;\n    const elementFactory = this._elementFactory;\n\n    const attrs = {\n      type: elementType.value || appliesTo[0]\n    };\n\n    // apply eventDefinition\n    if (elementType.eventDefinition) {\n      attrs.eventDefinitionType = elementType.eventDefinition;\n    }\n\n    const element = elementFactory.createShape(attrs);\n\n    return element;\n  }\n\n  _ensureExtensionElements(element) {\n    const bpmnFactory = this._bpmnFactory;\n    const businessObject = getBusinessObject(element);\n\n    let extensionElements = businessObject.get('extensionElements');\n\n    if (!extensionElements) {\n      extensionElements = bpmnFactory.create('bpmn:ExtensionElements', {\n        values: []\n      });\n\n      extensionElements.$parent = businessObject;\n      businessObject.set('extensionElements', extensionElements);\n    }\n\n    return extensionElements;\n  }\n\n  _setModelerTemplate(element, template) {\n    const {\n      id,\n      version\n    } = template;\n\n    const businessObject = getBusinessObject(element);\n\n    businessObject.set('zeebe:modelerTemplate', id);\n    businessObject.set('zeebe:modelerTemplateVersion', version);\n  }\n\n  _setModelerTemplateIcon(element, template) {\n    const {\n      icon\n    } = template;\n\n    const {\n      contents\n    } = icon;\n\n    const businessObject = getBusinessObject(element);\n\n    businessObject.set('zeebe:modelerTemplateIcon', contents);\n  }\n\n  /**\n   * Apply properties to a given element.\n   *\n   * @param {djs.model.Base} element\n   * @param {Array<Object>} properties\n   */\n  _applyProperties(element, properties) {\n    const processedProperties = [];\n\n    properties.forEach(\n      property => this._applyProperty(element, property, properties, processedProperties)\n    );\n  }\n\n  /**\n   * Apply a property and its parent properties to an element based on conditions.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} property\n   * @param {Array<Object>} properties\n   * @param {Array<Object>} processedProperties\n   */\n  _applyProperty(element, property, properties, processedProperties) {\n\n    // skip if already processed\n    if (processedProperties.includes(property)) {\n      return;\n    }\n\n    // apply dependant property first if not already applied\n    const dependentProperties = findDependentProperties(property, properties);\n\n    dependentProperties.forEach(\n      property => this._applyProperty(element, property, properties, processedProperties)\n    );\n\n    // check condition and apply property if condition is met\n    if (isConditionMet(element, properties, property)) {\n      this._bindProperty(property, element);\n    }\n\n    processedProperties.push(property);\n  }\n\n  /**\n   * Bind property to element.\n   * @param {Object} property\n   * @param {djs.Model.Base} element\n   */\n  _bindProperty(property, element) {\n    const {\n      binding\n    } = property;\n\n    const {\n      type: bindingType\n    } = binding;\n\n    const bindingProvider = this._providers[bindingType];\n\n    bindingProvider.create(element, {\n      property,\n      bpmnFactory: this._bpmnFactory\n    });\n  }\n}\n\nTemplateElementFactory.$inject = [ 'bpmnFactory', 'elementFactory' ];\n\n\n// helper ////////////////\n\nfunction hasIcon(template) {\n  const {\n    icon\n  } = template;\n\n  return !!(icon && icon.contents);\n}\n\nfunction findDependentProperties(property, properties) {\n\n  const {\n    condition\n  } = property;\n\n  if (!condition) {\n    return [];\n  }\n\n  const dependentProperty = findProperyById(properties, condition.property);\n\n  if (dependentProperty) {\n    return [ dependentProperty ];\n  }\n\n  return [];\n}\n\nfunction findProperyById(properties, id) {\n  return find(properties, function(property) {\n    return property.id === id;\n  });\n}","import TemplateElementFactory from './TemplateElementFactory';\n\nexport default {\n  __init__: [\n    'templateElementFactory'\n  ],\n  templateElementFactory: [ 'type', TemplateElementFactory ]\n};\n","import {\n  applyConditions\n} from '../Condition';\n\nimport { isObject } from 'min-dash';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { ZEEBE_TASK_DEFINITION, ZEEBE_TASK_DEFINITION_TYPE_TYPE } from '../util/bindingTypes';\n\n\n/**\n * Checks the conditions of an element template and sets/resets the\n * corresponding properties on the element.\n */\nexport default class ConditionalBehavior extends CommandInterceptor {\n\n  /**\n   * @param {import('diagram-js/lib/core/EventBus').default} eventBus\n   * @param {import('../ElementTemplates').default} elementTemplates\n   * @param {import('diagram-js/lib/command/CommandStack').default} commandStack\n   * @param {import('bpmn-js/lib/features/modeling/BpmnFactory').default} bpmnFactory\n   * @param {import('didi').Injector} injector\n   */\n  constructor(eventBus, elementTemplates, commandStack, bpmnFactory, injector) {\n    super(eventBus);\n\n    this._eventBus = eventBus;\n    this._elementTemplates = elementTemplates;\n    this._commandStack = commandStack;\n    this._bpmnFactory = bpmnFactory;\n    this._injector = injector;\n\n    // (1) save pre-conditional state before updating a property\n    this.preExecute([\n      'element.updateProperties',\n      'element.updateModdleProperties',\n      'element.move'\n    ], this._saveConditionalState, true, this);\n\n    // (2) check if we need to apply post-conditional updates\n    //\n    //   if [additional bindings activate] then\n    //     (re-)trigger setting the template\n    //   else\n    //     else we're done\n    //\n    this.postExecute([\n      'element.updateProperties',\n      'element.updateModdleProperties',\n      'propertiesPanel.zeebe.changeTemplate',\n      'element.move'\n    ], this._applyConditions, true, this);\n\n    // (3) set conditions before changing the template\n    this.preExecute([\n      'propertiesPanel.zeebe.changeTemplate'\n    ], this._ensureConditional, true, this);\n  }\n\n  _saveConditionalState(context) {\n    const {\n      element\n    } = context;\n\n    const template = this._elementTemplates.get(element);\n\n    if (!template) {\n      return;\n    }\n\n    context.oldTemplateWithConditions = applyConditions(element, template);\n  }\n\n  _applyConditions(context, event) {\n    const {\n      element,\n      newTemplate,\n      oldTemplateWithConditions\n    } = context;\n\n    // do not apply conditions if we only update meta information\n    if (isMetaUpdate(event, context)) {\n      return;\n    }\n\n    const template = this._elementTemplates.get(element);\n\n    // new Template is persisted before applying default values,\n    // new conditions might apply after the defaults are present.\n    const oldTemplate = oldTemplateWithConditions || newTemplate;\n\n    if (!template || !oldTemplate) {\n      return;\n    }\n\n    const newTemplateWithConditions = applyConditions(element, template);\n\n    // verify that new bindings were activated\n    if (!hasDifferentPropertyBindings(newTemplateWithConditions, oldTemplate)) {\n      return;\n    }\n\n    // do another pass to apply further conditional bindings\n    // newTemplate will always be the original template; it is filtered\n    // at a later step (3)\n    const changeContext = {\n      element,\n      newTemplate: template,\n      oldTemplate\n    };\n\n    this._commandStack.execute('propertiesPanel.zeebe.changeTemplate', changeContext);\n  }\n\n  _ensureConditional(context) {\n    const {\n      element,\n      newTemplate\n    } = context;\n\n    if (!newTemplate) {\n      return;\n    }\n\n    // ensure conditions are applied before changing the template.\n    // `newTemplate` will always be the original template.\n    context.newTemplate = applyConditions(element, newTemplate);\n  }\n\n}\n\n\nConditionalBehavior.$inject = [\n  'eventBus',\n  'elementTemplates',\n  'commandStack',\n  'bpmnFactory',\n  'injector'\n];\n\n\n// helpers\n\nfunction hasDifferentPropertyBindings(sourceTemplate, targetTemplate) {\n  return hasNewProperties(sourceTemplate, targetTemplate) || hasRemovedProperties(sourceTemplate, targetTemplate);\n}\n\nfunction hasNewProperties(sourceTemplate, targetTemplate) {\n  let properties = targetTemplate.properties;\n\n  return properties.some(targetProp =>!(\n    sourceTemplate.properties.find(sourceProp => compareProps(sourceProp, targetProp))\n  ));\n}\n\nfunction hasRemovedProperties(oldTemplate, newTemplate) {\n  const oldProperties = getMissingProperties(newTemplate, oldTemplate);\n\n  // ensure XML properties are mantained for properties with\n  // different conditions but same bindings\n  return oldProperties.some(property =>\n    !findPropertyWithBinding(newTemplate, property)\n  );\n}\n\nfunction getMissingProperties(sourceTemplate, targetTemplate) {\n\n  let properties = targetTemplate.properties;\n\n  return properties.filter(targetProp =>!(\n    sourceTemplate.properties.find(sourceProp => compareProps(sourceProp, targetProp))\n  ));\n}\n\nfunction compareProps(sourceProp, targetProp) {\n  return (\n    areBindingsEqual(sourceProp.binding, targetProp.binding) &&\n    equals(sourceProp.condition, targetProp.condition)\n  );\n}\n\nfunction findPropertyWithBinding(template, prop1) {\n  return template.properties.some(\n    prop2 => areBindingsEqual(prop1.binding, prop2.binding)\n  );\n}\n\nfunction normalizeReplacer(key, value) {\n\n  if (isObject(value)) {\n    const keys = Object.keys(value).sort();\n\n    return keys.reduce((obj, key) => {\n      obj[key] = value[key];\n\n      return obj;\n    }, {});\n  }\n\n  return value;\n}\n\nfunction areBindingsEqual(binding1, binding2) {\n  binding1 = normalizeBinding(binding1);\n  binding2 = normalizeBinding(binding2);\n\n  return equals(binding1, binding2);\n}\n\n/**\n * Convert deprecated binding type to new type.\n */\nfunction normalizeBinding(binding) {\n  if (binding.type === ZEEBE_TASK_DEFINITION_TYPE_TYPE) {\n    return {\n      ...binding,\n      type: ZEEBE_TASK_DEFINITION,\n      property: 'type'\n    };\n  }\n\n  return binding;\n}\n\nfunction equals(a, b) {\n  return JSON.stringify(a, normalizeReplacer) === JSON.stringify(b, normalizeReplacer);\n}\n\n/**\n * Checks if the event only updates \"meta\" properties:\n *\n *   * `zeebe:modelerTemplate`\n *   * `zeebe:modelerTemplateVersion`\n *\n * @param {string} event\n * @param {any} context\n *\n * @return {boolean}\n */\nfunction isMetaUpdate(event, context) {\n  return event === 'element.updateProperties' && (\n    Object.keys(context.properties).every(\n      key => [ 'zeebe:modelerTemplate', 'zeebe:modelerTemplateVersion' ].includes(key)\n    ));\n}","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * This Behavior checks if the new element's type is in\n * the list of elements the template applies to and unlinks\n * it if not.\n */\nexport default class ReplaceBehavior extends CommandInterceptor {\n  constructor(elementTemplates, injector) {\n    super(injector.get('eventBus'));\n\n    this.postExecuted('shape.replace', function(e) {\n      var context = e.context,\n          oldShape = context.oldShape,\n          oldBo = getBusinessObject(oldShape),\n          newShape = context.newShape,\n          newBo = getBusinessObject(newShape);\n\n      if (!oldBo.modelerTemplate) {\n        return;\n      }\n\n      const template = newBo.modelerTemplate;\n      const version = newBo.modelerTemplateVersion;\n\n      const elementTemplate = elementTemplates.get(template, version);\n\n      if (!elementTemplate) {\n        elementTemplates.unlinkTemplate(newShape);\n        return;\n      }\n\n      const { appliesTo, elementType } = elementTemplate;\n\n      if (elementType) {\n        if (!is(newShape, elementType.value) || shouldUnlinkEvent(newShape, elementType)) {\n          elementTemplates.unlinkTemplate(newShape);\n        }\n\n        return;\n      }\n\n      const allowed = appliesTo.reduce((allowed, type) => {\n        return allowed || is(newBo, type);\n      }, false);\n\n      if (!allowed) {\n        elementTemplates.unlinkTemplate(newShape);\n      }\n    });\n  }\n}\n\nReplaceBehavior.$inject = [\n  'elementTemplates',\n  'injector'\n];\n\nfunction shouldUnlinkEvent(newShape, elementType) {\n  if (!is(newShape, 'bpmn:Event')) {\n    return false;\n  }\n\n  const { eventDefinition } = elementType,\n        bo = getBusinessObject(newShape),\n        eventDefinitions = bo.get('eventDefinitions');\n\n  if (!eventDefinition) {\n    return eventDefinitions.length !== 0;\n  }\n\n  return !is(eventDefinitions[0], eventDefinition);\n}\n","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { isObject } from 'min-dash';\nimport { applyConditions } from '../Condition';\nimport { findExtension } from '../Helper';\n\n/**\n * Restores the original order of the template properties\n * on the moddle element.\n */\nexport default class UpdateTemplatePropertiesOrder extends CommandInterceptor {\n  constructor(eventBus, elementTemplates, commandStack, bpmnFactory) {\n    super(eventBus);\n\n    this._eventBus = eventBus;\n    this._elementTemplates = elementTemplates;\n    this._commandStack = commandStack;\n    this._bpmnFactory = bpmnFactory;\n\n    this.postExecute([\n      'element.updateProperties', 'element.updateModdleProperties'\n    ], this._updatePropertiesOrder, true, this);\n  }\n\n  _updatePropertiesOrder(context) {\n    const {\n      element\n    } = context;\n\n    const template = this._elementTemplates.get(element);\n    const businessObject = element.businessObject;\n    const commands = [];\n\n    if (!template) {\n      return;\n    }\n\n    const templateProperties = applyConditions(element, template).properties;\n\n    // zeebe:Property\n    const zeebeProperties = findExtension(businessObject, 'zeebe:Properties');\n\n    if (zeebeProperties) {\n      this._updateZeebePropertiesOrder(zeebeProperties, templateProperties, commands, context);\n    }\n\n    // zeebe:IoMapping\n    const ioMapping = findExtension(businessObject, 'zeebe:IoMapping');\n\n    if (ioMapping) {\n\n      // zeebe:Input\n      this._updateInputOrder(ioMapping, templateProperties, commands, context);\n\n      // zeebe:Output\n      this._updateOutputOrder(ioMapping, templateProperties, commands, context);\n    }\n\n    // zeebe:TaskHeaders\n    const taskHeaders = findExtension(businessObject, 'zeebe:TaskHeaders');\n\n    if (taskHeaders) {\n      this._updateTaskHeadersOrder(taskHeaders, templateProperties, commands, context);\n    }\n\n\n    if (commands.length) {\n      const commandsToExecute = commands.filter((command) => command !== null);\n\n      commandsToExecute.length && this._commandStack.execute(\n        'element-templates.multi-command-executor',\n        commandsToExecute\n      );\n\n      return;\n    }\n  }\n\n  _updateZeebePropertiesOrder(zeebeProperties, templateProperties, commands, context) {\n    const findIndex = (properties, propertyToFind) =>\n      properties.findIndex(prop =>\n        prop.binding.type == 'zeebe:property' && prop.binding.name === propertyToFind.get('name')\n      );\n\n    const properties = zeebeProperties.get('properties');\n\n    if (properties.length < 1)\n      return;\n\n    let newPropertiesOrder = [ ...properties ];\n\n    sortProperties(newPropertiesOrder, findIndex, templateProperties);\n\n    if (!arrayEquals(newPropertiesOrder, properties)) {\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: zeebeProperties,\n          properties: {\n            properties: newPropertiesOrder\n          }\n        }\n      });\n    }\n  }\n\n  _updateInputOrder(ioMapping, templateProperties, commands, context) {\n\n    const findIndex = (properties, propertyToFind) =>\n      properties.findIndex(prop =>\n        prop.binding.type == 'zeebe:input' && prop.binding.name === propertyToFind.get('target')\n      );\n\n    const inputParameters = ioMapping.get('inputParameters');\n\n    if (inputParameters.length < 1)\n      return;\n\n    let newInputOrder = [ ...inputParameters ];\n\n    sortProperties(newInputOrder, findIndex, templateProperties);\n\n    if (!arrayEquals(newInputOrder,inputParameters)) {\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: ioMapping,\n          properties: { inputParameters: newInputOrder }\n        }\n      });\n    }\n  }\n\n  _updateOutputOrder(ioMapping, templateProperties, commands, context) {\n\n    const findIndex = (properties, propertyToFind) =>\n      properties.findIndex(prop =>\n        prop.binding.type == 'zeebe:output' && prop.binding.source === propertyToFind.get('source')\n      );\n\n    const outputParameters = ioMapping.get('outputParameters');\n\n    if (outputParameters.length < 1)\n      return;\n\n    let newOutputOrder = [ ...outputParameters ];\n\n    sortProperties(newOutputOrder, findIndex, templateProperties);\n\n    if (!arrayEquals(newOutputOrder, outputParameters)) {\n\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: ioMapping,\n          properties: { outputParameters: newOutputOrder }\n        }\n      });\n    }\n  }\n\n  _updateTaskHeadersOrder(taskHeaders, templateProperties, commands, context) {\n\n    const findIndex = (properties, propertyToFind) =>\n      properties.findIndex(prop =>\n        prop.binding.type == 'zeebe:taskHeader' && prop.binding.key === propertyToFind.get('key')\n      );\n\n    const headers = taskHeaders.get('zeebe:values');\n\n    if (headers.length < 1)\n      return;\n\n    let newHeadersOrder = [ ...headers ];\n\n    sortProperties(newHeadersOrder, findIndex, templateProperties);\n\n    if (!arrayEquals(newHeadersOrder, headers)) {\n      commands.push({\n        cmd: 'element.updateModdleProperties',\n        context: {\n          ...context,\n          moddleElement: taskHeaders,\n          properties: { values: newHeadersOrder }\n        }\n      });\n    }\n  }\n\n}\n\nUpdateTemplatePropertiesOrder.$inject = [\n  'eventBus',\n  'elementTemplates',\n  'commandStack',\n  'bpmnFactory'\n];\n\n\n// helpers\n\nfunction normalizeReplacer(key, value) {\n\n  if (isObject(value)) {\n    const keys = Object.keys(value).sort();\n\n    return keys.reduce((obj, key) => {\n      obj[key] = value[key];\n\n      return obj;\n    }, {});\n  }\n\n  return value;\n}\n\nfunction objectEquals(a, b) {\n  return JSON.stringify(a, normalizeReplacer) === JSON.stringify(b, normalizeReplacer);\n}\n\nfunction arrayEquals(a, b) {\n  return a.every((element, idx) => objectEquals(element, b[idx]));\n}\n\nfunction sortProperties(array, findIndex, templateProperties) {\n  return array.sort((a, b) => {\n    const aIndex = findIndex(templateProperties, a);\n    const bIndex = findIndex(templateProperties, b);\n\n    return aIndex - bIndex;\n  });\n}","import { getBusinessObject, is, isAny } from 'bpmn-js/lib/util/ModelUtil';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { isString } from 'min-dash';\n\nimport { findMessage, getTemplateId, TEMPLATE_ID_ATTR } from '../Helper';\nimport {\n  getReferringElement,\n  removeRootElement\n} from '../util/rootElementUtil';\n\n/**\n * Handles referenced elements.\n */\nexport class ReferencedElementBehavior extends CommandInterceptor {\n  constructor(eventBus, elementTemplates, modeling, injector, moddleCopy, bpmnFactory) {\n    super(eventBus);\n\n    this._eventBus = eventBus;\n    this._elementTemplates = elementTemplates;\n    this._modeling = modeling;\n    this._injector = injector;\n\n    this.postExecuted([\n      'element.updateProperties', 'element.updateModdleProperties'\n    ], this._handlePropertiesUpdate, true, this);\n\n    this.postExecuted('shape.replace', this._handleReplacement, true, this);\n\n    this.postExecuted('shape.delete', this._handleRemoval, true, this);\n\n\n    // copy templated root element when pasting\n    eventBus.on('copyPaste.pasteElement', function(context) {\n      const {\n        referencedRootElement\n      } = context.descriptor;\n\n      if (!referencedRootElement) {\n        return;\n      }\n\n      if (!getTemplateId(referencedRootElement)) {\n        return;\n      }\n\n      context.descriptor.referencedRootElement = moddleCopy.copyElement(\n        referencedRootElement,\n        bpmnFactory.create(referencedRootElement.$type)\n      );\n    });\n  }\n\n  /**\n   * Unlink referenced element when template is unlinked.\n   */\n  _handlePropertiesUpdate(context) {\n    const { element, properties } = context;\n\n    if (!canHaveReferencedElement(element)) {\n      return;\n    }\n\n    if (!(TEMPLATE_ID_ATTR in properties) || isString(properties[TEMPLATE_ID_ATTR])) {\n      return;\n    }\n\n    const bo = getBusinessObject(element);\n    const message = findMessage(bo);\n\n    if (message && getTemplateId(message)) {\n      this._modeling.updateModdleProperties(element, message, {\n        [TEMPLATE_ID_ATTR]: null\n      });\n    }\n  }\n\n  /**\n   * Remove referenced element when template is removed.\n   * Keep referenced element when template is replaced.\n   */\n  _handleReplacement(context) {\n    const { oldShape, newShape } = context;\n    const oldTemplate = getTemplateId(oldShape),\n          newTemplate = getTemplateId(newShape);\n\n    if (!canHaveReferencedElement(oldShape) || !oldTemplate) {\n      return;\n    }\n\n    const bo = getBusinessObject(oldShape);\n    const message = findMessage(bo);\n\n    if (!message || !getTemplateId(message)) {\n      return;\n    }\n\n    if (!canHaveReferencedElement(newShape) || !newTemplate) {\n      removeRootElement(message, this._injector);\n      return;\n    }\n\n    this._addMessage(newShape, message);\n  }\n\n  _handleRemoval(context) {\n    const { shape } = context;\n\n    if (isLabel(shape)) {\n      return;\n    }\n\n    if (!canHaveReferencedElement(shape)) {\n      return;\n    }\n\n    if (!getTemplateId(shape)) {\n      return;\n    }\n\n    const bo = getBusinessObject(shape);\n    const message = findMessage(bo);\n\n    if (message && getTemplateId(message)) {\n      removeRootElement(message, this._injector);\n    }\n  }\n\n  _addMessage(element, message) {\n    const bo = getReferringElement(element);\n\n    this._modeling.updateModdleProperties(element, bo, {\n      'messageRef': message\n    });\n  }\n}\n\nReferencedElementBehavior.$inject = [\n  'eventBus',\n  'elementTemplates',\n  'modeling',\n  'injector',\n  'moddleCopy',\n  'bpmnFactory'\n];\n\nfunction canHaveReferencedElement(element) {\n\n  // Blank-Events can't have referenced elements\n  if (is(element, 'bpmn:Event')) {\n    const bo = getBusinessObject(element);\n    return bo.get('eventDefinitions') && bo.get('eventDefinitions')[0];\n  }\n\n  return isAny(element, [\n    'bpmn:ReceiveTask',\n    'bpmn:SendTask'\n  ]);\n}\n\nfunction isLabel(element) {\n  return element.type === 'label';\n}\n","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getDefaultValue } from '../Helper';\nimport { getPropertyValue, setPropertyValue } from '../util/propertyUtil';\n\n/**\n * Handles generated value properties.\n */\nexport class GeneratedValueBehavior extends CommandInterceptor {\n  constructor(eventBus, elementTemplates, modeling, commandStack, bpmnFactory) {\n    super(eventBus);\n\n    this._eventBus = eventBus;\n    this._elementTemplates = elementTemplates;\n    this._modeling = modeling;\n\n    this.preExecute('shape.create', context => {\n      const element = context.shape;\n      const template = elementTemplates.get(element);\n\n      if (!template) {\n        return;\n      }\n\n      const generatedProps = template.properties.filter(p => p.generatedValue);\n\n      generatedProps.forEach(p => {\n        if (!getPropertyValue(element, p)) {\n          return;\n        }\n\n        const value = getDefaultValue(p);\n\n        setPropertyValue(bpmnFactory, commandStack, element, p, value);\n      });\n    }, true);\n  }\n}\n\nGeneratedValueBehavior.$inject = [\n  'eventBus',\n  'elementTemplates',\n  'modeling',\n  'commandStack',\n  'bpmnFactory'\n];\n","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { is } from 'bpmn-js/lib/util/ModelUtil';\n\nimport { findExtension } from '../Helper';\n\n/**\n * Enforces no variable propagation for templated call activities.\n */\nexport class CalledElementBehavior extends CommandInterceptor {\n\n  /**\n   * @param {*} eventBus\n   * @param {*} modeling\n   * @param {import('../ElementTemplates').default} elementTemplates\n   */\n  constructor(eventBus, modeling, elementTemplates) {\n    super(eventBus);\n\n    this._modeling = modeling;\n    this._elementTemplates = elementTemplates;\n\n    this.postExecuted([\n      'element.updateProperties', 'element.updateModdleProperties'\n    ], this._ensureNoPropagation, true, this);\n  }\n\n  _ensureNoPropagation(context) {\n    const { element } = context;\n\n    if (!this._elementTemplates.get(element)) {\n      return;\n    }\n\n    if (!is(element, 'bpmn:CallActivity')) {\n      return;\n    }\n\n    const calledElement = findExtension(element, 'zeebe:CalledElement');\n\n    if (!calledElement) {\n      return;\n    }\n\n    for (const property of [\n      'propagateAllChildVariables',\n      'propagateAllParentVariables'\n    ]) {\n      if (calledElement.get(property) !== false) {\n        this._modeling.updateModdleProperties(element, calledElement, {\n          [property]: false\n        });\n      }\n    }\n  }\n}\n\nCalledElementBehavior.$inject = [\n  'eventBus',\n  'modeling',\n  'elementTemplates'\n];\n","import ConditionalBehavior from './ConditionalBehavior';\nimport ReplaceBehavior from './ReplaceBehavior';\nimport UpdatePropertiesOrderBehavior from './UpdatePropertiesOrderBehavior';\nimport { ReferencedElementBehavior } from './ReferencedElementBehavior';\nimport { GeneratedValueBehavior } from './GeneratedValueBehavior';\nimport { CalledElementBehavior } from './CalledElementBehavior';\n\nexport default {\n  __init__: [\n    'elementTemplatesReplaceBehavior',\n    'elementTemplatesConditionalBehavior',\n    'elementTemplatesGeneratedValueBehavior',\n    'elementTemplatesReferencedElementBehavior',\n    'elementTemplatesUpdatePropertiesOrderBehavior',\n    'elementTemplatesCalledElementBehavior'\n  ],\n  elementTemplatesReplaceBehavior: [ 'type', ReplaceBehavior ],\n  elementTemplatesConditionalBehavior: [ 'type', ConditionalBehavior ],\n  elementTemplatesGeneratedValueBehavior: [ 'type', GeneratedValueBehavior ],\n  elementTemplatesReferencedElementBehavior: [ 'type', ReferencedElementBehavior ],\n  elementTemplatesUpdatePropertiesOrderBehavior: [ 'type', UpdatePropertiesOrderBehavior ],\n  elementTemplatesCalledElementBehavior: [ 'type', CalledElementBehavior ]\n};\n","import ElementTemplates from '../ElementTemplates';\nimport ElementTemplatesLoader from '../ElementTemplatesLoader';\n\nimport commandsModule from '../cmd';\nimport createModule from '../create';\nimport behaviorModule from '../behavior';\n\nexport default {\n  __depends__: [\n    commandsModule,\n    behaviorModule,\n    createModule\n  ],\n  __init__: [\n    'elementTemplatesLoader'\n  ],\n  elementTemplates: [ 'type', ElementTemplates ],\n  elementTemplatesLoader: [ 'type', ElementTemplatesLoader ]\n};\n","import {\n  assign,\n  forEach,\n  isObject,\n  keys\n} from 'min-dash';\n\n/**\n * Converts legacy scopes descriptor to newer supported array structure.\n *\n * For example, it transforms\n *\n * scopes: {\n *   'camunda:Connector':\n *     { properties: []\n *   }\n * }\n *\n * to\n *\n * scopes: [\n *   {\n *     type: 'camunda:Connector',\n *     properties: []\n *   }\n * ]\n *\n * @param {ScopesDescriptor} scopes\n *\n * @returns {Array}\n */\nexport default function handleLegacyScopes(scopes = []) {\n  const scopesAsArray = [];\n\n  if (!isObject(scopes)) {\n    return scopes;\n  }\n\n  forEach(keys(scopes), function(scopeName) {\n    scopesAsArray.push(assign({\n      type: scopeName\n    }, scopes[scopeName]));\n  });\n\n  return scopesAsArray;\n}\n","import { assign } from 'min-dash';\n\nimport { nextId } from '../utils/ElementUtil';\n\n\n/**\n * Create an input parameter representing the given\n * binding and value.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createInputParameter(binding, value, bpmnFactory) {\n  const {\n    name,\n    scriptFormat\n  } = binding;\n\n  let parameterValue,\n      parameterDefinition;\n\n  if (scriptFormat) {\n    parameterDefinition = bpmnFactory.create('camunda:Script', {\n      scriptFormat,\n      value\n    });\n  } else {\n    parameterValue = value;\n  }\n\n  return bpmnFactory.create('camunda:InputParameter', {\n    name,\n    value: parameterValue,\n    definition: parameterDefinition\n  });\n}\n\n\n/**\n * Create an output parameter representing the given\n * binding and value.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createOutputParameter(binding, value, bpmnFactory) {\n  const {\n    scriptFormat,\n    source\n  } = binding;\n\n  let parameterValue,\n      parameterDefinition;\n\n  if (scriptFormat) {\n    parameterDefinition = bpmnFactory.create('camunda:Script', {\n      scriptFormat,\n      value: source\n    });\n  } else {\n    parameterValue = source;\n  }\n\n  return bpmnFactory.create('camunda:OutputParameter', {\n    name: value,\n    value: parameterValue,\n    definition: parameterDefinition\n  });\n}\n\n\n/**\n * Create camunda property from the given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCamundaProperty(binding, value = '', bpmnFactory) {\n  const { name } = binding;\n\n  return bpmnFactory.create('camunda:Property', {\n    name,\n    value\n  });\n}\n\n\n/**\n * Create camunda:in element from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCamundaIn(binding, value, bpmnFactory) {\n  const attrs = createCamundaInOutAttrs(binding, value);\n\n  return bpmnFactory.create('camunda:In', attrs);\n}\n\n\n/**\n * Create camunda:in with businessKey element from given binding.\n *\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCamundaInWithBusinessKey(value, bpmnFactory) {\n  return bpmnFactory.create('camunda:In', {\n    businessKey: value\n  });\n}\n\n\n/**\n * Create camunda:out element from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCamundaOut(binding, value, bpmnFactory) {\n  const attrs = createCamundaInOutAttrs(binding, value);\n\n  return bpmnFactory.create('camunda:Out', attrs);\n}\n\n\n/**\n * Create camunda:executionListener element containing an inline script from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCamundaExecutionListener(binding, value, bpmnFactory) {\n  const {\n    event,\n    implementationType,\n    scriptFormat\n  } = binding;\n\n  // To guarantee backwards compatibility scriptFormat is taken into account and has precedence before any other type\n  if (implementationType === 'script' || scriptFormat) {\n    return bpmnFactory.create('camunda:ExecutionListener', {\n      event,\n      script: bpmnFactory.create('camunda:Script', {\n        scriptFormat,\n        value\n      })\n    });\n  }\n\n  return bpmnFactory.create('camunda:ExecutionListener', {\n    event,\n    [implementationType]: value\n  });\n}\n\n/**\n * Create camunda:field element containing string or expression from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCamundaFieldInjection(binding, value, bpmnFactory) {\n  const DEFAULT_PROPS = {\n    'string': undefined,\n    'expression': undefined,\n    'name': undefined\n  };\n\n  const props = assign({}, DEFAULT_PROPS);\n\n  const {\n    expression,\n    name\n  } = binding;\n\n  if (!expression) {\n    props.string = value;\n  } else {\n    props.expression = value;\n  }\n  props.name = name;\n\n  return bpmnFactory.create('camunda:Field', props);\n}\n\n\n/**\n * Create camunda:errorEventDefinition element containing expression and errorRef\n * from given binding.\n *\n * @param {String} expression\n * @param {ModdleElement} errorRef\n * @param {ModdleElement} parent\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCamundaErrorEventDefinition(expression, errorRef, parent, bpmnFactory) {\n  const errorEventDefinition = bpmnFactory.create('camunda:ErrorEventDefinition', {\n    errorRef,\n    expression\n  });\n\n  errorEventDefinition.$parent = parent;\n\n  return errorEventDefinition;\n}\n\n\n/**\n * Create bpmn:error element containing a specific error id given by a binding.\n *\n * @param {String} bindingErrorRef\n * @param {ModdleElement} parent\n * @param {BpmnFactory} bpmnFactory\n *\n * @return { ModdleElement }\n */\nexport function createError(bindingErrorRef, parent, bpmnFactory) {\n  const error = bpmnFactory.create('bpmn:Error', {\n\n    // we need to later retrieve the error from a binding\n    id: nextId('Error_' + bindingErrorRef + '_')\n  });\n\n  error.$parent = parent;\n\n  return error;\n}\n\n\n// helpers //////////\n\n/**\n * Create properties for camunda:in and camunda:out types.\n */\nfunction createCamundaInOutAttrs(binding, value) {\n  const properties = {};\n\n  const {\n    expression,\n    source,\n    sourceExpression,\n    target,\n    type,\n    variables\n  } = binding;\n\n  // explicitly cover all conditions as specified here:\n  // https://github.com/camunda/camunda-modeler/blob/develop/docs/element-templates/README.md#camundain\n  if (type === 'camunda:in') {\n    if (target && !expression && !variables) {\n      properties.target = target;\n      properties.source = value;\n\n    } else if (target && expression === true && !variables) {\n      properties.target = target;\n      properties.sourceExpression = value;\n\n    } else if (!target && !expression && variables === 'local') {\n      properties.local = true;\n      properties.variables = 'all';\n\n    } else if (target && !expression && variables === 'local') {\n      properties.local = true;\n      properties.source = value;\n      properties.target = target;\n\n    } else if (target && expression && variables === 'local') {\n      properties.local = true;\n      properties.sourceExpression = value;\n      properties.target = target;\n\n    } else if (!target && !expression && variables === 'all') {\n      properties.variables = 'all';\n    } else {\n      throw new Error('invalid configuration for camunda:in element template binding');\n    }\n  }\n\n  // explicitly cover all conditions as specified here:\n  // https://github.com/camunda/camunda-modeler/blob/develop/docs/element-templates/README.md#camundaout\n  if (type === 'camunda:out') {\n    if (source && !sourceExpression && !variables) {\n      properties.target = value;\n      properties.source = source;\n\n    } else if (!source && sourceExpression && !variables) {\n      properties.target = value;\n      properties.sourceExpression = sourceExpression;\n\n    } else if (!source && !sourceExpression && variables === 'all') {\n      properties.variables = 'all';\n\n    } else if (source && !sourceExpression && variables === 'local') {\n      properties.local = true;\n      properties.source = source;\n      properties.target = value;\n\n    } else if (!source && sourceExpression && variables === 'local') {\n      properties.local = true;\n      properties.sourceExpression = sourceExpression;\n      properties.target = value;\n\n    } else if (!source && !sourceExpression && variables === 'local') {\n      properties.local = true;\n      properties.variables = 'all';\n    } else {\n      throw new Error('invalid configuration for camunda:out element template binding');\n    }\n  }\n\n  return properties;\n}\n","import {\n  getBusinessObject,\n  is,\n  isAny\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  find\n} from 'min-dash';\n\nexport function isErrorSupported(element) {\n  return isAny(element, [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:EndEvent'\n  ]) && !!getErrorEventDefinition(element);\n}\n\nexport function getErrorEventDefinition(element) {\n  return getEventDefinition(element, 'bpmn:ErrorEventDefinition');\n}\n\nexport function isTimerSupported(element) {\n  return isAny(element, [\n    'bpmn:StartEvent',\n    'bpmn:IntermediateCatchEvent',\n    'bpmn:BoundaryEvent'\n  ]) && !!getTimerEventDefinition(element);\n}\n\n/**\n * Get the timer definition type for a given timer event definition.\n *\n * @param {ModdleElement<bpmn:TimerEventDefinition>} timer\n *\n * @return {string|undefined} the timer definition type\n */\nexport function getTimerDefinitionType(timer) {\n\n  if (!timer) {\n    return;\n  }\n\n  const timeDate = timer.get('timeDate');\n  if (typeof timeDate !== 'undefined') {\n    return 'timeDate';\n  }\n\n  const timeCycle = timer.get('timeCycle');\n  if (typeof timeCycle !== 'undefined') {\n    return 'timeCycle';\n  }\n\n  const timeDuration = timer.get('timeDuration');\n  if (typeof timeDuration !== 'undefined') {\n    return 'timeDuration';\n  }\n}\n\nexport function getTimerEventDefinition(element) {\n  return getEventDefinition(element, 'bpmn:TimerEventDefinition');\n}\n\nexport function getError(element) {\n  const errorEventDefinition = getErrorEventDefinition(element);\n\n  return errorEventDefinition && errorEventDefinition.get('errorRef');\n}\n\nexport function getEventDefinition(element, eventType) {\n  const businessObject = getBusinessObject(element);\n\n  const eventDefinitions = businessObject.get('eventDefinitions') || [];\n\n  return find(eventDefinitions, function(definition) {\n    return is(definition, eventType);\n  });\n}\n\nexport function isMessageSupported(element) {\n  return is(element, 'bpmn:ReceiveTask') || (\n    isAny(element, [\n      'bpmn:StartEvent',\n      'bpmn:EndEvent',\n      'bpmn:IntermediateThrowEvent',\n      'bpmn:BoundaryEvent',\n      'bpmn:IntermediateCatchEvent'\n    ]) && !!getMessageEventDefinition(element)\n  );\n}\n\nexport function getMessageEventDefinition(element) {\n  if (is(element, 'bpmn:ReceiveTask')) {\n    return getBusinessObject(element);\n  }\n\n  return getEventDefinition(element, 'bpmn:MessageEventDefinition');\n}\n\nexport function getMessage(element) {\n  const messageEventDefinition = getMessageEventDefinition(element);\n\n  return messageEventDefinition && messageEventDefinition.get('messageRef');\n}\n\nexport function getLinkEventDefinition(element) {\n  return getEventDefinition(element, 'bpmn:LinkEventDefinition');\n}\n\nexport function getSignalEventDefinition(element) {\n  return getEventDefinition(element, 'bpmn:SignalEventDefinition');\n}\n\nexport function isLinkSupported(element) {\n  return isAny(element, [\n    'bpmn:IntermediateThrowEvent',\n    'bpmn:IntermediateCatchEvent'\n  ]) && !!getLinkEventDefinition(element);\n}\n\nexport function isSignalSupported(element) {\n  return is(element, 'bpmn:Event') && !!getSignalEventDefinition(element);\n}\n\nexport function getSignal(element) {\n  const signalEventDefinition = getSignalEventDefinition(element);\n\n  return signalEventDefinition && signalEventDefinition.get('signalRef');\n}\n\nexport function getEscalationEventDefinition(element) {\n  return getEventDefinition(element, 'bpmn:EscalationEventDefinition');\n}\n\nexport function isEscalationSupported(element) {\n  return is(element, 'bpmn:Event') && !!getEscalationEventDefinition(element);\n}\n\nexport function getEscalation(element) {\n  const escalationEventDefinition = getEscalationEventDefinition(element);\n\n  return escalationEventDefinition && escalationEventDefinition.get('escalationRef');\n}\n\nexport function isCompensationSupported(element) {\n  return isAny(element, [\n    'bpmn:EndEvent',\n    'bpmn:IntermediateThrowEvent'\n  ]) && !!getCompensateEventDefinition(element);\n}\n\nexport function getCompensateEventDefinition(element) {\n  return getEventDefinition(element, 'bpmn:CompensateEventDefinition');\n}\n\nexport function getCompensateActivity(element) {\n  const compensateEventDefinition = getCompensateEventDefinition(element);\n\n  return compensateEventDefinition && compensateEventDefinition.get('activityRef');\n}\n","import {\n  getBusinessObject,\n  is,\n  isAny\n} from 'bpmn-js/lib/util/ModelUtil';\n\nimport {\n  findCamundaErrorEventDefinition,\n  findExtension,\n  findExtensions,\n  getTemplateId,\n  getTemplateVersion\n} from '../Helper';\n\nimport handleLegacyScopes from '../util/handleLegacyScopes';\n\nimport {\n  createCamundaExecutionListener,\n  createCamundaFieldInjection,\n  createCamundaIn,\n  createCamundaInWithBusinessKey,\n  createCamundaOut,\n  createCamundaProperty,\n  createInputParameter,\n  createOutputParameter,\n  createCamundaErrorEventDefinition,\n  createError\n} from '../CreateHelper';\n\nimport { getSignalEventDefinition } from '../../utils/EventDefinitionUtil';\n\nimport { getRoot } from '../../utils/ElementUtil';\n\nimport {\n  find,\n  isString,\n  isUndefined,\n  keys,\n  without\n} from 'min-dash';\n\nconst CAMUNDA_SERVICE_TASK_LIKE = [\n  'camunda:class',\n  'camunda:delegateExpression',\n  'camunda:expression'\n];\n\n/**\n * Applies an element template to an element. Sets `camunda:modelerTemplate` and\n * `camunda:modelerTemplateVersion`.\n */\nexport default class ChangeElementTemplateHandler {\n  constructor(bpmnFactory, bpmnReplace, commandStack, modeling) {\n    this._bpmnFactory = bpmnFactory;\n    this._bpmnReplace = bpmnReplace;\n    this._commandStack = commandStack;\n    this._modeling = modeling;\n  }\n\n  /**\n   * Change an element's template and update its properties as specified in `newTemplate`. Specify\n   * `oldTemplate` to update from one template to another. If `newTemplate` isn't specified the\n   * `camunda:modelerTemplate` and `camunda:modelerTemplateVersion` properties will be removed from\n   * the element.\n   *\n   * @param {Object} context\n   * @param {Object} context.element\n   * @param {Object} [context.oldTemplate]\n   * @param {Object} [context.newTemplate]\n   */\n  preExecute(context) {\n    const newTemplate = context.newTemplate,\n          oldTemplate = context.oldTemplate;\n\n    let element = context.element;\n\n    // update camunda:modelerTemplate attribute\n    this._updateCamundaModelerTemplate(element, newTemplate);\n\n    if (newTemplate) {\n\n      element = context.element = this._updateTaskType(element, newTemplate);\n\n      // update properties\n      this._updateProperties(element, oldTemplate, newTemplate);\n\n      // update camunda:ExecutionListener properties\n      this._updateCamundaExecutionListenerProperties(element, newTemplate);\n\n      // update camunda:Field properties\n      this._updateCamundaFieldProperties(element, oldTemplate, newTemplate);\n\n      // update camunda:In and camunda:Out properties\n      this._updateCamundaInOutProperties(element, oldTemplate, newTemplate);\n\n      // update camunda:InputParameter and camunda:OutputParameter properties\n      this._updateCamundaInputOutputParameterProperties(element, oldTemplate, newTemplate);\n\n      // update camunda:Property properties\n      this._updateCamundaPropertyProperties(element, oldTemplate, newTemplate);\n\n      // update camunda:ErrorEventDefinition properties\n      this._updateCamundaErrorEventDefinitionProperties(element, oldTemplate, newTemplate);\n\n      // update properties for each scope\n      handleLegacyScopes(newTemplate.scopes).forEach((newScopeTemplate) => {\n        this._updateScopeProperties(element, oldTemplate, newScopeTemplate, newTemplate);\n      });\n\n    }\n  }\n\n  _getOrCreateExtensionElements(element) {\n    const bpmnFactory = this._bpmnFactory,\n          modeling = this._modeling;\n\n    const businessObject = getBusinessObject(element);\n\n    let extensionElements = businessObject.get('extensionElements');\n\n    if (!extensionElements) {\n      extensionElements = bpmnFactory.create('bpmn:ExtensionElements', {\n        values: []\n      });\n\n      extensionElements.$parent = businessObject;\n\n      modeling.updateProperties(element, {\n        extensionElements: extensionElements\n      });\n    }\n\n    return extensionElements;\n  }\n\n  /**\n   * Update `camunda:ErrorEventDefinition` properties of specified business object. Event\n   * definitions can only exist in `bpmn:ExtensionElements`.\n   *\n   * Ensures an bpmn:Error exists for the event definition.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateCamundaErrorEventDefinitionProperties(element, oldTemplate, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'camunda:errorEventDefinition';\n    });\n\n    // (1) do not override if no updates\n    if (!newProperties.length) {\n      return;\n    }\n\n    const extensionElements = this._getOrCreateExtensionElements(element);\n\n    const oldErrorEventDefinitions = findExtensions(element, [ 'camunda:ErrorEventDefinition' ]);\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            oldEventDefinition = oldProperty && findOldBusinessObject(extensionElements, oldProperty),\n            newBinding = newProperty.binding;\n\n      // (2) update old event definitions\n      if (oldProperty && oldEventDefinition) {\n\n        if (!propertyChanged(oldEventDefinition, oldProperty)) {\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: oldEventDefinition,\n            properties: {\n              expression: newProperty.value\n            }\n          });\n        }\n\n        remove(oldErrorEventDefinitions, oldEventDefinition);\n      }\n\n      // (3) create new event definition + error\n      else {\n        const rootElement = getRoot(getBusinessObject(element)),\n              newError = createError(newBinding.errorRef, rootElement, bpmnFactory),\n              newEventDefinition = createCamundaErrorEventDefinition(newProperty.value, newError, extensionElements, bpmnFactory);\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: rootElement,\n          properties: {\n            rootElements: [ ...rootElement.get('rootElements'), newError ]\n          }\n        });\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: extensionElements,\n          properties: {\n            values: [ ...extensionElements.get('values'), newEventDefinition ]\n          }\n        });\n      }\n\n    });\n\n    // (4) remove old event definitions\n    if (oldErrorEventDefinitions.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: extensionElements,\n        properties: {\n          values: without(extensionElements.get('values'), value => oldErrorEventDefinitions.includes(value))\n        }\n      });\n    }\n  }\n\n  /**\n   * Update `camunda:ExecutionListener` properties of specified business object. Execution listeners\n   * will always be overridden. Execution listeners can only exist in `bpmn:ExtensionElements`.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} newTemplate\n   */\n  _updateCamundaExecutionListenerProperties(element, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'camunda:executionListener';\n    });\n\n    // (1) do not override old execution listeners if no new execution listeners specified\n    if (!newProperties.length) {\n      return;\n    }\n\n    const extensionElements = this._getOrCreateExtensionElements(element);\n\n    // (2) remove old execution listeners\n    const oldExecutionListeners = findExtensions(element, [ 'camunda:ExecutionListener' ]);\n\n    // (3) add new execution listeners\n    const newExecutionListeners = newProperties.map((newProperty) => {\n      const newBinding = newProperty.binding,\n            propertyValue = newProperty.value;\n\n      return createCamundaExecutionListener(newBinding, propertyValue, bpmnFactory);\n    });\n\n    commandStack.execute('element.updateModdleProperties', {\n      element,\n      moddleElement: extensionElements,\n      properties: {\n        values: [\n          ...without(extensionElements.get('values'), value => oldExecutionListeners.includes(value)),\n          ...newExecutionListeners\n        ]\n      }\n    });\n  }\n\n  /**\n   * Update `camunda:Field` properties of specified business object.\n   * If business object is `camunda:ExecutionListener` or `camunda:TaskListener` `fields` property\n   * will be updated. Otherwise `extensionElements.values` property will be updated.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   * @param {ModdleElement} businessObject\n   */\n  _updateCamundaFieldProperties(element, oldTemplate, newTemplate, businessObject) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'camunda:field';\n    });\n\n    // (1) do not override old fields if no new fields specified\n    if (!newProperties.length) {\n      return;\n    }\n\n    if (!businessObject) {\n      businessObject = this._getOrCreateExtensionElements(element);\n    }\n\n    const propertyName = isAny(businessObject, [ 'camunda:ExecutionListener', 'camunda:TaskListener' ])\n      ? 'fields'\n      : 'values';\n\n    const oldFields = findExtensions(element, [ 'camunda:Field' ]);\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            oldField = oldProperty && findOldBusinessObject(businessObject, oldProperty),\n            newBinding = newProperty.binding;\n\n      // (2) update old fields\n      if (oldProperty && oldField) {\n\n        if (!propertyChanged(oldField, oldProperty)) {\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: oldField,\n            properties: {\n              string: newProperty.value\n            }\n          });\n        }\n\n        remove(oldFields, oldField);\n      }\n\n      // (3) add new fields\n      else {\n        const newCamundaFieldInjection = createCamundaFieldInjection(newBinding, newProperty.value, bpmnFactory);\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: businessObject,\n          properties: {\n            [ propertyName ]: [ ...businessObject.get(propertyName), newCamundaFieldInjection ]\n          }\n        });\n      }\n    });\n\n    // (4) remove old fields\n    if (oldFields.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          [ propertyName ]: without(businessObject.get(propertyName), value => oldFields.includes(value))\n        }\n      });\n    }\n  }\n\n  /**\n   * Update `camunda:In` and `camunda:Out` properties of specified business object. Only\n   * `bpmn:CallActivity` and events with `bpmn:SignalEventDefinition` can have ins. Only\n   * `camunda:CallActivity` can have outs.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateCamundaInOutProperties(element, oldTemplate, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'camunda:in'\n      || newBindingType === 'camunda:in:businessKey'\n      || newBindingType === 'camunda:out';\n    });\n\n    // (1) do not override old fields if no new fields specified\n    if (!newProperties.length) {\n      return;\n    }\n\n    // get extension elements of either signal event definition or call activity\n    const extensionElements = this._getOrCreateExtensionElements(getSignalEventDefinition(element) || element);\n\n    const oldInsAndOuts = findExtensions(extensionElements, [ 'camunda:In', 'camunda:Out' ]);\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            oldBinding = oldProperty && oldProperty.binding,\n            oldInOurOut = oldProperty && findOldBusinessObject(extensionElements, oldProperty),\n            newPropertyValue = newProperty.value,\n            newBinding = newProperty.binding,\n            newBindingType = newBinding.type,\n            properties = {};\n\n      let newInOrOut;\n\n      // (2) update old ins and outs\n      if (oldProperty && oldInOurOut) {\n\n        if (!propertyChanged(oldInOurOut, oldProperty)) {\n          if (newBindingType === 'camunda:in') {\n            if (newBinding.expression) {\n              properties[ 'camunda:sourceExpression' ] = newPropertyValue;\n            } else {\n              properties[ 'camunda:source' ] = newPropertyValue;\n            }\n          } else if (newBindingType === 'camunda:in:businessKey') {\n            properties[ 'camunda:businessKey' ] = newPropertyValue;\n          } else if (newBindingType === 'camunda:out') {\n            properties[ 'camunda:target' ] = newPropertyValue;\n          }\n        }\n\n        // update camunda:local property if it changed\n        if ((oldBinding.local && !newBinding.local) || !oldBinding.local && newBinding.local) {\n          properties.local = newBinding.local;\n        }\n\n        if (keys(properties)) {\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: oldInOurOut,\n            properties\n          });\n        }\n\n        remove(oldInsAndOuts, oldInOurOut);\n      }\n\n      // (3) add new ins and outs\n      else {\n        if (newBindingType === 'camunda:in') {\n          newInOrOut = createCamundaIn(newBinding, newPropertyValue, bpmnFactory);\n        } else if (newBindingType === 'camunda:out') {\n          newInOrOut = createCamundaOut(newBinding, newPropertyValue, bpmnFactory);\n        } else if (newBindingType === 'camunda:in:businessKey') {\n          newInOrOut = createCamundaInWithBusinessKey(newPropertyValue, bpmnFactory);\n        }\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: extensionElements,\n          properties: {\n            values: [ ...extensionElements.get('values'), newInOrOut ]\n          }\n        });\n      }\n    });\n\n    // (4) remove old ins and outs\n    if (oldInsAndOuts.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: extensionElements,\n        properties: {\n          values: without(extensionElements.get('values'), value => oldInsAndOuts.includes(value))\n        }\n      });\n    }\n  }\n\n  /**\n   * Update `camunda:InputParameter` and `camunda:OutputParameter` properties of specified business\n   * object. Both can only exist in `camunda:InputOutput` which can exist in `bpmn:ExtensionElements`\n   * or `camunda:Connector`.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   */\n  _updateCamundaInputOutputParameterProperties(element, oldTemplate, newTemplate, businessObject) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'camunda:inputParameter' || newBindingType === 'camunda:outputParameter';\n    });\n\n    // (1) do not override old inputs and outputs if no new inputs and outputs specified\n    if (!newProperties.length) {\n      return;\n    }\n\n    if (!businessObject) {\n      businessObject = this._getOrCreateExtensionElements(element);\n    }\n\n    let inputOutput;\n\n    if (is(businessObject, 'camunda:Connector')) {\n      inputOutput = businessObject.get('camunda:inputOutput');\n\n      if (!inputOutput) {\n        inputOutput = bpmnFactory.create('camunda:InputOutput');\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: businessObject,\n          properties: {\n            inputOutput\n          }\n        });\n      }\n    } else {\n      inputOutput = findExtension(businessObject, 'camunda:InputOutput');\n\n      if (!inputOutput) {\n        inputOutput = bpmnFactory.create('camunda:InputOutput');\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: businessObject,\n          properties: {\n            values: [ ...businessObject.get('values'), inputOutput ]\n          }\n        });\n      }\n    }\n\n    const oldInputs = inputOutput.get('camunda:inputParameters')\n      ? inputOutput.get('camunda:inputParameters').slice()\n      : [];\n\n    const oldOutputs = inputOutput.get('camunda:outputParameters')\n      ? inputOutput.get('camunda:outputParameters').slice()\n      : [];\n\n    let propertyName;\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            oldInputOrOutput = oldProperty && findOldBusinessObject(businessObject, oldProperty),\n            newPropertyValue = newProperty.value,\n            newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      let newInputOrOutput,\n          properties;\n\n      // (2) update old inputs and outputs\n      if (oldProperty && oldInputOrOutput) {\n\n        if (!propertyChanged(oldInputOrOutput, oldProperty)) {\n          if (is(oldInputOrOutput, 'camunda:InputParameter')) {\n            properties = {\n              value: newPropertyValue\n            };\n          } else {\n            properties = {\n              name: newPropertyValue\n            };\n          }\n\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: oldInputOrOutput,\n            properties\n          });\n        }\n\n        if (is(oldInputOrOutput, 'camunda:InputParameter')) {\n          remove(oldInputs, oldInputOrOutput);\n        } else {\n          remove(oldOutputs, oldInputOrOutput);\n        }\n      }\n\n      // (3) add new inputs and outputs\n      else {\n        if (newBindingType === 'camunda:inputParameter') {\n          propertyName = 'inputParameters';\n\n          newInputOrOutput = createInputParameter(newBinding, newPropertyValue, bpmnFactory);\n        } else {\n          propertyName = 'outputParameters';\n\n          newInputOrOutput = createOutputParameter(newBinding, newPropertyValue, bpmnFactory);\n        }\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: inputOutput,\n          properties: {\n            [ propertyName ]: [ ...inputOutput.get(propertyName), newInputOrOutput ]\n          }\n        });\n      }\n    });\n\n    // (4) remove old inputs and outputs\n    if (oldInputs.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: inputOutput,\n        properties: {\n          inputParameters: without(inputOutput.get('inputParameters'), inputParameter => oldInputs.includes(inputParameter))\n        }\n      });\n    }\n\n    if (oldOutputs.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: inputOutput,\n        properties: {\n          outputParameters: without(inputOutput.get('outputParameters'), outputParameter => oldOutputs.includes(outputParameter))\n        }\n      });\n    }\n  }\n\n  _updateCamundaModelerTemplate(element, newTemplate) {\n    const modeling = this._modeling;\n\n    const newId = newTemplate && newTemplate.id;\n    const newVersion = newTemplate && newTemplate.version;\n\n    if (getTemplateId(element) !== newId || getTemplateVersion(element) !== newVersion) {\n      modeling.updateProperties(element, {\n        'camunda:modelerTemplate': newId,\n        'camunda:modelerTemplateVersion': newVersion\n      });\n    }\n  }\n\n  /**\n   * Update `camunda:Property` properties of specified business object. `camunda:Property` can only\n   * exist in `camunda:Properties`.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newTemplate\n   * @param {ModdleElement} businessObject\n   */\n  _updateCamundaPropertyProperties(element, oldTemplate, newTemplate, businessObject) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'camunda:property';\n    });\n\n    // (1) do not override old properties if no new properties specified\n    if (!newProperties.length) {\n      return;\n    }\n\n    if (businessObject) {\n      businessObject = this._getOrCreateExtensionElements(businessObject);\n    } else {\n      businessObject = this._getOrCreateExtensionElements(element);\n    }\n\n    let camundaProperties = findExtension(businessObject, 'camunda:Properties');\n\n    if (!camundaProperties) {\n      camundaProperties = bpmnFactory.create('camunda:Properties');\n\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          values: [ ...businessObject.get('values'), camundaProperties ]\n        }\n      });\n    }\n\n    const oldCamundaProperties = camundaProperties.get('camunda:values')\n      ? camundaProperties.get('camunda:values').slice()\n      : [];\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            oldCamundaProperty = oldProperty && findOldBusinessObject(businessObject, oldProperty),\n            newPropertyValue = newProperty.value,\n            newBinding = newProperty.binding;\n\n      // (2) update old properties\n      if (oldProperty && oldCamundaProperty) {\n\n        if (!propertyChanged(oldCamundaProperty, oldProperty)) {\n          commandStack.execute('element.updateModdleProperties', {\n            element,\n            moddleElement: oldCamundaProperty,\n            properties: {\n              value: newPropertyValue\n            }\n          });\n        }\n\n        remove(oldCamundaProperties, oldCamundaProperty);\n      }\n\n      // (3) add new properties\n      else {\n        const newCamundaProperty = createCamundaProperty(newBinding, newPropertyValue, bpmnFactory);\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: camundaProperties,\n          properties: {\n            values: [ ...camundaProperties.get('values'), newCamundaProperty ]\n          }\n        });\n      }\n    });\n\n    // (4) remove old properties\n    if (oldCamundaProperties.length) {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: camundaProperties,\n        properties: {\n          values: without(camundaProperties.get('values'), value => oldCamundaProperties.includes(value))\n        }\n      });\n    }\n  }\n\n  /**\n   * Update `bpmn:conditionExpression` property of specified element. Since condition expression is\n   * is not primitive it needs special handling.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldProperty\n   * @param {Object} newProperty\n   */\n  _updateConditionExpression(element, oldProperty, newProperty) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack,\n          modeling = this._modeling;\n\n    const newBinding = newProperty.binding,\n          newPropertyValue = newProperty.value;\n\n    if (!oldProperty) {\n      modeling.updateProperties(element, {\n        conditionExpression: bpmnFactory.create('bpmn:FormalExpression', {\n          body: newPropertyValue,\n          language: newBinding.scriptFormat\n        })\n      });\n\n      return;\n    }\n\n    const oldBinding = oldProperty.binding,\n          oldPropertyValue = oldProperty.value;\n\n    const businessObject = getBusinessObject(element),\n          conditionExpression = businessObject.get('bpmn:conditionExpression');\n\n    const properties = {};\n\n    if (conditionExpression.get('body') === oldPropertyValue) {\n      properties.body = newPropertyValue;\n    }\n\n    if (conditionExpression.get('language') === oldBinding.scriptFormat) {\n      properties.language = newBinding.scriptFormat;\n    }\n\n    if (!keys(properties).length) {\n      return;\n    }\n\n    commandStack.execute('element.updateModdleProperties', {\n      element,\n      moddleElement: conditionExpression,\n      properties\n    });\n  }\n\n  _updateProperties(element, oldTemplate, newTemplate, businessObject) {\n    const commandStack = this._commandStack;\n\n    const newProperties = newTemplate.properties.filter((newProperty) => {\n      const newBinding = newProperty.binding,\n            newBindingType = newBinding.type;\n\n      return newBindingType === 'property';\n    });\n\n    const oldProperties = oldTemplate && oldTemplate.properties.filter((oldProperty) => {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'property';\n    });\n\n    if (!newProperties.length) {\n      return;\n    }\n\n    if (!businessObject) {\n      businessObject = getBusinessObject(element);\n    }\n\n    newProperties.forEach((newProperty) => {\n      const oldProperty = findOldProperty(oldTemplate, newProperty),\n            newBinding = newProperty.binding,\n            newBindingName = newBinding.name,\n            newPropertyValue = newProperty.value;\n\n      let changedElement,\n          properties;\n\n      if (oldProperty) {\n        remove(oldProperties, oldProperty);\n      }\n\n      if (newBindingName === 'conditionExpression') {\n        this._updateConditionExpression(element, oldProperty, newProperty);\n      } else {\n\n        if (is(businessObject, 'bpmn:Error')) {\n          changedElement = businessObject;\n        } else {\n          changedElement = element;\n        }\n\n        if (oldProperty && propertyChanged(changedElement, oldProperty)) {\n          return;\n        }\n\n        properties = {};\n\n        properties[ newBindingName ] = newPropertyValue;\n\n        // only one of `camunda:class`, `camunda:delegateExpression` and `camunda:expression` can be set\n        // TODO(philippfromme): ensuring only one of these properties is set at a time should be\n        // implemented in a behavior and not in this handler and properties panel UI\n        if (CAMUNDA_SERVICE_TASK_LIKE.indexOf(newBindingName) !== -1) {\n          CAMUNDA_SERVICE_TASK_LIKE.forEach((camundaServiceTaskLikeProperty) => {\n            if (camundaServiceTaskLikeProperty !== newBindingName) {\n              properties[ camundaServiceTaskLikeProperty ] = undefined;\n            }\n          });\n        }\n\n        commandStack.execute('element.updateModdleProperties', {\n          element,\n          moddleElement: businessObject,\n          properties\n        });\n      }\n    });\n\n    // remove old properties not present in new template\n    oldProperties && oldProperties.forEach((oldProperty) => {\n      commandStack.execute('element.updateModdleProperties', {\n        element,\n        moddleElement: businessObject,\n        properties: {\n          [oldProperty.binding.name]: null\n        }\n      });\n    });\n  }\n\n  /**\n   * Update properties for a specified scope.\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} oldTemplate\n   * @param {Object} newScopeTemplate\n   * @param {Object} newTemplate\n   */\n  _updateScopeProperties(element, oldTemplate, newScopeTemplate, newTemplate) {\n    const bpmnFactory = this._bpmnFactory,\n          commandStack = this._commandStack;\n\n    const scopeName = newScopeTemplate.type;\n\n    let scopeElement;\n\n    scopeElement = findOldScopeElement(element, newScopeTemplate, newTemplate);\n\n    if (!scopeElement) {\n\n      scopeElement = bpmnFactory.create(scopeName);\n    }\n\n    const oldScopeTemplate = findOldScopeTemplate(newScopeTemplate, oldTemplate);\n\n    // update properties\n    this._updateProperties(element, oldScopeTemplate, newScopeTemplate, scopeElement);\n\n    // update camunda:ExecutionListener properties\n    this._updateCamundaExecutionListenerProperties(element, newScopeTemplate);\n\n    // update camunda:In and camunda:Out properties\n    this._updateCamundaInOutProperties(element, oldScopeTemplate, newScopeTemplate);\n\n    // update camunda:InputParameter and camunda:OutputParameter properties\n    this._updateCamundaInputOutputParameterProperties(element, oldScopeTemplate, newScopeTemplate, scopeElement);\n\n    // update camunda:Field properties\n    this._updateCamundaFieldProperties(element, oldScopeTemplate, newScopeTemplate, scopeElement);\n\n    // update camunda:Property properties\n    this._updateCamundaPropertyProperties(element, oldScopeTemplate, newScopeTemplate, scopeElement);\n\n    // assume that root elements were already created in root by referenced event definition binding\n    if (isRootElementScope(scopeName)) {\n      return;\n    }\n\n    const extensionElements = this._getOrCreateExtensionElements(element);\n\n    commandStack.execute('element.updateModdleProperties', {\n      element,\n      moddleElement: extensionElements,\n      properties: {\n        values: [ ...extensionElements.get('values'), scopeElement ]\n      }\n    });\n  }\n\n  /**\n   * Replaces the element with the specified elementType\n   *\n   * @param {djs.model.Base} element\n   * @param {Object} newTemplate\n   */\n  _updateTaskType(element, newTemplate) {\n\n    // determine new task type\n    const newType = newTemplate.elementType;\n\n    if (!newType) {\n      return element;\n    }\n\n    // don't replace Task that is already the correct type\n    if (element.$type === newType.value) {\n      return element;\n    }\n\n    return this._bpmnReplace.replaceElement(element, { type: newType.value });\n  }\n}\n\nChangeElementTemplateHandler.$inject = [\n  'bpmnFactory',\n  'bpmnReplace',\n  'commandStack',\n  'modeling'\n];\n\n\n// helpers //////////\n\n/**\n * Find old business object matching specified old property.\n *\n * @param {djs.model.Base|ModdleElement} element\n * @param {Object} oldProperty\n *\n * @returns {ModdleElement}\n */\nfunction findOldBusinessObject(element, oldProperty) {\n  let businessObject = getBusinessObject(element),\n      propertyName;\n\n  const oldBinding = oldProperty.binding,\n        oldBindingType = oldBinding.type;\n\n  if (oldBindingType === 'camunda:field') {\n\n    if (isAny(businessObject, [ 'camunda:ExecutionListener', 'camunda:TaskListener' ])) {\n      propertyName = 'camunda:fields';\n    } else {\n      propertyName = 'bpmn:values';\n    }\n\n    if (!businessObject || !businessObject.get(propertyName) || !businessObject.get(propertyName).length) {\n      return;\n    }\n\n    return find(businessObject.get(propertyName), function(oldBusinessObject) {\n      return oldBusinessObject.get('camunda:name') === oldBinding.name;\n    });\n  }\n\n  if (oldBindingType === 'camunda:in') {\n    return find(businessObject.get('values'), function(oldBusinessObject) {\n      return oldBusinessObject.get('target') === oldBinding.target;\n    });\n  }\n\n  if (oldBindingType === 'camunda:in:businessKey') {\n    return find(businessObject.get('values'), function(oldBusinessObject) {\n      return isString(oldBusinessObject.get('businessKey'));\n    });\n  }\n\n  if (oldBindingType === 'camunda:out') {\n    return find(businessObject.get('values'), function(oldBusinessObject) {\n      return oldBusinessObject.get('source') === oldBinding.source ||\n        oldBusinessObject.get('sourceExpression') || oldBinding.sourceExpression;\n    });\n  }\n\n  if (oldBindingType === 'camunda:inputParameter' || oldBindingType === 'camunda:outputParameter') {\n\n    if (is(businessObject, 'camunda:Connector')) {\n      businessObject = businessObject.get('camunda:inputOutput');\n\n      if (!businessObject) {\n        return;\n      }\n    } else {\n      businessObject = findExtension(businessObject, 'camunda:InputOutput');\n\n      if (!businessObject) {\n        return;\n      }\n    }\n\n    if (oldBindingType === 'camunda:inputParameter') {\n      return find(businessObject.get('camunda:inputParameters'), function(oldBusinessObject) {\n        return oldBusinessObject.get('camunda:name') === oldBinding.name;\n      });\n    } else {\n      return find(businessObject.get('camunda:outputParameters'), function(oldBusinessObject) {\n        if (oldBinding.scriptFormat) {\n          const definition = oldBusinessObject.get('camunda:definition');\n\n          return definition && definition.get('camunda:value') === oldBinding.source;\n        } else {\n          return oldBusinessObject.get('camunda:value') === oldBinding.source;\n        }\n      });\n    }\n\n  }\n\n  if (oldBindingType === 'camunda:property') {\n    if (!businessObject || !businessObject.get('values') || !businessObject.get('values').length) {\n      return;\n    }\n\n    businessObject = findExtension(businessObject, 'camunda:Properties');\n\n    if (!businessObject) {\n      return;\n    }\n\n    return find(businessObject.get('values'), function(oldBusinessObject) {\n      return oldBusinessObject.get('camunda:name') === oldBinding.name;\n    });\n  }\n\n  if (oldBindingType === 'camunda:errorEventDefinition') {\n    return findCamundaErrorEventDefinition(element, oldBinding.errorRef);\n  }\n}\n\n/**\n * Find old property matching specified new property.\n *\n * @param {Object} oldTemplate\n * @param {Object} newProperty\n *\n * @returns {Object}\n */\nfunction findOldProperty(oldTemplate, newProperty) {\n  if (!oldTemplate) {\n    return;\n  }\n\n  const oldProperties = oldTemplate.properties,\n        newBinding = newProperty.binding,\n        newBindingName = newBinding.name,\n        newBindingType = newBinding.type;\n\n  if (newBindingType === 'property') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingName = oldBinding.name,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'property' && oldBindingName === newBindingName;\n    });\n  }\n\n  if (newBindingType === 'camunda:field') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingName = oldBinding.name,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'camunda:field' && oldBindingName === newBindingName;\n    });\n  }\n\n  if (newBindingType === 'camunda:in') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'camunda:in') {\n        return;\n      }\n\n      // always override if change from source to source expression or vice versa\n      if ((oldBinding.expression && !newBinding.expression) ||\n        !oldBinding.expression && newBinding.expression) {\n        return;\n      }\n\n      return oldBinding.target === newBinding.target;\n    });\n  }\n\n  if (newBindingType === 'camunda:in:businessKey') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'camunda:in:businessKey';\n    });\n  }\n\n  if (newBindingType === 'camunda:out') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'camunda:out' && (\n        oldBinding.source === newBinding.source ||\n        oldBinding.sourceExpression === newBinding.sourceExpression\n      );\n    });\n  }\n\n  if (newBindingType === 'camunda:inputParameter') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingName = oldBinding.name,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'camunda:inputParameter') {\n        return;\n      }\n\n      return oldBindingName === newBindingName\n        && oldBinding.scriptFormat === newBinding.scriptFormat;\n    });\n  }\n\n  if (newBindingType === 'camunda:outputParameter') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'camunda:outputParameter') {\n        return;\n      }\n\n      return oldBinding.source === newBinding.source\n        && oldBinding.scriptFormat === newBinding.scriptFormat;\n    });\n  }\n\n  if (newBindingType === 'camunda:property') {\n    return find(oldProperties, function(oldProperty) {\n      const oldBinding = oldProperty.binding,\n            oldBindingName = oldBinding.name,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'camunda:property' && oldBindingName === newBindingName;\n    });\n  }\n\n  if (newBindingType === 'camunda:errorEventDefinition') {\n    return find(oldProperties, function(oldProperty) {\n      const newBindingRef = newBinding.errorRef,\n            oldBinding = oldProperty.binding,\n            oldBindingRef = oldBinding.errorRef,\n            oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'camunda:errorEventDefinition'\n        && oldBindingRef === newBindingRef;\n    });\n  }\n}\n\nfunction findOldScopeElement(element, scopeTemplate, template) {\n  const scopeName = scopeTemplate.type,\n        id = scopeTemplate.id;\n\n  if (scopeName === 'camunda:Connector') {\n    return findExtension(element, 'camunda:Connector');\n  }\n\n  if (scopeName === 'bpmn:Error') {\n\n    // (1) find by error event definition binding\n    const errorEventDefinitionBinding = findErrorEventDefinitionBinding(template, id);\n\n    if (!errorEventDefinitionBinding) {\n      return;\n    }\n\n    // (2) find error event definition\n    const errorEventDefinition = findOldBusinessObject(element, errorEventDefinitionBinding);\n\n    if (!errorEventDefinition) {\n      return;\n    }\n\n    // (3) retrieve referenced error\n    return errorEventDefinition.errorRef;\n  }\n}\n\nfunction isRootElementScope(scopeName) {\n  return [ 'bpmn:Error' ].includes(scopeName);\n}\n\nfunction findOldScopeTemplate(scopeTemplate, oldTemplate) {\n  const scopeName = scopeTemplate.type,\n        scopeId = scopeTemplate.id,\n        scopes = oldTemplate && handleLegacyScopes(oldTemplate.scopes);\n\n  return scopes && find(scopes, function(scope) {\n\n    if (isRootElementScope(scopeName)) {\n      return scope.id === scopeId;\n    }\n\n    return scope.type === scopeName;\n  });\n}\n\nfunction findErrorEventDefinitionBinding(template, templateErrorId) {\n  return find(template.properties, function(property) {\n    return property.binding.errorRef === templateErrorId;\n  });\n}\n\n/**\n * Check whether property was changed after being set by template.\n *\n * @param {djs.model.Base|ModdleElement} element\n * @param {Object} oldProperty\n *\n * @returns {boolean}\n */\nfunction propertyChanged(element, oldProperty) {\n  const businessObject = getBusinessObject(element);\n\n  const oldBinding = oldProperty.binding,\n        oldBindingName = oldBinding.name,\n        oldBindingType = oldBinding.type,\n        oldPropertyValue = oldProperty.value;\n\n  let conditionExpression,\n      definition;\n\n  if (oldBindingType === 'property') {\n    if (oldBindingName === 'conditionExpression') {\n      conditionExpression = businessObject.get('bpmn:conditionExpression');\n\n      return conditionExpression.get('bpmn:body') !== oldPropertyValue;\n    }\n\n    return businessObject.get(oldBindingName) !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:field') {\n    return businessObject.get('camunda:string') !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:in') {\n    if (oldBinding.expression) {\n      return businessObject.get('sourceExpression') !== oldPropertyValue;\n    } else {\n      return businessObject.get('camunda:source') !== oldPropertyValue;\n    }\n  }\n\n  if (oldBindingType === 'camunda:in:businessKey') {\n    return businessObject.get('camunda:businessKey') !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:out') {\n    return businessObject.get('camunda:target') !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:inputParameter') {\n    if (oldBinding.scriptFormat) {\n      definition = businessObject.get('camunda:definition');\n\n      return definition && definition.get('camunda:value') !== oldPropertyValue;\n    } else {\n      return businessObject.get('camunda:value') !== oldPropertyValue;\n    }\n  }\n\n  if (oldBindingType === 'camunda:outputParameter') {\n    return businessObject.get('camunda:name') !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:property') {\n    return businessObject.get('camunda:value') !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:errorEventDefinition') {\n    return businessObject.get('expression') !== oldPropertyValue;\n  }\n}\n\nfunction remove(array, item) {\n  const index = array.indexOf(item);\n\n  if (isUndefined(index)) {\n    return array;\n  }\n\n  array.splice(index, 1);\n\n  return array;\n}","import { getLabel, setLabel } from 'bpmn-js/lib/features/label-editing/LabelUtil';\nimport { getShapeIdFromPlane, isPlane } from 'bpmn-js/lib/util/DrilldownUtil';\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\nexport default class RemoveElementTemplateHandler {\n  constructor(\n      modeling,\n      elementFactory,\n      elementRegistry,\n      canvas,\n      bpmnFactory,\n      replace,\n      commandStack\n  ) {\n    this._modeling = modeling;\n    this._elementFactory = elementFactory;\n    this._elementRegistry = elementRegistry;\n    this._canvas = canvas;\n    this._bpmnFactory = bpmnFactory;\n    this._replace = replace;\n    this._commandStack = commandStack;\n  }\n\n  preExecute(context) {\n    const {\n      element\n    } = context;\n\n    if (element.parent) {\n      context.newElement = this._removeTemplate(element);\n    } else {\n      context.newElement = this._removeRootTemplate(element);\n    }\n  }\n\n  _removeTemplate(element) {\n    const replace = this._replace;\n\n    const businessObject = getBusinessObject(element);\n\n    const type = businessObject.$type,\n          eventDefinitionType = this._getEventDefinitionType(businessObject);\n\n    const newBusinessObject = this._createBlankBusinessObject(element);\n\n    return replace.replaceElement(element,\n      {\n        type: type,\n        businessObject: newBusinessObject,\n        eventDefinitionType: eventDefinitionType,\n      },\n      {\n        createElementsBehavior: false\n      }\n    );\n  }\n\n  /**\n   * Remove template from a given element.\n   *\n   * @param {djs.model.Base} element\n   *\n   * @return {djs.model.Base} the updated element\n   */\n  _removeRootTemplate(element) {\n    var modeling = this._modeling,\n        elementFactory = this._elementFactory,\n        elementRegistry = this._elementRegistry,\n        canvas = this._canvas;\n\n    // We are inside a collapsed subprocess, move up to the parent before replacing the collapsed object\n    if (isPlane(element)) {\n      const shapeId = getShapeIdFromPlane(element);\n      const shape = elementRegistry.get(shapeId);\n\n      if (shape && shape !== element) {\n        canvas.setRootElement(canvas.findRoot(shape));\n        return this._removeTemplate(shape);\n      }\n    }\n\n    const businessObject = getBusinessObject(element);\n\n    const type = businessObject.$type;\n\n    const newBusinessObject = this._createBlankBusinessObject(element);\n\n    const newRoot = elementFactory.create('root', {\n      type: type,\n      businessObject: newBusinessObject\n    });\n\n    this._commandStack.execute('canvas.updateRoot', {\n      newRoot: newRoot,\n      oldRoot: element\n    });\n\n    modeling.moveElements(element.children, { x: 0, y: 0 }, newRoot);\n\n    return newRoot;\n  }\n\n  _getEventDefinitionType(businessObject) {\n    if (!businessObject.eventDefinitions) {\n      return null;\n    }\n\n    const eventDefinition = businessObject.eventDefinitions[ 0 ];\n\n    if (!eventDefinition) {\n      return null;\n    }\n\n    return eventDefinition.$type;\n  }\n\n  _createBlankBusinessObject(element) {\n    const bpmnFactory = this._bpmnFactory;\n\n    const bo = getBusinessObject(element),\n          newBo = bpmnFactory.create(bo.$type),\n          label = getLabel(element);\n\n    if (!label) {\n      return newBo;\n    }\n\n    if (is(element, 'bpmn:Group')) {\n      newBo.categoryValueRef = bpmnFactory.create('bpmn:CategoryValue');\n    }\n\n    setLabel({ businessObject: newBo }, label);\n\n    return newBo;\n  }\n}\n\n\nRemoveElementTemplateHandler.$inject = [\n  'modeling',\n  'elementFactory',\n  'elementRegistry',\n  'canvas',\n  'bpmnFactory',\n  'replace',\n  'commandStack'\n];\n","import ChangeElementTemplateHandler from './ChangeElementTemplateHandler';\nimport RemoveElementTemplateHandler from './RemoveElementTemplateHandler';\nimport MultiCommandHandler from './MultiCommandHandler';\n\nexport default class ElementTemplatesCommands {\n  constructor(commandStack, elementTemplates, eventBus) {\n    commandStack.registerHandler(\n      'element-templates.multi-command-executor',\n      MultiCommandHandler\n    );\n\n    commandStack.registerHandler(\n      'propertiesPanel.camunda.changeTemplate',\n      ChangeElementTemplateHandler\n    );\n\n    commandStack.registerHandler(\n      'propertiesPanel.removeTemplate',\n      RemoveElementTemplateHandler\n    );\n\n    // apply default element templates on shape creation\n    eventBus.on([ 'commandStack.shape.create.postExecuted' ], function(event) {\n      const {\n        context: {\n          hints = {},\n          shape\n        }\n      } = event;\n\n      if (hints.createElementsBehavior !== false) {\n        applyDefaultTemplate(shape, elementTemplates, commandStack);\n      }\n    });\n\n    // apply default element templates on connection creation\n    eventBus.on([ 'commandStack.connection.create.postExecuted' ], function(event) {\n      const {\n        context: {\n          hints = {},\n          connection\n        }\n      } = event;\n\n      if (hints.createElementsBehavior !== false) {\n        applyDefaultTemplate(connection, elementTemplates, commandStack);\n      }\n    });\n  }\n}\n\nElementTemplatesCommands.$inject = [ 'commandStack', 'elementTemplates', 'eventBus' ];\n\nfunction applyDefaultTemplate(element, elementTemplates, commandStack) {\n\n  if (!elementTemplates.get(element) && elementTemplates.getDefault(element)) {\n\n    const command = 'propertiesPanel.camunda.changeTemplate';\n    const commandContext = {\n      element: element,\n      newTemplate: elementTemplates.getDefault(element)\n    };\n\n    commandStack.execute(command, commandContext);\n  }\n}\n","import ElementTemplateCommands from './ElementTemplateCommands';\n\nexport default {\n  __init__: [ 'elementTemplateCommands' ],\n  elementTemplateCommands: [ 'type', ElementTemplateCommands ]\n};","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n * This Behavior checks if the new element's type is in\n * the list of elements the template applies to and unlinks\n * it if not.\n */\nexport default class ReplaceBehavior extends CommandInterceptor {\n  constructor(elementTemplates, injector) {\n    super(injector.get('eventBus'));\n\n    this.postExecuted('shape.replace', function(e) {\n      var context = e.context,\n          oldShape = context.oldShape,\n          oldBo = getBusinessObject(oldShape),\n          newShape = context.newShape,\n          newBo = getBusinessObject(newShape);\n\n      if (!oldBo.modelerTemplate) {\n        return;\n      }\n\n      const template = newBo.modelerTemplate;\n      const version = newBo.modelerTemplateVersion;\n\n      const elementTemplate = elementTemplates.get(template, version);\n\n      if (!elementTemplate) {\n        elementTemplates.unlinkTemplate(newShape, injector);\n        return;\n      }\n\n      const { appliesTo, elementType } = elementTemplate;\n\n      if (elementType) {\n        if (!is(newShape, elementType.value)) {\n          elementTemplates.unlinkTemplate(newShape, injector);\n        }\n\n        return;\n      }\n\n      const allowed = appliesTo.reduce((allowed, type) => {\n        return allowed || is(newBo, type);\n      }, false);\n\n      if (!allowed) {\n        elementTemplates.unlinkTemplate(newShape, injector);\n      }\n    });\n  }\n}\n\nReplaceBehavior.$inject = [\n  'elementTemplates',\n  'injector'\n];\n","import ReplaceBehavior from './ReplaceBehavior';\n\nexport default {\n  __init__: [\n    'elementTemplatesReplaceBehavior'\n  ],\n  elementTemplatesReplaceBehavior: [ 'type', ReplaceBehavior ]\n};\n","import ElementTemplates from '../ElementTemplates';\nimport ElementTemplatesLoader from '../ElementTemplatesLoader';\n\nimport commandsModule from '../cmd';\nimport behaviorModule from '../behavior';\n\nexport default {\n  __depends__: [\n    commandsModule,\n    behaviorModule\n  ],\n  __init__: [\n    'elementTemplatesLoader'\n  ],\n  elementTemplates: [ 'type', ElementTemplates ],\n  elementTemplatesLoader: [ 'type', ElementTemplatesLoader ]\n};\n"],"names":["TEMPLATE_ID_ATTR","TEMPLATE_VERSION_ATTR","getTemplateId","getBusinessObject","getTemplateVersion","findExtension","is","uuid","isAny","isUndefined","isString","find","reduce","coerce","isSemverValid","has","isSemverCompatible","values","isNil","flatten","isObject","filter","ElementTemplates","DefaultElementTemplates","SUPPORTED_SCHEMA_VERSION","getTemplateSchemaVersion","isArray","validateAgainstSchema","forEach","isSemverRangeValid","getTemplateSchemaPackage","BaseValidator","isFunction","Validator","ElementTemplatesLoader","TemplatesLoader","createInputParameter","createOutputParameter","findOldProperty","without","remove","ChangeElementTemplateHandler","getPropertyValue","propertyChanged","isPlane","getShapeIdFromPlane","getLabel","setLabel","RemoveElementTemplateHandler","applyDefaultTemplate","ElementTemplatesCommands","ElementTemplateCommands","isEventSubProcess","TaskDefinitionBindingProvider","normalizeReplacer","ReplaceBehavior","UpdatePropertiesOrderBehavior","commandsModule","behaviorModule","keys","assign"],"mappings":"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"}